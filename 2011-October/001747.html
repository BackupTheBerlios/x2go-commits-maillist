<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [X2go-Commits] x2goplasmabindings.git - master (branch) updated:	437da8957a6482698afd14cb8dbdd2a8495b34bc
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/x2go-commits/2011-October/index.html" >
   <LINK REL="made" HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20x2goplasmabindings.git%20-%20master%20%28branch%29%20updated%3A%0A%09437da8957a6482698afd14cb8dbdd2a8495b34bc&In-Reply-To=%3C20111013115249.75E785DD11%40ymir%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001746.html">
   <LINK REL="Next"  HREF="001748.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[X2go-Commits] x2goplasmabindings.git - master (branch) updated:	437da8957a6482698afd14cb8dbdd2a8495b34bc</H1>
    <B>X2go dev team</B> 
    <A HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20x2goplasmabindings.git%20-%20master%20%28branch%29%20updated%3A%0A%09437da8957a6482698afd14cb8dbdd2a8495b34bc&In-Reply-To=%3C20111013115249.75E785DD11%40ymir%3E"
       TITLE="[X2go-Commits] x2goplasmabindings.git - master (branch) updated:	437da8957a6482698afd14cb8dbdd2a8495b34bc">git-admin at x2go.org
       </A><BR>
    <I>Thu Oct 13 13:52:49 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="001746.html">[X2go-Commits] nx-libs.git - nxauth (branch) updated:	caf1bc41f931009e24c28a18a7311da03b68961c
</A></li>
        <LI>Next message: <A HREF="001748.html">[X2go-Commits] x2goplasmabindings.git - master (branch) updated:	ae6437cb952d4532f6de0295c57eda14a92073f3
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1747">[ date ]</a>
              <a href="thread.html#1747">[ thread ]</a>
              <a href="subject.html#1747">[ subject ]</a>
              <a href="author.html#1747">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch, master has been updated
       via  437da8957a6482698afd14cb8dbdd2a8495b34bc (commit)
      from  8725ab403bd13e2bc0decb6d246240d2c70fba90 (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit 437da8957a6482698afd14cb8dbdd2a8495b34bc
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Thu Oct 13 13:52:44 2011 +0200

    Tab'ified all project files.

-----------------------------------------------------------------------

Summary of changes:
 CMakeLists.txt          |   59 ++++++---
 README                  |    2 +-
 debian/changelog        |    2 +
 fsitem.cpp              |   51 ++++----
 fsitem.h                |   32 +++---
 plasmax2godialog.cpp    |  322 +++++++++++++++++++++++-----------------------
 plasmax2godialog.h      |   56 ++++----
 plasmoidhovereditem.cpp |   39 +++---
 plasmoidhovereditem.h   |   39 +++---
 x2goplasmoid.cpp        |   80 ++++++------
 x2goplasmoid.h          |   35 +++---
 11 files changed, 372 insertions(+), 345 deletions(-)

The diff of changes is:
diff --git a/CMakeLists.txt b/CMakeLists.txt
index 9955452..9793a02 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -2,32 +2,55 @@
 project(plasma-x2goplasmoid)
 
 # Find the required Libaries
-find_package(KDE4 REQUIRED)
+find_package(
+	KDE4 REQUIRED
+)
 include(KDE4Defaults)
  
-add_definitions (${QT_DEFINITIONS} ${KDE4_DEFINITIONS})
+add_definitions (
+	${QT_DEFINITIONS}
+	${KDE4_DEFINITIONS}
+)
 include_directories(
-   ${CMAKE_SOURCE_DIR}
-   ${CMAKE_BINARY_DIR}
-   ${KDE4_INCLUDES}
-   )
+	${CMAKE_SOURCE_DIR}
+	${CMAKE_BINARY_DIR}
+	${KDE4_INCLUDES}
+)
  
 # We add our source code here
-set(x2goplasmoid_SRCS fsitem.cpp plasmoidhovereditem.cpp plasmax2godialog.cpp x2goplasmoid.cpp)
+set(
+	x2goplasmoid_SRCS
+	fsitem.cpp
+	plasmoidhovereditem.cpp
+	plasmax2godialog.cpp
+	x2goplasmoid.cpp
+)
  
 # Now make sure all files get to the right place
-kde4_add_plugin(plasma_applet_x2goplasmoid ${x2goplasmoid_SRCS})
-target_link_libraries(plasma_applet_x2goplasmoid 
-                      ${KDE4_PLASMA_LIBS} ${KDE4_KDEUI_LIBS})
+kde4_add_plugin(
+	plasma_applet_x2goplasmoid 
+	${x2goplasmoid_SRCS}
+)
+target_link_libraries(
+	plasma_applet_x2goplasmoid
+	${KDE4_PLASMA_LIBS}
+	${KDE4_KDEUI_LIBS}
+)
 
-add_subdirectory(po)
+add_subdirectory(
+	po
+)
 
-
-kde4_install_icons( ${ICON_INSTALL_DIR}  )
+kde4_install_icons(
+	${ICON_INSTALL_DIR}
+)
  
-install(TARGETS plasma_applet_x2goplasmoid
-        DESTINATION ${PLUGIN_INSTALL_DIR})
+install(
+	TARGETS plasma_applet_x2goplasmoid
+	DESTINATION ${PLUGIN_INSTALL_DIR}
+)
  
-install(FILES plasma-applet-x2goplasmoid.desktop
-        DESTINATION ${SERVICES_INSTALL_DIR})
-
+install(
+	FILES plasma-applet-x2goplasmoid.desktop
+	DESTINATION ${SERVICES_INSTALL_DIR}
+)
diff --git a/README b/README
index 75043e5..ea09a1e 100644
--- a/README
+++ b/README
@@ -1,7 +1,7 @@
 Plasma Applet Template
 ----------------------
 
-You need KDE 4.2
+You need KDE 4.2 or above
 
 -- Build instructions --
 
diff --git a/debian/changelog b/debian/changelog
index 51faf71..2f23149 100644
--- a/debian/changelog
+++ b/debian/changelog
@@ -1,6 +1,8 @@
 x2goplasmabindings (3.0.1.2-0~x2go1.3) UNRELEASED; urgency=low
 
   [ Mike Gabriel ]
+  * New upstream version (3.0.1.2):
+    - Tab'ified all project files.
   * Renaming of source package and binary package.
   * Depend on x2goserver (&gt;=3.0.99.7).
 
diff --git a/fsitem.cpp b/fsitem.cpp
index 26f20cb..2b06224 100644
--- a/fsitem.cpp
+++ b/fsitem.cpp
@@ -18,23 +18,24 @@
 #include &lt;QGraphicsLinearLayout&gt;
 #include &lt;KUser&gt;
 #include &lt;QGraphicsSceneResizeEvent&gt;
+
 FsItem::FsItem(QGraphicsWidget* parent): PlasmoidHoveredItem(parent), eject(0),parentWidget(0)
 {
-    eject=new Plasma::IconWidget(this);
-    eject-&gt;setMaximumWidth(18);
-    eject-&gt;setIcon(&quot;media-eject&quot;);
-    getLayout()-&gt;addItem(eject);
-    icon-&gt;setMaximumWidth(24);
-    icon-&gt;setMinimumWidth(24);
-    setMinimumHeight(40);
-    setMaximumHeight(40);
-    connect (this,SIGNAL(clicked()),this,SLOT(slotClicked()));
-    connect(eject,SIGNAL(clicked()),this,SLOT(slotEject()));
-    parentWidget=parent;
-    label-&gt;setMaximumWidth(140);
-    label-&gt;setScaledContents(true);
-    setToolTip(i18n(&quot;Click to open with dolphin&quot;));
-    eject-&gt;setToolTip(i18n(&quot;Click to eject&quot;));
+	eject=new Plasma::IconWidget(this);
+	eject-&gt;setMaximumWidth(18);
+	eject-&gt;setIcon(&quot;media-eject&quot;);
+	getLayout()-&gt;addItem(eject);
+	icon-&gt;setMaximumWidth(24);
+	icon-&gt;setMinimumWidth(24);
+	setMinimumHeight(40);
+	setMaximumHeight(40);
+	connect (this,SIGNAL(clicked()),this,SLOT(slotClicked()));
+	connect(eject,SIGNAL(clicked()),this,SLOT(slotEject()));
+	parentWidget=parent;
+	label-&gt;setMaximumWidth(140);
+	label-&gt;setScaledContents(true);
+	setToolTip(i18n(&quot;Click to open with dolphin&quot;));
+	eject-&gt;setToolTip(i18n(&quot;Click to eject&quot;));
 }
 
 FsItem::~FsItem()
@@ -44,27 +45,27 @@ FsItem::~FsItem()
 
 void FsItem::setText(QString text)
 {
-    intText=text;
-    KUser user;
-    text.replace(&quot;/tmp/&quot;+user.loginName()+&quot;_media/disk/&quot;,&quot;&quot;);
-    text.replace(&quot;/tmp/&quot;+user.loginName()+&quot;_media/cd/&quot;,&quot;&quot;);
-    text.replace(&quot;/tmp/&quot;+user.loginName()+&quot;_media/rm/&quot;,&quot;&quot;);
-    text.replace(&quot;_&quot;,&quot;/&quot;);
-    PlasmoidHoveredItem::setText(text);
+	intText=text;
+	KUser user;
+	text.replace(&quot;/tmp/&quot;+user.loginName()+&quot;_media/disk/&quot;,&quot;&quot;);
+	text.replace(&quot;/tmp/&quot;+user.loginName()+&quot;_media/cd/&quot;,&quot;&quot;);
+	text.replace(&quot;/tmp/&quot;+user.loginName()+&quot;_media/rm/&quot;,&quot;&quot;);
+	text.replace(&quot;_&quot;,&quot;/&quot;);
+	PlasmoidHoveredItem::setText(text);
 }
 
 QString FsItem::text()
 {
-    return intText;
+	return intText;
 }
 
 void FsItem::slotClicked()
 {
-    emit itemClicked(intText);
+	emit itemClicked(intText);
 }
 
 void FsItem::slotEject()
 {
-    emit itemEject(intText);
+	emit itemEject(intText);
 }
 
diff --git a/fsitem.h b/fsitem.h
index 97b8bf2..96e9e88 100644
--- a/fsitem.h
+++ b/fsitem.h
@@ -22,22 +22,22 @@
 
 class FsItem : public PlasmoidHoveredItem
 {
-  Q_OBJECT
-  public:
-    FsItem(QGraphicsWidget* parent = 0);
-    virtual ~FsItem();
-    virtual void setText(QString text);
-    virtual QString text();
-  private:
-    Plasma::IconWidget* eject;
-    QString intText;
-    QGraphicsWidget* parentWidget;
-  private slots:
-    void slotClicked();
-    void slotEject();
-  signals:
-    void itemClicked(const QString&amp; text);
-    void itemEject(const QString&amp; text);
+	Q_OBJECT
+public:
+	FsItem(QGraphicsWidget* parent = 0);
+	virtual ~FsItem();
+	virtual void setText(QString text);
+	virtual QString text();
+private:
+	Plasma::IconWidget* eject;
+	QString intText;
+	QGraphicsWidget* parentWidget;
+private slots:
+	void slotClicked();
+	void slotEject();
+signals:
+	void itemClicked(const QString&amp; text);
+	void itemEject(const QString&amp; text);
 };
 
 #endif // FSITEM_H
diff --git a/plasmax2godialog.cpp b/plasmax2godialog.cpp
index 56e67b9..97d1570 100644
--- a/plasmax2godialog.cpp
+++ b/plasmax2godialog.cpp
@@ -32,214 +32,214 @@
 
 PlasmaX2goDialog::PlasmaX2goDialog(QObject* parent): QObject(parent),m_widget(0)
 {
-    m_applet=(x2goplasmoid*)parent;
-    initDialog();    
+	m_applet=(x2goplasmoid*)parent;
+	initDialog();
 }
 
 PlasmaX2goDialog::~PlasmaX2goDialog()
 {
-
 }
 
 void PlasmaX2goDialog::initDialog()
 {
-    m_widget=new QGraphicsWidget(m_applet);
-    m_widget-&gt;installEventFilter(this);
-    m_widget-&gt;setPreferredSize(250,300);
-
-    QGraphicsLinearLayout* lay=new QGraphicsLinearLayout(Qt::Vertical, m_widget);
-    QGraphicsLinearLayout* headLay=new QGraphicsLinearLayout(Qt::Horizontal);
-    Plasma::IconWidget* iconWidg=new Plasma::IconWidget(m_widget);
-    iconWidg-&gt;setMaximumHeight(18);
-    iconWidg-&gt;setIcon(&quot;x2go&quot;);
-    Plasma::Label* headLabel=new Plasma::Label(m_widget);
-    headLabel-&gt;setText(i18n(&quot;X2Go Plasmoid&quot;));
-
-    headLay-&gt;addItem(iconWidg);
-    headLay-&gt;addItem(headLabel);
-    headLay-&gt;addStretch();
-
-    lay-&gt;addItem(headLay);
-    lay-&gt;addItem((new Plasma::Separator(m_widget)));
-
-    Plasma::ScrollWidget* widg=new Plasma::ScrollWidget(m_widget);
-    widg-&gt;setHorizontalScrollBarPolicy(Qt::ScrollBarAlwaysOff);
-    itemWidget=new QGraphicsWidget(0);
-    widg-&gt;setWidget(itemWidget);
-    itemLayout=new QGraphicsLinearLayout(Qt::Vertical,itemWidget);
-//     itemLayout-&gt;addStretch(99);
-    lay-&gt;addItem(widg);
-    lay-&gt;addStretch(99);
-
-    PlasmoidHoveredItem* suspItem=new PlasmoidHoveredItem(m_widget);
-    suspItem-&gt;setText(i18n(&quot;Suspend session&quot;));
-    suspItem-&gt;setIcon(&quot;system-lock-screen&quot;);
-    suspItem-&gt;installEventFilter(this);
-    suspItem-&gt;setMaximumHeight(32);
-//     suspItem-&gt;setToolTip(i18n(&quot;Click to suspend session&quot;));
-    lay-&gt;addItem(suspItem);
-    QString    sessionId=getenv(&quot;X2GO_SESSION&quot;);
-
-    if(sessionId.length()&lt;=0)
-    {
-      suspItem-&gt;setEnabled(false);
-      return;
-    }
-    connect(suspItem,SIGNAL(clicked()),this,SLOT(slotSuspendSession()));
-//     slotUpdateItems();
-    QTimer::singleShot(2000, this, SLOT(slotUpdateItems()));
+	m_widget=new QGraphicsWidget(m_applet);
+	m_widget-&gt;installEventFilter(this);
+	m_widget-&gt;setPreferredSize(250,300);
+
+	QGraphicsLinearLayout* lay=new QGraphicsLinearLayout(Qt::Vertical, m_widget);
+	QGraphicsLinearLayout* headLay=new QGraphicsLinearLayout(Qt::Horizontal);
+	Plasma::IconWidget* iconWidg=new Plasma::IconWidget(m_widget);
+	iconWidg-&gt;setMaximumHeight(18);
+	iconWidg-&gt;setIcon(&quot;x2go&quot;);
+	Plasma::Label* headLabel=new Plasma::Label(m_widget);
+	headLabel-&gt;setText(i18n(&quot;X2Go Plasmoid&quot;));
+
+	headLay-&gt;addItem(iconWidg);
+	headLay-&gt;addItem(headLabel);
+	headLay-&gt;addStretch();
+
+	lay-&gt;addItem(headLay);
+	lay-&gt;addItem((new Plasma::Separator(m_widget)));
+
+	Plasma::ScrollWidget* widg=new Plasma::ScrollWidget(m_widget);
+	widg-&gt;setHorizontalScrollBarPolicy(Qt::ScrollBarAlwaysOff);
+	itemWidget=new QGraphicsWidget(0);
+	widg-&gt;setWidget(itemWidget);
+	itemLayout=new QGraphicsLinearLayout(Qt::Vertical,itemWidget);
+	//itemLayout-&gt;addStretch(99);
+	lay-&gt;addItem(widg);
+	lay-&gt;addStretch(99);
+
+	PlasmoidHoveredItem* suspItem=new PlasmoidHoveredItem(m_widget);
+	suspItem-&gt;setText(i18n(&quot;Suspend session&quot;));
+	suspItem-&gt;setIcon(&quot;system-lock-screen&quot;);
+	suspItem-&gt;installEventFilter(this);
+	suspItem-&gt;setMaximumHeight(32);
+	//suspItem-&gt;setToolTip(i18n(&quot;Click to suspend session&quot;));
+	lay-&gt;addItem(suspItem);
+	QString sessionId=getenv(&quot;X2GO_SESSION&quot;);
+
+	if(sessionId.length()&lt;=0)
+	{
+		suspItem-&gt;setEnabled(false);
+		return;
+	}
+	connect(suspItem,SIGNAL(clicked()),this,SLOT(slotSuspendSession()));
+	//slotUpdateItems();
+	QTimer::singleShot(2000, this, SLOT(slotUpdateItems()));
 }
 
 bool PlasmaX2goDialog::eventFilter(QObject* obj, QEvent* event)
 {
-    PlasmoidHoveredItem* item = qobject_cast&lt;PlasmoidHoveredItem*&gt;(obj);
-    if (item) {
-        switch (event-&gt;type()) {
-        case QEvent::GraphicsSceneHoverLeave:
-        {
-            item-&gt;hoverLeave();
-        }
-        break;
-        case QEvent::GraphicsSceneHoverEnter:
-        {
-            item-&gt;hoverEnter();
-        }
-        break;
-        case QEvent::GraphicsSceneMousePress:
-        {
-            QGraphicsSceneMouseEvent *ev=static_cast&lt;QGraphicsSceneMouseEvent *&gt;(event);
-            if (ev-&gt;button() == Qt::LeftButton)
-            {
-                item-&gt;buttonPressed();
-                return true;
-            }
-        }
-        default:
-            break;
-        }
-    }
-    return false;
+	PlasmoidHoveredItem* item = qobject_cast&lt;PlasmoidHoveredItem*&gt;(obj);
+	if (item) {
+		switch (event-&gt;type())
+		{
+			case QEvent::GraphicsSceneHoverLeave:
+			{
+				item-&gt;hoverLeave();
+			}
+			break;
+			case QEvent::GraphicsSceneHoverEnter:
+			{
+				item-&gt;hoverEnter();
+			}
+			break;
+			case QEvent::GraphicsSceneMousePress:
+			{
+				QGraphicsSceneMouseEvent *ev=static_cast&lt;QGraphicsSceneMouseEvent *&gt;(event);
+				if (ev-&gt;button() == Qt::LeftButton)
+				{
+					item-&gt;buttonPressed();
+					return true;
+				}
+			}
+			default:
+				break;
+		}
+	}
+	return false;
 }
 
 void PlasmaX2goDialog::slotSuspendSession()
 {
-    QProcess::execute(&quot;x2gosuspend-session &quot;+m_applet-&gt;getSessionId());
-    m_applet-&gt;hidePopup();
+	QProcess::execute(&quot;x2gosuspend-session &quot;+m_applet-&gt;getSessionId());
+	m_applet-&gt;hidePopup();
 }
 
 void PlasmaX2goDialog::slotUpdateItems()
 {
-    updateItemProc=new QProcess(this);
-    connect(updateItemProc,SIGNAL(finished(int,QProcess::ExitStatus)),this,
-            SLOT(slotUpdateItemsProcFinished(int,QProcess::ExitStatus)));
-    updateItemProc-&gt;start(&quot;x2golistmounts &quot; +m_applet-&gt;getSessionId());
+	updateItemProc=new QProcess(this);
+	connect(updateItemProc,SIGNAL(finished(int,QProcess::ExitStatus)),this,
+	        SLOT(slotUpdateItemsProcFinished(int,QProcess::ExitStatus)));
+	updateItemProc-&gt;start(&quot;x2golistmounts &quot; +m_applet-&gt;getSessionId());
 }
 
 void PlasmaX2goDialog::slotUpdateItemsProcFinished(int, QProcess::ExitStatus exitStatus)
 {
-    if (exitStatus==QProcess::NormalExit)
-    {
-        QString output=updateItemProc-&gt;readAllStandardOutput();
-        QStringList lines=output.split(&quot;\n&quot;);
-        QStringList actItems;
-        KUser user;
-        foreach(QString line,lines)
-        {
-            QStringList lstArr=line.split(&quot;|&quot;);
-            if (lstArr.count()&gt;=2)
-            {
-	      lstArr[1].replace(&quot; &quot;,&quot;&quot;);
-                if (lstArr[1].indexOf(&quot;/tmp/spool_&quot;+user.loginName())!=0)
-                    actItems&lt;&lt;lstArr[1];
-            }
-        }
-        updateMountedItems(actItems);
-    }
-    QTimer::singleShot(2000, this, SLOT(slotUpdateItems()));
+	if (exitStatus==QProcess::NormalExit)
+	{
+		QString output=updateItemProc-&gt;readAllStandardOutput();
+		QStringList lines=output.split(&quot;\n&quot;);
+		QStringList actItems;
+		KUser user;
+		foreach(QString line,lines)
+		{
+			QStringList lstArr=line.split(&quot;|&quot;);
+			if (lstArr.count()&gt;=2)
+			{
+				lstArr[1].replace(&quot; &quot;,&quot;&quot;);
+				if (lstArr[1].indexOf(&quot;/tmp/spool_&quot;+user.loginName())!=0)
+					actItems&lt;&lt;lstArr[1];
+			}
+		}
+		updateMountedItems(actItems);
+	}
+	QTimer::singleShot(2000, this, SLOT(slotUpdateItems()));
 }
 
 void PlasmaX2goDialog::updateMountedItems(QStringList newItems)
 {
-    foreach (QString item, mountedItems())
-    {
-        if (!newItems.contains(item))
-            removeItem(item);
-    }
-    foreach (QString item, newItems)
-    {
-        if (!mountedItems().contains(item))
-            appendItem(item);
-    }
+	foreach (QString item, mountedItems())
+	{
+		if (!newItems.contains(item))
+			removeItem(item);
+	}
+	foreach (QString item, newItems)
+	{
+		if (!mountedItems().contains(item))
+			appendItem(item);
+	}
 }
 
 void PlasmaX2goDialog::appendItem(QString itemText)
 {
-    FsItem* item=new FsItem(itemWidget);
-    itemLayout-&gt;insertItem(0,item);
-    item-&gt;installEventFilter(this);
-    item-&gt;setText(itemText);
-
-    connect(item,SIGNAL(itemClicked(QString)),this,SLOT(slotOpenFolder(QString)));
-    connect(item,SIGNAL(itemEject(QString)),this,SLOT(slotEjectFolder(QString)));
-
-    ////choose icon
-    KUser user;
-    if (itemText.indexOf(&quot;/tmp/&quot;+user.loginName()+&quot;_media/cd/&quot;)==0)
-    {
-        item-&gt;setIcon(&quot;media-optical&quot;);
-    }
-    else if (itemText.indexOf(&quot;/tmp/&quot;+user.loginName()+&quot;_media/rm/&quot;)==0)
-    {
-        item-&gt;setIcon(&quot;drive-removable-media-usb-pendrive&quot;);
-    }
-    else
-        item-&gt;setIcon(&quot;drive-harddisk&quot;);
-    m_applet-&gt;update();
-    m_widget-&gt;update();
-    m_applet-&gt;showPopup();
+	FsItem* item=new FsItem(itemWidget);
+	itemLayout-&gt;insertItem(0,item);
+	item-&gt;installEventFilter(this);
+	item-&gt;setText(itemText);
+
+	connect(item,SIGNAL(itemClicked(QString)),this,SLOT(slotOpenFolder(QString)));
+	connect(item,SIGNAL(itemEject(QString)),this,SLOT(slotEjectFolder(QString)));
+
+	// choose icon
+	KUser user;
+	if (itemText.indexOf(&quot;/tmp/&quot;+user.loginName()+&quot;_media/cd/&quot;)==0)
+	{
+		item-&gt;setIcon(&quot;media-optical&quot;);
+	}
+	else if (itemText.indexOf(&quot;/tmp/&quot;+user.loginName()+&quot;_media/rm/&quot;)==0)
+	{
+		item-&gt;setIcon(&quot;drive-removable-media-usb-pendrive&quot;);
+	}
+	else
+		item-&gt;setIcon(&quot;drive-harddisk&quot;);
+	m_applet-&gt;update();
+	m_widget-&gt;update();
+	m_applet-&gt;showPopup();
 }
 
 void PlasmaX2goDialog::removeItem(QString itemText)
 {
-    int itemCnt=itemLayout-&gt;count();
-    for (int i=0;i&lt;itemCnt;++i)
-    {
-        FsItem* item = (FsItem*)(itemLayout-&gt;itemAt(i));
-        if (item-&gt;text()==itemText)
-        {
-            item-&gt;close();
-            delete item;
-            break;
-        }
-    }
-    m_applet-&gt;update();
-    m_widget-&gt;update();
+	int itemCnt=itemLayout-&gt;count();
+	for (int i=0;i&lt;itemCnt;++i)
+	{
+		FsItem* item = (FsItem*)(itemLayout-&gt;itemAt(i));
+		if (item-&gt;text()==itemText)
+		{
+			item-&gt;close();
+			delete item;
+			break;
+		}
+	}
+	m_applet-&gt;update();
+	m_widget-&gt;update();
 }
 
 QStringList PlasmaX2goDialog::mountedItems()
 {
-    QStringList items;
-    int itemCnt=itemLayout-&gt;count();
-    for (int i=0;i&lt;itemCnt;++i)
-    {
-        FsItem* item = (FsItem*)(itemLayout-&gt;itemAt(i));
-        items&lt;&lt;item-&gt;text();
-    }
-    return items;
+	QStringList items;
+	int itemCnt=itemLayout-&gt;count();
+	for (int i=0;i&lt;itemCnt;++i)
+	{
+		FsItem* item = (FsItem*)(itemLayout-&gt;itemAt(i));
+		items&lt;&lt;item-&gt;text();
+	}
+	return items;
 }
 
 void PlasmaX2goDialog::slotOpenFolder(const QString&amp; folder)
 {
-    QProcess::startDetached(&quot;dolphin &quot;+folder);
-    m_applet-&gt;hidePopup();
+	QProcess::startDetached(&quot;dolphin &quot;+folder);
+	m_applet-&gt;hidePopup();
 }
 
 void PlasmaX2goDialog::slotEjectFolder(const QString&amp; folder)
 {
-    QStringList parts=folder.split(&quot;/&quot;, QString::SkipEmptyParts);
-    if(parts.count()&lt;=0)
-	return;
-    QProcess::startDetached(&quot;x2goumount-session &quot;+m_applet-&gt;getSessionId()+&quot; &quot;+parts.last());
-    m_applet-&gt;hidePopup();
+	QStringList parts=folder.split(&quot;/&quot;, QString::SkipEmptyParts);
+	if (parts.count()&lt;=0)
+		return;
+	QProcess::startDetached(&quot;x2goumount-session &quot;+m_applet-&gt;getSessionId()+&quot; &quot;+parts.last());
+	m_applet-&gt;hidePopup();
 }
 
diff --git a/plasmax2godialog.h b/plasmax2godialog.h
index 268fd84..beae02a 100644
--- a/plasmax2godialog.h
+++ b/plasmax2godialog.h
@@ -27,33 +27,33 @@ class QGraphicsWidget;
 
 class PlasmaX2goDialog : public QObject
 {
-  Q_OBJECT
-  public:
-    explicit PlasmaX2goDialog(QObject* parent = 0);
-    virtual ~PlasmaX2goDialog();
-    QGraphicsWidget* dialog()
-    { return m_widget;}
-  protected:
-    bool eventFilter(QObject *obj, QEvent *event);
-  private:
-    void initDialog();
-    void updateMountedItems(QStringList newItems);
-    void removeItem(QString item);
-    void appendItem(QString item);
-    QStringList mountedItems();
-    
-    
-    QGraphicsWidget* m_widget;
-    x2goplasmoid* m_applet;
-    QGraphicsLinearLayout* itemLayout;
-    QProcess *updateItemProc;
-    QGraphicsWidget* itemWidget;
-    
-  private slots:
-    void slotSuspendSession();
-    void slotUpdateItems();
-    void slotUpdateItemsProcFinished(int exitCode, QProcess::ExitStatus exitStatus);
-    void slotOpenFolder(const QString&amp; folder);
-    void slotEjectFolder(const QString&amp; folder);
+	Q_OBJECT
+public:
+	explicit PlasmaX2goDialog(QObject* parent = 0);
+	virtual ~PlasmaX2goDialog();
+	QGraphicsWidget* dialog()
+	{ return m_widget;}
+protected:
+	bool eventFilter(QObject *obj, QEvent *event);
+private:
+	void initDialog();
+	void updateMountedItems(QStringList newItems);
+	void removeItem(QString item);
+	void appendItem(QString item);
+	QStringList mountedItems();
+
+	QGraphicsWidget* m_widget;
+	x2goplasmoid* m_applet;
+	QGraphicsLinearLayout* itemLayout;
+	QProcess *updateItemProc;
+	QGraphicsWidget* itemWidget;
+
+private slots:
+	void slotSuspendSession();
+	void slotUpdateItems();
+	void slotUpdateItemsProcFinished(int exitCode, QProcess::ExitStatus exitStatus);
+	void slotOpenFolder(const QString&amp; folder);
+	void slotEjectFolder(const QString&amp; folder);
 };
+
 #endif // PLASMAX2GODIALOG_H
diff --git a/plasmoidhovereditem.cpp b/plasmoidhovereditem.cpp
index 67becdd..f4bbba3 100644
--- a/plasmoidhovereditem.cpp
+++ b/plasmoidhovereditem.cpp
@@ -25,53 +25,52 @@
 
 PlasmoidHoveredItem::PlasmoidHoveredItem(QGraphicsWidget* parent): Plasma::Frame(parent),label(0),icon(0)
 {
-    setAcceptHoverEvents(true);
-    setZValue(0);
-    layout=new QGraphicsLinearLayout(Qt::Horizontal,this);
-    icon=new Plasma::IconWidget(this);
-    label=new Plasma::Label(this);
-    layout-&gt;addItem(icon);
-    layout-&gt;addItem(label);
-    layout-&gt;addStretch();
-    icon-&gt;setAcceptHoverEvents(false);
-    icon-&gt;setAcceptedMouseButtons(0);    
-    icon-&gt;setMaximumWidth(18);
+	setAcceptHoverEvents(true);
+	setZValue(0);
+	layout=new QGraphicsLinearLayout(Qt::Horizontal,this);
+	icon=new Plasma::IconWidget(this);
+	label=new Plasma::Label(this);
+	layout-&gt;addItem(icon);
+	layout-&gt;addItem(label);
+	layout-&gt;addStretch();
+	icon-&gt;setAcceptHoverEvents(false);
+	icon-&gt;setAcceptedMouseButtons(0);    
+	icon-&gt;setMaximumWidth(18);
 }
 
 PlasmoidHoveredItem::~PlasmoidHoveredItem()
 {
-
 }
 
 void PlasmoidHoveredItem::buttonPressed()
 {
-    emit clicked();
+	emit clicked();
 }
 
 void PlasmoidHoveredItem::hoverEnter()
 {
-    setFrameShadow(Plasma::Frame::Raised);
-    update();
+	setFrameShadow(Plasma::Frame::Raised);
+	update();
 }
 
 void PlasmoidHoveredItem::hoverLeave()
 {
-    setFrameShadow(Plasma::Frame::Plain);
-    update();
+	setFrameShadow(Plasma::Frame::Plain);
+	update();
 }
 
 void PlasmoidHoveredItem::setIcon(QString icon)
 {
-    this-&gt;icon-&gt;setIcon(icon);
+	this-&gt;icon-&gt;setIcon(icon);
 }
 
 void PlasmoidHoveredItem::setText(QString text)
 {
-    label-&gt;setText(text);
+	label-&gt;setText(text);
 }
 
 QString PlasmoidHoveredItem::text()
 {
-  return label-&gt;text();
+	return label-&gt;text();
 }
 
diff --git a/plasmoidhovereditem.h b/plasmoidhovereditem.h
index ffa1d0f..11ea4d0 100644
--- a/plasmoidhovereditem.h
+++ b/plasmoidhovereditem.h
@@ -26,24 +26,25 @@ class QGraphicsLinearLayout;
 
 class PlasmoidHoveredItem : public Plasma::Frame
 {
-  Q_OBJECT
-  public:
-    PlasmoidHoveredItem(QGraphicsWidget* parent = 0);
-    virtual ~PlasmoidHoveredItem();
-    void hoverEnter();
-    void hoverLeave();
-    void buttonPressed();
-    virtual void setIcon(QString icon);
-    virtual void setText(QString text);
-    virtual QString text();
-  signals:
-    void clicked();
-  private:
-    QGraphicsLinearLayout* layout;
-  protected:
-    QGraphicsLinearLayout* getLayout()
-    {return layout;}
-    Plasma::IconWidget* icon;
-    Plasma::Label* label;
+	Q_OBJECT
+public:
+	PlasmoidHoveredItem(QGraphicsWidget* parent = 0);
+	virtual ~PlasmoidHoveredItem();
+	void hoverEnter();
+	void hoverLeave();
+	void buttonPressed();
+	virtual void setIcon(QString icon);
+	virtual void setText(QString text);
+	virtual QString text();
+signals:
+	void clicked();
+private:
+	QGraphicsLinearLayout* layout;
+protected:
+	QGraphicsLinearLayout* getLayout()
+	{return layout;}
+	Plasma::IconWidget* icon;
+	Plasma::Label* label;
 };
+
 #endif // SHAREITEM_H
diff --git a/x2goplasmoid.cpp b/x2goplasmoid.cpp
index d5ea1c1..7ba3c86 100644
--- a/x2goplasmoid.cpp
+++ b/x2goplasmoid.cpp
@@ -36,66 +36,66 @@ x2goplasmoid::x2goplasmoid ( QObject *parent, const QVariantList &amp;args )
         : Plasma::PopupApplet ( parent, args ),
         m_dialog(0)
 {
-    setBackgroundHints ( DefaultBackground );
-    setHasConfigurationInterface ( true );
-//init widget
-    setMinimumSize(graphicsWidget()-&gt;minimumSize());
-    sessionId=getenv(&quot;X2GO_SESSION&quot;);
-    if(sessionId.length()&lt;=0)
-    {
-//       setEnabled(false);
-//       m_dialog-&gt;dialog()-&gt;setEnabled(false);
-      return;
-    }
-    KUser user;
-    stampFName=&quot;/tmp/&quot;+user.loginName()+&quot;_media/&quot;+sessionId+&quot;.plasmoid&quot;;
-    slotUpdateStamp();
-    QTimer *timer = new QTimer(this);
-    connect(timer, SIGNAL(timeout()), this, SLOT(slotUpdateStamp()));
-    timer-&gt;start(5000);
+	setBackgroundHints ( DefaultBackground );
+	setHasConfigurationInterface ( true );
+	//init widget
+	setMinimumSize(graphicsWidget()-&gt;minimumSize());
+	sessionId=getenv(&quot;X2GO_SESSION&quot;);
+	if(sessionId.length()&lt;=0)
+	{
+		//setEnabled(false);
+		//m_dialog-&gt;dialog()-&gt;setEnabled(false);
+		return;
+	}
+	KUser user;
+	stampFName=&quot;/tmp/&quot;+user.loginName()+&quot;_media/&quot;+sessionId+&quot;.plasmoid&quot;;
+	slotUpdateStamp();
+	QTimer *timer = new QTimer(this);
+	connect(timer, SIGNAL(timeout()), this, SLOT(slotUpdateStamp()));
+	timer-&gt;start(5000);
 }
 
 
 x2goplasmoid::~x2goplasmoid()
 {
-    if ( hasFailedToLaunch() )
-    {
-    }
-    else
-    {
-    }
-    QFile::remove(stampFName);
-    delete m_dialog;
+	if ( hasFailedToLaunch() )
+	{
+	}
+	else
+	{
+	}
+	QFile::remove(stampFName);
+	delete m_dialog;
 }
 
 
 void x2goplasmoid::init()
 {
-    Plasma::ToolTipManager::self()-&gt;registerWidget(this);
-    Plasma::ToolTipContent toolTip;
-    toolTip.setMainText(i18n(&quot;X2Go Plasmoid&quot;));
-    toolTip.setSubText(i18n(&quot;Manage X2Go shares\nSuspend session&quot;));
-    toolTip.setImage(KIcon(DEFAULT_ICON_NAME));
-    Plasma::ToolTipManager::self()-&gt;setContent(this,toolTip);
-    setPopupIcon(DEFAULT_ICON_NAME);
+	Plasma::ToolTipManager::self()-&gt;registerWidget(this);
+	Plasma::ToolTipContent toolTip;
+	toolTip.setMainText(i18n(&quot;X2Go Plasmoid&quot;));
+	toolTip.setSubText(i18n(&quot;Manage X2Go shares\nSuspend session&quot;));
+	toolTip.setImage(KIcon(DEFAULT_ICON_NAME));
+	Plasma::ToolTipManager::self()-&gt;setContent(this,toolTip);
+	setPopupIcon(DEFAULT_ICON_NAME);
 }
 
 QGraphicsWidget* x2goplasmoid::graphicsWidget()
 {
-    if (!m_dialog)
-        m_dialog=new PlasmaX2goDialog(this);
-    return m_dialog-&gt;dialog();
+	if (!m_dialog)
+		m_dialog=new PlasmaX2goDialog(this);
+	return m_dialog-&gt;dialog();
 }
 
 
 void x2goplasmoid::slotUpdateStamp()
 {
-    QFile file(stampFName);
-    if (!file.open(QIODevice::WriteOnly | QIODevice::Text))
-        return;
+	QFile file(stampFName);
+	if (!file.open(QIODevice::WriteOnly | QIODevice::Text))
+		return;
 
-    QTextStream out(&amp;file);
-    out &lt;&lt; QDateTime::currentDateTime().toTime_t();
+	QTextStream out(&amp;file);
+	out &lt;&lt; QDateTime::currentDateTime().toTime_t();
 }
 
 
diff --git a/x2goplasmoid.h b/x2goplasmoid.h
index 177cdbc..1ec561b 100644
--- a/x2goplasmoid.h
+++ b/x2goplasmoid.h
@@ -10,24 +10,25 @@ class PlasmaX2goDialog;
 
 class x2goplasmoid : public Plasma::PopupApplet
 {
-    Q_OBJECT
+	Q_OBJECT
 public:
-    // Basic Create/Destroy
-    x2goplasmoid(QObject *parent, const QVariantList &amp;args);
-    ~x2goplasmoid();
-    QString getSessionId()
-    {
-      return sessionId;
-    }
+	// Basic Create/Destroy
+	x2goplasmoid(QObject *parent, const QVariantList &amp;args);
+	~x2goplasmoid();
+	QString getSessionId()
+	{
+		return sessionId;
+	}
 
-    // The paintInterface procedure paints the applet to screen
-    void init();
-    QGraphicsWidget* graphicsWidget();
-  private:
-    PlasmaX2goDialog* m_dialog;
-    QString sessionId;
-    QString stampFName;    
-  private slots:
-    void slotUpdateStamp();
+	// The paintInterface procedure paints the applet to screen
+	void init();
+	QGraphicsWidget* graphicsWidget();
+private:
+	PlasmaX2goDialog* m_dialog;
+	QString sessionId;
+	QString stampFName;    
+private slots:
+	void slotUpdateStamp();
 };
+
 #endif


hooks/post-receive
-- 
x2goplasmabindings.git (Plasma/KDE4 Widget for X2go)

This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;x2goplasmabindings.git&quot; (Plasma/KDE4 Widget for X2go).


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001746.html">[X2go-Commits] nx-libs.git - nxauth (branch) updated:	caf1bc41f931009e24c28a18a7311da03b68961c
</A></li>
	<LI>Next message: <A HREF="001748.html">[X2go-Commits] x2goplasmabindings.git - master (branch) updated:	ae6437cb952d4532f6de0295c57eda14a92073f3
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1747">[ date ]</a>
              <a href="thread.html#1747">[ thread ]</a>
              <a href="subject.html#1747">[ subject ]</a>
              <a href="author.html#1747">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/x2go-commits">More information about the X2go-commits
mailing list</a><br>
</body></html>
