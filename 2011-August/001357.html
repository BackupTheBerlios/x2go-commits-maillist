<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [X2go-Commits] pyhoca-cli.git - master (branch) updated:	0.1.4.1-7-gd5c1ff7
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/x2go-commits/2011-August/index.html" >
   <LINK REL="made" HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20pyhoca-cli.git%20-%20master%20%28branch%29%20updated%3A%0A%090.1.4.1-7-gd5c1ff7&In-Reply-To=%3C20110817002656.85E115DB19%40ymir%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001356.html">
   <LINK REL="Next"  HREF="001358.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[X2go-Commits] pyhoca-cli.git - master (branch) updated:	0.1.4.1-7-gd5c1ff7</H1>
    <B>X2go dev team</B> 
    <A HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20pyhoca-cli.git%20-%20master%20%28branch%29%20updated%3A%0A%090.1.4.1-7-gd5c1ff7&In-Reply-To=%3C20110817002656.85E115DB19%40ymir%3E"
       TITLE="[X2go-Commits] pyhoca-cli.git - master (branch) updated:	0.1.4.1-7-gd5c1ff7">git-admin at x2go.org
       </A><BR>
    <I>Wed Aug 17 02:26:56 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="001356.html">[X2go-Commits] pyhoca-cli.git - master (branch) updated:	0.1.4.1-5-g37ba4e6
</A></li>
        <LI>Next message: <A HREF="001358.html">[X2go-Commits] nxcomp.git - master (branch) updated:	3.4.0.8-11-ge4e9282
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1357">[ date ]</a>
              <a href="thread.html#1357">[ thread ]</a>
              <a href="subject.html#1357">[ subject ]</a>
              <a href="author.html#1357">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch, master has been updated
       via  d5c1ff7f2e31a150aa241acd7317fabb940e5439 (commit)
       via  1d7da12b3de5787b7ada39333601bccbe50f4c5c (commit)
      from  37ba4e6f7dfa24bf27cab76c6588344da5a6b4a4 (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit d5c1ff7f2e31a150aa241acd7317fabb940e5439
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Wed Aug 17 02:28:02 2011 +0200

    Update+rearrange man page.

commit 1d7da12b3de5787b7ada39333601bccbe50f4c5c
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Wed Aug 17 02:27:57 2011 +0200

    Add cmd line option --terminate-on-ctrl-c.

-----------------------------------------------------------------------

Summary of changes:
 debian/changelog       |    1 +
 man/man1/pyhoca-cli.1  |   22 +++++++++++++++-------
 pyhoca-cli             |    1 +
 pyhoca/cli/frontend.py |    8 ++++++++
 4 files changed, 25 insertions(+), 7 deletions(-)

The diff of changes is:
diff --git a/debian/changelog b/debian/changelog
index 981b6c5..17142c2 100644
--- a/debian/changelog
+++ b/debian/changelog
@@ -8,6 +8,7 @@ pyhoca-cli (0.1.4.2-0~x2go1) UNRELEASED; urgency=low
       all sessions of the connecting user.
     - Allow ,,NEWEST'' and ,,OLDEST'' as session name when resuming (closes
       upstream issue #86).
+    - Add cmd line option --terminate-on-ctrl-c.
 
  -- Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;  Wed, 06 Jul 2011 22:18:01 +0200
 
diff --git a/man/man1/pyhoca-cli.1 b/man/man1/pyhoca-cli.1
index 8911f3b..35678ff 100644
--- a/man/man1/pyhoca-cli.1
+++ b/man/man1/pyhoca-cli.1
@@ -54,10 +54,16 @@ Enable debugging code of the unterlying Python X2go module.
 .TP 
 \*(T&lt;\fB\-\-libdebug-sftpxfer\fR\*(T&gt; 
 Enable debugging code of Python X2go's sFTP server code (very verbose, and it may even reveal promiscuous data).
-.SH SERVER
+.SH SERVER / SESSION PROFILE
+You either have to specify a server name or a pre-configured X2goClient session profile to tell \fBpyhoca-cli\fR to
+what X2go server to connect. \fBpyhoca-cli\fR will not start
+if neither of these two options has been given on the command line.
 .TP
 \*(T&lt;\fB\-\-server\fR \fI&lt;HOSTNAME_or_IP&gt;\fR\*(T&gt; 
 If not in LDAP mode you always have to name the remote X2go server's hostname or IP address.
+.TP 
+\*(T&lt;\fB\-P, \-\-session-profile\fR \fI&lt;SESSION_PROFILE_NAME&gt;\fR\*(T&gt;
+The name of the session profile to be used to make the connection.
 .SH ACTIONS
 \fBpyhoca-cli\fR accepts exclusively one of the listed actions:
 .TP
@@ -81,11 +87,16 @@ Terminate running X2go session &lt;SESSION_NAME&gt;. A special value for &lt;SESSION_NAME
 .TP 
 \*(T&lt;\fB\-L, \-\-list-sessions\fR\*(T&gt; 
 List user's X2go sessions on server.
+.SH ACTION OPTIONS
+\fBpyhoca-cli\fR actions can be tweaked by these options:
+.TP
+\*(T&lt;\fB\-\-clean-sessions\fR\*(T&gt; 
+Clean all of the user's suspended/running sessions before starting a new one on the named X2go server.
+.TP
+\*(T&lt;\fB\-\-terminate-on-ctrl-c\fR\*(T&gt; 
+Terminate the connected session when pressing CTRL+C (instead of suspending the session).
 .SH X2GO OPTIONS
 .TP 
-\*(T&lt;\fB\-P, \-\-session-profile\fR\*(T&gt;
-The name of the session profile to be used to make the connection.B
-.TP 
 \*(T&lt;\fB\-c, \-\-command\fR \fI&lt;CMD&gt;\fR\*(T&gt; 
 Command to run with \fB\-\-new\fR mode on server (default: xterm).
 .TP 
@@ -117,9 +128,6 @@ Use X2go printing (default: disabled).
 .TP 
 \*(T&lt;\fB\-\-share-mode\fR \fI{0|1}\fR\*(T&gt; 
 Share mode for X2go desktop sharing (0: view-only, 1: full access).
-.TP
-\*(T&lt;\fB\-\-clean-sessions\fR\*(T&gt; 
-Clean all of the user's suspended/running sessions before starting a new one on the named X2go server.
 .TP 
 \*(T&lt;\fB\-\-time-to-wait\fR\*(T&gt; 
 Time to wait for session startup/resume (default: 8s). There should be no need to touch this, unless on very slow network connections.
diff --git a/pyhoca-cli b/pyhoca-cli
index 71f7591..741f9cd 100755
--- a/pyhoca-cli
+++ b/pyhoca-cli
@@ -122,6 +122,7 @@ x2go_options =   [
                    {'args':['--share-mode'], 'default': 0, 'help': 'share mode for X2go desktop sharing (0: view-only, 1: full access)', },
                    {'args':['-F', '--share-local-folders'], 'metavar': '&lt;folder1&gt;[,&lt;folder2[,...]]', 'default': None, 'help': 'a comma separated list of local folder names to mount in the X2go session', },
                    {'args':['--clean-sessions'], 'default': False, 'action': 'store_true', 'help': 'clean all suspended sessions before starting a new one', },
+                   {'args':['--terminate-on-ctrl-c'], 'default': False, 'action': 'store_true', 'help': 'terminate the connected session when pressing CTRL+C (instead of suspending the session)', },
                    {'args':['--time-to-wait'], 'default': '8', 'help': 'time to wait for session startup/resume (default: 8s)', },
                  ]
 print_options =  [ 
diff --git a/pyhoca/cli/frontend.py b/pyhoca/cli/frontend.py
index 82487d4..e5b3672 100644
--- a/pyhoca/cli/frontend.py
+++ b/pyhoca/cli/frontend.py
@@ -441,6 +441,8 @@ class PyHocaCLI(x2go.X2goClient):
                 self._pyhoca_logger(&quot;X2go session name is: %s&quot; % session_name, loglevel=x2go.loglevel_INFO, )
                 if self.args.share_desktop:
                     self._pyhoca_logger(&quot;Press CTRL+C to end desktop sharing for this session...&quot;, loglevel=x2go.loglevel_NOTICE, )
+                elif self.args.terminate_on_ctrl_c:
+                    self._pyhoca_logger(&quot;Press CTRL+C to terminate the running session...&quot;, loglevel=x2go.loglevel_NOTICE, )
                 else:
                     self._pyhoca_logger(&quot;Press CTRL+C to suspend the running session...&quot;, loglevel=x2go.loglevel_NOTICE, )
 
@@ -469,6 +471,12 @@ class PyHocaCLI(x2go.X2goClient):
                         self._X2goClient__terminate_session(self.x2go_session_hash)
                         time.sleep(2)
                         self._pyhoca_logger(&quot;X2go session %s has been terminated&quot; % session_name, loglevel=x2go.loglevel_NOTICE, )
+                    elif self.args.terminate_on_ctrl_c:
+                        self._pyhoca_logger(&quot;Terminating X2go session %s&quot; % session_name, loglevel=x2go.loglevel_INFO, )
+                        self._X2goClient__terminate_session(self.x2go_session_hash)
+                        # giving nxproxy's SSH tunnel some time to settle
+                        time.sleep(2)
+                        self._pyhoca_logger(&quot;X2go session %s has been terminated&quot; % session_name, loglevel=x2go.loglevel_NOTICE, )
                     else:
                         self._pyhoca_logger(&quot;Suspending X2go session %s&quot; % session_name, loglevel=x2go.loglevel_INFO, )
                         self._X2goClient__suspend_session(self.x2go_session_hash)


hooks/post-receive
-- 
pyhoca-cli.git (Python X2go Client (command line client))

This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;pyhoca-cli.git&quot; (Python X2go Client (command line client)).


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001356.html">[X2go-Commits] pyhoca-cli.git - master (branch) updated:	0.1.4.1-5-g37ba4e6
</A></li>
	<LI>Next message: <A HREF="001358.html">[X2go-Commits] nxcomp.git - master (branch) updated:	3.4.0.8-11-ge4e9282
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1357">[ date ]</a>
              <a href="thread.html#1357">[ thread ]</a>
              <a href="subject.html#1357">[ subject ]</a>
              <a href="author.html#1357">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/x2go-commits">More information about the X2go-commits
mailing list</a><br>
</body></html>
