<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [X2go-Commits] x2gothinclient.git - tmpfs (branch) updated:	69b1de0bd6ebd30fb92664fa44fef1e78d36d6c6
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/x2go-commits/2011-June/index.html" >
   <LINK REL="made" HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20x2gothinclient.git%20-%20tmpfs%20%28branch%29%20updated%3A%0A%0969b1de0bd6ebd30fb92664fa44fef1e78d36d6c6&In-Reply-To=%3C20110616120359.B37A25DB38%40ymir.das-netzwerkteam.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000919.html">
   <LINK REL="Next"  HREF="000921.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[X2go-Commits] x2gothinclient.git - tmpfs (branch) updated:	69b1de0bd6ebd30fb92664fa44fef1e78d36d6c6</H1>
    <B>X2go dev team</B> 
    <A HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20x2gothinclient.git%20-%20tmpfs%20%28branch%29%20updated%3A%0A%0969b1de0bd6ebd30fb92664fa44fef1e78d36d6c6&In-Reply-To=%3C20110616120359.B37A25DB38%40ymir.das-netzwerkteam.de%3E"
       TITLE="[X2go-Commits] x2gothinclient.git - tmpfs (branch) updated:	69b1de0bd6ebd30fb92664fa44fef1e78d36d6c6">git-admin at x2go.org
       </A><BR>
    <I>Thu Jun 16 14:03:59 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="000919.html">[X2go-Commits] x2gothinclient.git - tmpfs (branch) updated:	16aadde9b6ab9c5c98b606a6fda17b69898fbd82
</A></li>
        <LI>Next message: <A HREF="000921.html">[X2go-Commits] x2gothinclient.git - tmpfs (branch) updated:	322e7b3d13048aea67941e5835705b3343955941
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#920">[ date ]</a>
              <a href="thread.html#920">[ thread ]</a>
              <a href="subject.html#920">[ subject ]</a>
              <a href="author.html#920">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch, tmpfs has been updated
       via  69b1de0bd6ebd30fb92664fa44fef1e78d36d6c6 (commit)
       via  fa5b158616c3418dc6a69a10189553bd36f284c3 (commit)
      from  16aadde9b6ab9c5c98b606a6fda17b69898fbd82 (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit 69b1de0bd6ebd30fb92664fa44fef1e78d36d6c6
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Thu Jun 16 14:04:26 2011 +0200

    fix sourcing of x2gothinclient_init file in init script

commit fa5b158616c3418dc6a69a10189553bd36f284c3
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Thu Jun 16 14:02:24 2011 +0200

    Add kernel module blacklisting for x2gothinclient_create.

-----------------------------------------------------------------------

Summary of changes:
 debian/changelog                                   |    1 +
 debian/x2gothinclient.init                         |    2 +-
 x2gothinclientmanagement/bin/x2gothinclient_create |    5 +++++
 .../etc/x2gothinclient_settings                    |    3 +++
 4 files changed, 10 insertions(+), 1 deletions(-)

The diff of changes is:
diff --git a/debian/changelog b/debian/changelog
index f4b7886..884bbf1 100644
--- a/debian/changelog
+++ b/debian/changelog
@@ -27,6 +27,7 @@ x2gothinclient (1.0.1.3-0~x2go1) UNRELEASED; urgency=low
   * Fix udev rules path in x2gousbmount.
   * Add comment that names possible boot profiles to tftp config template.
   * Add midnight commander to Recommends: of x2gothinclient.
+  * Add kernel module blacklisting for x2gothinclient_create.
 
  -- Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;  Sat, 28 May 2011 12:04:34 +0200
 
diff --git a/debian/x2gothinclient.init b/debian/x2gothinclient.init
index bdaf796..9b305a5 100644
--- a/debian/x2gothinclient.init
+++ b/debian/x2gothinclient.init
@@ -39,7 +39,7 @@ test -x $DAEMON || exit 0
 test -x /etc/x2go/x2gothinclient_init || test -x /etc/x2go/x2gothinclient_start || { echo &quot;X2go thin client system will not start as it is not configured, yet.\nSee <A HREF="http://wiki.x2go.org/installing_x2go_thin_client_environment_debian">http://wiki.x2go.org/installing_x2go_thin_client_environment_debian</A>&quot;; exit 0; }
 
 # pre-init X2go Thin Client through init script...
-test -x /etc/x2go/x2gothinclient_init &amp;&amp; source /etc/x2go/x2gothinclient_init
+test -x /etc/x2go/x2gothinclient_init &amp;&amp; . /etc/x2go/x2gothinclient_init
 
 set -e
 
diff --git a/x2gothinclientmanagement/bin/x2gothinclient_create b/x2gothinclientmanagement/bin/x2gothinclient_create
index c740899..589fdb6 100755
--- a/x2gothinclientmanagement/bin/x2gothinclient_create
+++ b/x2gothinclientmanagement/bin/x2gothinclient_create
@@ -40,6 +40,7 @@ TC_CHROOT=&quot;${TC_CHROOT:-$TC_BASE/chroot}&quot;
 TC_CONFIG=&quot;${TC_CONFIG:-$TC_BASE/etc}&quot;
 TC_DEBMIRROR_URL=&quot;${TC_DEBMIRROR_URL:-'<A HREF="http://ftp.debian.org/debian">http://ftp.debian.org/debian</A>'}&quot;
 TC_X2GO_DEBURL=&quot;${TC_X2GO_DEBURL:-'deb <A HREF="http://packages.x2go.org">http://packages.x2go.org</A> stable main'}&quot;
+TC_MODULE_BLACKLIST=&quot;${TC_MODULE_BLACKLIST:-'pcspkr'}&quot;
 
 test -e &quot;$TC_CHROOT&quot; &amp;&amp; { 
     echo &quot;ERROR: X2go Thin Client chroot already exists at $TC_CHROOT. Clear $TC_BASE/ and then run $(basename $0) again...&quot;
@@ -118,6 +119,10 @@ mkdir -p /var/lib/nfs
 [ $? -eq 0 ] &amp;&amp; cp /initrd.img /initrd.img.686
 [ $? -eq 0 ] &amp;&amp; apt-get install x2gothinclient x2gocdmanager x2gosmartcardrules x2gousbmount -y
 
+# blacklist kernel modules
+[ $? -eq 0 ] &amp;&amp; echo &amp;&amp; echo &quot;# modules blacklisted on X2go Thin Clients...&quot; &gt;&gt; /etc/modprobe.d/blacklist.conf
+[ $? -eq 0 ] &amp;&amp; for mod in $TC_MODULE_BLACKLIST; do echo &quot;blacklist $mod&quot; &gt;&gt; /etc/modprobe.d/blacklist.conf
+
 #Pulsaudio must come afterwards until the thinclient-package is fixed
 [ $? -eq 0 ] &amp;&amp; apt-get install pulseaudio -y
 [ $? -eq 0 ] &amp;&amp; dpkg-reconfigure locales
diff --git a/x2gothinclientmanagement/etc/x2gothinclient_settings b/x2gothinclientmanagement/etc/x2gothinclient_settings
index 758efcc..470d41b 100644
--- a/x2gothinclientmanagement/etc/x2gothinclient_settings
+++ b/x2gothinclientmanagement/etc/x2gothinclient_settings
@@ -44,6 +44,9 @@ TC_HTTP_PROXY=&quot;&quot;
 TC_HTTPS_PROXY=&quot;&quot;
 TC_FTP_PROXY=&quot;&quot;
 
+# module blacklist (used during X2go TCE creation)
+TC_MODULE_BLACKLIST=&quot;pcspkr&quot;
+
 # tftp boot environment (PXE/syslinux files delivered via tftpd)
 TC_TFTP_BOOT=&quot;/srv/tftp&quot;
 


hooks/post-receive
-- 
x2gothinclient.git (X2go Thin Client Environment)

This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;x2gothinclient.git&quot; (X2go Thin Client Environment).


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000919.html">[X2go-Commits] x2gothinclient.git - tmpfs (branch) updated:	16aadde9b6ab9c5c98b606a6fda17b69898fbd82
</A></li>
	<LI>Next message: <A HREF="000921.html">[X2go-Commits] x2gothinclient.git - tmpfs (branch) updated:	322e7b3d13048aea67941e5835705b3343955941
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#920">[ date ]</a>
              <a href="thread.html#920">[ thread ]</a>
              <a href="subject.html#920">[ subject ]</a>
              <a href="author.html#920">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/x2go-commits">More information about the X2go-commits
mailing list</a><br>
</body></html>
