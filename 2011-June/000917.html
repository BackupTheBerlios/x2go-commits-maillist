<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [X2go-Commits] x2gothinclient.git - tmpfs (branch) updated:	b2d04cc362bb21d6f45133514730d0e7d1fd10ad
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/x2go-commits/2011-June/index.html" >
   <LINK REL="made" HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20x2gothinclient.git%20-%20tmpfs%20%28branch%29%20updated%3A%0A%09b2d04cc362bb21d6f45133514730d0e7d1fd10ad&In-Reply-To=%3C20110616113831.491C65DB38%40ymir.das-netzwerkteam.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000916.html">
   <LINK REL="Next"  HREF="000918.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[X2go-Commits] x2gothinclient.git - tmpfs (branch) updated:	b2d04cc362bb21d6f45133514730d0e7d1fd10ad</H1>
    <B>X2go dev team</B> 
    <A HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20x2gothinclient.git%20-%20tmpfs%20%28branch%29%20updated%3A%0A%09b2d04cc362bb21d6f45133514730d0e7d1fd10ad&In-Reply-To=%3C20110616113831.491C65DB38%40ymir.das-netzwerkteam.de%3E"
       TITLE="[X2go-Commits] x2gothinclient.git - tmpfs (branch) updated:	b2d04cc362bb21d6f45133514730d0e7d1fd10ad">git-admin at x2go.org
       </A><BR>
    <I>Thu Jun 16 13:38:31 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="000916.html">[X2go-Commits] x2gothinclient.git - tmpfs (branch) updated:	8ec5bf76b8fa27cba160a07348c186ef681e2cba
</A></li>
        <LI>Next message: <A HREF="000918.html">[X2go-Commits] x2gothinclient.git - tmpfs (branch) updated:	07c6664caf6078dee45a4f2afd5fdcfea09b4e74
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#917">[ date ]</a>
              <a href="thread.html#917">[ thread ]</a>
              <a href="subject.html#917">[ subject ]</a>
              <a href="author.html#917">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch, tmpfs has been updated
       via  b2d04cc362bb21d6f45133514730d0e7d1fd10ad (commit)
       via  84ad9fa519f3bbc1403b08fb30a9b5cfbbd70aff (commit)
       via  2a22fb2f2ad3bba355c09898ead028bacbca9cab (commit)
      from  8ec5bf76b8fa27cba160a07348c186ef681e2cba (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit b2d04cc362bb21d6f45133514730d0e7d1fd10ad
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Thu Jun 16 13:39:10 2011 +0200

    Fix udev rules path in x2gousbmount.

commit 84ad9fa519f3bbc1403b08fb30a9b5cfbbd70aff
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Thu Jun 16 13:38:42 2011 +0200

    Fix udev rules path in x2gosmartcardrules, improval of udev script, plus man page.

commit 2a22fb2f2ad3bba355c09898ead028bacbca9cab
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Thu Jun 16 13:35:00 2011 +0200

    Add empty line at end of x2gothinclientmanagement_update script

-----------------------------------------------------------------------

Summary of changes:
 debian/changelog                                   |    2 +
 debian/x2gosmartcardrules.install                  |    5 ++-
 debian/x2gousbmount.install                        |    5 ++-
 ...{gnupg-ccid.rules =&gt; 021_x2go-gnupg-ccid.rules} |    8 +++---
 x2gosmartcardrules/man/x2gognupgccid.8             |   25 ++++++++++++++++++++
 x2gosmartcardrules/{gnupg-ccid =&gt; x2gognupgccid}   |   13 +++++++---
 x2gothinclientmanagement/bin/x2gothinclient_update |    2 +
 x2gousbmount/x2gousbmount.rules                    |    6 ----
 x2gousbmount/z60_x2gousbmount.rules                |    6 ++++
 9 files changed, 54 insertions(+), 18 deletions(-)
 rename x2gosmartcardrules/{gnupg-ccid.rules =&gt; 021_x2go-gnupg-ccid.rules} (68%)
 create mode 100644 x2gosmartcardrules/man/x2gognupgccid.8
 rename x2gosmartcardrules/{gnupg-ccid =&gt; x2gognupgccid} (85%)
 delete mode 100644 x2gousbmount/x2gousbmount.rules
 create mode 100644 x2gousbmount/z60_x2gousbmount.rules

The diff of changes is:
diff --git a/debian/changelog b/debian/changelog
index ba4b74d..32dc47b 100644
--- a/debian/changelog
+++ b/debian/changelog
@@ -23,6 +23,8 @@ x2gothinclient (1.0.1.3-0~x2go1) UNRELEASED; urgency=low
   * Add x2gothinclient_cleanup script.
   * Add man page for x2gothinclient_cleanup.
   * Run x2gothinclient_init from x2gothinclientd init script.
+  * Fix udev rules path in x2gosmartcardrules, improval of udev script, plus man page.
+  * Fix udev rules path in x2gousbmount.
 
  -- Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;  Sat, 28 May 2011 12:04:34 +0200
 
diff --git a/debian/x2gosmartcardrules.install b/debian/x2gosmartcardrules.install
index 9f37e6a..a246c9e 100644
--- a/debian/x2gosmartcardrules.install
+++ b/debian/x2gosmartcardrules.install
@@ -1,2 +1,3 @@
-x2gosmartcardrules/gnupg-ccid.rules  lib/udev/rules.d/021_gnupg-ccid.rules
-x2gosmartcardrules/gnupg-ccid        etc/udev/scripts/
\ No newline at end of file
+x2gosmartcardrules/021_x2go-gnupg-ccid.rules    lib/udev/rules.d/
+x2gosmartcardrules/x2gognupgccid                usr/lib/x2go/tce/
+
diff --git a/debian/x2gousbmount.install b/debian/x2gousbmount.install
index f4c8b84..f1700bc 100644
--- a/debian/x2gousbmount.install
+++ b/debian/x2gousbmount.install
@@ -1,2 +1,3 @@
-x2gousbmount/x2gousbmount.rules    lib/udev/rules.d/z60_x2gousbmount.rules
-x2gousbmount/x2gousbmount          usr/sbin
\ No newline at end of file
+x2gousbmount/x2gousbmount.rules    lib/udev/rules.d/
+x2gousbmount/x2gousbmount          usr/lib/x2go/tce/
+
diff --git a/x2gosmartcardrules/gnupg-ccid.rules b/x2gosmartcardrules/021_x2go-gnupg-ccid.rules
similarity index 68%
rename from x2gosmartcardrules/gnupg-ccid.rules
rename to x2gosmartcardrules/021_x2go-gnupg-ccid.rules
index db7df87..77b5822 100644
--- a/x2gosmartcardrules/gnupg-ccid.rules
+++ b/x2gosmartcardrules/021_x2go-gnupg-ccid.rules
@@ -1,9 +1,9 @@
 # GPG SmartCard Reader Support
 #
 
-ACTION==&quot;add&quot;, SUBSYSTEM==&quot;usb&quot;, ENV{PRODUCT}==&quot;4e6/e003/*&quot;, RUN+=&quot;/etc/udev/scripts/gnupg-ccid&quot;
-ACTION==&quot;add&quot;, SUBSYSTEM==&quot;usb&quot;, ENV{PRODUCT}==&quot;4e6/5115/*&quot;, RUN+=&quot;/etc/udev/scripts/gnupg-ccid&quot;
+ACTION==&quot;add&quot;, SUBSYSTEM==&quot;usb&quot;, ENV{PRODUCT}==&quot;4e6/e003/*&quot;, RUN+=&quot;/usr/lib/x2go/tce/x2gognupgccid&quot;
+ACTION==&quot;add&quot;, SUBSYSTEM==&quot;usb&quot;, ENV{PRODUCT}==&quot;4e6/5115/*&quot;, RUN+=&quot;/usr/lib/x2go/tce/x2gognupgccid&quot;
 #OMNIKEY
-ACTION==&quot;add&quot;, SUBSYSTEM==&quot;usb&quot;, ENV{PRODUCT}==&quot;76b/3021/*&quot;, RUN+=&quot;/etc/udev/scripts/gnupg-ccid&quot;
+ACTION==&quot;add&quot;, SUBSYSTEM==&quot;usb&quot;, ENV{PRODUCT}==&quot;76b/3021/*&quot;, RUN+=&quot;/usr/lib/x2go/tce/x2gognupgccid&quot;
 #CHERRY
-ACTION==&quot;add&quot;, SUBSYSTEM==&quot;usb&quot;, ENV{PRODUCT}==&quot;46a/10/*&quot;, RUN+=&quot;/etc/udev/scripts/gnupg-ccid&quot;
+ACTION==&quot;add&quot;, SUBSYSTEM==&quot;usb&quot;, ENV{PRODUCT}==&quot;46a/10/*&quot;, RUN+=&quot;/usr/lib/x2go/tce/x2gognupgccid&quot;
diff --git a/x2gosmartcardrules/man/x2gognupgccid.8 b/x2gosmartcardrules/man/x2gognupgccid.8
new file mode 100644
index 0000000..881b811
--- /dev/null
+++ b/x2gosmartcardrules/man/x2gognupgccid.8
@@ -0,0 +1,25 @@
+'\&quot; -*- coding: utf-8 -*-
+.if \n(.g .ds T&lt; \\FC
+.if \n(.g .ds T&gt; \\F[\n[.fam]]
+.de URL
+\\$2 \(la\\$1\(ra\\$3
+..
+.if \n(.g .mso www.tmac
+.TH x2gognupgccid 8 &quot;16 June 2011&quot; &quot;Version &lt;UNRELEASED&gt;&quot; &quot;X2go Thin Client Environment&quot;
+.SH NAME
+x2gognupgccid \- udev Script handling GnuPG smart card readers on X2go Thin Clients.
+.SH SYNOPSIS
+'nh
+.fi
+.ad l
+x2gognupgccid
+
+.SH DESCRIPTION
+\fBx2gognupgccid\fR is a udev script that handles the usage of GnuPG smart card readers that are connected to X2go Thin Clients.
+.PP
+.SH OPTIONS
+\fBx2gognupgccid\fR has no known options.
+.PP
+.SH AUTHOR
+This manual has been written by Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt; for the X2go project
+(<A HREF="http://www.x2go.org">http://www.x2go.org</A>).
diff --git a/x2gosmartcardrules/gnupg-ccid b/x2gosmartcardrules/x2gognupgccid
similarity index 85%
rename from x2gosmartcardrules/gnupg-ccid
rename to x2gosmartcardrules/x2gognupgccid
index b5b9561..508f96c 100755
--- a/x2gosmartcardrules/gnupg-ccid
+++ b/x2gosmartcardrules/x2gognupgccid
@@ -21,9 +21,14 @@ GROUP=scard
 # &quot;gnupg-ccid&quot; like this script.
 #
 
+set -e
+
 DEV=`echo ${DEVICE} | sed 's/proc/dev/'`
 
-if [ &quot;${ACTION}&quot; = &quot;add&quot; ] #&amp;&amp; [ -e &quot;${DEV}&quot; ]
-then
-    sleep 2&amp;&amp;chmod o-rwx &quot;${DEV}&quot;&amp;&amp;chgrp ${GROUP} &quot;${DEV}&quot;&amp;&amp;chmod g+rw &quot;${DEV}&quot;&amp;
-fi     
+if [ &quot;${ACTION}&quot; = &quot;add&quot; ]; then
+	sleep 2
+	chown :${GROUP} &quot;${DEV}&quot;
+	chmod g+rw,o-rwx &quot;${DEV}&quot;
+fi
+
+exit 0
\ No newline at end of file
diff --git a/x2gothinclientmanagement/bin/x2gothinclient_update b/x2gothinclientmanagement/bin/x2gothinclient_update
index 721e173..443b388 100755
--- a/x2gothinclientmanagement/bin/x2gothinclient_update
+++ b/x2gothinclientmanagement/bin/x2gothinclient_update
@@ -64,3 +64,5 @@ chmod a+rx &quot;$TC_CHROOT/etc/x2go/x2gothinclient_start&quot;
 
 cp -v &quot;$TC_CONFIG/x2gothinclient_sessions&quot; &quot;$TC_CHROOT/etc/x2go/x2gothinclient_sessions&quot;
 chmod a+rx &quot;$TC_CHROOT/etc/x2go/x2gothinclient_sessions&quot;
+
+echo
\ No newline at end of file
diff --git a/x2gousbmount/x2gousbmount.rules b/x2gousbmount/x2gousbmount.rules
deleted file mode 100644
index ab8579c..0000000
--- a/x2gousbmount/x2gousbmount.rules
+++ /dev/null
@@ -1,6 +0,0 @@
-# Rules for X2GO USB mount
-
-KERNEL==&quot;sd*&quot;, SUBSYSTEM==&quot;block&quot;, ACTION==&quot;add&quot;,    RUN+=&quot;/usr/sbin/x2gousbmount&quot;
-KERNEL==&quot;ub*&quot;, SUBSYSTEM==&quot;block&quot;, ACTION==&quot;add&quot;,    RUN+=&quot;/usr/sbin/x2gousbmount&quot;
-KERNEL==&quot;sd*&quot;,             ACTION==&quot;remove&quot;, RUN+=&quot;/usr/sbin/x2gousbmount&quot;
-KERNEL==&quot;ub*&quot;,             ACTION==&quot;remove&quot;, RUN+=&quot;/usr/sbin/x2gousbmount&quot;
diff --git a/x2gousbmount/z60_x2gousbmount.rules b/x2gousbmount/z60_x2gousbmount.rules
new file mode 100644
index 0000000..5fee52c
--- /dev/null
+++ b/x2gousbmount/z60_x2gousbmount.rules
@@ -0,0 +1,6 @@
+# Rules for X2GO USB mount
+
+KERNEL==&quot;sd*&quot;, SUBSYSTEM==&quot;block&quot;, ACTION==&quot;add&quot;,    RUN+=&quot;/usr/lib/x2go/tce/x2gousbmount&quot;
+KERNEL==&quot;ub*&quot;, SUBSYSTEM==&quot;block&quot;, ACTION==&quot;add&quot;,    RUN+=&quot;/usr/lib/x2go/tce/x2gousbmount&quot;
+KERNEL==&quot;sd*&quot;,             ACTION==&quot;remove&quot;, RUN+=&quot;/usr/lib/x2go/tce/x2gousbmount&quot;
+KERNEL==&quot;ub*&quot;,             ACTION==&quot;remove&quot;, RUN+=&quot;/usr/lib/x2go/tce/x2gousbmount&quot;


hooks/post-receive
-- 
x2gothinclient.git (X2go Thin Client Environment)

This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;x2gothinclient.git&quot; (X2go Thin Client Environment).


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000916.html">[X2go-Commits] x2gothinclient.git - tmpfs (branch) updated:	8ec5bf76b8fa27cba160a07348c186ef681e2cba
</A></li>
	<LI>Next message: <A HREF="000918.html">[X2go-Commits] x2gothinclient.git - tmpfs (branch) updated:	07c6664caf6078dee45a4f2afd5fdcfea09b4e74
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#917">[ date ]</a>
              <a href="thread.html#917">[ thread ]</a>
              <a href="subject.html#917">[ subject ]</a>
              <a href="author.html#917">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/x2go-commits">More information about the X2go-commits
mailing list</a><br>
</body></html>
