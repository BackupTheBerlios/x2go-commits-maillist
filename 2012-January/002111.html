<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [X2go-Commits] nx-libs.git - master (branch) updated:	redist-server/3.5.0.2-15-g1bbc9cc
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/x2go-commits/2012-January/index.html" >
   <LINK REL="made" HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20nx-libs.git%20-%20master%20%28branch%29%20updated%3A%0A%09redist-server/3.5.0.2-15-g1bbc9cc&In-Reply-To=%3C20120112120256.486F45DB33%40ymir%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002110.html">
   <LINK REL="Next"  HREF="002112.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[X2go-Commits] nx-libs.git - master (branch) updated:	redist-server/3.5.0.2-15-g1bbc9cc</H1>
    <B>X2go dev team</B> 
    <A HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20nx-libs.git%20-%20master%20%28branch%29%20updated%3A%0A%09redist-server/3.5.0.2-15-g1bbc9cc&In-Reply-To=%3C20120112120256.486F45DB33%40ymir%3E"
       TITLE="[X2go-Commits] nx-libs.git - master (branch) updated:	redist-server/3.5.0.2-15-g1bbc9cc">git-admin at x2go.org
       </A><BR>
    <I>Thu Jan 12 13:02:55 CET 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="002110.html">[X2go-Commits] nx-libs.git - master (branch) updated:	redist-server/3.5.0.2-10-g8f76198
</A></li>
        <LI>Next message: <A HREF="002112.html">[X2go-Commits] nx-libs.git - master (branch) updated:	redist-server/3.5.0.2-16-g86dc688
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2111">[ date ]</a>
              <a href="thread.html#2111">[ thread ]</a>
              <a href="subject.html#2111">[ subject ]</a>
              <a href="author.html#2111">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch, master has been updated
       via  1bbc9cc9e7fc01105cf0e3d5832e0acce9139495 (commit)
       via  496f31a511374f685df64df07e9c9c936419bb78 (commit)
       via  df8dc83d1341aeec42f488bec79bca95db438b8f (commit)
       via  760c5c07c63798e0e065020456e7514c8dd8b72d (commit)
       via  d6fee9a41fa3ba5db01d46963571a5a039ad1786 (commit)
      from  8f76198c5012a04ca8b5e10c3f133815008178ba (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit 1bbc9cc9e7fc01105cf0e3d5832e0acce9139495
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Thu Jan 12 13:02:36 2012 +0100

    changelog cleanup

commit 496f31a511374f685df64df07e9c9c936419bb78
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Thu Jan 12 13:01:47 2012 +0100

    Fix RGB color pallette (gray X2GO logo to be more accurate) for agent splash screen.

commit df8dc83d1341aeec42f488bec79bca95db438b8f
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Thu Jan 12 13:01:04 2012 +0100

    two more patches belonging to last commit: 016a_debian_nx-X11_install-location.patch, 102a_debian_xserver-xext_set-securitypolicy-path.patch

commit 760c5c07c63798e0e065020456e7514c8dd8b72d
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Thu Jan 12 13:00:23 2012 +0100

    Provide patches that are tarball / distro aware. Either NX (redistributed) has been installed to /usr/local/lib/nx via tarball or it has been packagedfor a distribution and is installed to /usr/lib/nx. Other installation paths are currently not supported.

commit d6fee9a41fa3ba5db01d46963571a5a039ad1786
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Thu Jan 12 12:15:14 2012 +0100

    Modify patch: 101_nxagent_set-rgb-path.patch, add path to RGB file if NX (redistributed) is installed via tarball under /usr/local.

-----------------------------------------------------------------------

Summary of changes:
 debian/changelog                                   |    8 ++
 debian/patches/016_nx-x11_install-location.patch   |    6 +-
 .../016a_debian_nx-X11_install-location.patch      |   17 ++++
 ...-x11_expat-build-against-system-libxmltok.patch |    2 +-
 debian/patches/020_add-nxagent-wrapper.patch       |    7 +-
 debian/patches/021_add-nxauth-wrapper.patch        |    7 +-
 debian/patches/022_add-nxproxy-wrapper.patch       |    7 +-
 debian/patches/023_add-x2goagent-wrapper.patch     |    7 +-
 debian/patches/101_nxagent_set-rgb-path.patch      |    4 +-
 .../102_xserver-xext_set-securitypolicy-path.patch |    8 +-
 ...ian_xserver-xext_set-securitypolicy-path.patch} |    4 +-
 .../patches/103_nxagent_set-X0-config-path.patch   |    4 +-
 ...9_nxagent_unbrand-nxagent-brand-x2goagent.patch |   88 +++++++++++---------
 debian/patches/series                              |    2 +
 14 files changed, 107 insertions(+), 64 deletions(-)
 create mode 100644 debian/patches/016a_debian_nx-X11_install-location.patch
 copy debian/patches/{102_xserver-xext_set-securitypolicy-path.patch =&gt; 102a_debian_xserver-xext_set-securitypolicy-path.patch} (84%)

The diff of changes is:
diff --git a/debian/changelog b/debian/changelog
index 81f2d95..838ce0a 100644
--- a/debian/changelog
+++ b/debian/changelog
@@ -12,6 +12,14 @@ nx-libs (2:3.5.0.2-1) UNRELEASED; urgency=low
   * Add patch: 209_x2goagent-add-man-page.patch.
   * Add binary package: x2goagent, includes man page
     patch: 209_x2goagent-add-man-page.patch
+  * Modify patch: 101_nxagent_set-rgb-path.patch, add path to RGB file
+    if NX (redistributed) is installed via tarball under /usr/local.
+  * Provide patches that are tarball / distro aware. Either NX (redistributed)
+    has been installed to /usr/local/lib/nx via tarball or it has been
+    packaged for a distribution and is installed to /usr/lib/nx. Other
+    installation paths are currently not supported.
+  * Fix RGB color pallette (gray X2GO logo to be more accurate) for agent
+    splash screen.
 
  -- Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;  Wed, 11 Jan 2012 15:30:36 +0100
 
diff --git a/debian/patches/016_nx-x11_install-location.patch b/debian/patches/016_nx-x11_install-location.patch
index 1bda0b0..0231bcb 100644
--- a/debian/patches/016_nx-x11_install-location.patch
+++ b/debian/patches/016_nx-x11_install-location.patch
@@ -1,6 +1,6 @@
 Description: FHS adaptation for Debian packaging
- On Debian, NX libraries and binaries are installed to
- /usr/lib/nx.
+ From tarball, NX libraries and binaries are installed to
+ /usr/local/lib/nx.
 Forwarded: not-needed
 Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
 Last-Update: 2012-12-31
@@ -17,7 +17,7 @@ Last-Update: 2012-12-31
  #endif
  #else
 -#define UsrLibDir Concat3(/usr,/,LibDirName)
-+#define UsrLibDir Concat4(/usr,/,LibDirName,/nx)
++#define UsrLibDir Concat4(/usr/local,/,LibDirName,/nx)
  #ifndef AlternateUsrLibDir
  #define AlternateUsrLibDir NO
  #endif
diff --git a/debian/patches/016a_debian_nx-X11_install-location.patch b/debian/patches/016a_debian_nx-X11_install-location.patch
new file mode 100644
index 0000000..9d4fe1b
--- /dev/null
+++ b/debian/patches/016a_debian_nx-X11_install-location.patch
@@ -0,0 +1,17 @@
+Description: FHS adaptation for Debian packaging
+ On Debian, NX libraries and binaries are installed to
+ /usr/lib/nx.
+Forwarded: not-needed
+Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
+Last-Update: 2012-12-31
+--- a/nx-X11/config/cf/Imake.tmpl
++++ b/nx-X11/config/cf/Imake.tmpl
+@@ -825,7 +825,7 @@
+ #define AlternateUsrLibDir YES
+ #endif
+ #else
+-#define UsrLibDir Concat4(/usr/local,/,LibDirName,/nx)
++#define UsrLibDir Concat4(/usr,/,LibDirName,/nx)
+ #ifndef AlternateUsrLibDir
+ #define AlternateUsrLibDir NO
+ #endif
diff --git a/debian/patches/019_nx-x11_expat-build-against-system-libxmltok.patch b/debian/patches/019_nx-x11_expat-build-against-system-libxmltok.patch
index bd0c72a..d32e570 100644
--- a/debian/patches/019_nx-x11_expat-build-against-system-libxmltok.patch
+++ b/debian/patches/019_nx-x11_expat-build-against-system-libxmltok.patch
@@ -13,7 +13,7 @@ Last-Update: 2011-12-31
  EXPATINC = $(EXPATTOP)/lib
  
 -INCLUDES = -I$(EXPATINC) -I$(EXPATTOP) -I.
-+INCLUDES = -I/usr/include/xmltok -I$(EXPATINC) -I$(EXPATTOP) -I. 
++INCLUDES = -I/usr/include/xmltok -I/usr/local/include/xmltok -I$(EXPATINC) -I$(EXPATTOP) -I. 
  
  /*
   * Endianness (for short's)
diff --git a/debian/patches/020_add-nxagent-wrapper.patch b/debian/patches/020_add-nxagent-wrapper.patch
index 93eb92a..f6a9a1d 100644
--- a/debian/patches/020_add-nxagent-wrapper.patch
+++ b/debian/patches/020_add-nxagent-wrapper.patch
@@ -19,9 +19,10 @@
 +# along with this program.  If not, see <A HREF="http://www.gnu.org/licenses/.">http://www.gnu.org/licenses/.</A>
 +
 +NX_LIBS=/usr/lib/nx
-+LD_LIBRARY_PATH=/usr/lib/nx:/usr/lib/nx/X11:$LD_LIBRARY_PATH
++NX_LOCAL_LIBS=/usr/local/lib/nx
++LD_LIBRARY_PATH=$NX_LIBS:$NX_LIBS/X11:$NX_LOCAL_LIBS:$NX_LOCAL_LIBS/X11:$LD_LIBRARY_PATH
 +
-+export NX_LIBS
++test -d NX_LIBS &amp;&amp; export NX_LIBS || export NX_LIBS=$NX_LOCAL_LIBS
 +export LD_LIBRARY_PATH
 +
-+exec /usr/lib/nx/nxagent &quot;$@&quot;
++exec $NX_LIBS/nxagent &quot;$@&quot;
diff --git a/debian/patches/021_add-nxauth-wrapper.patch b/debian/patches/021_add-nxauth-wrapper.patch
index ce51ea8..fea0b84 100644
--- a/debian/patches/021_add-nxauth-wrapper.patch
+++ b/debian/patches/021_add-nxauth-wrapper.patch
@@ -19,9 +19,10 @@
 +# along with this program.  If not, see <A HREF="http://www.gnu.org/licenses/.">http://www.gnu.org/licenses/.</A>
 +
 +NX_LIBS=/usr/lib/nx
-+LD_LIBRARY_PATH=/usr/lib/nx:/usr/lib/nx/X11:$LD_LIBRARY_PATH
++NX_LOCAL_LIBS=/usr/local/lib/nx
++LD_LIBRARY_PATH=$NX_LIBS:$NX_LIBS/X11:$NX_LOCAL_LIBS:$NX_LOCAL_LIBS/X11:$LD_LIBRARY_PATH
 +
-+export NX_LIBS
++test -d NX_LIBS &amp;&amp; export NX_LIBS || export NX_LIBS=$NX_LOCAL_LIBS
 +export LD_LIBRARY_PATH
 +
-+exec /usr/lib/nx/nxauth &quot;$@&quot;
++exec $NX_LIBS/nxauth &quot;$@&quot;
diff --git a/debian/patches/022_add-nxproxy-wrapper.patch b/debian/patches/022_add-nxproxy-wrapper.patch
index cedfde3..53b0c29 100644
--- a/debian/patches/022_add-nxproxy-wrapper.patch
+++ b/debian/patches/022_add-nxproxy-wrapper.patch
@@ -19,9 +19,10 @@
 +# along with this program.  If not, see <A HREF="http://www.gnu.org/licenses/.">http://www.gnu.org/licenses/.</A>
 +
 +NX_LIBS=/usr/lib/nx
-+LD_LIBRARY_PATH=/usr/lib/nx:/usr/lib/nx/X11:$LD_LIBRARY_PATH
++NX_LOCAL_LIBS=/usr/local/lib/nx
++LD_LIBRARY_PATH=$NX_LIBS:$NX_LIBS/X11:$NX_LOCAL_LIBS:$NX_LOCAL_LIBS/X11:$LD_LIBRARY_PATH
 +
-+export NX_LIBS
++test -d NX_LIBS &amp;&amp; export NX_LIBS || export NX_LIBS=$NX_LOCAL_LIBS
 +export LD_LIBRARY_PATH
 +
-+exec /usr/lib/nx/nxproxy &quot;$@&quot;
++exec $NX_LIBS/nxproxy &quot;$@&quot;
diff --git a/debian/patches/023_add-x2goagent-wrapper.patch b/debian/patches/023_add-x2goagent-wrapper.patch
index ca53fde..ca7d92e 100644
--- a/debian/patches/023_add-x2goagent-wrapper.patch
+++ b/debian/patches/023_add-x2goagent-wrapper.patch
@@ -19,9 +19,10 @@
 +# along with this program.  If not, see <A HREF="http://www.gnu.org/licenses/.">http://www.gnu.org/licenses/.</A>
 +
 +NX_LIBS=/usr/lib/nx
-+LD_LIBRARY_PATH=/usr/lib/nx:/usr/lib/nx/X11:$LD_LIBRARY_PATH
++NX_LOCAL_LIBS=/usr/local/lib/nx
++LD_LIBRARY_PATH=$NX_LIBS:$NX_LIBS/X11:$NX_LOCAL_LIBS:$NX_LOCAL_LIBS/X11:$LD_LIBRARY_PATH
 +
-+export NX_LIBS
++test -d NX_LIBS &amp;&amp; export NX_LIBS || export NX_LIBS=$NX_LOCAL_LIBS
 +export LD_LIBRARY_PATH
 +
-+exec /usr/lib/nx/x2goagent &quot;$@&quot;
++exec $NX_LIBS/../x2go/x2goagent &quot;$@&quot;
diff --git a/debian/patches/101_nxagent_set-rgb-path.patch b/debian/patches/101_nxagent_set-rgb-path.patch
index b77348c..793b19d 100644
--- a/debian/patches/101_nxagent_set-rgb-path.patch
+++ b/debian/patches/101_nxagent_set-rgb-path.patch
@@ -5,7 +5,7 @@ Description: FHS path fix for rgb file
  Originally contributed by Marcelo Boveto Shima &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">marceloshima at gmail.com</A>&gt;.
 Forwarded: not-needed
 Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
-Last-Update: 2011-12-31
+Last-Update: 2012-01-12
 --- a/nx-X11/programs/Xserver/os/oscolor.c
 +++ b/nx-X11/programs/Xserver/os/oscolor.c
 @@ -53,7 +53,7 @@
@@ -13,7 +13,7 @@ Last-Update: 2011-12-31
  #include &lt;unistd.h&gt;
  
 -static char* nxAltRgbPaths[] = {&quot;/usr/NX/share/rgb&quot;, &quot;/usr/share/X11/rgb&quot;, &quot;/etc/X11/rgb&quot;};
-+static char* nxAltRgbPaths[] = {&quot;/usr/share/nx/rgb&quot;, &quot;/usr/NX/share/rgb&quot;, &quot;/usr/share/X11/rgb&quot;, &quot;/etc/X11/rgb&quot;};
++static char* nxAltRgbPaths[] = {&quot;/usr/share/nx/rgb&quot;, &quot;/usr/local/share/nx/rgb&quot;, &quot;/usr/NX/share/rgb&quot;, &quot;/usr/share/X11/rgb&quot;, &quot;/etc/X11/rgb&quot;};
  static char _NXRgbPath[1024];
  
  #endif
diff --git a/debian/patches/102_xserver-xext_set-securitypolicy-path.patch b/debian/patches/102_xserver-xext_set-securitypolicy-path.patch
index 4f43eeb..9d27a37 100644
--- a/debian/patches/102_xserver-xext_set-securitypolicy-path.patch
+++ b/debian/patches/102_xserver-xext_set-securitypolicy-path.patch
@@ -1,11 +1,11 @@
 Description: FHS path fix for SecurityPolicy file
- This patch is needed on Debian only, not reporting this path
- change to upstream.
+ This patch is needed for Tarball installation mode of NX (redistributed)
+ only, not reporting this path change to upstream.
  .
  Originally contributed by Marcelo Boveto Shima &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">marceloshima at gmail.com</A>&gt;.
 Forwarded: not-needed
 Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
-Last-Update: 2011-12-31
+Last-Update: 2012-01-12
 --- a/nx-X11/programs/Xserver/Xext/security.c
 +++ b/nx-X11/programs/Xserver/Xext/security.c
 @@ -86,7 +86,7 @@
@@ -13,7 +13,7 @@ Last-Update: 2011-12-31
  #ifdef NXAGENT_SERVER
  
 -#define NX_ALTERNATIVEPOLICYFILE &quot;/usr/lib/xserver/SecurityPolicy&quot;
-+#define NX_ALTERNATIVEPOLICYFILE &quot;/usr/share/nx/SecurityPolicy&quot;
++#define NX_ALTERNATIVEPOLICYFILE &quot;/usr/local/share/nx/SecurityPolicy&quot;
  
  #endif
  
diff --git a/debian/patches/102_xserver-xext_set-securitypolicy-path.patch b/debian/patches/102a_debian_xserver-xext_set-securitypolicy-path.patch
similarity index 84%
copy from debian/patches/102_xserver-xext_set-securitypolicy-path.patch
copy to debian/patches/102a_debian_xserver-xext_set-securitypolicy-path.patch
index 4f43eeb..0d11f2f 100644
--- a/debian/patches/102_xserver-xext_set-securitypolicy-path.patch
+++ b/debian/patches/102a_debian_xserver-xext_set-securitypolicy-path.patch
@@ -5,14 +5,14 @@ Description: FHS path fix for SecurityPolicy file
  Originally contributed by Marcelo Boveto Shima &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">marceloshima at gmail.com</A>&gt;.
 Forwarded: not-needed
 Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
-Last-Update: 2011-12-31
+Last-Update: 2012-01-12
 --- a/nx-X11/programs/Xserver/Xext/security.c
 +++ b/nx-X11/programs/Xserver/Xext/security.c
 @@ -86,7 +86,7 @@
  
  #ifdef NXAGENT_SERVER
  
--#define NX_ALTERNATIVEPOLICYFILE &quot;/usr/lib/xserver/SecurityPolicy&quot;
+-#define NX_ALTERNATIVEPOLICYFILE &quot;/usr/local/share/nx/SecurityPolicy&quot;
 +#define NX_ALTERNATIVEPOLICYFILE &quot;/usr/share/nx/SecurityPolicy&quot;
  
  #endif
diff --git a/debian/patches/103_nxagent_set-X0-config-path.patch b/debian/patches/103_nxagent_set-X0-config-path.patch
index 485f5fd..eb705ca 100644
--- a/debian/patches/103_nxagent_set-X0-config-path.patch
+++ b/debian/patches/103_nxagent_set-X0-config-path.patch
@@ -1,6 +1,6 @@
 Description: FHS path fix for keyboard config file
- This patch is needed on Debian only, not reporting this path
- addition to upstream.
+ This patch is needed for Tarball installation and on Distros like
+ Debian, not reporting this path addition to upstream.
  .
  Originally contributed by FreeNX Team.
 Forwarded: not-needed
diff --git a/debian/patches/999_nxagent_unbrand-nxagent-brand-x2goagent.patch b/debian/patches/999_nxagent_unbrand-nxagent-brand-x2goagent.patch
index 54e5996..67e4c5d 100644
--- a/debian/patches/999_nxagent_unbrand-nxagent-brand-x2goagent.patch
+++ b/debian/patches/999_nxagent_unbrand-nxagent-brand-x2goagent.patch
@@ -228,47 +228,59 @@ Last-Update: 2012-01-11
    XSetWindowBackgroundPixmap(nxagentDisplay, win, nxagentPixmapLogo);
  
    #ifdef NXAGENT_LOGO_DEBUG
---- a/nx-X11/programs/Xserver/hw/nxagent/Splash.h
-+++ b/nx-X11/programs/Xserver/hw/nxagent/Splash.h
-@@ -33,6 +33,7 @@
- extern int nxagentLogoWhite;
- extern int nxagentLogoRed;
- extern int nxagentLogoBlack;
-+extern int nxagentLogoGray;
- 
- extern Window nxagentSplashWindow;
- 
 --- a/nx-X11/programs/Xserver/hw/nxagent/Display.c
 +++ b/nx-X11/programs/Xserver/hw/nxagent/Display.c
-@@ -1408,6 +1408,7 @@
-     nxagentLogoBlack = 0x000000;
-     nxagentLogoRed   = 0xff0000;
-     nxagentLogoWhite = 0xffffff;
-+    nxagentLogoGray  = 0x222222;
-   }
-   else
-   {
-@@ -1418,6 +1419,7 @@
-     nxagentLogoRed   = nxagentLogoColor(0xff0000);
-     nxagentLogoBlack = nxagentLogoColor(0x000000);
-     nxagentLogoWhite = 0xffffff;
-+    nxagentLogoGray  = nxagentLogoColor(0x222222);
-   }
+@@ -1403,22 +1403,10 @@
+   g = pV.green_mask;
+   b = pV.blue_mask;
+ 
+-  if (!pV.red_mask || !pV.green_mask || !pV.blue_mask)
+-  {
+-    nxagentLogoBlack = 0x000000;
+-    nxagentLogoRed   = 0xff0000;
+-    nxagentLogoWhite = 0xffffff;
+-  }
+-  else
+-  {
+-    for (or=0, off=0x800000; (r&amp;(off&gt;&gt;or)) == 0; or++);
+-    for (og=0, off=0x800000; (g&amp;(off&gt;&gt;og)) == 0; og++);
+-    for (ob=0, off=0x800000; (b&amp;(off&gt;&gt;ob)) == 0; ob++);
+-
+-    nxagentLogoRed   = nxagentLogoColor(0xff0000);
+-    nxagentLogoBlack = nxagentLogoColor(0x000000);
+-    nxagentLogoWhite = 0xffffff;
+-  }
++  nxagentLogoBlack = 0x000000;
++  nxagentLogoRed   = 0xff0000;
++  nxagentLogoWhite = 0xffffff;
++  nxagentLogoGray  = 0x222222;
  
    #ifdef WATCH
-@@ -2678,6 +2680,7 @@
-     nxagentLogoBlack = 0x000000;
-     nxagentLogoRed   = 0xff0000;
-     nxagentLogoWhite = 0xffffff;
-+    nxagentLogoGray  = 0x222222;
-   }
-   else
-   {
-@@ -2688,6 +2691,7 @@
-     nxagentLogoRed   = nxagentLogoColor(0xff0000);
-     nxagentLogoBlack = nxagentLogoColor(0x000000);
-     nxagentLogoWhite = 0xffffff;
-+    nxagentLogoGray  = nxagentLogoColor(0x222222);
-   }
+ 
+@@ -2673,22 +2661,10 @@
+   g = pV.green_mask;
+   b = pV.blue_mask;
+ 
+-  if (!pV.red_mask || !pV.green_mask || !pV.blue_mask)
+-  {
+-    nxagentLogoBlack = 0x000000;
+-    nxagentLogoRed   = 0xff0000;
+-    nxagentLogoWhite = 0xffffff;
+-  }
+-  else
+-  {
+-    for (or=0, off=0x800000; (r&amp;(off&gt;&gt;or)) == 0; or++);
+-    for (og=0, off=0x800000; (g&amp;(off&gt;&gt;og)) == 0; og++);
+-    for (ob=0, off=0x800000; (b&amp;(off&gt;&gt;ob)) == 0; ob++);
+-
+-    nxagentLogoRed   = nxagentLogoColor(0xff0000);
+-    nxagentLogoBlack = nxagentLogoColor(0x000000);
+-    nxagentLogoWhite = 0xffffff;
+-  }
++  nxagentLogoBlack = 0x000000;
++  nxagentLogoRed   = 0xff0000;
++  nxagentLogoWhite = 0xffffff;
++  nxagentLogoGray  = 0x222222;
  
    useXpmIcon = nxagentMakeIcon(nxagentDisplay, &amp;nxagentIconPixmap, &amp;nxagentIconShape);
+ 
diff --git a/debian/patches/series b/debian/patches/series
index 26d3ee8..69901b2 100644
--- a/debian/patches/series
+++ b/debian/patches/series
@@ -14,6 +14,7 @@
 014_nxcompshad_makefile-uninstall.patch
 015_nxproxy_makefile-uninstall.patch
 016_nx-x11_install-location.patch
+016a_debian_nx-X11_install-location.patch
 017_nx-x11_update-autotools-helper-files.patch
 018_nx-x11_update-libtool-ltmain-script.patch
 019_nx-x11_expat-build-against-system-libxmltok.patch
@@ -23,6 +24,7 @@
 023_add-x2goagent-wrapper.patch
 101_nxagent_set-rgb-path.patch
 102_xserver-xext_set-securitypolicy-path.patch
+102a_debian_xserver-xext_set-securitypolicy-path.patch
 103_nxagent_set-X0-config-path.patch
 105_nxagent_export-remote-keyboard-config.patch
 106_nxagent_utf8-copy-clipboard.patch


hooks/post-receive
-- 
nx-libs.git (NX libraries (redistributed))

This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;nx-libs.git&quot; (NX libraries (redistributed)).


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002110.html">[X2go-Commits] nx-libs.git - master (branch) updated:	redist-server/3.5.0.2-10-g8f76198
</A></li>
	<LI>Next message: <A HREF="002112.html">[X2go-Commits] nx-libs.git - master (branch) updated:	redist-server/3.5.0.2-16-g86dc688
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2111">[ date ]</a>
              <a href="thread.html#2111">[ thread ]</a>
              <a href="subject.html#2111">[ subject ]</a>
              <a href="author.html#2111">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/x2go-commits">More information about the X2go-commits
mailing list</a><br>
</body></html>
