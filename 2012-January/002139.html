<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [X2go-Commits] nx-libs.git - build-main (branch) updated:	redist-server/3.5.0.7-2-g8b013ce
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/x2go-commits/2012-January/index.html" >
   <LINK REL="made" HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20nx-libs.git%20-%20build-main%20%28branch%29%20updated%3A%0A%09redist-server/3.5.0.7-2-g8b013ce&In-Reply-To=%3C20120118134526.03F205DB33%40ymir%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002138.html">
   <LINK REL="Next"  HREF="002140.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[X2go-Commits] nx-libs.git - build-main (branch) updated:	redist-server/3.5.0.7-2-g8b013ce</H1>
    <B>X2go dev team</B> 
    <A HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20nx-libs.git%20-%20build-main%20%28branch%29%20updated%3A%0A%09redist-server/3.5.0.7-2-g8b013ce&In-Reply-To=%3C20120118134526.03F205DB33%40ymir%3E"
       TITLE="[X2go-Commits] nx-libs.git - build-main (branch) updated:	redist-server/3.5.0.7-2-g8b013ce">git-admin at x2go.org
       </A><BR>
    <I>Wed Jan 18 14:45:25 CET 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="002138.html">[X2go-Commits] x2goserver.git - master (branch) updated:	3.0.99.9-1-g67d66c5
</A></li>
        <LI>Next message: <A HREF="002140.html">[X2go-Commits] x2goclient.git - master (branch) updated:	3.99.0.3-3-g1d1c255
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2139">[ date ]</a>
              <a href="thread.html#2139">[ thread ]</a>
              <a href="subject.html#2139">[ subject ]</a>
              <a href="author.html#2139">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch, build-main has been updated
       via  8b013ce809a9a01fde6444fb631864eca4ad244f (commit)
       via  e9241fe8c730aa7f0b95b15b34ed5c2bda18b5ad (commit)
       via  d7ecf7214f0df5cd7957264be5249f4cd39f4e6e (commit)
       via  1bd66f19cca344557602aa3640b32e747980f8d3 (commit)
       via  28b2a3a93daaa29a2635fb8ae670eccfe772e3d8 (commit)
       via  8d655bc1a12ce830467d86d131a100397201c98f (commit)
       via  d086c36994b72b134949fc18f80dfa771480dbb9 (commit)
       via  55ee602bbb2b23abdbd2c2072c5cce7956044a11 (commit)
       via  e32a5590f1e59b9332dcaaff04ec194c5f050d84 (commit)
       via  2be056d38759908d20fffc7adfff5d2a8b737eb6 (commit)
       via  fa996b5bc0e46e9b270fb2b5b45ffc1a80331b06 (commit)
       via  fdf0d1ccfaf3d13988ecbbe9306909d056e0bba0 (commit)
       via  a295d73f6203acfdbfb044a69d6402978ce21b37 (commit)
       via  8199a5d2ac5270a52f7855513916b5ce444579d7 (commit)
       via  96cd4325b07e6062175851c1998f2535e6c948f0 (commit)
       via  e40208d7c1ad1c80bf3e591405767a1106efa21f (commit)
       via  86dc688067b0aeb1d3977d26c0499d525cb23d4b (commit)
       via  1bbc9cc9e7fc01105cf0e3d5832e0acce9139495 (commit)
       via  496f31a511374f685df64df07e9c9c936419bb78 (commit)
       via  df8dc83d1341aeec42f488bec79bca95db438b8f (commit)
       via  760c5c07c63798e0e065020456e7514c8dd8b72d (commit)
       via  d6fee9a41fa3ba5db01d46963571a5a039ad1786 (commit)
       via  8f76198c5012a04ca8b5e10c3f133815008178ba (commit)
       via  0d3a820b3ed1f76860cdee8dc0532674d621f1e3 (commit)
       via  d9d49b5d8606df5d400c34726cdc5fb9cccaa47b (commit)
       via  43de8b97236e4fe94d06c2152da732aafaaa32ce (commit)
       via  fdfed536ce4408e19a0b0e4732e3630cd542c051 (commit)
       via  9d99eeb539ccb085dcce4899eed5926f0ea13f92 (commit)
       via  6ae3d7efcc0ad028809c69b6a43a19fdd2d9d100 (commit)
       via  405bc8f259f230947e5fe8341f0bab8f0f88c678 (commit)
       via  19f24873388ce9a2136f8d3fe8145d6ce4576730 (commit)
       via  3744795d3c3b526cd2438b6e9423f8f09b372db1 (commit)
      from  eaea40dec0dc42e78b610837330cf39ca13beb8f (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
-----------------------------------------------------------------------

Summary of changes:
 debian/changelog                                   |   67 +++++
 debian/control                                     |   22 ++
 debian/libnx-mesa-extras-dev.lintian-overrides     |    1 +
 debian/libnx-x11-dev.dirs                          |    1 +
 debian/libnx-x11-dev.install                       |    4 +-
 debian/libnx-x11-dev.lintian-overrides             |    1 +
 debian/libnx-x11.dirs                              |    1 +
 debian/libnx-x11.install                           |    1 +
 debian/libnx-x11.lintian-overrides                 |    1 +
 debian/libxcomp-dev.lintian-overrides              |    1 +
 debian/libxcomp3.lintian-overrides                 |    1 +
 debian/libxcompext-dev.lintian-overrides           |    1 +
 debian/libxcompext3.lintian-overrides              |    3 +-
 debian/libxcompshad-dev.lintian-overrides          |    1 +
 debian/libxcompshad3.lintian-overrides             |    3 +-
 debian/nxagent.lintian-overrides                   |    3 +-
 debian/nxauth.lintian-overrides                    |    3 +-
 debian/nxproxy.lintian-overrides                   |    3 +-
 ...0_add-NX-redistribution-README.full+lite.patch} |    0
 .../patches/001_add-main-makefile.full+lite.patch  |   51 ++++
 debian/patches/001_add-main-makefile.patch         |   51 ----
 ...xcompshad_build-against-nx-x11-only.full.patch} |    0
 ...gcc43.patch =&gt; 003_nxcompshad_gcc43.full.patch} |    0
 ... =&gt; 004_nx-x11_fix-nxcompshad-build.full.patch} |    0
 ...cc43.patch =&gt; 005_nxcomp_gcc43.full+lite.patch} |    0
 ...h =&gt; 007_nxcompshad_clean-gch-files.full.patch} |    0
 ...e.patch =&gt; 009_nxagent-add-man-page.full.patch} |    0
 ...ch =&gt; 009_nxproxy-add-man-page.full+lite.patch} |    0
 ..._nxauth_fix-binary-name-in-man-page.full.patch} |    0
 debian/patches/011_nxcomp_sa-restorer.patch        |   25 --
 ... 012_nxcomp_makefile-uninstall.full+lite.patch} |    0
 ...=&gt; 013_nxcompext_makefile-uninstall.full.patch} |    0
 ...&gt; 014_nxcompshad_makefile-uninstall.full.patch} |    0
 ...015_nxproxy_makefile-uninstall.full+lite.patch} |    0
 .../016_nx-X11_install-location.debian.patch       |   17 ++
 .../patches/016_nx-x11_install-location.full.patch |   32 ++
 debian/patches/016_nx-x11_install-location.patch   |   32 --
 ...x-x11_update-autotools-helper-files.full.patch} |    0
 ...nx-x11_update-libtool-ltmain-script.full.patch} |    0
 ...expat-build-against-system-libxmltok.full.patch |   43 +++
 ...-x11_expat-build-against-system-libxmltok.patch |   43 ---
 debian/patches/020_add-nxagent-wrapper.full.patch  |   28 ++
 debian/patches/020_add-nxagent-wrapper.patch       |   27 --
 debian/patches/021_add-nxauth-wrapper.full.patch   |   28 ++
 debian/patches/021_add-nxauth-wrapper.patch        |   27 --
 .../022_add-nxproxy-wrapper.full+lite.patch        |   28 ++
 debian/patches/022_add-nxproxy-wrapper.patch       |   27 --
 .../patches/023_add-x2goagent-wrapper.full.patch   |   28 ++
 debian/patches/101_nxagent_set-rgb-path.full.patch |   19 ++
 debian/patches/101_nxagent_set-rgb-path.patch      |   19 --
 ...erver-xext_set-securitypolicy-path.debian.patch |   19 ++
 ...xserver-xext_set-securitypolicy-path.full.patch |   19 ++
 .../102_xserver-xext_set-securitypolicy-path.patch |   19 --
 .../103_nxagent_set-X0-config-path.full.patch      |   40 +++
 .../patches/103_nxagent_set-X0-config-path.patch   |   40 ---
 ...agent_export-remote-keyboard-config.full.patch} |    0
 ... =&gt; 106_nxagent_utf8-copy-clipboard.full.patch} |    0
 ...oard-compound-text+small-bed-sheets.full.patch} |    0
 ...tch =&gt; 108_nxagent_wine-close-delay.full.patch} |    0
 ...9_nxagent_locale-utf8-compound-text.full.patch} |    0
 ...0_nxagent_createpixmap-bounds-check.full.patch} |    0
 ...00_nxagent_check-binary-x2go-flavour.full.patch |   64 +++++
 debian/patches/200_nxagent_unbrand-agent.patch     |   61 ----
 ...t_set-x2go-icon-if-x2goagent-flavour.full.patch |  220 +++++++++++++++
 .../patches/202_nx-x11_enable-xinerama.full.patch  |  268 ++++++++++++++++++
 .../patches/209_x2goagent-add-man-page.full.patch  |   38 +++
 debian/patches/300_nxagent_set-wm-class.full.patch |   60 ++++
 ...gent_unbrand-nxagent-brand-x2goagent.full.patch |  296 ++++++++++++++++++++
 debian/patches/series                              |   72 +++--
 debian/source.lintian-overrides                    |    1 +
 debian/x2goagent.dirs                              |    3 +
 debian/x2goagent.install                           |    3 +
 debian/x2goagent.links                             |    1 +
 debian/x2goagent.lintian-overrides                 |    1 +
 debian/x2goagent.manpages                          |    1 +
 75 files changed, 1460 insertions(+), 409 deletions(-)
 rename debian/patches/{000_add-NX-redistribution-README.patch =&gt; 000_add-NX-redistribution-README.full+lite.patch} (100%)
 create mode 100644 debian/patches/001_add-main-makefile.full+lite.patch
 delete mode 100644 debian/patches/001_add-main-makefile.patch
 rename debian/patches/{002_nxcompshad_build-against-nx-x11-only.patch =&gt; 002_nxcompshad_build-against-nx-x11-only.full.patch} (100%)
 rename debian/patches/{003_nxcompshad_gcc43.patch =&gt; 003_nxcompshad_gcc43.full.patch} (100%)
 rename debian/patches/{004_nx-x11_fix-nxcompshad-build.patch =&gt; 004_nx-x11_fix-nxcompshad-build.full.patch} (100%)
 rename debian/patches/{005_nxcomp_gcc43.patch =&gt; 005_nxcomp_gcc43.full+lite.patch} (100%)
 rename debian/patches/{007_nxcompshad_clean-gch-files.patch =&gt; 007_nxcompshad_clean-gch-files.full.patch} (100%)
 rename debian/patches/{009_nxagent-add-man-page.patch =&gt; 009_nxagent-add-man-page.full.patch} (100%)
 rename debian/patches/{009_nxproxy-add-man-page.patch =&gt; 009_nxproxy-add-man-page.full+lite.patch} (100%)
 rename debian/patches/{010_nxauth_fix-binary-name-in-man-page.patch =&gt; 010_nxauth_fix-binary-name-in-man-page.full.patch} (100%)
 delete mode 100644 debian/patches/011_nxcomp_sa-restorer.patch
 rename debian/patches/{012_nxcomp_makefile-uninstall.patch =&gt; 012_nxcomp_makefile-uninstall.full+lite.patch} (100%)
 rename debian/patches/{013_nxcompext_makefile-uninstall.patch =&gt; 013_nxcompext_makefile-uninstall.full.patch} (100%)
 rename debian/patches/{014_nxcompshad_makefile-uninstall.patch =&gt; 014_nxcompshad_makefile-uninstall.full.patch} (100%)
 rename debian/patches/{015_nxproxy_makefile-uninstall.patch =&gt; 015_nxproxy_makefile-uninstall.full+lite.patch} (100%)
 create mode 100644 debian/patches/016_nx-X11_install-location.debian.patch
 create mode 100644 debian/patches/016_nx-x11_install-location.full.patch
 delete mode 100644 debian/patches/016_nx-x11_install-location.patch
 rename debian/patches/{017_nx-x11_update-autotools-helper-files.patch =&gt; 017_nx-x11_update-autotools-helper-files.full.patch} (100%)
 rename debian/patches/{018_nx-x11_update-libtool-ltmain-script.patch =&gt; 018_nx-x11_update-libtool-ltmain-script.full.patch} (100%)
 create mode 100644 debian/patches/019_nx-x11_expat-build-against-system-libxmltok.full.patch
 delete mode 100644 debian/patches/019_nx-x11_expat-build-against-system-libxmltok.patch
 create mode 100644 debian/patches/020_add-nxagent-wrapper.full.patch
 delete mode 100644 debian/patches/020_add-nxagent-wrapper.patch
 create mode 100644 debian/patches/021_add-nxauth-wrapper.full.patch
 delete mode 100644 debian/patches/021_add-nxauth-wrapper.patch
 create mode 100644 debian/patches/022_add-nxproxy-wrapper.full+lite.patch
 delete mode 100644 debian/patches/022_add-nxproxy-wrapper.patch
 create mode 100644 debian/patches/023_add-x2goagent-wrapper.full.patch
 create mode 100644 debian/patches/101_nxagent_set-rgb-path.full.patch
 delete mode 100644 debian/patches/101_nxagent_set-rgb-path.patch
 create mode 100644 debian/patches/102_xserver-xext_set-securitypolicy-path.debian.patch
 create mode 100644 debian/patches/102_xserver-xext_set-securitypolicy-path.full.patch
 delete mode 100644 debian/patches/102_xserver-xext_set-securitypolicy-path.patch
 create mode 100644 debian/patches/103_nxagent_set-X0-config-path.full.patch
 delete mode 100644 debian/patches/103_nxagent_set-X0-config-path.patch
 rename debian/patches/{105_nxagent_export-remote-keyboard-config.patch =&gt; 105_nxagent_export-remote-keyboard-config.full.patch} (100%)
 rename debian/patches/{106_nxagent_utf8-copy-clipboard.patch =&gt; 106_nxagent_utf8-copy-clipboard.full.patch} (100%)
 rename debian/patches/{107_nxagent_clipboard-compound-text+small-bed-sheets.patch =&gt; 107_nxagent_clipboard-compound-text+small-bed-sheets.full.patch} (100%)
 rename debian/patches/{108_nxagent_wine-close-delay.patch =&gt; 108_nxagent_wine-close-delay.full.patch} (100%)
 rename debian/patches/{109_nxagent_locale-utf8-compound-text.patch =&gt; 109_nxagent_locale-utf8-compound-text.full.patch} (100%)
 rename debian/patches/{110_nxagent_createpixmap-bounds-check.patch =&gt; 110_nxagent_createpixmap-bounds-check.full.patch} (100%)
 create mode 100644 debian/patches/200_nxagent_check-binary-x2go-flavour.full.patch
 delete mode 100644 debian/patches/200_nxagent_unbrand-agent.patch
 create mode 100644 debian/patches/201_nxagent_set-x2go-icon-if-x2goagent-flavour.full.patch
 create mode 100644 debian/patches/202_nx-x11_enable-xinerama.full.patch
 create mode 100644 debian/patches/209_x2goagent-add-man-page.full.patch
 create mode 100644 debian/patches/300_nxagent_set-wm-class.full.patch
 create mode 100644 debian/patches/999_nxagent_unbrand-nxagent-brand-x2goagent.full.patch
 create mode 100644 debian/x2goagent.dirs
 create mode 100644 debian/x2goagent.install
 create mode 100644 debian/x2goagent.links
 create mode 100644 debian/x2goagent.lintian-overrides
 create mode 100644 debian/x2goagent.manpages

The diff of changes is:
diff --git a/debian/changelog b/debian/changelog
index e0e37b7..72fb0f7 100644
--- a/debian/changelog
+++ b/debian/changelog
@@ -1,3 +1,70 @@
+nx-libs (2:3.5.0.8-0) UNRELEASED; urgency=low
+
+  * Reorganize patch names, to reflect patch inclusion into lite+full or
+    full-only ,,NX (redistributed)'' tarball.
+  * Update patch: 001_add-main-makefile.full+lite.patch, only build, install,
+    clean etc. NX subprojects if the folder exists.
+
+ -- Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;  Mon, 16 Jan 2012 22:28:13 +0100
+
+nx-libs (2:3.5.0.7-0) unstable; urgency=low
+
+  * Drop patch: 011_nxcomp_sa-restorer.patch.
+
+ -- Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;  Mon, 16 Jan 2012 11:28:14 +0100
+
+nx-libs (2:3.5.0.6-0) unstable; urgency=low
+
+  * Add patch: 202_nx-x11_enable-xinerama.patch.
+  * Fix lintian issue: missing-separator-between-items for x2goagent package.
+    Drop dependency on libnx-x11 as we already depend on nxagent and fix
+    description synopsis of x2goagent package.
+  * Add patch header/copyright to: 202_nx-x11_enable-xinerama.patch.
+  * Silence lintian on debian-revision-should-not-be-zero. As this is no Debian
+    packaging repository, but ,,NX (redistributed)'', we will always release
+    with rev no. set to ,,0''.
+  * Install libXinerama into libnx-x11 package. Header files into
+    libnx-x11-dev.
+
+ -- Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;  Fri, 13 Jan 2012 13:21:41 +0100
+
+nx-libs (2:3.5.0.5-0) unstable; urgency=low
+
+  * Fix wrapper script patches for nxagent, x2goagent, nxauth, nxproxy.
+
+ -- Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;  Fri, 13 Jan 2012 00:37:21 +0100
+
+nx-libs (2:3.5.0.4-0) unstable; urgency=low
+
+  * Update/fix patch: 999_nxagent_unbrand-nxagent-brand-x2goagent.patch.
+
+ -- Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;  Thu, 12 Jan 2012 23:04:37 +0100
+
+nx-libs (2:3.5.0.3-0) unstable; urgency=low
+
+  * Rename nxagent-unbrand patch, so that is the last patch to be applied
+    (999_&lt;patchname&gt;).
+  * Drop NX agent unbrand patch from FreeNX.
+  * Add X2Go agent / NX agent flavouring via patch system:
+    - 200_nxagent_check-binary-x2go-flavour.patch
+    - 201_nxagent_set-x2go-icon-if-x2goagent-flavour.patch
+    - 300_nxagent_set-wm-class.patch
+    - 999_nxagent_unbrand-nxagent-brand-x2goagent.patch
+  * Add patch: 023_add-x2goagent-wrapper.patch.
+  * Add patch: 209_x2goagent-add-man-page.patch.
+  * Add binary package: x2goagent, includes man page
+    patch: 209_x2goagent-add-man-page.patch
+  * Modify patch: 101_nxagent_set-rgb-path.patch, add path to RGB file
+    if NX (redistributed) is installed via tarball under /usr/local.
+  * Provide patches that are tarball / distro aware. Either NX (redistributed)
+    has been installed to /usr/local/lib/nx via tarball or it has been
+    packaged for a distribution and is installed to /usr/lib/nx. Other
+    installation paths are currently not supported.
+  * Fix RGB color pallette (gray X2GO logo to be more accurate) for agent
+    splash screen.
+
+ -- Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;  Thu, 12 Jan 2012 13:04:03 +0100
+
 nx-libs (2:3.5.0.2-0) unstable; urgency=low
 
   * Re-add binary wrapper scripts to the patch system as we
diff --git a/debian/control b/debian/control
index 82cf2ae..383f7e9 100644
--- a/debian/control
+++ b/debian/control
@@ -94,6 +94,28 @@ Description: NX agent
  requests locally, ensuring that the most common source of round-trips are
  nearly reduced to zero.
 
+Package: x2goagent
+Architecture: any
+Depends:
+ nxagent (&gt;= ${source:Version}),
+ ${misc:Depends}
+Suggests:
+ x2goserver
+Description: X2Go agent
+ X2Go is a software suite that uses NX technology for remote desktop
+ computing.
+ .
+ NX technology implements a very efficient compression of the X11 protocol.
+ This increases performance when using X applications over a network,
+ especially a slow one.
+ .
+ X2Go agent functionality has been completely incorporated into NX agent's
+ code base. If the nxagent binary is executed under the name of `x2goagent',
+ the X2Go functionalities get activated.
+ .
+ The x2goagent package is a wrapper that activates X2Go branding in nxagent.
+ Please refer to the nxagent package's description for more information on NX.
+
 Package: nxproxy
 Architecture: any
 Depends:
diff --git a/debian/libnx-mesa-extras-dev.lintian-overrides b/debian/libnx-mesa-extras-dev.lintian-overrides
index 3ecbd16..6646530 100644
--- a/debian/libnx-mesa-extras-dev.lintian-overrides
+++ b/debian/libnx-mesa-extras-dev.lintian-overrides
@@ -1 +1,2 @@
 libnx-mesa-extras-dev: possible-new-upstream-release-without-new-version
+libnx-mesa-extras-dev: debian-revision-should-not-be-zero
diff --git a/debian/libnx-x11-dev.dirs b/debian/libnx-x11-dev.dirs
index 8107c38..4496244 100644
--- a/debian/libnx-x11-dev.dirs
+++ b/debian/libnx-x11-dev.dirs
@@ -1 +1,2 @@
 usr/include/nx/X11
+usr/include/nx/X11/extensions
diff --git a/debian/libnx-x11-dev.install b/debian/libnx-x11-dev.install
index 0855739..2bf6c52 100644
--- a/debian/libnx-x11-dev.install
+++ b/debian/libnx-x11-dev.install
@@ -1,2 +1,4 @@
-nx-X11/.build-exports/include/*           usr/include/nx/
+nx-X11/.build-exports/include/*           usr/include/nx/X11/
+nx-X11/include/extensions/Xinerama.h      usr/include/nx/X11/extensions/
+
 
diff --git a/debian/libnx-x11-dev.lintian-overrides b/debian/libnx-x11-dev.lintian-overrides
index a4bbdce..299bded 100644
--- a/debian/libnx-x11-dev.lintian-overrides
+++ b/debian/libnx-x11-dev.lintian-overrides
@@ -1 +1,2 @@
 libnx-x11-dev: possible-new-upstream-release-without-new-version
+libnx-x11-dev: debian-revision-should-not-be-zero
\ No newline at end of file
diff --git a/debian/libnx-x11.dirs b/debian/libnx-x11.dirs
index fb609cc..88b4679 100644
--- a/debian/libnx-x11.dirs
+++ b/debian/libnx-x11.dirs
@@ -1,2 +1,3 @@
 usr/lib/nx/X11
+usr/lib/nx/X11/Xinerama
 usr/share/nx
diff --git a/debian/libnx-x11.install b/debian/libnx-x11.install
index 7838d08..cfe4cff 100644
--- a/debian/libnx-x11.install
+++ b/debian/libnx-x11.install
@@ -1,2 +1,3 @@
 nx-X11/.build-exports/lib/*                     usr/lib/nx/X11
+nx-X11/lib/Xinerama/libXinerama.so*             usr/lib/nx/X11/Xinerama
 nx-X11/programs/Xserver/Xext/SecurityPolicy     usr/share/nx
diff --git a/debian/libnx-x11.lintian-overrides b/debian/libnx-x11.lintian-overrides
index e89634d..b462ee4 100644
--- a/debian/libnx-x11.lintian-overrides
+++ b/debian/libnx-x11.lintian-overrides
@@ -1,3 +1,4 @@
 libnx-x11: possible-new-upstream-release-without-new-version
 libnx-x11: postinst-has-useless-call-to-ldconfig
 libnx-x11: postrm-has-useless-call-to-ldconfig
+libnx-x11: debian-revision-should-not-be-zero
diff --git a/debian/libxcomp-dev.lintian-overrides b/debian/libxcomp-dev.lintian-overrides
index e49d5c6..a19d92b 100644
--- a/debian/libxcomp-dev.lintian-overrides
+++ b/debian/libxcomp-dev.lintian-overrides
@@ -1,2 +1,3 @@
 libxcomp-dev: possible-new-upstream-release-without-new-version
+libxcomp-dev: debian-revision-should-not-be-zero
 
diff --git a/debian/libxcomp3.lintian-overrides b/debian/libxcomp3.lintian-overrides
index 6cf797d..e8bee05 100644
--- a/debian/libxcomp3.lintian-overrides
+++ b/debian/libxcomp3.lintian-overrides
@@ -1 +1,2 @@
 libxcomp3: possible-new-upstream-release-without-new-version
+libxcomp3: debian-revision-should-not-be-zero
diff --git a/debian/libxcompext-dev.lintian-overrides b/debian/libxcompext-dev.lintian-overrides
index 78e8d39..d1390c2 100644
--- a/debian/libxcompext-dev.lintian-overrides
+++ b/debian/libxcompext-dev.lintian-overrides
@@ -1,2 +1,3 @@
 libxcompext-dev: possible-new-upstream-release-without-new-version
+libxcompext-dev: debian-revision-should-not-be-zero
 
diff --git a/debian/libxcompext3.lintian-overrides b/debian/libxcompext3.lintian-overrides
index 8015a70..a6856ec 100644
--- a/debian/libxcompext3.lintian-overrides
+++ b/debian/libxcompext3.lintian-overrides
@@ -1 +1,2 @@
-libxcompext3: possible-new-upstream-release-without-new-version
\ No newline at end of file
+libxcompext3: possible-new-upstream-release-without-new-version
+libxcompext3: debian-revision-should-not-be-zero
\ No newline at end of file
diff --git a/debian/libxcompshad-dev.lintian-overrides b/debian/libxcompshad-dev.lintian-overrides
index ee4ac5b..4569b64 100644
--- a/debian/libxcompshad-dev.lintian-overrides
+++ b/debian/libxcompshad-dev.lintian-overrides
@@ -1,2 +1,3 @@
 libxcompshad-dev: possible-new-upstream-release-without-new-version
+libxcompshad-dev: debian-revision-should-not-be-zero
 
diff --git a/debian/libxcompshad3.lintian-overrides b/debian/libxcompshad3.lintian-overrides
index f35d410..3f14de9 100644
--- a/debian/libxcompshad3.lintian-overrides
+++ b/debian/libxcompshad3.lintian-overrides
@@ -1 +1,2 @@
-libxcompshad3: possible-new-upstream-release-without-new-version
\ No newline at end of file
+libxcompshad3: possible-new-upstream-release-without-new-version
+libxcompshad3: debian-revision-should-not-be-zero
\ No newline at end of file
diff --git a/debian/nxagent.lintian-overrides b/debian/nxagent.lintian-overrides
index d7e9cb5..b937ae4 100644
--- a/debian/nxagent.lintian-overrides
+++ b/debian/nxagent.lintian-overrides
@@ -1 +1,2 @@
-nxagent: possible-new-upstream-release-without-new-version
\ No newline at end of file
+nxagent: possible-new-upstream-release-without-new-version
+nxagent: debian-revision-should-not-be-zero
\ No newline at end of file
diff --git a/debian/nxauth.lintian-overrides b/debian/nxauth.lintian-overrides
index 4afde1d..0dd32c3 100644
--- a/debian/nxauth.lintian-overrides
+++ b/debian/nxauth.lintian-overrides
@@ -1 +1,2 @@
-nxauth: possible-new-upstream-release-without-new-version
\ No newline at end of file
+nxauth: possible-new-upstream-release-without-new-version
+nxauth: debian-revision-should-not-be-zero
\ No newline at end of file
diff --git a/debian/nxproxy.lintian-overrides b/debian/nxproxy.lintian-overrides
index d43c263..21fd7e4 100644
--- a/debian/nxproxy.lintian-overrides
+++ b/debian/nxproxy.lintian-overrides
@@ -1 +1,2 @@
-nxproxy: possible-new-upstream-release-without-new-version
\ No newline at end of file
+nxproxy: possible-new-upstream-release-without-new-version
+nxproxy: debian-revision-should-not-be-zero
\ No newline at end of file
diff --git a/debian/patches/000_add-NX-redistribution-README.patch b/debian/patches/000_add-NX-redistribution-README.full+lite.patch
similarity index 100%
rename from debian/patches/000_add-NX-redistribution-README.patch
rename to debian/patches/000_add-NX-redistribution-README.full+lite.patch
diff --git a/debian/patches/001_add-main-makefile.full+lite.patch b/debian/patches/001_add-main-makefile.full+lite.patch
new file mode 100644
index 0000000..533ce7e
--- /dev/null
+++ b/debian/patches/001_add-main-makefile.full+lite.patch
@@ -0,0 +1,51 @@
+Description: Provide main Makefile for whole source tree
+ By design this patch is not needed to be sent upstream.
+Forwarded: not-needed
+Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
+Last-Update: 2011-12-31
+--- /dev/null
++++ b/Makefile
+@@ -0,0 +1,43 @@
++#!/usr/bin/make -f
++
++all: build
++
++build: build-arch build-indep
++
++clean:
++	test -d nx-X11 &amp;&amp; cd nx-X11 &amp;&amp; test -f Makefile &amp;&amp; make $@ || true
++	test -d nxcomp &amp;&amp; cd nxcomp &amp;&amp; test -f Makefile &amp;&amp; make $@ || true
++	test -d nxcompext &amp;&amp; cd nxcompext &amp;&amp; test -f Makefile &amp;&amp; make $@ || true
++	test -d nxcompshad &amp;&amp; cd nxcompshad &amp;&amp; test -f Makefile &amp;&amp; make $@ || true
++	test -d nxproxy &amp;&amp; cd nxproxy &amp;&amp; test -f Makefile &amp;&amp; make $@ || true
++
++
++distclean:
++	test -d nx-X11 &amp;&amp; cd nx-X11 &amp;&amp; test -f Makefile &amp;&amp; make $@ || true
++	test -d nxcomp &amp;&amp; cd nxcomp &amp;&amp; test -f Makefile &amp;&amp; make $@ || true
++	test -d nxcompext &amp;&amp; cd nxcompext &amp;&amp; test -f Makefile &amp;&amp; make $@ || true
++	test -d nxcompshad &amp;&amp; cd nxcompshad &amp;&amp; test -f Makefile &amp;&amp; make $@ || true
++	test -d nxproxy &amp;&amp; cd nxproxy &amp;&amp; test -f Makefile &amp;&amp; make $@ || true
++
++build-arch:
++	test -d nxcomp &amp;&amp; cd nxcomp &amp;&amp; autoconf
++	test -d nxcompext &amp;&amp; cd nxcompext &amp;&amp; autoconf
++	test -d nxcompshad &amp;&amp; cd nxcompshad &amp;&amp; autoconf
++	test -d nx-X11 &amp;&amp; cd nx-X11 &amp;&amp; make World
++	test -d nxproxy &amp;&amp; cd nxproxy &amp;&amp; autoconf &amp;&amp; ./configure &amp;&amp; make
++
++build-indep:
++
++install:
++	test -d nxcomp &amp;&amp; cd nxcomp &amp;&amp; make install
++	test -d nxcompext &amp;&amp; cd nxcompext &amp;&amp; make install
++	test -d nxcompshad &amp;&amp; cd nxcompshad &amp;&amp; make install
++	test -d nx-X11 &amp;&amp; cd nx-X11 &amp;&amp; make install
++	test -d nxproxy &amp;&amp; cd nxproxy &amp;&amp; make install
++
++uninstall:
++	test -d nxcomp &amp;&amp; cd nxcomp &amp;&amp; make uninstall
++	test -d nxcompext &amp;&amp; cd nxcompext &amp;&amp; make uninstall
++	test -d nxcompshad &amp;&amp; cd nxcompshad &amp;&amp; make uninstall
++	test -d nx-X11 &amp;&amp; cd nx-X11 &amp;&amp; make uninstall
++	test -d nxproxy &amp;&amp; cd nxproxy &amp;&amp; make uninstall
diff --git a/debian/patches/001_add-main-makefile.patch b/debian/patches/001_add-main-makefile.patch
deleted file mode 100644
index df3f4e7..0000000
--- a/debian/patches/001_add-main-makefile.patch
+++ /dev/null
@@ -1,51 +0,0 @@
-Description: Provide main Makefile for whole source tree
- By design this patch is not needed to be sent upstream.
-Forwarded: not-needed
-Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
-Last-Update: 2011-12-31
---- /dev/null
-+++ b/Makefile
-@@ -0,0 +1,43 @@
-+#!/usr/bin/make -f
-+
-+all: build
-+
-+build: build-arch build-indep
-+
-+clean:
-+	cd nx-X11 &amp;&amp; test -f Makefile &amp;&amp; make $@ || true
-+	cd nxcomp &amp;&amp; test -f Makefile &amp;&amp; make $@ || true
-+	cd nxcompext &amp;&amp; test -f Makefile &amp;&amp; make $@ || true
-+	cd nxcompshad &amp;&amp; test -f Makefile &amp;&amp; make $@ || true
-+	cd nxproxy &amp;&amp; test -f Makefile &amp;&amp; make $@ || true
-+
-+
-+distclean:
-+	cd nx-X11 &amp;&amp; test -f Makefile &amp;&amp; make $@ || true
-+	cd nxcomp &amp;&amp; test -f Makefile &amp;&amp; make $@ || true
-+	cd nxcompext &amp;&amp; test -f Makefile &amp;&amp; make $@ || true
-+	cd nxcompshad &amp;&amp; test -f Makefile &amp;&amp; make $@ || true
-+	cd nxproxy &amp;&amp; test -f Makefile &amp;&amp; make $@ || true
-+
-+build-arch:
-+	cd nxcomp &amp;&amp; autoconf
-+	cd nxcompext &amp;&amp; autoconf
-+	cd nxcompshad &amp;&amp; autoconf
-+	cd nx-X11 &amp;&amp; make World
-+	cd nxproxy &amp;&amp; autoconf &amp;&amp; ./configure &amp;&amp; make
-+
-+build-indep:
-+
-+install:
-+	cd nxcomp &amp;&amp; make install
-+	cd nxcompext &amp;&amp; make install
-+	cd nxcompshad &amp;&amp; make install
-+	cd nx-X11 &amp;&amp; make install
-+	cd nxproxy &amp;&amp; make install
-+
-+uninstall:
-+	cd nxcomp &amp;&amp; make uninstall
-+	cd nxcompext &amp;&amp; make uninstall
-+	cd nxcompshad &amp;&amp; make uninstall
-+	cd nx-X11 &amp;&amp; make uninstall
-+	cd nxproxy &amp;&amp; make uninstall
diff --git a/debian/patches/002_nxcompshad_build-against-nx-x11-only.patch b/debian/patches/002_nxcompshad_build-against-nx-x11-only.full.patch
similarity index 100%
rename from debian/patches/002_nxcompshad_build-against-nx-x11-only.patch
rename to debian/patches/002_nxcompshad_build-against-nx-x11-only.full.patch
diff --git a/debian/patches/003_nxcompshad_gcc43.patch b/debian/patches/003_nxcompshad_gcc43.full.patch
similarity index 100%
rename from debian/patches/003_nxcompshad_gcc43.patch
rename to debian/patches/003_nxcompshad_gcc43.full.patch
diff --git a/debian/patches/004_nx-x11_fix-nxcompshad-build.patch b/debian/patches/004_nx-x11_fix-nxcompshad-build.full.patch
similarity index 100%
rename from debian/patches/004_nx-x11_fix-nxcompshad-build.patch
rename to debian/patches/004_nx-x11_fix-nxcompshad-build.full.patch
diff --git a/debian/patches/005_nxcomp_gcc43.patch b/debian/patches/005_nxcomp_gcc43.full+lite.patch
similarity index 100%
rename from debian/patches/005_nxcomp_gcc43.patch
rename to debian/patches/005_nxcomp_gcc43.full+lite.patch
diff --git a/debian/patches/007_nxcompshad_clean-gch-files.patch b/debian/patches/007_nxcompshad_clean-gch-files.full.patch
similarity index 100%
rename from debian/patches/007_nxcompshad_clean-gch-files.patch
rename to debian/patches/007_nxcompshad_clean-gch-files.full.patch
diff --git a/debian/patches/009_nxagent-add-man-page.patch b/debian/patches/009_nxagent-add-man-page.full.patch
similarity index 100%
rename from debian/patches/009_nxagent-add-man-page.patch
rename to debian/patches/009_nxagent-add-man-page.full.patch
diff --git a/debian/patches/009_nxproxy-add-man-page.patch b/debian/patches/009_nxproxy-add-man-page.full+lite.patch
similarity index 100%
rename from debian/patches/009_nxproxy-add-man-page.patch
rename to debian/patches/009_nxproxy-add-man-page.full+lite.patch
diff --git a/debian/patches/010_nxauth_fix-binary-name-in-man-page.patch b/debian/patches/010_nxauth_fix-binary-name-in-man-page.full.patch
similarity index 100%
rename from debian/patches/010_nxauth_fix-binary-name-in-man-page.patch
rename to debian/patches/010_nxauth_fix-binary-name-in-man-page.full.patch
diff --git a/debian/patches/011_nxcomp_sa-restorer.patch b/debian/patches/011_nxcomp_sa-restorer.patch
deleted file mode 100644
index afaa29f..0000000
--- a/debian/patches/011_nxcomp_sa-restorer.patch
+++ /dev/null
@@ -1,25 +0,0 @@
-Description: sa_restorer vs. memset
- Use memset instead of setting .sa_restorer to NULL.
-Forwarded: not-yet
-Author: St&#233;phane Graber &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">stgraber at ubuntu.com</A>&gt;
-Last-Update: 2011-12-31
---- a/nxcomp/Loop.cpp
-+++ b/nxcomp/Loop.cpp
-@@ -5895,7 +5895,7 @@
- 
-   #if defined(__linux__)
- 
--  newAction.sa_restorer = NULL;
-+  memset(&amp;newAction, NULL, sizeof(newAction));
- 
-   #endif
- 
-@@ -6513,7 +6513,7 @@
- 
-   #if defined(__linux__)
- 
--  action.sa_restorer = NULL;
-+  memset(&amp;action, NULL, sizeof(action));
- 
-   #endif
- 
diff --git a/debian/patches/012_nxcomp_makefile-uninstall.patch b/debian/patches/012_nxcomp_makefile-uninstall.full+lite.patch
similarity index 100%
rename from debian/patches/012_nxcomp_makefile-uninstall.patch
rename to debian/patches/012_nxcomp_makefile-uninstall.full+lite.patch
diff --git a/debian/patches/013_nxcompext_makefile-uninstall.patch b/debian/patches/013_nxcompext_makefile-uninstall.full.patch
similarity index 100%
rename from debian/patches/013_nxcompext_makefile-uninstall.patch
rename to debian/patches/013_nxcompext_makefile-uninstall.full.patch
diff --git a/debian/patches/014_nxcompshad_makefile-uninstall.patch b/debian/patches/014_nxcompshad_makefile-uninstall.full.patch
similarity index 100%
rename from debian/patches/014_nxcompshad_makefile-uninstall.patch
rename to debian/patches/014_nxcompshad_makefile-uninstall.full.patch
diff --git a/debian/patches/015_nxproxy_makefile-uninstall.patch b/debian/patches/015_nxproxy_makefile-uninstall.full+lite.patch
similarity index 100%
rename from debian/patches/015_nxproxy_makefile-uninstall.patch
rename to debian/patches/015_nxproxy_makefile-uninstall.full+lite.patch
diff --git a/debian/patches/016_nx-X11_install-location.debian.patch b/debian/patches/016_nx-X11_install-location.debian.patch
new file mode 100644
index 0000000..9d4fe1b
--- /dev/null
+++ b/debian/patches/016_nx-X11_install-location.debian.patch
@@ -0,0 +1,17 @@
+Description: FHS adaptation for Debian packaging
+ On Debian, NX libraries and binaries are installed to
+ /usr/lib/nx.
+Forwarded: not-needed
+Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
+Last-Update: 2012-12-31
+--- a/nx-X11/config/cf/Imake.tmpl
++++ b/nx-X11/config/cf/Imake.tmpl
+@@ -825,7 +825,7 @@
+ #define AlternateUsrLibDir YES
+ #endif
+ #else
+-#define UsrLibDir Concat4(/usr/local,/,LibDirName,/nx)
++#define UsrLibDir Concat4(/usr,/,LibDirName,/nx)
+ #ifndef AlternateUsrLibDir
+ #define AlternateUsrLibDir NO
+ #endif
diff --git a/debian/patches/016_nx-x11_install-location.full.patch b/debian/patches/016_nx-x11_install-location.full.patch
new file mode 100644
index 0000000..0231bcb
--- /dev/null
+++ b/debian/patches/016_nx-x11_install-location.full.patch
@@ -0,0 +1,32 @@
+Description: FHS adaptation for Debian packaging
+ From tarball, NX libraries and binaries are installed to
+ /usr/local/lib/nx.
+Forwarded: not-needed
+Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
+Last-Update: 2012-12-31
+--- a/nx-X11/config/cf/Imake.tmpl
++++ b/nx-X11/config/cf/Imake.tmpl
+@@ -820,12 +820,12 @@
+ 
+ #ifndef UsrLibDir
+ #ifdef ProjectRoot
+-#define UsrLibDir Concat3(ProjectRoot,/,LibDirName)
++#define UsrLibDir Concat4(ProjectRoot,/,LibDirName,/nx)
+ #ifndef AlternateUsrLibDir
+ #define AlternateUsrLibDir YES
+ #endif
+ #else
+-#define UsrLibDir Concat3(/usr,/,LibDirName)
++#define UsrLibDir Concat4(/usr/local,/,LibDirName,/nx)
+ #ifndef AlternateUsrLibDir
+ #define AlternateUsrLibDir NO
+ #endif
+@@ -863,7 +863,7 @@
+ #endif
+ #ifndef IncRoot
+ #ifdef ProjectRoot
+-#define IncRoot Concat(ProjectRoot,/include)
++#define IncRoot Concat(ProjectRoot,/include/nx)
+ #ifndef AlternateIncRoot
+ #define AlternateIncRoot YES
+ #endif
diff --git a/debian/patches/016_nx-x11_install-location.patch b/debian/patches/016_nx-x11_install-location.patch
deleted file mode 100644
index 1bda0b0..0000000
--- a/debian/patches/016_nx-x11_install-location.patch
+++ /dev/null
@@ -1,32 +0,0 @@
-Description: FHS adaptation for Debian packaging
- On Debian, NX libraries and binaries are installed to
- /usr/lib/nx.
-Forwarded: not-needed
-Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
-Last-Update: 2012-12-31
---- a/nx-X11/config/cf/Imake.tmpl
-+++ b/nx-X11/config/cf/Imake.tmpl
-@@ -820,12 +820,12 @@
- 
- #ifndef UsrLibDir
- #ifdef ProjectRoot
--#define UsrLibDir Concat3(ProjectRoot,/,LibDirName)
-+#define UsrLibDir Concat4(ProjectRoot,/,LibDirName,/nx)
- #ifndef AlternateUsrLibDir
- #define AlternateUsrLibDir YES
- #endif
- #else
--#define UsrLibDir Concat3(/usr,/,LibDirName)
-+#define UsrLibDir Concat4(/usr,/,LibDirName,/nx)
- #ifndef AlternateUsrLibDir
- #define AlternateUsrLibDir NO
- #endif
-@@ -863,7 +863,7 @@
- #endif
- #ifndef IncRoot
- #ifdef ProjectRoot
--#define IncRoot Concat(ProjectRoot,/include)
-+#define IncRoot Concat(ProjectRoot,/include/nx)
- #ifndef AlternateIncRoot
- #define AlternateIncRoot YES
- #endif
diff --git a/debian/patches/017_nx-x11_update-autotools-helper-files.patch b/debian/patches/017_nx-x11_update-autotools-helper-files.full.patch
similarity index 100%
rename from debian/patches/017_nx-x11_update-autotools-helper-files.patch
rename to debian/patches/017_nx-x11_update-autotools-helper-files.full.patch
diff --git a/debian/patches/018_nx-x11_update-libtool-ltmain-script.patch b/debian/patches/018_nx-x11_update-libtool-ltmain-script.full.patch
similarity index 100%
rename from debian/patches/018_nx-x11_update-libtool-ltmain-script.patch
rename to debian/patches/018_nx-x11_update-libtool-ltmain-script.full.patch
diff --git a/debian/patches/019_nx-x11_expat-build-against-system-libxmltok.full.patch b/debian/patches/019_nx-x11_expat-build-against-system-libxmltok.full.patch
new file mode 100644
index 0000000..d32e570
--- /dev/null
+++ b/debian/patches/019_nx-x11_expat-build-against-system-libxmltok.full.patch
@@ -0,0 +1,43 @@
+Description: Building expat against system's libxmltok library
+ Provide support for building expat against the system's libxmltok library.
+ .
+ Not reported to upstream as this patch is mainly imported for being compliant
+ with Debian policy (lintian error: embedded-library).
+Forwarded: not-needed
+Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
+Last-Update: 2011-12-31
+--- a/nx-X11/lib/expat/Imakefile
++++ b/nx-X11/lib/expat/Imakefile
+@@ -19,7 +19,7 @@
+ EXPATSRC = $(EXPATTOP)/lib
+ EXPATINC = $(EXPATTOP)/lib
+ 
+-INCLUDES = -I$(EXPATINC) -I$(EXPATTOP) -I.
++INCLUDES = -I/usr/include/xmltok -I/usr/local/include/xmltok -I$(EXPATINC) -I$(EXPATTOP) -I. 
+ 
+ /*
+  * Endianness (for short's)
+@@ -31,8 +31,8 @@
+ DEFINES = -DXML_BYTE_ORDER=0 -DX_BYTE_ORDER=$(X_BYTE_ORDER)
+ REQUIREDLIBS=$(LDPRELIBS)
+ 
+-SRCS = xmlparse.c xmltok.c xmlrole.c
+-OBJS = xmlparse.o xmltok.o xmlrole.o
++#SRCS = xmlparse.c xmltok.c xmlrole.c
++#OBJS = xmlparse.o xmltok.o xmlrole.o
+ 
+ HEADERS = expat.h
+ 
+@@ -45,9 +45,9 @@
+ 
+ DependTarget()
+ 
+-LinkSourceFile(xmlparse.c,$(EXPATSRC))
+-LinkSourceFile(xmltok.c,$(EXPATSRC))
+-LinkSourceFile(xmlrole.c,$(EXPATSRC))
++#LinkSourceFile(xmlparse.c,$(EXPATSRC))
++#LinkSourceFile(xmltok.c,$(EXPATSRC))
++#LinkSourceFile(xmlrole.c,$(EXPATSRC))
+ LinkSourceFile(expat.h,$(EXPATINC))
+ 
+ 
diff --git a/debian/patches/019_nx-x11_expat-build-against-system-libxmltok.patch b/debian/patches/019_nx-x11_expat-build-against-system-libxmltok.patch
deleted file mode 100644
index bd0c72a..0000000
--- a/debian/patches/019_nx-x11_expat-build-against-system-libxmltok.patch
+++ /dev/null
@@ -1,43 +0,0 @@
-Description: Building expat against system's libxmltok library
- Provide support for building expat against the system's libxmltok library.
- .
- Not reported to upstream as this patch is mainly imported for being compliant
- with Debian policy (lintian error: embedded-library).
-Forwarded: not-needed
-Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
-Last-Update: 2011-12-31
---- a/nx-X11/lib/expat/Imakefile
-+++ b/nx-X11/lib/expat/Imakefile
-@@ -19,7 +19,7 @@
- EXPATSRC = $(EXPATTOP)/lib
- EXPATINC = $(EXPATTOP)/lib
- 
--INCLUDES = -I$(EXPATINC) -I$(EXPATTOP) -I.
-+INCLUDES = -I/usr/include/xmltok -I$(EXPATINC) -I$(EXPATTOP) -I. 
- 
- /*
-  * Endianness (for short's)
-@@ -31,8 +31,8 @@
- DEFINES = -DXML_BYTE_ORDER=0 -DX_BYTE_ORDER=$(X_BYTE_ORDER)
- REQUIREDLIBS=$(LDPRELIBS)
- 
--SRCS = xmlparse.c xmltok.c xmlrole.c
--OBJS = xmlparse.o xmltok.o xmlrole.o
-+#SRCS = xmlparse.c xmltok.c xmlrole.c
-+#OBJS = xmlparse.o xmltok.o xmlrole.o
- 
- HEADERS = expat.h
- 
-@@ -45,9 +45,9 @@
- 
- DependTarget()
- 
--LinkSourceFile(xmlparse.c,$(EXPATSRC))
--LinkSourceFile(xmltok.c,$(EXPATSRC))
--LinkSourceFile(xmlrole.c,$(EXPATSRC))
-+#LinkSourceFile(xmlparse.c,$(EXPATSRC))
-+#LinkSourceFile(xmltok.c,$(EXPATSRC))
-+#LinkSourceFile(xmlrole.c,$(EXPATSRC))
- LinkSourceFile(expat.h,$(EXPATINC))
- 
- 
diff --git a/debian/patches/020_add-nxagent-wrapper.full.patch b/debian/patches/020_add-nxagent-wrapper.full.patch
new file mode 100644
index 0000000..daee69d
--- /dev/null
+++ b/debian/patches/020_add-nxagent-wrapper.full.patch
@@ -0,0 +1,28 @@
+--- /dev/null
++++ b/bin/nxagent
+@@ -0,0 +1,25 @@
++#!/bin/bash
++
++# Copyright (C) 2012 Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
++#
++# This program is free software: you can redistribute it and/or modify
++# it under the terms of the GNU General Public License as published by
++# the Free Software Foundation, either version 3 of the License, or
++# (at your option) any later version.
++#
++# This program is distributed in the hope that it will be useful,
++# but WITHOUT ANY WARRANTY; without even the implied warranty of
++# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
++# GNU General Public License for more details.
++#
++# You should have received a copy of the GNU General Public License
++# along with this program.  If not, see <A HREF="http://www.gnu.org/licenses/.">http://www.gnu.org/licenses/.</A>
++
++NX_LIBS=/usr/lib/nx
++NX_LOCAL_LIBS=/usr/local/lib/nx
++LD_LIBRARY_PATH=$NX_LIBS:$NX_LIBS/X11:$NX_LOCAL_LIBS:$NX_LOCAL_LIBS/X11:$LD_LIBRARY_PATH
++
++test -d $NX_LIBS &amp;&amp; export NX_LIBS || export NX_LIBS=$NX_LOCAL_LIBS
++export LD_LIBRARY_PATH
++
++exec $NX_LIBS/nxagent &quot;$@&quot;
diff --git a/debian/patches/020_add-nxagent-wrapper.patch b/debian/patches/020_add-nxagent-wrapper.patch
deleted file mode 100644
index 93eb92a..0000000
--- a/debian/patches/020_add-nxagent-wrapper.patch
+++ /dev/null
@@ -1,27 +0,0 @@
---- /dev/null
-+++ b/bin/nxagent
-@@ -0,0 +1,24 @@
-+#!/bin/bash
-+
-+# Copyright (C) 2012 Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
-+#
-+# This program is free software: you can redistribute it and/or modify
-+# it under the terms of the GNU General Public License as published by
-+# the Free Software Foundation, either version 3 of the License, or
-+# (at your option) any later version.
-+#
-+# This program is distributed in the hope that it will be useful,
-+# but WITHOUT ANY WARRANTY; without even the implied warranty of
-+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-+# GNU General Public License for more details.
-+#
-+# You should have received a copy of the GNU General Public License
-+# along with this program.  If not, see <A HREF="http://www.gnu.org/licenses/.">http://www.gnu.org/licenses/.</A>
-+
-+NX_LIBS=/usr/lib/nx
-+LD_LIBRARY_PATH=/usr/lib/nx:/usr/lib/nx/X11:$LD_LIBRARY_PATH
-+
-+export NX_LIBS
-+export LD_LIBRARY_PATH
-+
-+exec /usr/lib/nx/nxagent &quot;$@&quot;
diff --git a/debian/patches/021_add-nxauth-wrapper.full.patch b/debian/patches/021_add-nxauth-wrapper.full.patch
new file mode 100644
index 0000000..6e3ea83
--- /dev/null
+++ b/debian/patches/021_add-nxauth-wrapper.full.patch
@@ -0,0 +1,28 @@
+--- /dev/null
++++ b/bin/nxauth
+@@ -0,0 +1,25 @@
++#!/bin/bash
++
++# Copyright (C) 2012 Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
++#
++# This program is free software: you can redistribute it and/or modify
++# it under the terms of the GNU General Public License as published by
++# the Free Software Foundation, either version 3 of the License, or
++# (at your option) any later version.
++#
++# This program is distributed in the hope that it will be useful,
++# but WITHOUT ANY WARRANTY; without even the implied warranty of
++# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
++# GNU General Public License for more details.
++#
++# You should have received a copy of the GNU General Public License
++# along with this program.  If not, see <A HREF="http://www.gnu.org/licenses/.">http://www.gnu.org/licenses/.</A>
++
++NX_LIBS=/usr/lib/nx
++NX_LOCAL_LIBS=/usr/local/lib/nx
++LD_LIBRARY_PATH=$NX_LIBS:$NX_LIBS/X11:$NX_LOCAL_LIBS:$NX_LOCAL_LIBS/X11:$LD_LIBRARY_PATH
++
++test -d $NX_LIBS &amp;&amp; export NX_LIBS || export NX_LIBS=$NX_LOCAL_LIBS
++export LD_LIBRARY_PATH
++
++exec $NX_LIBS/nxauth &quot;$@&quot;
diff --git a/debian/patches/021_add-nxauth-wrapper.patch b/debian/patches/021_add-nxauth-wrapper.patch
deleted file mode 100644
index ce51ea8..0000000
--- a/debian/patches/021_add-nxauth-wrapper.patch
+++ /dev/null
@@ -1,27 +0,0 @@
---- /dev/null
-+++ b/bin/nxauth
-@@ -0,0 +1,24 @@
-+#!/bin/bash
-+
-+# Copyright (C) 2012 Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
-+#
-+# This program is free software: you can redistribute it and/or modify
-+# it under the terms of the GNU General Public License as published by
-+# the Free Software Foundation, either version 3 of the License, or
-+# (at your option) any later version.
-+#
-+# This program is distributed in the hope that it will be useful,
-+# but WITHOUT ANY WARRANTY; without even the implied warranty of
-+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-+# GNU General Public License for more details.
-+#
-+# You should have received a copy of the GNU General Public License
-+# along with this program.  If not, see <A HREF="http://www.gnu.org/licenses/.">http://www.gnu.org/licenses/.</A>
-+
-+NX_LIBS=/usr/lib/nx
-+LD_LIBRARY_PATH=/usr/lib/nx:/usr/lib/nx/X11:$LD_LIBRARY_PATH
-+
-+export NX_LIBS
-+export LD_LIBRARY_PATH
-+
-+exec /usr/lib/nx/nxauth &quot;$@&quot;
diff --git a/debian/patches/022_add-nxproxy-wrapper.full+lite.patch b/debian/patches/022_add-nxproxy-wrapper.full+lite.patch
new file mode 100644
index 0000000..df603fd
--- /dev/null
+++ b/debian/patches/022_add-nxproxy-wrapper.full+lite.patch
@@ -0,0 +1,28 @@
+--- /dev/null
++++ b/bin/nxproxy
+@@ -0,0 +1,25 @@
++#!/bin/bash
++
++# Copyright (C) 2012 Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
++#
++# This program is free software: you can redistribute it and/or modify
++# it under the terms of the GNU General Public License as published by
++# the Free Software Foundation, either version 3 of the License, or
++# (at your option) any later version.
++#
++# This program is distributed in the hope that it will be useful,
++# but WITHOUT ANY WARRANTY; without even the implied warranty of
++# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
++# GNU General Public License for more details.
++#
++# You should have received a copy of the GNU General Public License
++# along with this program.  If not, see <A HREF="http://www.gnu.org/licenses/.">http://www.gnu.org/licenses/.</A>
++
++NX_LIBS=/usr/lib/nx
++NX_LOCAL_LIBS=/usr/local/lib/nx
++LD_LIBRARY_PATH=$NX_LIBS:$NX_LIBS/X11:$NX_LOCAL_LIBS:$NX_LOCAL_LIBS/X11:$LD_LIBRARY_PATH
++
++test -d $NX_LIBS &amp;&amp; export NX_LIBS || export NX_LIBS=$NX_LOCAL_LIBS
++export LD_LIBRARY_PATH
++
++exec $NX_LIBS/nxproxy &quot;$@&quot;
diff --git a/debian/patches/022_add-nxproxy-wrapper.patch b/debian/patches/022_add-nxproxy-wrapper.patch
deleted file mode 100644
index cedfde3..0000000
--- a/debian/patches/022_add-nxproxy-wrapper.patch
+++ /dev/null
@@ -1,27 +0,0 @@
---- /dev/null
-+++ b/bin/nxproxy
-@@ -0,0 +1,24 @@
-+#!/bin/bash
-+
-+# Copyright (C) 2012 Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
-+#
-+# This program is free software: you can redistribute it and/or modify
-+# it under the terms of the GNU General Public License as published by
-+# the Free Software Foundation, either version 3 of the License, or
-+# (at your option) any later version.
-+#
-+# This program is distributed in the hope that it will be useful,
-+# but WITHOUT ANY WARRANTY; without even the implied warranty of
-+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-+# GNU General Public License for more details.
-+#
-+# You should have received a copy of the GNU General Public License
-+# along with this program.  If not, see <A HREF="http://www.gnu.org/licenses/.">http://www.gnu.org/licenses/.</A>
-+
-+NX_LIBS=/usr/lib/nx
-+LD_LIBRARY_PATH=/usr/lib/nx:/usr/lib/nx/X11:$LD_LIBRARY_PATH
-+
-+export NX_LIBS
-+export LD_LIBRARY_PATH
-+
-+exec /usr/lib/nx/nxproxy &quot;$@&quot;
diff --git a/debian/patches/023_add-x2goagent-wrapper.full.patch b/debian/patches/023_add-x2goagent-wrapper.full.patch
new file mode 100644
index 0000000..d23d3f0
--- /dev/null
+++ b/debian/patches/023_add-x2goagent-wrapper.full.patch
@@ -0,0 +1,28 @@
+--- /dev/null
++++ b/bin/x2goagent
+@@ -0,0 +1,25 @@
++#!/bin/bash
++
++# Copyright (C) 2012 Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
++#
++# This program is free software: you can redistribute it and/or modify
++# it under the terms of the GNU General Public License as published by
++# the Free Software Foundation, either version 3 of the License, or
++# (at your option) any later version.
++#
++# This program is distributed in the hope that it will be useful,
++# but WITHOUT ANY WARRANTY; without even the implied warranty of
++# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
++# GNU General Public License for more details.
++#
++# You should have received a copy of the GNU General Public License
++# along with this program.  If not, see <A HREF="http://www.gnu.org/licenses/.">http://www.gnu.org/licenses/.</A>
++
++NX_LIBS=/usr/lib/nx
++NX_LOCAL_LIBS=/usr/local/lib/nx
++LD_LIBRARY_PATH=$NX_LIBS:$NX_LIBS/X11:$NX_LOCAL_LIBS:$NX_LOCAL_LIBS/X11:$LD_LIBRARY_PATH
++
++test -d $NX_LIBS &amp;&amp; export NX_LIBS || export NX_LIBS=$NX_LOCAL_LIBS
++export LD_LIBRARY_PATH
++
++exec $NX_LIBS/../x2go/x2goagent &quot;$@&quot;
diff --git a/debian/patches/101_nxagent_set-rgb-path.full.patch b/debian/patches/101_nxagent_set-rgb-path.full.patch
new file mode 100644
index 0000000..793b19d
--- /dev/null
+++ b/debian/patches/101_nxagent_set-rgb-path.full.patch
@@ -0,0 +1,19 @@
+Description: FHS path fix for rgb file
+ This patch is needed on Debian only, not reporting this path
+ addition to upstream.
+ .
+ Originally contributed by Marcelo Boveto Shima &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">marceloshima at gmail.com</A>&gt;.
+Forwarded: not-needed
+Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
+Last-Update: 2012-01-12
+--- a/nx-X11/programs/Xserver/os/oscolor.c
++++ b/nx-X11/programs/Xserver/os/oscolor.c
+@@ -53,7 +53,7 @@
+ #include &lt;sys/stat.h&gt;
+ #include &lt;unistd.h&gt;
+ 
+-static char* nxAltRgbPaths[] = {&quot;/usr/NX/share/rgb&quot;, &quot;/usr/share/X11/rgb&quot;, &quot;/etc/X11/rgb&quot;};
++static char* nxAltRgbPaths[] = {&quot;/usr/share/nx/rgb&quot;, &quot;/usr/local/share/nx/rgb&quot;, &quot;/usr/NX/share/rgb&quot;, &quot;/usr/share/X11/rgb&quot;, &quot;/etc/X11/rgb&quot;};
+ static char _NXRgbPath[1024];
+ 
+ #endif
diff --git a/debian/patches/101_nxagent_set-rgb-path.patch b/debian/patches/101_nxagent_set-rgb-path.patch
deleted file mode 100644
index b77348c..0000000
--- a/debian/patches/101_nxagent_set-rgb-path.patch
+++ /dev/null
@@ -1,19 +0,0 @@
-Description: FHS path fix for rgb file
- This patch is needed on Debian only, not reporting this path
- addition to upstream.
- .
- Originally contributed by Marcelo Boveto Shima &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">marceloshima at gmail.com</A>&gt;.
-Forwarded: not-needed
-Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
-Last-Update: 2011-12-31
---- a/nx-X11/programs/Xserver/os/oscolor.c
-+++ b/nx-X11/programs/Xserver/os/oscolor.c
-@@ -53,7 +53,7 @@
- #include &lt;sys/stat.h&gt;
- #include &lt;unistd.h&gt;
- 
--static char* nxAltRgbPaths[] = {&quot;/usr/NX/share/rgb&quot;, &quot;/usr/share/X11/rgb&quot;, &quot;/etc/X11/rgb&quot;};
-+static char* nxAltRgbPaths[] = {&quot;/usr/share/nx/rgb&quot;, &quot;/usr/NX/share/rgb&quot;, &quot;/usr/share/X11/rgb&quot;, &quot;/etc/X11/rgb&quot;};
- static char _NXRgbPath[1024];
- 
- #endif
diff --git a/debian/patches/102_xserver-xext_set-securitypolicy-path.debian.patch b/debian/patches/102_xserver-xext_set-securitypolicy-path.debian.patch
new file mode 100644
index 0000000..0d11f2f
--- /dev/null
+++ b/debian/patches/102_xserver-xext_set-securitypolicy-path.debian.patch
@@ -0,0 +1,19 @@
+Description: FHS path fix for SecurityPolicy file
+ This patch is needed on Debian only, not reporting this path
+ change to upstream.
+ .
+ Originally contributed by Marcelo Boveto Shima &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">marceloshima at gmail.com</A>&gt;.
+Forwarded: not-needed
+Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
+Last-Update: 2012-01-12
+--- a/nx-X11/programs/Xserver/Xext/security.c
++++ b/nx-X11/programs/Xserver/Xext/security.c
+@@ -86,7 +86,7 @@
+ 
+ #ifdef NXAGENT_SERVER
+ 
+-#define NX_ALTERNATIVEPOLICYFILE &quot;/usr/local/share/nx/SecurityPolicy&quot;
++#define NX_ALTERNATIVEPOLICYFILE &quot;/usr/share/nx/SecurityPolicy&quot;
+ 
+ #endif
+ 
diff --git a/debian/patches/102_xserver-xext_set-securitypolicy-path.full.patch b/debian/patches/102_xserver-xext_set-securitypolicy-path.full.patch
new file mode 100644
index 0000000..9d27a37
--- /dev/null
+++ b/debian/patches/102_xserver-xext_set-securitypolicy-path.full.patch
@@ -0,0 +1,19 @@
+Description: FHS path fix for SecurityPolicy file
+ This patch is needed for Tarball installation mode of NX (redistributed)
+ only, not reporting this path change to upstream.
+ .
+ Originally contributed by Marcelo Boveto Shima &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">marceloshima at gmail.com</A>&gt;.
+Forwarded: not-needed
+Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
+Last-Update: 2012-01-12
+--- a/nx-X11/programs/Xserver/Xext/security.c
++++ b/nx-X11/programs/Xserver/Xext/security.c
+@@ -86,7 +86,7 @@
+ 
+ #ifdef NXAGENT_SERVER
+ 
+-#define NX_ALTERNATIVEPOLICYFILE &quot;/usr/lib/xserver/SecurityPolicy&quot;
++#define NX_ALTERNATIVEPOLICYFILE &quot;/usr/local/share/nx/SecurityPolicy&quot;
+ 
+ #endif
+ 
diff --git a/debian/patches/102_xserver-xext_set-securitypolicy-path.patch b/debian/patches/102_xserver-xext_set-securitypolicy-path.patch
deleted file mode 100644
index 4f43eeb..0000000
--- a/debian/patches/102_xserver-xext_set-securitypolicy-path.patch
+++ /dev/null
@@ -1,19 +0,0 @@
-Description: FHS path fix for SecurityPolicy file
- This patch is needed on Debian only, not reporting this path
- change to upstream.
- .
- Originally contributed by Marcelo Boveto Shima &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">marceloshima at gmail.com</A>&gt;.
-Forwarded: not-needed
-Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
-Last-Update: 2011-12-31
---- a/nx-X11/programs/Xserver/Xext/security.c
-+++ b/nx-X11/programs/Xserver/Xext/security.c
-@@ -86,7 +86,7 @@
- 
- #ifdef NXAGENT_SERVER
- 
--#define NX_ALTERNATIVEPOLICYFILE &quot;/usr/lib/xserver/SecurityPolicy&quot;
-+#define NX_ALTERNATIVEPOLICYFILE &quot;/usr/share/nx/SecurityPolicy&quot;
- 
- #endif
- 
diff --git a/debian/patches/103_nxagent_set-X0-config-path.full.patch b/debian/patches/103_nxagent_set-X0-config-path.full.patch
new file mode 100644
index 0000000..eb705ca
--- /dev/null
+++ b/debian/patches/103_nxagent_set-X0-config-path.full.patch
@@ -0,0 +1,40 @@
+Description: FHS path fix for keyboard config file
+ This patch is needed for Tarball installation and on Distros like
+ Debian, not reporting this path addition to upstream.
+ .
+ Originally contributed by FreeNX Team.
+Forwarded: not-needed
+Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
+Last-Update: 2011-12-31
+--- a/nx-X11/programs/Xserver/hw/nxagent/Keyboard.c
++++ b/nx-X11/programs/Xserver/hw/nxagent/Keyboard.c
+@@ -136,7 +136,7 @@
+ #define XKB_ALTERNATE_BASE_DIRECTORY   &quot;/usr/X11R6/lib/X11/xkb&quot;
+ #endif
+ #ifndef XKB_CONFIG_FILE
+-#define XKB_CONFIG_FILE      &quot;X0-config.keyboard&quot;
++#define XKB_CONFIG_FILE      &quot;/etc/nxagent/nxagent.keyboard&quot;
+ #endif
+ #ifndef XKB_DFLT_RULES_FILE
+ #define XKB_DFLT_RULES_FILE  &quot;xfree86&quot;
+@@ -985,8 +985,7 @@
+ 
+         XkbGetControls(nxagentDisplay, XkbAllControlsMask, xkb);
+ 
+-        nxagentXkbConfigFilePathSize = strlen(XkbBaseDirectory) +
+-                                           strlen(XKB_CONFIG_FILE) + 1;
++        nxagentXkbConfigFilePathSize = strlen(XKB_CONFIG_FILE);
+ 
+         nxagentXkbConfigFilePath = malloc((nxagentXkbConfigFilePathSize + 1) * sizeof(char));
+ 
+@@ -995,9 +994,7 @@
+           FatalError(&quot;nxagentKeyboardProc: malloc failed.&quot;);
+         }
+ 
+-        strcpy(nxagentXkbConfigFilePath, XkbBaseDirectory);
+-        strcat(nxagentXkbConfigFilePath, &quot;/&quot;);
+-        strcat(nxagentXkbConfigFilePath, XKB_CONFIG_FILE);
++        strcpy(nxagentXkbConfigFilePath, XKB_CONFIG_FILE);
+  
+         #ifdef TEST
+         fprintf(stderr, &quot;nxagentKeyboardProc: nxagentXkbConfigFilePath [%s].\n&quot;,
diff --git a/debian/patches/103_nxagent_set-X0-config-path.patch b/debian/patches/103_nxagent_set-X0-config-path.patch
deleted file mode 100644
index 485f5fd..0000000
--- a/debian/patches/103_nxagent_set-X0-config-path.patch
+++ /dev/null
@@ -1,40 +0,0 @@
-Description: FHS path fix for keyboard config file
- This patch is needed on Debian only, not reporting this path
- addition to upstream.
- .
- Originally contributed by FreeNX Team.
-Forwarded: not-needed
-Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
-Last-Update: 2011-12-31
---- a/nx-X11/programs/Xserver/hw/nxagent/Keyboard.c
-+++ b/nx-X11/programs/Xserver/hw/nxagent/Keyboard.c
-@@ -136,7 +136,7 @@
- #define XKB_ALTERNATE_BASE_DIRECTORY   &quot;/usr/X11R6/lib/X11/xkb&quot;
- #endif
- #ifndef XKB_CONFIG_FILE
--#define XKB_CONFIG_FILE      &quot;X0-config.keyboard&quot;
-+#define XKB_CONFIG_FILE      &quot;/etc/nxagent/nxagent.keyboard&quot;
- #endif
- #ifndef XKB_DFLT_RULES_FILE
- #define XKB_DFLT_RULES_FILE  &quot;xfree86&quot;
-@@ -985,8 +985,7 @@
- 
-         XkbGetControls(nxagentDisplay, XkbAllControlsMask, xkb);
- 
--        nxagentXkbConfigFilePathSize = strlen(XkbBaseDirectory) +
--                                           strlen(XKB_CONFIG_FILE) + 1;
-+        nxagentXkbConfigFilePathSize = strlen(XKB_CONFIG_FILE);
- 
-         nxagentXkbConfigFilePath = malloc((nxagentXkbConfigFilePathSize + 1) * sizeof(char));
- 
-@@ -995,9 +994,7 @@
-           FatalError(&quot;nxagentKeyboardProc: malloc failed.&quot;);
-         }
- 
--        strcpy(nxagentXkbConfigFilePath, XkbBaseDirectory);
--        strcat(nxagentXkbConfigFilePath, &quot;/&quot;);
--        strcat(nxagentXkbConfigFilePath, XKB_CONFIG_FILE);
-+        strcpy(nxagentXkbConfigFilePath, XKB_CONFIG_FILE);
-  
-         #ifdef TEST
-         fprintf(stderr, &quot;nxagentKeyboardProc: nxagentXkbConfigFilePath [%s].\n&quot;,
diff --git a/debian/patches/105_nxagent_export-remote-keyboard-config.patch b/debian/patches/105_nxagent_export-remote-keyboard-config.full.patch
similarity index 100%
rename from debian/patches/105_nxagent_export-remote-keyboard-config.patch
rename to debian/patches/105_nxagent_export-remote-keyboard-config.full.patch
diff --git a/debian/patches/106_nxagent_utf8-copy-clipboard.patch b/debian/patches/106_nxagent_utf8-copy-clipboard.full.patch
similarity index 100%
rename from debian/patches/106_nxagent_utf8-copy-clipboard.patch
rename to debian/patches/106_nxagent_utf8-copy-clipboard.full.patch
diff --git a/debian/patches/107_nxagent_clipboard-compound-text+small-bed-sheets.patch b/debian/patches/107_nxagent_clipboard-compound-text+small-bed-sheets.full.patch
similarity index 100%
rename from debian/patches/107_nxagent_clipboard-compound-text+small-bed-sheets.patch
rename to debian/patches/107_nxagent_clipboard-compound-text+small-bed-sheets.full.patch
diff --git a/debian/patches/108_nxagent_wine-close-delay.patch b/debian/patches/108_nxagent_wine-close-delay.full.patch
similarity index 100%
rename from debian/patches/108_nxagent_wine-close-delay.patch
rename to debian/patches/108_nxagent_wine-close-delay.full.patch
diff --git a/debian/patches/109_nxagent_locale-utf8-compound-text.patch b/debian/patches/109_nxagent_locale-utf8-compound-text.full.patch
similarity index 100%
rename from debian/patches/109_nxagent_locale-utf8-compound-text.patch
rename to debian/patches/109_nxagent_locale-utf8-compound-text.full.patch
diff --git a/debian/patches/110_nxagent_createpixmap-bounds-check.patch b/debian/patches/110_nxagent_createpixmap-bounds-check.full.patch
similarity index 100%
rename from debian/patches/110_nxagent_createpixmap-bounds-check.patch
rename to debian/patches/110_nxagent_createpixmap-bounds-check.full.patch
diff --git a/debian/patches/200_nxagent_check-binary-x2go-flavour.full.patch b/debian/patches/200_nxagent_check-binary-x2go-flavour.full.patch
new file mode 100644
index 0000000..089b570
--- /dev/null
+++ b/debian/patches/200_nxagent_check-binary-x2go-flavour.full.patch
@@ -0,0 +1,64 @@
+Description: Detect nxagent/x2goagent flavour
+ Whether the agent runs in X2Go or NX mode is decide by the
+ name of the binary that executes the code.
+ .
+ Binary name equal to nxagent -&gt; (Free)NX flavour
+ Binary name equal to x2goagent -&gt; X2Go flavour
+Forwarded: not-needed
+Author: Oleksandr Shneyder &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">oleksandr.shneyder at obviously-nice.de</A>&gt;
+Last-Update: 2012-01-11
+--- a/nx-X11/programs/Xserver/hw/nxagent/Init.c
++++ b/nx-X11/programs/Xserver/hw/nxagent/Init.c
+@@ -178,6 +178,29 @@
+ 
+ int nxagentDoFullGeneration = 1;
+ 
++ /*
++ * 1 if agent running as X2goAgent
++ * 0 if NX Agent
++ */
++int nxagentX2go;
++
++/*
++ * Checking if agent is x2go agent
++ */
++
++void checkX2goAgent()
++{
++  extern const char *__progname;
++  if( strcasecmp(__progname,&quot;x2goagent&quot;) == 0)
++  {
++    fprintf(stderr, &quot;\nrunning as X2Go Agent\n&quot;);
++    nxagentX2go=1;
++  }
++  else
++    nxagentX2go=0;
++}
++
++
+ /*
+  * Called at X server's initialization.
+  */
+@@ -194,6 +217,11 @@
+   #endif
+ 
+   /*
++   * Check if we running as X2Go Agent
++   */
++  checkX2goAgent();
++
++  /*
+    * Print our pid and version information.
+    */
+ 
+--- a/nx-X11/programs/Xserver/hw/nxagent/Init.h
++++ b/nx-X11/programs/Xserver/hw/nxagent/Init.h
+@@ -37,6 +37,8 @@
+ extern int nxagentBackingStore;
+ extern int nxagentSaveUnder;
+ 
++extern int  nxagentX2go;
++
+ extern ServerGrabInfoRec nxagentGrabServerInfo;
+ 
+ #endif /* __Init_H__ */
diff --git a/debian/patches/200_nxagent_unbrand-agent.patch b/debian/patches/200_nxagent_unbrand-agent.patch
deleted file mode 100644
index c9aea04..0000000
--- a/debian/patches/200_nxagent_unbrand-agent.patch
+++ /dev/null
@@ -1,61 +0,0 @@
-Description: Unbrand NX Agent Startup Screen
- By design this patch is probably not interesting to
- NX upstream.
-Forwarded: not-needed
-Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
-Last-Update: 2012-12-31
---- a/nx-X11/programs/Xserver/hw/nxagent/Screen.c
-+++ b/nx-X11/programs/Xserver/hw/nxagent/Screen.c
-@@ -1754,7 +1754,20 @@
-       #ifdef TEST
-       fprintf(stderr, &quot;nxagentOpenScreen: Created new default window with id [%ld].\n&quot;,
-                   nxagentDefaultWindows[pScreen-&gt;myNum]);
-+      
-+      fprintf(stderr, &quot;nxagentOpenScreen: Setting WM_CLASS and WM_NAME for window withid [%ld].\n&quot;,
-+                  nxagentDefaultWindows[pScreen-&gt;myNum]);      
-       #endif
-+      
-+      XClassHint hint;
-+      hint.res_name=malloc(strlen(HINT)+1);
-+      hint.res_class=malloc(strlen(HINT)+1);
-+      strcpy(hint.res_name,HINT);
-+      strcpy(hint.res_class,HINT);
-+      XSetClassHint(nxagentDisplay,nxagentDefaultWindows[pScreen-&gt;myNum],&amp;hint);
-+      free(hint.res_name);
-+      free(hint.res_class);
-+      
- 
-       if (nxagentOption(Fullscreen))
-       {
---- a/nx-X11/programs/Xserver/hw/nxagent/Screen.h
-+++ b/nx-X11/programs/Xserver/hw/nxagent/Screen.h
-@@ -36,6 +36,8 @@
- #define MIN_NXAGENT_HEIGHT 60
- #define NXAGENT_FRAME_WIDTH 2000
- 
-+#define HINT &quot;NXAgent&quot;
-+
- #define nxagentSetPrintGeometry(screen) \
-     nxagentPrintGeometryFlags = (1 &lt;&lt; (screen));
-     
---- a/nx-X11/programs/Xserver/hw/nxagent/Splash.c
-+++ b/nx-X11/programs/Xserver/hw/nxagent/Splash.c
-@@ -204,6 +204,7 @@
- 
-   nxagentPixmapLogo = XCreatePixmap(nxagentDisplay, win, width, height, nxagentLogoDepth);
- 
-+  return;
-   if (!nxagentPixmapLogo)
-   {
-     return;
---- a/nx-X11/programs/Xserver/hw/nxagent/Display.c
-+++ b/nx-X11/programs/Xserver/hw/nxagent/Display.c
-@@ -1919,7 +1919,7 @@
-   XlibPixmap IconPixmap;
-   XlibPixmap IconShape;
- 
--  snprintf(default_path, PATH_MAX-1, &quot;/usr/NX/share/images/%s&quot;, NXAGENT_ICON_NAME);
-+  snprintf(default_path, PATH_MAX-1, &quot;/usr/share/pixmaps/%s&quot;, NXAGENT_ICON_NAME);
- 
-   if ((icon_fp = fopen(default_path, &quot;r&quot;)) == NULL)
-   {
diff --git a/debian/patches/201_nxagent_set-x2go-icon-if-x2goagent-flavour.full.patch b/debian/patches/201_nxagent_set-x2go-icon-if-x2goagent-flavour.full.patch
new file mode 100644
index 0000000..ff3861d
--- /dev/null
+++ b/debian/patches/201_nxagent_set-x2go-icon-if-x2goagent-flavour.full.patch
@@ -0,0 +1,220 @@
+Description: X2Go icon when run with x2goagent flavour
+ Depending on the binary name of the agent either nxagent.xpm
+ or x2go.xpm is used as window icon.
+Forwarded: not-needed
+Author: Oleksandr Shneyder &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">oleksandr.shneyder at obviously-nice.de</A>&gt;
+Last-Update: 2012-01-11
+--- a/nx-X11/programs/Xserver/hw/nxagent/Display.c	2012-01-11 10:09:05.000000000 +0100
++++ b/nx-X11/programs/Xserver/hw/nxagent/Display.c	2012-01-11 12:28:11.000000000 +0100
+@@ -77,6 +77,7 @@ is&quot; without express or implied warranty.
+ #include &quot;NXlib.h&quot;
+ 
+ #include NXAGENT_ICON_NAME
++#include X2GOAGENT_ICON_NAME
+ 
+ /*
+  * Set here the required log level.
+@@ -1918,12 +1919,29 @@ Bool nxagentMakeIcon(Display *display, P
+   Bool success = False;
+   XlibPixmap IconPixmap;
+   XlibPixmap IconShape;
++  char* agent_icon_name;
++  char* agentIconData;
+ 
+-  snprintf(default_path, PATH_MAX-1, &quot;/usr/NX/share/images/%s&quot;, NXAGENT_ICON_NAME);
++  /*
++   * selecting x2go icon when running as X2Go agent
++   */
++  if(nxagentX2go)
++  {
++    agent_icon_name=X2GOAGENT_ICON_NAME;
++    agentIconData=x2goagentIconData;
++  }
++  else
++  {
++    agent_icon_name=NXAGENT_ICON_NAME;
++    agentIconData=nxagentIconData;
++  }
++
++
++  snprintf(default_path, PATH_MAX-1, &quot;/usr/NX/share/images/%s&quot;, agent_icon_name);
+ 
+   if ((icon_fp = fopen(default_path, &quot;r&quot;)) == NULL)
+   {
+-    icon_fp = nxagentLookForIconFile(NXAGENT_ICON_NAME, &quot;r&quot;, icon_path);
++    icon_fp = nxagentLookForIconFile(agent_icon_name, &quot;r&quot;, icon_path);
+ 
+     if (icon_fp != NULL)
+     {
+@@ -1962,7 +1980,7 @@ Bool nxagentMakeIcon(Display *display, P
+   {
+      status = XpmCreatePixmapFromData(display,
+                                         DefaultRootWindow(display),
+-                                        nxagentIconData,
++                                        agentIconData,
+                                         &amp;IconPixmap,
+                                         &amp;IconShape,
+                                         NULL);
+--- a/nx-X11/programs/Xserver/hw/nxagent/Icons.h	2012-01-11 10:09:05.000000000 +0100
++++ b/nx-X11/programs/Xserver/hw/nxagent/Icons.h	2012-01-11 12:17:21.000000000 +0100
+@@ -24,6 +24,8 @@
+ 
+ #define NXAGENT_ICON_NAME  &quot;nxagent.xpm&quot;
+ 
++#define X2GOAGENT_ICON_NAME  &quot;x2go.xpm&quot;
++
+ #define NXAGENT_PLACEHOLDER_NAME  &quot;nxmissing.xpm&quot;
+ 
+ #endif /* __Icons_H__ */
+--- a/nx-X11/programs/Xserver/hw/nxagent/x2go.xpm	1970-01-01 01:00:00.000000000 +0100
++++ b/nx-X11/programs/Xserver/hw/nxagent/x2go.xpm	2012-01-11 12:26:24.000000000 +0100
+@@ -0,0 +1,148 @@
++/* XPM */
++static char  *x2goagentIconData[]={
++&quot;128 128 17 1&quot;,
++&quot;. c None&quot;,
++&quot;m c #323232&quot;,
++&quot;l c #323232&quot;,
++&quot;f c #323232&quot;,
++&quot;e c #323232&quot;,
++&quot;o c #323232&quot;,
++&quot;# c #323232&quot;,
++&quot;h c #323232&quot;,
++&quot;i c #323232&quot;,
++&quot;n c #323232&quot;,
++&quot;d c #323232&quot;,
++&quot;a c #323232&quot;,
++&quot;g c #323232&quot;,
++&quot;j c #323232&quot;,
++&quot;b c #323232&quot;,
++&quot;k c #323232&quot;,
++&quot;c c #323232&quot;,
++&quot;.....#abccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccbde.....&quot;,
++&quot;...fbccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccgf...&quot;,
++&quot;..#ccccaheeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeijccckf..&quot;,
++&quot;.ecccgl..................................................................................................................ejcckf.&quot;,
++&quot;.bccd.....................................................................................................................mdccg.&quot;,
++&quot;#cca.......................................................................................................................mjcce&quot;,
++&quot;gckm........................................................................................................................eccd&quot;,
++&quot;ccn..........................................................................................................................jcb&quot;,
++&quot;cce..........................................................................................................................icc&quot;,
++&quot;ccm..........................................................................................................................ecc&quot;,
++&quot;cc...........................................................................................................................ecc&quot;,
++&quot;cc...........................................................................................................................ecc&quot;,
++&quot;cc...........................................................................................................................ecc&quot;,
++&quot;cc...........................................................................................................................ecc&quot;,
++&quot;cc............................................meeee..........................................................................ecc&quot;,
++&quot;cc.........eeeeeeeeoiiiiiiiinggggggggjccccccccccccc....#ggggggggggggggggggggggggggggf.............ggggggggggggggggggggggf....ecc&quot;,
++&quot;cc....meeeeoiiiiiiiinggggggggjccccccccccccccccccccc....icccccccccccccccccccccccccccce.............cccccccccccccccccccccce....ecc&quot;,
++&quot;cc....................................meeeeeeeeoiii....icccccccccccccccccccccccccccce.............cccccccccccccccccccccce....ecc&quot;,
++&quot;cc.......................................................menbccccccccccccccccccbhe..................logccccccccccccghe.......ecc&quot;,
++&quot;cc...........................................................iccccccccccccccccdm.......................#cccccccccke..........ecc&quot;,
++&quot;cc..............................................lee...........#cccccccccccccckm.........................jccccccckm...........ecc&quot;,
++&quot;cc........feeeeeeeeoiiiiiiiiiaggggggggjcccccccccccc............icccccccccccccd..........................icccccccf............ecc&quot;,
++&quot;cc....meeeeeoiiiiiiiinggggggggjcccccccccccccccccccciiiiii#m.....jcccccccccccci..........................icccccci.............ecc&quot;,
++&quot;cc......................................eeeeeeeeeiiiiiiiiigl....eccccccccccccd..........................dcccccj..............ecc&quot;,
++&quot;cc...............................................................dcccccccccccj..........................bccccce..............ecc&quot;,
++&quot;cc...............................................................lccccccccccccl........................lccccca...............ecc&quot;,
++&quot;cc.............................................meeeeeeee#iiiie....dccccccccccch........................icccccl...............ecc&quot;,
++&quot;cc.........meeeeeeeeoiiiiiiiinggggggggjccccccccccccccccccccccb....ecccccccccccb........................bccccn................ecc&quot;,
++&quot;cc....meeeeiiiiiiiiiaggggggggbcccccccccccccccccccccccccccccccc#....gccccccccccco......................#cccckm................ecc&quot;,
++&quot;cc....................................meeeeeeeeeiiiiiiiiiaggggd....#cccccccccccg......................bcccci.................ecc&quot;,
++&quot;cc..................................................................bcccccccccccf....................#cccckm.................ecc&quot;,
++&quot;cc..................................................................hcccccccccccd...................mkcccci..................ecc&quot;,
++&quot;cc............................................meeeeeeeeoiiiiiiiil...mkcccccccccccl..................icccckm..................ecc&quot;,
++&quot;cc.........eeeeeeeeoiiiiiiiinggggggggjccccccccccccccccccccccccccn....dccccccccccci.................mkcccci...................ecc&quot;,
++&quot;cc....meeeeeiiiiiiiiiaggggggggbccccccccccccccccccccccccccccccccckm...lccccccccccck.................icccckm...................ecc&quot;,
++&quot;cc.....................................leeeeeeeeoiiiiiiiiigggggggo....accccccccccc#...............mkcccch....................ecc&quot;,
++&quot;cc....................................................................ecccccccccccb...............iccccb.....................ecc&quot;,
++&quot;cc.....................................................................jccccccccccce.............mkcccc#.....................ecc&quot;,
++&quot;cc.............................................meeeeeeeeehiiiiiiii#....#ccccccccccca.............nccccb......................ecc&quot;,
++&quot;cc........feeeeeeee#iiiiiiiiigggggggggkccccccccccccccccccccccccccccl....kcccccccccccl...........lccccc#......................ecc&quot;,
++&quot;cc....meeeeeoiiiiiiiiigggggggggkcccccccccccccccccccccccccccccccccccd....icccccccccccd...........dccccb.......................ecc&quot;,
++&quot;cc......................................leeeeeeeeoiiiiiiiingggggggga....mccccccccccckm.........lccccc#.......................ecc&quot;,
++&quot;cc.......................................................................dccccccccccch.........dccccb........................ecc&quot;,
++&quot;cc.......................................................................lcccccccccccb........lccccc#........................ecc&quot;,
++&quot;cc.............................................meeeeeeeeoiiiiiiiingggo....gccccccccccc#.......dccccg.........................ecc&quot;,
++&quot;cc.........meeeeeeeeoiiiiiiiinggggggggjccccccccccccccccccccccccccccccg....occcccccccccg......lccccce.........................ecc&quot;,
++&quot;cc....meeeeiiiiiiiiiaggggggggbcccccccccccccccccccccccccccccccccccccccce....bccccccccccce.....gccccg..........................ecc&quot;,
++&quot;cc....................................meeeeeeeeeiiiiiiiiigggggggggkcccd....#cccccccccccd....eccccce..........................ecc&quot;,
++&quot;cc.........................................................................mkcccccccccccl...gccccg...........................ecc&quot;,
++&quot;cc..........................................................................nccccccccccci..eccccce...........................ecc&quot;,
++&quot;cc............................................meeeeeeeeoiiiiiiiingggggggm...lccccccccccckm.gccccg............................ecc&quot;,
++&quot;cc.........eeeeeeeeoiiiiiiiinggggggggjcccccccccccccccccccccccccccccccccc#....dccccccccccc#eccccce............................ecc&quot;,
++&quot;cc....meeeeeiiiiiiiiiaggggggggkcccccccccccccccccccccccccccccccccccccccccb....ecccccccccccbgccccg.............................ecc&quot;,
++&quot;cc.....................................leeeeeeeeoiiiiiiiiigggggggggkccccco....gccccccccccccccccl.............................ecc&quot;,
++&quot;cc............................................................................#cccccccccccccccd..............................ecc&quot;,
++&quot;cc.............................................................................bccccccccccccccl..............................ecc&quot;,
++&quot;cc.............................................leeeeeeeeeiiiiiiiiiagggggggi....icccccccccccccd...............................ecc&quot;,
++&quot;cc........feeeeeeee#iiiiiiiingggggggggkccccccccccccccccccccccccccccccccccckm...mkccccccccccccl...............................ecc&quot;,
++&quot;cc....meeeeeoiiiiiiiiigggggggggkccccccccccccccccccccccccccccccccccccccccccci....dccccccccccca................................ecc&quot;,
++&quot;cc......................................leeeeeeeeoiiiiiiiiigggggggggccccccck....lccccccccccckm...............................ecc&quot;,
++&quot;cc...............................................................................accccccccccc#...............................ecc&quot;,
++&quot;cc...............................................................................ecccccccccccb...............................ecc&quot;,
++&quot;cc............................................leeeeeeeeeiiiiiiiiiaggggggggbcce....bccccccccccce..............................ecc&quot;,
++&quot;cc.......feeeeeeee#iiiiiiiiigggggggggkcccccccccccccccccccccccccccccccccccccccd....#cccccccccccg..............................ecc&quot;,
++&quot;cc....meeeeeeoiiiiiiiingggggggggccccccccccccccccccccccccccccccccccccccccccccccl....kcccccccccccl.............................ecc&quot;,
++&quot;cc.......................................feeeeeeeehiiiiiiiidggggggggbccccccccci....ncccccccccccd.............................ecc&quot;,
++&quot;cc...........................................................................mm....bccccccccccccm............................ecc&quot;,
++&quot;cc................................................................................#ccccccccccccci............................ecc&quot;,
++&quot;cc..........................................leeeeeeee#iiiiiiiidggggggggbcccccl....bccccccccccccck............................ecc&quot;,
++&quot;cc......feeeeeeeehiiiiiiiiaggggggggkccccccccccccccccccccccccccccccccccccccccd....#ccccccccccccccc#...........................ecc&quot;,
++&quot;cc....meeeeeee#iiiiiiiidggggggggjcccccccccccccccccccccccccccccccccccccccccccl....bcccccccccccccccb...........................ecc&quot;,
++&quot;cc.......................................meeeeeeeeeiiiiiiiiigggggggggkcccccd....#cccccbccccccccccce..........................ecc&quot;,
++&quot;cc..............................................................................bccccdhcccccccccccg..........................ecc&quot;,
++&quot;cc.............................................................................#ccccclmkcccccccccccl.........................ecc&quot;,
++&quot;cc..........................................meeeeeeeeeiiiiiiiiiaggggggggbkm....bccccd..ncccccccccccd.........................ecc&quot;,
++&quot;cc.....leeeeeeeeoiiiiiiiiigggggggggkccccccccccccccccccccccccccccccccccccci....hcccckl..lccccccccccccm........................ecc&quot;,
++&quot;cc....meeeeeeeehiiiiiiiidggggggggbcccccccccccccccccccccccccccccccccccccckm...mkcccci....dccccccccccci........................ecc&quot;,
++&quot;cc........................................leeeeeeee#iiiiiiiinggggggggjcci....icccckm....eccccccccccck........................ecc&quot;,
++&quot;cc..........................................................................mkcccci......gccccccccccc#.......................ecc&quot;,
++&quot;cc..........................................................................icccckm......#cccccccccccb.......................ecc&quot;,
++&quot;cc.........................................leeeeeeeeoiiiiiiiiigggggggga....mkcccci........bccccccccccce......................ecc&quot;,
++&quot;cc....meeeeeeeeoiiiiiiiiigggggggggkccccccccccccccccccccccccccccccccccci....icccckm........hcccccccccccg......................ecc&quot;,
++&quot;cc.....feeeeeeeehiiiiiiiiaggggggggkcccccccccccccccccccccccccccccccccckm...mkcccci.........mkcccccccccccl.....................ecc&quot;,
++&quot;cc.........................................feeeeeeeehiiiiiiiiagggggggh....icccckm..........icccccccccccd.....................ecc&quot;,
++&quot;cc.......................................................................mkcccci...........lccccccccccccm....................ecc&quot;,
++&quot;cc.......................................................................icccckm............dccccccccccci....................ecc&quot;,
++&quot;cc...........................................eeeeeeeeehiiiiiiiidggga....mkcccci.............fccccccccccck....................ecc&quot;,
++&quot;cc......feeeeeeee#iiiiiiiingggggggggccccccccccccccccccccccccccccccci....iccccb...............gccccccccccc#...................ecc&quot;,
++&quot;cc....meeeeeeeoiiiiiiiiigggggggggbcccccccccccccccccccccccccccccccckm...mkcccc#...............occcccccccccb...................ecc&quot;,
++&quot;cc........................................meeeeeeeeeiiiiiiiiidgggg#....iccccb.................bccccccccccce..................ecc&quot;,
++&quot;cc....................................................................mkcccc#.................#cccccccccccg..................ecc&quot;,
++&quot;cc....................................................................iccccb..................mkcccccccccccl.................ecc&quot;,
++&quot;cc..........................................eeeeeeeeeiiiiiiiiiaga....mkcccc#...................icccccccccccd.................ecc&quot;,
++&quot;cc.....leeeeeeee#iiiiiiiinggggggggjccccccccccccccccccccccccccccci....iccccb....................lccccccccccccm................ecc&quot;,
++&quot;cc....meeeeeeee#iiiiiiiiigggggggggkcccccccccccccccccccccccccccckm...mkcccc#.....................dccccccccccci................ecc&quot;,
++&quot;cc.........................................leeeeeeeeoiiiiiiiiiah....iccccb......................lccccccccccck................ecc&quot;,
++&quot;cc.................................................................mkcccc#.......................gccccccccccc#...............ecc&quot;,
++&quot;cc.................................................................dccccj........................ecccccccccccj...............ecc&quot;,
++&quot;cc..........................................leeeeeeeeeiiiiiiih....lccccce.........................bccccccccccce..............ecc&quot;,
++&quot;cc....meeeeeeeeeiiiiiiiiidgggggggggcccccccccccccccccccccccccci....dccccg..........................#ccccccccccca..............ecc&quot;,
++&quot;cc.....feeeeeeeeiiiiiiiinggggggggbcccccccccccccccccccccccccckm...lccccce...........................kcccccccccccl.............ecc&quot;,
++&quot;cc........................................leeeeeeeehiiiiiiiih....dccccg............................ncccccccccccd.............ecc&quot;,
++&quot;cc..............................................................lccccce............................fccccccccccccf............ecc&quot;,
++&quot;cc..............................................................dccccb..............................jcccccccccccg............ecc&quot;,
++&quot;cc.........................................meeeeeeeeoiiiiil....lcccccn..............................icccccccccccce...........ecc&quot;,
++&quot;cc......feeeeeeeehiiiiiiiigggggggggccccccccccccccccjgggggo.....gccccc#..............................eccccccccccccbm..........ecc&quot;,
++&quot;cc....meeeeeeeoiiiiiiiiidgggggggggccccccccccccccccc...........hcccccco...............................cccccccccccccn..........ecc&quot;,
++&quot;cc.........................................leeeeeee..........ecccccccn..............................lcccccccccccccc#.........ecc&quot;,
++&quot;cc..........................................................#kccccccckf.............................nccccccccccccccc#........ecc&quot;,
++&quot;cc........................................................ldcccccccccck#m.........................lncccccccccccccccccdl......ecc&quot;,
++&quot;cc.........................................feeeeeee....ogjcccccccccccccccggi..................oggbcccccccccccccccccccccja....ecc&quot;,
++&quot;cc.....leeeeeeee#iiiiiiiidggggggggbcccccccccccccccc....icccccccccccccccccccg..................icccccccccccccccccccccccccc....ecc&quot;,
++&quot;cc....meeeeeeeehiiiiiiiiaggggggggkccccccccccccccccc....icccccccccccccccccccg..................icccccccccccccccccccccccccc....ecc&quot;,
++&quot;cc........................................feeeeeeee..........................................................................ecc&quot;,
++&quot;cc...........................................................................................................................ecc&quot;,
++&quot;cc...........................................................................................................................ecc&quot;,
++&quot;cc...........................................................................................................................ecc&quot;,
++&quot;cc...........................................................................................................................ecc&quot;,
++&quot;cc...........................................................................................................................ecc&quot;,
++&quot;cce..........................................................................................................................hcc&quot;,
++&quot;ccn..........................................................................................................................acb&quot;,
++&quot;jcb.........................................................................................................................lcca&quot;,
++&quot;hcci........................................................................................................................acc#&quot;,
++&quot;mkcc#......................................................................................................................dccb.&quot;,
++&quot;.occci...................................................................................................................macccf.&quot;,
++&quot;..#cccbne.............................................................................................................menkccc#..&quot;,
++&quot;...okccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccbe...&quot;,
++&quot;....mhjccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccg#.....&quot;};
+
diff --git a/debian/patches/202_nx-x11_enable-xinerama.full.patch b/debian/patches/202_nx-x11_enable-xinerama.full.patch
new file mode 100644
index 0000000..f097f0b
--- /dev/null
+++ b/debian/patches/202_nx-x11_enable-xinerama.full.patch
@@ -0,0 +1,268 @@
+Description: Enable Xinerama support for NX
+ This patch adds Xinerama awareness to NX agent windows.
+ .
+ The advantage of Xinerama awareness is that an NX session window
+ will only maximize to the dimensions of the active physical
+ display.
+Forwarded: pending
+Author: Oleksandr Shneyder &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">oleksandr.shneyder at obviously-nice.de</A>&gt;
+Last-Update: 2012-01-13
+--- a/nx-X11/config/cf/host.def
++++ b/nx-X11/config/cf/host.def
+@@ -686,7 +686,7 @@
+  *
+ #define BuildXinerama		NO
+  */
+-#define BuildXinerama		NO
++#define BuildXinerama		YES
+ 
+ /*
+  * If you don't want to build support for the GLX extension, uncomment this.
+--- a/nx-X11/config/cf/X11.tmpl
++++ b/nx-X11/config/cf/X11.tmpl
+@@ -456,7 +456,7 @@
+ #define BuildXinerama		NO
+ #endif
+ #ifndef BuildXineramaLibrary
+-#define BuildXineramaLibrary	(BuildXinerama &amp;&amp; !BuildServersOnly)
++#define BuildXineramaLibrary	(BuildXinerama)
+ #endif
+ #ifndef BuildDmxDevelTools
+ #define BuildDmxDevelTools	NO
+--- a/nx-X11/lib/Xinerama/Xinerama.c
++++ b/nx-X11/lib/Xinerama/Xinerama.c
+@@ -249,6 +249,9 @@
+     xXineramaIsActiveReq  	*req;
+     XExtDisplayInfo 		*info = find_display (dpy);
+ 
++
++    return True;
++
+     if(!XextHasExtension(info))
+ 	return False;  /* server doesn't even have the extension */
+ 
+@@ -279,39 +282,72 @@
+     xXineramaQueryScreensReq	*req;
+     XineramaScreenInfo		*scrnInfo = NULL;
+ 
+-    PanoramiXCheckExtension (dpy, info, 0);
++    int i;
++    int x,y,w,h;
++    FILE* fptr;
++    if((fptr=fopen(getenv(&quot;NX_XINERAMA_CONF&quot;),&quot;r&quot;))==NULL) {
++	PanoramiXCheckExtension (dpy, info, 0);
++	LockDisplay (dpy);
++	GetReq (XineramaQueryScreens, req);
++	req-&gt;reqType = info-&gt;codes-&gt;major_opcode;
++	req-&gt;panoramiXReqType = X_XineramaQueryScreens;
++	if (!_XReply (dpy, (xReply *) &amp;rep, 0, xFalse)) {
++	    UnlockDisplay (dpy);
++	    SyncHandle ();
++	    return NULL;
++	}
++	if(rep.number) {
++	    if((scrnInfo = Xmalloc(sizeof(XineramaScreenInfo) * rep.number))) {
++		xXineramaScreenInfo scratch;
++		int i;
++
++		for(i = 0; i &lt; rep.number; i++) {
++		    _XRead(dpy, (char*)(&amp;scratch), sz_XineramaScreenInfo);
++		    scrnInfo[i].screen_number = i;
++		    scrnInfo[i].x_org    = scratch.x_org;
++		    scrnInfo[i].y_org    = scratch.y_org;
++		    scrnInfo[i].width    = scratch.width;
++		    scrnInfo[i].height           = scratch.height;
++		}
++
++		*number = rep.number;
++	    } else {
++		_XEatData(dpy, rep.length &lt;&lt; 2);
++	    }
++	}
+ 
+-    LockDisplay (dpy);
+-    GetReq (XineramaQueryScreens, req);
+-    req-&gt;reqType = info-&gt;codes-&gt;major_opcode;
+-    req-&gt;panoramiXReqType = X_XineramaQueryScreens;
+-    if (!_XReply (dpy, (xReply *) &amp;rep, 0, xFalse)) {
+ 	UnlockDisplay (dpy);
+ 	SyncHandle ();
+-	return NULL;
+-    }
+ 
+-    if(rep.number) {
+-	if((scrnInfo = Xmalloc(sizeof(XineramaScreenInfo) * rep.number))) {
+-	    xXineramaScreenInfo scratch;
+-	    int i;
+-
+-	    for(i = 0; i &lt; rep.number; i++) {
+-		_XRead(dpy, (char*)(&amp;scratch), sz_XineramaScreenInfo);
+-		scrnInfo[i].screen_number = i;
+-		scrnInfo[i].x_org 	  = scratch.x_org;
+-		scrnInfo[i].y_org 	  = scratch.y_org;
+-		scrnInfo[i].width 	  = scratch.width;
+-		scrnInfo[i].height 	  = scratch.height;
+-	    }
++    } else {
+ 
+-	    *number = rep.number;
+-	} else
+-	    _XEatData(dpy, rep.length &lt;&lt; 2);
++	i=0;
++	while(!feof(fptr)) {
++	    w=h=0;
++	    fscanf(fptr,&quot;%d %d %d %d&quot;,&amp;x,&amp;y,&amp;w,&amp;h);
++	    if(w&amp;&amp;h)
++	    i++;
++	}
++	rewind(fptr);
++	*number=i;
++	if((scrnInfo = Xmalloc(sizeof(XineramaScreenInfo) * i))) {
++	    i=0;
++	    while(!feof(fptr)){
++		w=h=0;
++		fscanf(fptr,&quot;%d %d %d %d&quot;,&amp;x,&amp;y,&amp;w,&amp;h);
++		if(w&amp;&amp;h){
++		    scrnInfo[i].screen_number=i;
++		    scrnInfo[i].x_org=x;
++		    scrnInfo[i].y_org=y;
++		    scrnInfo[i].width=w;
++		    scrnInfo[i].height=h;
++		    i++;
++		}
++	    }
++	}
++	fclose(fptr);
+     }
+ 
+-    UnlockDisplay (dpy);
+-    SyncHandle ();
+     return scrnInfo;
+ }
+ 
+--- a/nx-X11/programs/Xserver/hw/nxagent/Imakefile
++++ b/nx-X11/programs/Xserver/hw/nxagent/Imakefile
+@@ -206,7 +206,7 @@
+           -UNX_DEBUG_INPUT \
+ 	  -DRANDR_10_INTERFACE \
+ 	  -DRANDR_12_INTERFACE \
+-          -UPANORAMIX \
++          -DPANORAMIX \
+           -UDEBUG_TREE
+ 
+ all:: $(OBJS)
+--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXxvdisp.c
++++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXxvdisp.c
+@@ -275,17 +275,19 @@
+     case xv_PutVideo:
+ #ifdef PANORAMIX
+         if(!noPanoramiXExtension)
+-            result = (XineramaXvPutVideo(client)); break;
++            result = (XineramaXvPutVideo(client));
+         else
+ #endif
+-            result = (ProcXvPutVideo(client)); break;
++            result = (ProcXvPutVideo(client));
++            break;
+     case xv_PutStill:
+ #ifdef PANORAMIX
+         if(!noPanoramiXExtension)
+-            result = (XineramaXvPutStill(client)); break
++            result = (XineramaXvPutStill(client));
+         else
+ #endif
+-    	    result = (ProcXvPutStill(client)); break;
++    	    result = (ProcXvPutStill(client));
++    	    break;
+     case xv_GetVideo: result = (ProcXvGetVideo(client)); break;
+     case xv_GetStill: result = (ProcXvGetStill(client)); break;
+     case xv_GrabPort: result = (ProcXvGrabPort(client)); break;
+@@ -295,35 +297,39 @@
+     case xv_StopVideo: 
+ #ifdef PANORAMIX
+         if(!noPanoramiXExtension)
+-	    result = (XineramaXvStopVideo(client)); break;
++	    result = (XineramaXvStopVideo(client));
+ 	else
+ #endif
+-	    result = (ProcXvStopVideo(client)); break;
++	    result = (ProcXvStopVideo(client)); 
++            break;
+     case xv_SetPortAttribute: 
+ #ifdef PANORAMIX
+         if(!noPanoramiXExtension)
+-	    result = (XineramaXvSetPortAttribute(client)); break;
++	    result = (XineramaXvSetPortAttribute(client));
+ 	else
+ #endif
+-	    result = (ProcXvSetPortAttribute(client)); break;
++	    result = (ProcXvSetPortAttribute(client));
++            break;
+     case xv_GetPortAttribute: result = (ProcXvGetPortAttribute(client)); break;
+     case xv_QueryBestSize: result = (ProcXvQueryBestSize(client)); break;
+     case xv_QueryPortAttributes: result = (ProcXvQueryPortAttributes(client)); break;
+     case xv_PutImage:
+ #ifdef PANORAMIX
+         if(!noPanoramiXExtension)
+-	    result = (XineramaXvPutImage(client)); break;
++	    result = (XineramaXvPutImage(client));
+ 	else
+ #endif
+-	    result = (ProcXvPutImage(client)); break;
++	    result = (ProcXvPutImage(client));
++            break;
+ #ifdef MITSHM
+     case xv_ShmPutImage: 
+ #ifdef PANORAMIX
+         if(!noPanoramiXExtension)
+-	    result = (XineramaXvShmPutImage(client)); break;
++	    result = (XineramaXvShmPutImage(client));
+ 	else
+ #endif
+-	    result = (ProcXvShmPutImage(client)); break;
++	    result = (ProcXvShmPutImage(client));
++	    break;
+ #endif
+     case xv_QueryImageAttributes: result = (ProcXvQueryImageAttributes(client)); break;
+     case xv_ListImageFormats: result = (ProcXvListImageFormats(client)); break;
+--- a/nx-X11/programs/Xserver/Imakefile
++++ b/nx-X11/programs/Xserver/Imakefile
+@@ -1021,7 +1021,7 @@
+ #else
+ NXAGENTNXLIBS = -L ../../../nxcomp -L ../../../nxcompext -L ../../../nxcompshad \
+                 -lXcomp -lXcompext -lXcompshad -lXrender -lX11 -lXext -lXfixes \
+-                -L../../../nx-X11/exports/lib -lXtst -lXdamage -lXrandr -lXcomposite
++                -L../../../nx-X11/exports/lib -lXtst -lXdamage -lXrandr -lXcomposite -lXinerama
+ #endif
+ 
+ #endif
+--- a/nx-X11/programs/Xserver/Xext/panoramiX.c
++++ b/nx-X11/programs/Xserver/Xext/panoramiX.c
+@@ -1045,16 +1045,7 @@
+     rep.type = X_Reply;
+     rep.length = 0;
+     rep.sequenceNumber = client-&gt;sequence;
+-#if 1
+-    {
+-	/* The following hack fools clients into thinking that Xinerama
+-	 * is disabled even though it is not. */
+-	extern Bool PanoramiXExtensionDisabledHack;
+-	rep.state = !noPanoramiXExtension &amp;&amp; !PanoramiXExtensionDisabledHack;
+-    }
+-#else
+     rep.state = !noPanoramiXExtension;
+-#endif
+     if (client-&gt;swapped) {
+ 	register int n;
+ 	swaps (&amp;rep.sequenceNumber, n);
+--- a/nx-X11/programs/Xserver/Xext/panoramiX.h
++++ b/nx-X11/programs/Xserver/Xext/panoramiX.h
+@@ -44,7 +44,7 @@
+ #define _PANORAMIX_H_
+ 
+ #include &lt;X11/extensions/panoramiXext.h&gt;
+-#include &quot;gcstruct.h&quot;
++/*#include &quot;gcstruct.h&quot;*/
+ 
+ 
+ typedef struct _PanoramiXData {
diff --git a/debian/patches/209_x2goagent-add-man-page.full.patch b/debian/patches/209_x2goagent-add-man-page.full.patch
new file mode 100644
index 0000000..00ade43
--- /dev/null
+++ b/debian/patches/209_x2goagent-add-man-page.full.patch
@@ -0,0 +1,38 @@
+--- /dev/null
++++ b/nx-X11/programs/Xserver/hw/nxagent/man/x2goagent.1
+@@ -0,0 +1,35 @@
++.TH x2goagent 1
++.SH NAME
++x2goagent \- X2Go Agent.
++.SH SYNOPSIS
++.B x2goagent
++.I &quot;[options]&quot;
++
++.SH DESCRIPTION
++\fBx2goagent\fR is an Xnest-like X server for remote application/desktop access.
++.PP
++\fBx2goagent\fR implements a very efficient compression of the X11 protocol.
++.PP
++This increases performance when using X applications over high latency and
++low bandwidth networks, while providing a local (LAN-like) usage experience
++even if connecting from off-site locations (via cable modem or GSM).
++.PP
++\fBx2goagent\fR is not designed to be used as a standalone application.
++It has to be launched on the server side by the X2Go server software.
++.PP
++Available clients are
++\fBx2goclient\fR, \fBpyhoca-gui\fR and \fBpyhoca-gui\fR (using the
++Python X2Go API).
++
++.SH OPTIONS
++.TP
++.B \--help
++Lists all others options that are not listed here.
++
++.SH FURTHER READINGS
++Information on X2Go: <A HREF="http://wiki.x2go.org">http://wiki.x2go.org</A>
++.PP
++Information on NX: <A HREF="http://www.nomachine.com">http://www.nomachine.com</A>
++
++.SH AUTHOR
++This manual page was written by Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;.
diff --git a/debian/patches/300_nxagent_set-wm-class.full.patch b/debian/patches/300_nxagent_set-wm-class.full.patch
new file mode 100644
index 0000000..765d6bc
--- /dev/null
+++ b/debian/patches/300_nxagent_set-wm-class.full.patch
@@ -0,0 +1,60 @@
+Description: Set WM_CLASS to X2GoAgent/NXAgent
+ Depending on the binary name of the agent either NXAgent
+ or X2GoAgent is set as WM_Class.
+ .
+ This is needed for some window managers (like the one shipped with
+ Maemo)
+ .
+ The original WM_CLASS patch has been taken from the FreeNX patch
+ series, author unknown.
+ .
+ The nxagent/x2goagent has been done by the X2Go Project, author
+ see below.
+Forwarded: not-needed
+Author: Oleksandr Shneyder &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">oleksandr.shneyder at obviously-nice.de</A>&gt;
+Last-Update: 2012-01-11
+--- a/nx-X11/programs/Xserver/hw/nxagent/Screen.c
++++ b/nx-X11/programs/Xserver/hw/nxagent/Screen.c
+@@ -1756,6 +1756,42 @@
+                   nxagentDefaultWindows[pScreen-&gt;myNum]);
+       #endif
+ 
++      /*
++       * Setting WM_CLASS to &quot;X2GoAgent&quot; when running in X2Go Agent mode
++       * we need it to properly display all window parameters by some WMs
++       * (for example on Maemo)
++       */
++      if(nxagentX2go)
++      {
++        #ifdef TEST
++        fprintf(stderr, &quot;nxagentOpenScreen: Setting WM_CLASS and WM_NAME for window withid [%ld].\n&quot;,
++                nxagentDefaultWindows[pScreen-&gt;myNum]);
++        #endif
++        XClassHint hint;
++        hint.res_name=malloc(strlen(&quot;X2GoAgent&quot;)+1);
++        hint.res_class=malloc(strlen(&quot;X2GoAgent&quot;)+1);
++        strcpy(hint.res_name,&quot;X2GoAgent&quot;);
++        strcpy(hint.res_class,&quot;X2GoAgent&quot;);
++        XSetClassHint(nxagentDisplay,nxagentDefaultWindows[pScreen-&gt;myNum],&amp;hint);
++        free(hint.res_name);
++        free(hint.res_class);
++      } else {
++        #ifdef TEST
++        fprintf(stderr, &quot;nxagentOpenScreen: Setting WM_CLASS and WM_NAME for window withid [%ld].\n&quot;,
++                nxagentDefaultWindows[pScreen-&gt;myNum]);      
++        #endif
++      
++        XClassHint hint;
++        hint.res_name=malloc(strlen(&quot;NXAgent&quot;)+1);
++        hint.res_class=malloc(strlen(&quot;NXAgent&quot;)+1);
++        strcpy(hint.res_name,&quot;NXAgent&quot;);
++        strcpy(hint.res_class,&quot;NXAgent&quot;);
++        XSetClassHint(nxagentDisplay,nxagentDefaultWindows[pScreen-&gt;myNum],&amp;hint);
++        free(hint.res_name);
++        free(hint.res_class);
++      }
++
++
+       if (nxagentOption(Fullscreen))
+       {
+         nxagentFullscreenWindow = nxagentDefaultWindows[pScreen-&gt;myNum];
diff --git a/debian/patches/999_nxagent_unbrand-nxagent-brand-x2goagent.full.patch b/debian/patches/999_nxagent_unbrand-nxagent-brand-x2goagent.full.patch
new file mode 100644
index 0000000..7a5ce54
--- /dev/null
+++ b/debian/patches/999_nxagent_unbrand-nxagent-brand-x2goagent.full.patch
@@ -0,0 +1,296 @@
+Description: Unbrand NX Agent Startup Screen / Brand X2Go Agent Startup Screen
+ When launched with NX Agent flavour, the startup screen gets unbranded by
+ this patch (the !M logo does not get shown).
+ .
+ When launched with X2Go Agent flavour, the startup screen gets branded
+ with the X2GO logo.
+Forwarded: not-needed
+Author: Oleksandr Shneyder &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">oleksandr.shneyder at obviously-nice.de</A>&gt;
+Last-Update: 2012-01-11
+--- a/nx-X11/programs/Xserver/hw/nxagent/Splash.c
++++ b/nx-X11/programs/Xserver/hw/nxagent/Splash.c
+@@ -35,6 +35,7 @@
+ #include &quot;Windows.h&quot;
+ #include &quot;Atoms.h&quot;
+ #include &quot;Trap.h&quot;
++#include &quot;Init.h&quot;
+ 
+ /*
+  * Set here the required log level.
+@@ -53,6 +54,7 @@
+ int nxagentLogoWhite;
+ int nxagentLogoRed;
+ int nxagentLogoBlack;
++int nxagentLogoGray;
+ 
+ void nxagentPaintLogo(Window win, GC gc, int scale, int width, int height);
+ 
+@@ -166,6 +168,15 @@
+   XPoint    m[12];
+   int w, h, c, w2, h2;
+ 
++  /*
++   * Show only X2GO Logo when running as X2Go Agent
++   */
++   if(! nxagentX2go)
++   {
++     nxagentPixmapLogo = 0L;
++     return;
++   }
++
+   #ifdef DEBUG
+   fprintf(stderr, &quot;nxagenShowtLogo: Got called.\n&quot;);
+   #endif
+@@ -218,75 +229,146 @@
+   XSetForeground(nxagentDisplay, gc, nxagentLogoRed);
+   XSetBackground(nxagentDisplay, gc, nxagentLogoWhite);
+ 
+-  rect[0].x = w2-10*c;               rect[0].y = h2-8*c;
+-  rect[1].x = w2-10*c;               rect[1].y = h2+8*c;
+-  rect[2].x = w2+10*c;               rect[2].y = h2+8*c;
+-  rect[3].x = w2+10*c;               rect[3].y = h2-8*c;
++  /*
++   * Draw X2GO Logo
++   */
+ 
++  /*
++   * Begin 'X'.
++   */
++
++  XSetForeground(nxagentDisplay, gc, nxagentLogoGray);
++  XSetBackground(nxagentDisplay, gc, nxagentLogoWhite);
++  rect[0].x = w2-7*c;               rect[0].y = h2-5*c;
++  rect[1].x = w2-8*c;               rect[1].y = h2-5*c;
++  rect[2].x = w2-4*c;               rect[2].y = h2+3*c;
++  rect[3].x = w2-3*c;               rect[3].y = h2+3*c;
+   XFillPolygon(nxagentDisplay, nxagentPixmapLogo, gc, rect, 4, Convex, CoordModeOrigin);
+ 
+-  #ifdef NXAGENT_LOGO_DEBUG
+-  fprintf(stderr, &quot;filled red rect\n&quot;);
+-  #endif
++  rect[0].x = w2-4*c;               rect[0].y = h2-5*c;
++  rect[1].x = w2-3*c;               rect[1].y = h2-5*c;
++  rect[2].x = w2-7*c;               rect[2].y = h2+3*c;
++  rect[3].x = w2-8*c;               rect[3].y = h2+3*c;
++  XFillPolygon(nxagentDisplay, nxagentPixmapLogo, gc, rect, 4, Convex, CoordModeOrigin);
+ 
+-  rect[0].x = w2-9*c;               rect[0].y = h2-7*c;
+-  rect[1].x = w2-9*c;               rect[1].y = h2+7*c;
+-  rect[2].x = w2+9*c;               rect[2].y = h2+7*c;
+-  rect[3].x = w2+9*c;               rect[3].y = h2-7*c;
++  /*
++   * End 'X'.
++   */
+ 
+-  XSetForeground(nxagentDisplay, gc, nxagentLogoWhite);
+-  XSetBackground(nxagentDisplay, gc, nxagentLogoRed);
++  /*
++   * Start '2'.
++   */
++
++  rect[0].x = w2-2*c;               rect[0].y = h2-5*c;
++  rect[1].x = w2-1*c;               rect[1].y = h2-5*c;
++  rect[2].x = w2-1*c;               rect[2].y = h2-3*c;
++  rect[3].x = w2-2*c;               rect[3].y = h2-3*c;
++  XFillPolygon(nxagentDisplay, nxagentPixmapLogo, gc, rect, 4, Convex, CoordModeOrigin);
++
++  rect[0].x = w2-2*c;               rect[0].y = h2-5*c;
++  rect[1].x = w2+2*c;               rect[1].y = h2-5*c;
++  rect[2].x = w2+2*c;               rect[2].y = h2-4*c;
++  rect[3].x = w2-2*c;               rect[3].y = h2-4*c;
++  XFillPolygon(nxagentDisplay, nxagentPixmapLogo, gc, rect, 4, Convex, CoordModeOrigin);
+ 
++  rect[0].x = w2+1*c;               rect[0].y = h2-5*c;
++  rect[1].x = w2+2*c;               rect[1].y = h2-5*c;
++  rect[2].x = w2+2*c;               rect[2].y = h2-2*c;
++  rect[3].x = w2+1*c;               rect[3].y = h2-2*c;
+   XFillPolygon(nxagentDisplay, nxagentPixmapLogo, gc, rect, 4, Convex, CoordModeOrigin);
+ 
++  rect[0].x = w2+2*c;               rect[0].y = h2-2*c;
++  rect[1].x = w2+1*c;               rect[1].y = h2-2*c;
++  rect[2].x = w2-2*c;               rect[2].y = h2+2*c;
++  rect[3].x = w2-1*c;               rect[3].y = h2+2*c;
++  XFillPolygon(nxagentDisplay, nxagentPixmapLogo, gc, rect, 4, Convex, CoordModeOrigin);
++
++
++  rect[0].x = w2-2*c;               rect[0].y = h2+2*c;
++  rect[1].x = w2+2*c;               rect[1].y = h2+2*c;
++  rect[2].x = w2+2*c;               rect[2].y = h2+3*c;
++  rect[3].x = w2-2*c;               rect[3].y = h2+3*c;
++  XFillPolygon(nxagentDisplay, nxagentPixmapLogo, gc, rect, 4, Convex, CoordModeOrigin);
+   /*
+-   * Begin 'M'.
++   * End '2'.
+    */
+ 
+-  m[0].x = w2-3*c;  m[0].y = h2-5*c;
+-  m[1].x = w2+7*c;  m[1].y = h2-5*c;
+-  m[2].x = w2+7*c;  m[2].y = h2+5*c;
+-  m[3].x = w2+5*c;  m[3].y = h2+5*c;
+-  m[4].x = w2+5*c;  m[4].y = h2-3*c;
+-  m[5].x = w2+3*c;  m[5].y = h2-3*c;
+-  m[6].x = w2+3*c;  m[6].y = h2+5*c;
+-  m[7].x = w2+1*c;  m[7].y = h2+5*c;
+-  m[8].x = w2+1*c;  m[8].y = h2-3*c;
+-  m[9].x = w2-1*c;  m[9].y = h2-3*c;
+-  m[10].x = w2-1*c; m[10].y = h2+5*c;
+-  m[11].x = w2-3*c; m[11].y = h2+5*c;
++  /*
++   * Start 'G'.
++   */
+ 
+-  XSetForeground(nxagentDisplay, gc, nxagentLogoRed);
+-  XSetBackground(nxagentDisplay, gc, nxagentLogoWhite);
++  rect[0].x = w2+3*c;               rect[0].y = h2-5*c;
++  rect[1].x = w2+7*c;               rect[1].y = h2-5*c;
++  rect[2].x = w2+7*c;               rect[2].y = h2-4*c;
++  rect[3].x = w2+3*c;               rect[3].y = h2-4*c;
++  XFillPolygon(nxagentDisplay, nxagentPixmapLogo, gc, rect, 4, Convex, CoordModeOrigin);
+ 
+-  XFillPolygon(nxagentDisplay, nxagentPixmapLogo, gc, m, 12, Nonconvex, CoordModeOrigin);
++  rect[0].x = w2+3*c;               rect[0].y = h2-5*c;
++  rect[1].x = w2+4*c;               rect[1].y = h2-5*c;
++  rect[2].x = w2+4*c;               rect[2].y = h2+3*c;
++  rect[3].x = w2+3*c;               rect[3].y = h2+3*c;
++  XFillPolygon(nxagentDisplay, nxagentPixmapLogo, gc, rect, 4, Convex, CoordModeOrigin);
+ 
++  rect[0].x = w2+3*c;               rect[0].y = h2+2*c;
++  rect[1].x = w2+7*c;               rect[1].y = h2+2*c;
++  rect[2].x = w2+7*c;               rect[2].y = h2+3*c;
++  rect[3].x = w2+3*c;               rect[3].y = h2+3*c;
++  XFillPolygon(nxagentDisplay, nxagentPixmapLogo, gc, rect, 4, Convex, CoordModeOrigin);
++
++  rect[0].x = w2+6*c;               rect[0].y = h2-5*c;
++  rect[1].x = w2+7*c;               rect[1].y = h2-5*c;
++  rect[2].x = w2+7*c;               rect[2].y = h2-3*c;
++  rect[3].x = w2+6*c;               rect[3].y = h2-3*c;
++  XFillPolygon(nxagentDisplay, nxagentPixmapLogo, gc, rect, 4, Convex, CoordModeOrigin);
++
++  rect[0].x = w2+6*c;               rect[0].y = h2-0*c;
++  rect[1].x = w2+7*c;               rect[1].y = h2-0*c;
++  rect[2].x = w2+7*c;               rect[2].y = h2+3*c;
++  rect[3].x = w2+6*c;               rect[3].y = h2+3*c;
++  XFillPolygon(nxagentDisplay, nxagentPixmapLogo, gc, rect, 4, Convex, CoordModeOrigin);
++
++  rect[0].x = w2+5*c;               rect[0].y = h2-1*c;
++  rect[1].x = w2+7*c;               rect[1].y = h2-1*c;
++  rect[2].x = w2+7*c;               rect[2].y = h2+0*c;
++  rect[3].x = w2+5*c;               rect[3].y = h2+0*c;
++  XFillPolygon(nxagentDisplay, nxagentPixmapLogo, gc, rect, 4, Convex, CoordModeOrigin);
+   /*
+-   * End 'M'.
++   * End 'G'.
+    */
+ 
+   /*
+-   * Begin '!'.
++   * Start 'O'.
+    */
+ 
+-  rect[0].x = w2-7*c;               rect[0].y = h2-5*c;
+-  rect[1].x = w2-5*c;               rect[1].y = h2-5*c;
+-  rect[2].x = w2-5*c;               rect[2].y = h2+2*c;
+-  rect[3].x = w2-7*c;               rect[3].y = h2+2*c;
++  rect[0].x = w2+8*c;               rect[0].y = h2-5*c;
++  rect[1].x = w2+12*c;              rect[1].y = h2-5*c;
++  rect[2].x = w2+12*c;              rect[2].y = h2-4*c;
++  rect[3].x = w2+8*c;               rect[3].y = h2-4*c;
++  XFillPolygon(nxagentDisplay, nxagentPixmapLogo, gc, rect, 4, Convex, CoordModeOrigin);
+ 
++  rect[0].x = w2+8*c;               rect[0].y = h2+3*c;
++  rect[1].x = w2+12*c;              rect[1].y = h2+3*c;
++  rect[2].x = w2+12*c;              rect[2].y = h2+2*c;
++  rect[3].x = w2+8*c;               rect[3].y = h2+2*c;
+   XFillPolygon(nxagentDisplay, nxagentPixmapLogo, gc, rect, 4, Convex, CoordModeOrigin);
+ 
+-  rect[0].x = w2-7*c;               rect[0].y = h2+3*c;
+-  rect[1].x = w2-5*c;               rect[1].y = h2+3*c;
+-  rect[2].x = w2-5*c;               rect[2].y = h2+5*c;
+-  rect[3].x = w2-7*c;               rect[3].y = h2+5*c;
++  rect[0].x = w2+8*c;               rect[0].y = h2-5*c;
++  rect[1].x = w2+9*c;               rect[1].y = h2-5*c;
++  rect[2].x = w2+9*c;               rect[2].y = h2+3*c;
++  rect[3].x = w2+8*c;               rect[3].y = h2+3*c;
++  XFillPolygon(nxagentDisplay, nxagentPixmapLogo, gc, rect, 4, Convex, CoordModeOrigin);
+ 
++  rect[0].x = w2+11*c;               rect[0].y = h2-5*c;
++  rect[1].x = w2+12*c;               rect[1].y = h2-5*c;
++  rect[2].x = w2+12*c;               rect[2].y = h2+3*c;
++  rect[3].x = w2+11*c;               rect[3].y = h2+3*c;
+   XFillPolygon(nxagentDisplay, nxagentPixmapLogo, gc, rect, 4, Convex, CoordModeOrigin);
+ 
+   /*
+-   * End 'M'.
++   * End 'O'.
+    */
+ 
++
+   XSetWindowBackgroundPixmap(nxagentDisplay, win, nxagentPixmapLogo);
+ 
+   #ifdef NXAGENT_LOGO_DEBUG
+--- a/nx-X11/programs/Xserver/hw/nxagent/Display.c
++++ b/nx-X11/programs/Xserver/hw/nxagent/Display.c
+@@ -1403,22 +1403,10 @@
+   g = pV.green_mask;
+   b = pV.blue_mask;
+ 
+-  if (!pV.red_mask || !pV.green_mask || !pV.blue_mask)
+-  {
+-    nxagentLogoBlack = 0x000000;
+-    nxagentLogoRed   = 0xff0000;
+-    nxagentLogoWhite = 0xffffff;
+-  }
+-  else
+-  {
+-    for (or=0, off=0x800000; (r&amp;(off&gt;&gt;or)) == 0; or++);
+-    for (og=0, off=0x800000; (g&amp;(off&gt;&gt;og)) == 0; og++);
+-    for (ob=0, off=0x800000; (b&amp;(off&gt;&gt;ob)) == 0; ob++);
+-
+-    nxagentLogoRed   = nxagentLogoColor(0xff0000);
+-    nxagentLogoBlack = nxagentLogoColor(0x000000);
+-    nxagentLogoWhite = 0xffffff;
+-  }
++  nxagentLogoBlack = 0x000000;
++  nxagentLogoRed   = 0xff0000;
++  nxagentLogoWhite = 0xffffff;
++  nxagentLogoGray  = 0x222222;
+ 
+   #ifdef WATCH
+ 
+@@ -2673,22 +2661,10 @@
+   g = pV.green_mask;
+   b = pV.blue_mask;
+ 
+-  if (!pV.red_mask || !pV.green_mask || !pV.blue_mask)
+-  {
+-    nxagentLogoBlack = 0x000000;
+-    nxagentLogoRed   = 0xff0000;
+-    nxagentLogoWhite = 0xffffff;
+-  }
+-  else
+-  {
+-    for (or=0, off=0x800000; (r&amp;(off&gt;&gt;or)) == 0; or++);
+-    for (og=0, off=0x800000; (g&amp;(off&gt;&gt;og)) == 0; og++);
+-    for (ob=0, off=0x800000; (b&amp;(off&gt;&gt;ob)) == 0; ob++);
+-
+-    nxagentLogoRed   = nxagentLogoColor(0xff0000);
+-    nxagentLogoBlack = nxagentLogoColor(0x000000);
+-    nxagentLogoWhite = 0xffffff;
+-  }
++  nxagentLogoBlack = 0x000000;
++  nxagentLogoRed   = 0xff0000;
++  nxagentLogoWhite = 0xffffff;
++  nxagentLogoGray  = 0x222222;
+ 
+   useXpmIcon = nxagentMakeIcon(nxagentDisplay, &amp;nxagentIconPixmap, &amp;nxagentIconShape);
+ 
+--- a/nx-X11/programs/Xserver/hw/nxagent/Splash.h
++++ b/nx-X11/programs/Xserver/hw/nxagent/Splash.h
+@@ -33,6 +33,7 @@
+ extern int nxagentLogoWhite;
+ extern int nxagentLogoRed;
+ extern int nxagentLogoBlack;
++extern int nxagentLogoGray;
+ 
+ extern Window nxagentSplashWindow;
+ 
diff --git a/debian/patches/series b/debian/patches/series
index a02a19b..d22f4b4 100644
--- a/debian/patches/series
+++ b/debian/patches/series
@@ -1,32 +1,40 @@
-000_add-NX-redistribution-README.patch
-001_add-main-makefile.patch
-002_nxcompshad_build-against-nx-x11-only.patch
-003_nxcompshad_gcc43.patch
-004_nx-x11_fix-nxcompshad-build.patch
-005_nxcomp_gcc43.patch
-007_nxcompshad_clean-gch-files.patch
-009_nxproxy-add-man-page.patch
-009_nxagent-add-man-page.patch
-010_nxauth_fix-binary-name-in-man-page.patch
-011_nxcomp_sa-restorer.patch
-012_nxcomp_makefile-uninstall.patch
-013_nxcompext_makefile-uninstall.patch
-014_nxcompshad_makefile-uninstall.patch
-015_nxproxy_makefile-uninstall.patch
-016_nx-x11_install-location.patch
-017_nx-x11_update-autotools-helper-files.patch
-018_nx-x11_update-libtool-ltmain-script.patch
-019_nx-x11_expat-build-against-system-libxmltok.patch
-020_add-nxagent-wrapper.patch
-021_add-nxauth-wrapper.patch
-022_add-nxproxy-wrapper.patch
-101_nxagent_set-rgb-path.patch
-102_xserver-xext_set-securitypolicy-path.patch
-103_nxagent_set-X0-config-path.patch
-105_nxagent_export-remote-keyboard-config.patch
-106_nxagent_utf8-copy-clipboard.patch
-107_nxagent_clipboard-compound-text+small-bed-sheets.patch
-108_nxagent_wine-close-delay.patch
-109_nxagent_locale-utf8-compound-text.patch
-110_nxagent_createpixmap-bounds-check.patch
-200_nxagent_unbrand-agent.patch
+000_add-NX-redistribution-README.full+lite.patch
+001_add-main-makefile.full+lite.patch
+002_nxcompshad_build-against-nx-x11-only.full.patch
+003_nxcompshad_gcc43.full.patch
+004_nx-x11_fix-nxcompshad-build.full.patch
+005_nxcomp_gcc43.full+lite.patch
+007_nxcompshad_clean-gch-files.full.patch
+009_nxproxy-add-man-page.full+lite.patch
+009_nxagent-add-man-page.full.patch
+010_nxauth_fix-binary-name-in-man-page.full.patch
+012_nxcomp_makefile-uninstall.full+lite.patch
+013_nxcompext_makefile-uninstall.full.patch
+014_nxcompshad_makefile-uninstall.full.patch
+015_nxproxy_makefile-uninstall.full+lite.patch
+016_nx-x11_install-location.full.patch
+016_nx-X11_install-location.debian.patch
+017_nx-x11_update-autotools-helper-files.full.patch
+018_nx-x11_update-libtool-ltmain-script.full.patch
+019_nx-x11_expat-build-against-system-libxmltok.full.patch
+020_add-nxagent-wrapper.full.patch
+021_add-nxauth-wrapper.full.patch
+022_add-nxproxy-wrapper.full+lite.patch
+023_add-x2goagent-wrapper.full.patch
+101_nxagent_set-rgb-path.full.patch
+102_xserver-xext_set-securitypolicy-path.full.patch
+102_xserver-xext_set-securitypolicy-path.debian.patch
+103_nxagent_set-X0-config-path.full.patch
+105_nxagent_export-remote-keyboard-config.full.patch
+106_nxagent_utf8-copy-clipboard.full.patch
+107_nxagent_clipboard-compound-text+small-bed-sheets.full.patch
+108_nxagent_wine-close-delay.full.patch
+109_nxagent_locale-utf8-compound-text.full.patch
+110_nxagent_createpixmap-bounds-check.full.patch
+200_nxagent_check-binary-x2go-flavour.full.patch
+201_nxagent_set-x2go-icon-if-x2goagent-flavour.full.patch
+202_nx-x11_enable-xinerama.full.patch
+209_x2goagent-add-man-page.full.patch
+300_nxagent_set-wm-class.full.patch
+999_nxagent_unbrand-nxagent-brand-x2goagent.full.patch
+
diff --git a/debian/source.lintian-overrides b/debian/source.lintian-overrides
index e390a7d..0aa6a1a 100644
--- a/debian/source.lintian-overrides
+++ b/debian/source.lintian-overrides
@@ -1,3 +1,4 @@
 nx-libs source: ancient-autotools-helper-file
 nx-libs source: outdated-autotools-helper-file
 nx-libs source: ancient-libtool
+nx-libs source: debian-revision-should-not-be-zero
diff --git a/debian/x2goagent.dirs b/debian/x2goagent.dirs
new file mode 100644
index 0000000..042e97d
--- /dev/null
+++ b/debian/x2goagent.dirs
@@ -0,0 +1,3 @@
+usr/bin
+usr/lib/nx
+usr/share/x2go
\ No newline at end of file
diff --git a/debian/x2goagent.install b/debian/x2goagent.install
new file mode 100644
index 0000000..8fa8af8
--- /dev/null
+++ b/debian/x2goagent.install
@@ -0,0 +1,3 @@
+bin/x2goagent                                  usr/bin
+debian/rgb                                     usr/share/x2go
+nx-X11/programs/Xserver/hw/nxagent/x2go.xpm    usr/share/pixmaps
\ No newline at end of file
diff --git a/debian/x2goagent.links b/debian/x2goagent.links
new file mode 100644
index 0000000..48b2ea5
--- /dev/null
+++ b/debian/x2goagent.links
@@ -0,0 +1 @@
+usr/lib/nx/nxagent usr/lib/x2go/x2goagent
diff --git a/debian/x2goagent.lintian-overrides b/debian/x2goagent.lintian-overrides
new file mode 100644
index 0000000..9e14206
--- /dev/null
+++ b/debian/x2goagent.lintian-overrides
@@ -0,0 +1 @@
+x2goagent: debian-revision-should-not-be-zero
\ No newline at end of file
diff --git a/debian/x2goagent.manpages b/debian/x2goagent.manpages
new file mode 100644
index 0000000..2a8850e
--- /dev/null
+++ b/debian/x2goagent.manpages
@@ -0,0 +1 @@
+nx-X11/programs/Xserver/hw/nxagent/man/x2goagent.1


hooks/post-receive
-- 
nx-libs.git (NX (redistributed))

This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;nx-libs.git&quot; (NX (redistributed)).


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002138.html">[X2go-Commits] x2goserver.git - master (branch) updated:	3.0.99.9-1-g67d66c5
</A></li>
	<LI>Next message: <A HREF="002140.html">[X2go-Commits] x2goclient.git - master (branch) updated:	3.99.0.3-3-g1d1c255
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2139">[ date ]</a>
              <a href="thread.html#2139">[ thread ]</a>
              <a href="subject.html#2139">[ subject ]</a>
              <a href="author.html#2139">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/x2go-commits">More information about the X2go-commits
mailing list</a><br>
</body></html>
