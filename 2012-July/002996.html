<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [X2go-Commits] python-x2go.git - build-main (branch) updated:	0.2.0.6
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/x2go-commits/2012-July/index.html" >
   <LINK REL="made" HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20python-x2go.git%20-%20build-main%20%28branch%29%20updated%3A%0A%090.2.0.6&In-Reply-To=%3C20120702184505.2E1685DB67%40ymir%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002995.html">
   <LINK REL="Next"  HREF="002997.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[X2go-Commits] python-x2go.git - build-main (branch) updated:	0.2.0.6</H1>
    <B>X2Go dev team</B> 
    <A HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20python-x2go.git%20-%20build-main%20%28branch%29%20updated%3A%0A%090.2.0.6&In-Reply-To=%3C20120702184505.2E1685DB67%40ymir%3E"
       TITLE="[X2go-Commits] python-x2go.git - build-main (branch) updated:	0.2.0.6">git-admin at x2go.org
       </A><BR>
    <I>Mon Jul  2 20:45:05 CEST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="002995.html">[X2go-Commits] python-x2go.git - master (branch) updated:	0.2.0.5-8-g704b80d
</A></li>
        <LI>Next message: <A HREF="002997.html">[X2go-Commits] pyhoca-gui.git - master (branch) updated:	0.2.0.0-8-g01ce60e
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2996">[ date ]</a>
              <a href="thread.html#2996">[ thread ]</a>
              <a href="subject.html#2996">[ subject ]</a>
              <a href="author.html#2996">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch, build-main has been updated
       via  704b80dd82e91fc90b38b0ba414fa4dd251e9720 (commit)
       via  a5b0cbb4f6e197084dc2ebb8783b658871c90086 (commit)
       via  e42f321cb958430b9f076095a533b273038e0b0c (commit)
       via  69b60b4eebbfc5fac4050a96d8185009a13a1f6b (commit)
       via  8acf5a8dde4daa53fa696b1188ed32e4f934fe6b (commit)
       via  ca6ee3d9c05a9c67adaf02b39fe1b66516bdebcd (commit)
       via  74e94b351511c2dd1c8e7a7ca6eb92e97f4ec220 (commit)
       via  1cfff12e78fdcd63758a31100f3decbbc6be98a4 (commit)
      from  3b1c605aceda599b49b84248308e31ee9af9af95 (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
-----------------------------------------------------------------------

Summary of changes:
 debian/changelog |   13 +++++++++++++
 x2go/client.py   |    8 ++++++++
 x2go/session.py  |   53 +++++++++++++++++++++++++++++++++++++++++------------
 3 files changed, 62 insertions(+), 12 deletions(-)

The diff of changes is:
diff --git a/debian/changelog b/debian/changelog
index 638a7df..c4ca21d 100644
--- a/debian/changelog
+++ b/debian/changelog
@@ -1,3 +1,16 @@
+python-x2go (0.2.0.6-0~x2go1) unstable; urgency=low
+
+  * New upstream version (0.2.0.6)
+    - Ignore non-master sessions before calling the foldersharing-
+      not-available hook.
+    - Add several double underscore method aliases in X2goSession class.
+    - Add several double underscore method aliases in X2goClient class.
+    - Avoid double notifications on SSHFS being unavailable for the
+      authenticated user.
+    - X2goSession.HOOK_printing_not_available(): Fix log message.
+
+ -- Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;  Mon, 02 Jul 2012 20:41:42 +0200
+
 python-x2go (0.2.0.5-0~x2go1) unstable; urgency=low
 
   * Bugfix release (0.2.0.4):
diff --git a/x2go/client.py b/x2go/client.py
index c9527bb..e52b535 100644
--- a/x2go/client.py
+++ b/x2go/client.py
@@ -1014,6 +1014,7 @@ class X2goClient(object):
 
         &quot;&quot;&quot;
         return self.session_registry.session_summary(session_uuid)
+    __get_session_summary = get_session_summary
 
     ###
     ### WRAPPER METHODS FOR X2goSession objects
@@ -1180,6 +1181,7 @@ class X2goClient(object):
 
         &quot;&quot;&quot;
         return self.session_registry(session_uuid).set_username(username=username)
+    __set_session_username = set_session_username
 
     def check_session_host(self, session_uuid):
         &quot;&quot;&quot;\
@@ -2269,6 +2271,7 @@ class X2goClient(object):
         for session_uuid in self.client_connected_sessions():
             _all_alive = _all_alive and self.server_is_alive(session_uuid)
         return _all_alive
+    __all_servers_are_alive = all_servers_are_alive
 
     def server_valid_x2gouser(self, session_uuid, username=None):
         &quot;&quot;&quot;\
@@ -2331,6 +2334,7 @@ class X2goClient(object):
 
         &quot;&quot;&quot;
         return session_name in self._X2goClient__server_running_sessions(session_uuid)
+    __server_has_running_session_of_name = server_has_running_session_of_name
 
     def server_suspended_sessions(self, session_uuid):
         &quot;&quot;&quot;\
@@ -2362,6 +2366,7 @@ class X2goClient(object):
 
         &quot;&quot;&quot;
         return len(self._X2goClient__server_suspended_sessions(session_uuid)) &gt; 0
+    __server_has_suspended_sessions = server_has_suspended_sessions
 
     def server_has_suspended_session_of_name(self, session_uuid, session_name):
         &quot;&quot;&quot;\
@@ -2376,6 +2381,7 @@ class X2goClient(object):
 
         &quot;&quot;&quot;
         return session_name in self._X2goClient__server_suspended_sessions(session_uuid)
+    __server_has_suspended_session_of_name = server_has_suspended_session_of_name
 
     ###
     ### CLIENT OPERATIONS ON SESSIONS (listing sessions, terminating non-associated sessions etc.)
@@ -2579,6 +2585,7 @@ class X2goClient(object):
             for session in sessions:
                 _list_mounts.update(self.__list_mounts(session_uuid=session(), no_cache=no_cache, refresh_cache=refresh_cache, raw=False))
         return _list_mounts
+    __list_mounts_by_profile_name = list_mounts_by_profile_name
 
     def list_mounts(self, session_uuid,
                     no_cache=False, refresh_cache=False,
@@ -2639,6 +2646,7 @@ class X2goClient(object):
 
         &quot;&quot;&quot;
         return self.session_profiles.profile_names
+    __profile_names = profile_names
 
     def get_client_settings(self):
         &quot;&quot;&quot;\
diff --git a/x2go/session.py b/x2go/session.py
index 160ee53..c04a391 100644
--- a/x2go/session.py
+++ b/x2go/session.py
@@ -357,6 +357,7 @@ class X2goSession(object):
 
         &quot;&quot;&quot;
         return self.client_instance
+    __get_client_instance = get_client_instance
 
     def HOOK_on_control_session_death(self):
         &quot;&quot;&quot;\
@@ -433,7 +434,7 @@ class X2goSession(object):
         if self.client_instance:
             self.client_instance.HOOK_printing_not_available(profile_name=self.profile_name, session_name=self.session_name)
         else:
-            self.logger('HOOK_foldersharing_not_available: X2Go\'s client-side printing feature is not available with this session (%s) of profile %s.' % (self.session_name, self.profile_name), loglevel=log.loglevel_WARN)
+            self.logger('HOOK_printing_not_available: X2Go\'s client-side printing feature is not available with this session (%s) of profile %s.' % (self.session_name, self.profile_name), loglevel=log.loglevel_WARN)
 
     def HOOK_mimebox_not_available(self):
         &quot;&quot;&quot;\
@@ -505,6 +506,7 @@ class X2goSession(object):
                                                         sessions_rootdir=self.sessions_rootdir,
                                                         ssh_rootdir=self.ssh_rootdir,
                                                         logger=self.logger)
+    __init_control_session = init_control_session
 
     def is_master_session(self):
         &quot;&quot;&quot;\
@@ -523,6 +525,7 @@ class X2goSession(object):
         if self.master_session is None and self.client_instance is None:
             return True
         return bool(self.master_session)
+    __is_master_session = is_master_session
 
     def set_master_session(self, wait=0, max_wait=20):
         &quot;&quot;&quot;\
@@ -552,6 +555,7 @@ class X2goSession(object):
             gevent.spawn_later(wait, self.share_all_local_folders)
         else:
             gevent.spawn(self.share_all_local_folders)
+    __set_master_session = set_master_session
 
     def unset_master_session(self):
         &quot;&quot;&quot;\
@@ -562,6 +566,7 @@ class X2goSession(object):
         if self.has_terminal_session():
             self.unshare_all_local_folders()
         self.master_session = False
+    __unset_master_session = unset_master_session
 
     def set_server(self, server):
         &quot;&quot;&quot;\
@@ -572,6 +577,7 @@ class X2goSession(object):
 
         &quot;&quot;&quot;
         self.server = server
+    __set_server = set_server
 
     def set_port(self, port):
         &quot;&quot;&quot;\
@@ -582,6 +588,7 @@ class X2goSession(object):
 
         &quot;&quot;&quot;
         self.port = port
+    __set_port = set_port
 
     def set_profile_name(self, profile_name):
         &quot;&quot;&quot;\
@@ -593,6 +600,7 @@ class X2goSession(object):
         &quot;&quot;&quot;
         self.profile_name = profile_name
         self.control_session.set_profile_name(profile_name)
+    __set_profile_name = set_profile_name
 
     def get_session_profile_option(self, option):
         &quot;&quot;&quot;\
@@ -611,6 +619,7 @@ class X2goSession(object):
             return eval(&quot;self.%s&quot; % option)
         else:
             raise x2go_exceptions.X2goProfileException('Unknown session profile option: %s.' % option)
+    __get_session_profile_option = get_session_profile_option
 
     def __str__(self):
         return self.__get_uuid()
@@ -889,6 +898,7 @@ class X2goSession(object):
             return self.terminal_session.get_session_type()
         else:
             return None
+    __get_session_type = get_session_type
 
     def get_session_title(self):
         &quot;&quot;&quot;\
@@ -903,6 +913,7 @@ class X2goSession(object):
             return self.terminal_session.session_title
         else:
             return 'X2GO-%s' % self.get_session_name()
+    __get_session_title = get_session_title
 
     def get_control_session(self):
         &quot;&quot;&quot;\
@@ -979,6 +990,7 @@ class X2goSession(object):
 
         &quot;&quot;&quot;
         return self.use_sshproxy
+    __uses_sshproxy = uses_sshproxy
 
     def can_sshproxy_auto_connect(self):
         &quot;&quot;&quot;\
@@ -1050,6 +1062,7 @@ class X2goSession(object):
                     gevent.spawn(self.connect)
                 elif self.auto_connect:
                     gevent.spawn(self.HOOK_auto_connect)
+    __do_auto_connect = do_auto_connect
 
     def connect(self, username='', password='', add_to_known_hosts=False, force_password_auth=False,
                 use_sshproxy=False, sshproxy_user='', sshproxy_password=''):
@@ -1174,6 +1187,7 @@ class X2goSession(object):
 
         &quot;&quot;&quot;
         self.server_features = self.control_session.query_server_features()
+    __retrieve_server_features = retrieve_server_features
 
     def get_server_features(self):
         &quot;&quot;&quot;\
@@ -1184,6 +1198,7 @@ class X2goSession(object):
 
         &quot;&quot;&quot;
         return self.server_features
+    __get_server_features = get_server_features
 
     def has_server_feature(self, feature):
         &quot;&quot;&quot;\
@@ -1197,6 +1212,7 @@ class X2goSession(object):
 
         &quot;&quot;&quot;
         return feature in self.get_server_features()
+    __has_server_feature = has_server_feature
 
     def set_session_window_title(self, title=''):
         &quot;&quot;&quot;\
@@ -1210,6 +1226,7 @@ class X2goSession(object):
         &quot;&quot;&quot;
         if self.terminal_session is not None:
             self.terminal_session.set_session_window_title(title=title)
+    __set_session_window_title = set_session_window_title
 
     def raise_session_window(self):
         &quot;&quot;&quot;\
@@ -1219,6 +1236,7 @@ class X2goSession(object):
         &quot;&quot;&quot;
         if self.terminal_session is not None:
             self.terminal_session.raise_session_window()
+    __raise_session_window = raise_session_window
 
     def set_print_action(self, print_action, **kwargs):
         &quot;&quot;&quot;\
@@ -1337,6 +1355,7 @@ class X2goSession(object):
             self.HOOK_on_control_session_death()
             self._X2goSession__disconnect()
             return None
+    __list_mounts = list_mounts
 
     def update_status(self, session_list=None, force_update=False):
         &quot;&quot;&quot;\
@@ -1428,6 +1447,7 @@ class X2goSession(object):
         if self.has_terminal_session() and self.is_running() :
             return self.terminal_session.is_published_applications_provider()
         return False
+    __is_published_applications_provider = is_published_applications_provider
 
     def is_desktop_session(self):
         &quot;&quot;&quot;\
@@ -1440,6 +1460,7 @@ class X2goSession(object):
         if self.has_terminal_session():
             return self.terminal_session.is_desktop_session()
         return False
+    __is_desktop_session = is_desktop_session
 
     def get_published_applications(self, lang=None, refresh=False, raw=False, very_raw=False, max_no_submenus=defaults.PUBAPP_MAX_NO_SUBMENUS):
         &quot;&quot;&quot;\
@@ -1464,6 +1485,7 @@ class X2goSession(object):
         if self.client_instance and hasattr(self.client_instance, 'lang'):
             lang = self.client_instance.lang
         return self.control_session.get_published_applications(lang=lang, refresh=refresh, raw=raw, very_raw=very_raw, max_no_submenus=max_no_submenus)
+    __get_published_applications = get_published_applications
 
     def exec_published_application(self, exec_name, timeout=20):
         &quot;&quot;&quot;\
@@ -1525,6 +1547,7 @@ class X2goSession(object):
                 else:
                     if not self.published_applications:
                         return self.start()
+    __do_auto_start_or_resume = do_auto_start_or_resume
 
     def resume(self, session_name=None, session_list=None, cmd=None):
         &quot;&quot;&quot;\
@@ -2015,6 +2038,7 @@ class X2goSession(object):
         else:
             self.logger('local folder sharing is disabled for this session profile', loglevel=log.loglevel_WARN)
         return False
+    __is_folder_sharing_available = is_folder_sharing_available
 
     def share_local_folder(self, local_path=None, folder_name=None):
         &quot;&quot;&quot;\
@@ -2056,18 +2080,20 @@ class X2goSession(object):
 
         &quot;&quot;&quot;
         _retval = False
-        if self.has_terminal_session() and self.share_local_folders and not self.faulty and self.is_running() and self.allow_share_local_folders:
-            if self.is_folder_sharing_available() and self.is_master_session():
-                if self.control_session.get_transport().reverse_tunnels[self.terminal_session.get_session_name()]['sshfs'][1] is not None:
-                    _retval = True
-                    for _folder in self.share_local_folders:
-                        try:
-                            _retval = self.share_local_folder(_folder) and _retval
-                        except x2go_exceptions.X2goUserException, e:
-                            self.logger('%s' % str(e), loglevel=log.loglevel_WARN)
-            else:
-                self.HOOK_foldersharing_not_available()
+        if self.is_running() and not self.faulty  and self._SUPPORTED_FOLDERSHARING and self.share_local_folders and self.allow_share_local_folders and self.has_terminal_session():
+            if self.is_master_session():
+                if self.is_folder_sharing_available():
+                    if self.control_session.get_transport().reverse_tunnels[self.terminal_session.get_session_name()]['sshfs'][1] is not None:
+                        _retval = True
+                        for _folder in self.share_local_folders:
+                            try:
+                                _retval = self.share_local_folder(_folder) and _retval
+                            except x2go_exceptions.X2goUserException, e:
+                                self.logger('%s' % str(e), loglevel=log.loglevel_WARN)
+                else:
+                    self.HOOK_foldersharing_not_available()
         return _retval
+    __share_all_local_folders = share_all_local_folders
 
     def unshare_all_local_folders(self, force_all=False):
         &quot;&quot;&quot;\
@@ -2189,6 +2215,7 @@ class X2goSession(object):
         if self.control_session is not None:
             return self.control_session.locked or self.locked
         return None
+    __is_locked = is_locked
 
     def session_cleanup(self):
         &quot;&quot;&quot;\
@@ -2208,3 +2235,5 @@ class X2goSession(object):
             self.terminal_session.__del__()
 
         self.terminal_session = None
+    __session_cleanup = session_cleanup
+


hooks/post-receive
-- 
python-x2go.git (Python X2Go Client API)

This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;python-x2go.git&quot; (Python X2Go Client API).

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002995.html">[X2go-Commits] python-x2go.git - master (branch) updated:	0.2.0.5-8-g704b80d
</A></li>
	<LI>Next message: <A HREF="002997.html">[X2go-Commits] pyhoca-gui.git - master (branch) updated:	0.2.0.0-8-g01ce60e
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2996">[ date ]</a>
              <a href="thread.html#2996">[ thread ]</a>
              <a href="subject.html#2996">[ subject ]</a>
              <a href="author.html#2996">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/x2go-commits">More information about the X2go-commits
mailing list</a><br>
</body></html>
