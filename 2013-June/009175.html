<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [X2Go-Commits] x2godesktopsharing.git - build-main (branch)	updated: 3.1.0.6-6-gecdee93
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/x2go-commits/2013-June/index.html" >
   <LINK REL="made" HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2Go-Commits%5D%20x2godesktopsharing.git%20-%20build-main%20%28branch%29%0A%09updated%3A%203.1.0.6-6-gecdee93&In-Reply-To=%3C20130607231114.4C8875DB26%40ymir%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009174.html">
   <LINK REL="Next"  HREF="009176.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[X2Go-Commits] x2godesktopsharing.git - build-main (branch)	updated: 3.1.0.6-6-gecdee93</H1>
    <B>X2Go dev team</B> 
    <A HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2Go-Commits%5D%20x2godesktopsharing.git%20-%20build-main%20%28branch%29%0A%09updated%3A%203.1.0.6-6-gecdee93&In-Reply-To=%3C20130607231114.4C8875DB26%40ymir%3E"
       TITLE="[X2Go-Commits] x2godesktopsharing.git - build-main (branch)	updated: 3.1.0.6-6-gecdee93">git-admin at x2go.org
       </A><BR>
    <I>Sat Jun  8 01:11:14 CEST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="009174.html">[X2Go-Commits] x2godesktopsharing.git - build-main (branch)	updated: 3.1.0.6-5-g05d1dee
</A></li>
        <LI>Next message: <A HREF="009176.html">[X2Go-Commits] x2godesktopsharing.git - build-main (branch)	updated: 3.1.0.6-7-g48bee65
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9175">[ date ]</a>
              <a href="thread.html#9175">[ thread ]</a>
              <a href="subject.html#9175">[ subject ]</a>
              <a href="author.html#9175">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch, build-main has been updated
       via  ecdee936ba5417aeab8e3528e1f9ec0847943922 (commit)
      from  05d1deeed592ada615eb0c6a253c3f53ee84c11a (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
-----------------------------------------------------------------------

Summary of changes:
 debian/changelog              |    4 +++-
 man/man1/x2godesktopsharing.1 |   15 +++++++++------
 sharetray.cpp                 |   25 +++++++++++++++++++++++--
 sharetray.h                   |    1 +
 4 files changed, 36 insertions(+), 9 deletions(-)

The diff of changes is:
diff --git a/debian/changelog b/debian/changelog
index ac4f6ae..c66c55e 100644
--- a/debian/changelog
+++ b/debian/changelog
@@ -5,7 +5,9 @@ x2godesktopsharing (3.1.1.0-0~x2go1) UNRELEASED; urgency=low
     - Add French translation file.
 
   [ Mike Gabriel ]
-  * Continue development...
+  * New upstream version (3.1.1.0):
+    - Add cmd line parameter: --activate-desktop-sharing. Use this option
+      to launch x2godesktopsharing applet in already-activate mode.
 
  -- Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;  Thu, 10 Jan 2013 10:06:02 +0100
 
diff --git a/man/man1/x2godesktopsharing.1 b/man/man1/x2godesktopsharing.1
index eb154a1..d059d04 100644
--- a/man/man1/x2godesktopsharing.1
+++ b/man/man1/x2godesktopsharing.1
@@ -5,21 +5,24 @@
 \\$2 \(la\\$1\(ra\\$3
 ..
 .if \n(.g .mso www.tmac
-.TH x2godesktopsharing 1 &quot;14 Apr 2011&quot; &quot;Version 3.0.1.x&quot; &quot;X2go Application&quot;
+.TH x2godesktopsharing 1 &quot;Jun 2013&quot; &quot;Version 3.0.1.x&quot; &quot;X2go Application&quot;
 .SH NAME
-x2godesktopsharing \- Share an X2go desktop with other clients and users.
+x2godesktopsharing \- Share an X2Go desktop with other clients and users.
 .SH SYNOPSIS
 'nh
 .fi
 .ad l
-\fBx2godesktopsharing\fR 
+\fBx2godesktopsharing\fR \fI[options]\fR
 
 .SH DESCRIPTION
-\fBx2godesktopsharing\fR is a system tray tool that allows a user to give/control access to his/her X/X2go
-session (via shadow session support in NX libraries).
+\fBx2godesktopsharing\fR is a system tray tool that allows a user to give other users (i.e. helpdesk staff)
+control/access to his/her X/X2Go desktop session.
 .PP
 .SH OPTIONS
-\fBx2godesktopsharing\fR has no known options.
+\fBx2godesktopsharing\fR accepts the following options:
+.TP
+\*(T&lt;\fB\-\-activate-desktop-sharing\fR\*(T&gt;
+Activate desktop sharing on applet startup. The default is: desktop sharing is disabled.
 .PP
 .SH AUTHOR
 This manual has been written by Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt; for the X2go project
diff --git a/sharetray.cpp b/sharetray.cpp
index 7c74d24..ffc07d0 100644
--- a/sharetray.cpp
+++ b/sharetray.cpp
@@ -173,8 +173,6 @@ ShareTray::ShareTray()
 	connect ( actStop,SIGNAL ( triggered ( bool ) ),this,
 	          SLOT ( slotStopSharing() ) );
 
-
-
 	actStop-&gt;setEnabled ( false );
 
 	// unix signals (TERM, INT) are piped into a unix socket and will raise Qt events
@@ -202,6 +200,17 @@ ShareTray::ShareTray()
 	QTimer *timer = new QTimer ( this );
 	connect ( timer, SIGNAL ( timeout() ), this, SLOT ( slotTimer() ) );
 	timer-&gt;start ( 5000 );
+
+	QStringList args=QCoreApplication::arguments();
+	for ( int i=1; i&lt;args.size(); ++i )
+	{
+		if ( !parseParameter ( args[i] ) )
+		{
+			close();
+			exit (-1);
+		}
+	}
+
 	loadSettings();
 	setTrayIcon();
 	trayIcon-&gt;show();
@@ -219,6 +228,18 @@ ShareTray::~ShareTray()
 	qDebug() &lt;&lt;&quot;settings saved&quot;;
 }
 
+
+bool ShareTray::parseParameter( QString param )
+{
+	if ( param == &quot;--activate-desktop-sharing&quot; )
+	{
+		slotStartSharing();
+		return true;
+	}
+	return false;
+}
+
+
 void ShareTray::handleSigKeybInt()
 {
 	snKeybInt-&gt;setEnabled(false);
diff --git a/sharetray.h b/sharetray.h
index bc4ec19..1a2c8c5 100644
--- a/sharetray.h
+++ b/sharetray.h
@@ -44,6 +44,7 @@ public:
 	bool acceptConnections();
 private:
 	enum {BLACK,WHITE} current_list;
+	bool parseParameter(QString param);
 	QMenu* menu;
 	QWidget* mainWnd;
 	QAction* actStart;


hooks/post-receive
-- 
x2godesktopsharing.git (Desktop Sharing for X2Go)

This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;x2godesktopsharing.git&quot; (Desktop Sharing for X2Go).

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009174.html">[X2Go-Commits] x2godesktopsharing.git - build-main (branch)	updated: 3.1.0.6-5-g05d1dee
</A></li>
	<LI>Next message: <A HREF="009176.html">[X2Go-Commits] x2godesktopsharing.git - build-main (branch)	updated: 3.1.0.6-7-g48bee65
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9175">[ date ]</a>
              <a href="thread.html#9175">[ thread ]</a>
              <a href="subject.html#9175">[ subject ]</a>
              <a href="author.html#9175">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/x2go-commits">More information about the X2Go-commits
mailing list</a><br>
</body></html>
