<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [X2Go-Commits] x2gobroker.git - statusflag (branch) updated:	aef801292911351c8b281bae25e1e7f14fb445f5
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/x2go-commits/2013-June/index.html" >
   <LINK REL="made" HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2Go-Commits%5D%20x2gobroker.git%20-%20statusflag%20%28branch%29%20updated%3A%0A%09aef801292911351c8b281bae25e1e7f14fb445f5&In-Reply-To=%3C20130604190923.233EA5DB26%40ymir%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007850.html">
   <LINK REL="Next"  HREF="007854.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[X2Go-Commits] x2gobroker.git - statusflag (branch) updated:	aef801292911351c8b281bae25e1e7f14fb445f5</H1>
    <B>X2Go dev team</B> 
    <A HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2Go-Commits%5D%20x2gobroker.git%20-%20statusflag%20%28branch%29%20updated%3A%0A%09aef801292911351c8b281bae25e1e7f14fb445f5&In-Reply-To=%3C20130604190923.233EA5DB26%40ymir%3E"
       TITLE="[X2Go-Commits] x2gobroker.git - statusflag (branch) updated:	aef801292911351c8b281bae25e1e7f14fb445f5">git-admin at x2go.org
       </A><BR>
    <I>Tue Jun  4 21:09:23 CEST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="007850.html">[X2Go-Commits] x2gobroker.git - statusflag (branch) updated:	214487c2a586368f4811d813d7c196b293530afc
</A></li>
        <LI>Next message: <A HREF="007854.html">[X2Go-Commits] x2gobroker.git - statusflag (branch) updated:	6e7de2cf944d0e33436e6831e1b813c83d6f0e8f
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7851">[ date ]</a>
              <a href="thread.html#7851">[ thread ]</a>
              <a href="subject.html#7851">[ subject ]</a>
              <a href="author.html#7851">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch, statusflag has been updated
       via  aef801292911351c8b281bae25e1e7f14fb445f5 (commit)
      from  3e2cf8d865fe24da364895097a03650b279c5ad3 (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
-----------------------------------------------------------------------

Summary of changes:
 Makefile                                           |    2 +-
 cgi/{x2gobroker-simple.cgi =&gt; x2gobroker.cgi}      |   17 ++--
 debian/control                                     |   85 ++++++++++++++++++--
 ...2gobroker-common.dirs =&gt; x2gobroker-agent.dirs} |    0
 debian/x2gobroker-common.dirs                      |    1 +
 debian/x2gobroker-common.install                   |    1 +
 debian/x2gobroker-ldap.dirs                        |    1 +
 ...x2gobroker-common.docs =&gt; x2gobroker-ldap.docs} |    0
 debian/x2gobroker-ldap.install                     |    2 +
 debian/x2gobroker-ldap.links                       |    1 +
 debian/x2gobroker-simple.dirs                      |    1 -
 debian/x2gobroker-simple.install                   |    1 -
 debian/x2gobroker-simple.links                     |    1 +
 debian/x2gobroker-zeroconf.dirs                    |    1 +
 ...broker-common.docs =&gt; x2gobroker-zeroconf.docs} |    0
 debian/x2gobroker-zeroconf.install                 |    2 +
 debian/x2gobroker-zeroconf.links                   |    1 +
 etc/{x2gobroker-simple.cfg =&gt; x2gobroker-ldap.cfg} |    0
 etc/x2gobroker-simple.cfg                          |   24 ------
 lib/{x2gobroker-simple.pm =&gt; x2gobroker-ldap.pm}   |    0
 ...x2gobroker-simple.pm =&gt; x2gobroker-zeroconf.pm} |    0
 21 files changed, 101 insertions(+), 40 deletions(-)
 rename cgi/{x2gobroker-simple.cgi =&gt; x2gobroker.cgi} (92%)
 copy debian/{x2gobroker-common.dirs =&gt; x2gobroker-agent.dirs} (100%)
 create mode 100644 debian/x2gobroker-ldap.dirs
 copy debian/{x2gobroker-common.docs =&gt; x2gobroker-ldap.docs} (100%)
 create mode 100644 debian/x2gobroker-ldap.install
 create mode 100644 debian/x2gobroker-ldap.links
 create mode 100644 debian/x2gobroker-simple.links
 create mode 100644 debian/x2gobroker-zeroconf.dirs
 copy debian/{x2gobroker-common.docs =&gt; x2gobroker-zeroconf.docs} (100%)
 create mode 100644 debian/x2gobroker-zeroconf.install
 create mode 100644 debian/x2gobroker-zeroconf.links
 copy etc/{x2gobroker-simple.cfg =&gt; x2gobroker-ldap.cfg} (100%)
 copy lib/{x2gobroker-simple.pm =&gt; x2gobroker-ldap.pm} (100%)
 copy lib/{x2gobroker-simple.pm =&gt; x2gobroker-zeroconf.pm} (100%)

The diff of changes is:
diff --git a/Makefile b/Makefile
index d7699c1..0a107b1 100755
--- a/Makefile
+++ b/Makefile
@@ -57,5 +57,5 @@ build-indep:
 clean: clean_arch
 
 clean_arch:
-	rm -f lib/x2gobroker-command
+	rm -f lib/x2gobroker-agent
 
diff --git a/cgi/x2gobroker-simple.cgi b/cgi/x2gobroker.cgi
similarity index 92%
rename from cgi/x2gobroker-simple.cgi
rename to cgi/x2gobroker.cgi
index 8ac7213..fd62a62 100755
--- a/cgi/x2gobroker-simple.cgi
+++ b/cgi/x2gobroker.cgi
@@ -21,11 +21,18 @@
 # 51 Franklin St, Fifth Floor, Boston, MA 02110-1301, USA.
 
 use strict;
-use CGI;
-use CGI::Carp qw(fatalsToBrowser);
+use File::Basename qw(basename);
+
+my $cgi_name = basename($0);
+my $broker_backend ~= s/x2gobroker-(.*)\.cgi/\1/
+
 use lib &quot;/usr/lib/x2go/&quot;;
 use lib &quot;/usr/lib/x2go/broker/&quot;;
-use x2gobroker-simple;
+use x2gobroker-$broker_backend;
+
+use CGI;
+use CGI::Carp qw(fatalsToBrowser);
+
 my $cgi = new CGI;
 
 
@@ -36,10 +43,10 @@ print $cgi-&gt;header(
         -expires =&gt;'+1h'
       ),
       $cgi-&gt;start_html(
-        -title   =&gt;'X2Go Broker',
+        -title   =&gt;'X2Go Session Broker',
         -author  =&gt;'X2Go Developers &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">x2go-dev at lists.berlios.de</A>&gt;',
         -base    =&gt;'true',
-        -meta    =&gt;{'keywords'   =&gt;'X2Go', 'description'=&gt;'X2Go Broker'}
+        -meta    =&gt;{'keywords'   =&gt;'X2Go', 'description'=&gt;'X2Go Session Broker'}
       );
 
 #open (FL, &quot;&gt;&gt;/tmp/x2gobroker.log&quot;);
diff --git a/debian/control b/debian/control
index 9f5cd0f..55b6f94 100644
--- a/debian/control
+++ b/debian/control
@@ -63,7 +63,70 @@ Description: X2Go http(s) session broker (simple broker)
  X2Go server farms.
  .
  This package contains a simple example of an X2Go session
- broker.
+ broker. This session broker will be configured with a few steps,
+ no LDAP is required.
+
+Package: x2gobroker-ldap
+Architecture: all
+Depends:
+ ${misc:Depends},
+ apache2 | httpd,
+ perl,
+ x2gobroker-common (&gt;= ${source:Version}), x2gobroker-common (&lt;&lt; ${source:Version}.1~),
+Description: X2Go http(s) session broker (simple broker)
+ X2Go is a serverbased computing environment with
+    - session resuming
+    - low bandwidth support
+    - LDAP support
+    - client side mass storage mounting support
+    - client side printing support
+    - audio support
+    - authentication by smartcard and USB stick
+ .
+ The session broker is a server tool for X2Go that
+ tells your X2Go Client application in a terminal
+ server cluster what servers and session types are
+ most appropriate for the user in front of the
+ X2Go terminal.
+ .
+ A session broker is most useful in load balanced
+ X2Go server farms.
+ .
+ This package contains an LDAP based X2Go session broker.
+ This session broker is targeted for large production setups
+ with many X2Go servers managed via a session broker.
+
+Package: x2gobroker-zeroconf
+Architecture: all
+Depends:
+ ${misc:Depends},
+ apache2 | httpd,
+ perl,
+ x2gobroker-common (&gt;= ${source:Version}), x2gobroker-common (&lt;&lt; ${source:Version}.1~),
+Description: X2Go http(s) session broker (for demo purposes only)
+ X2Go is a serverbased computing environment with
+    - session resuming
+    - low bandwidth support
+    - LDAP support
+    - client side mass storage mounting support
+    - client side printing support
+    - audio support
+    - authentication by smartcard and USB stick
+ .
+ The session broker is a server tool for X2Go that
+ tells your X2Go Client application in a terminal
+ server cluster what servers and session types are
+ most appropriate for the user in front of the
+ X2Go terminal.
+ .
+ A session broker is most useful in load balanced
+ X2Go server farms.
+ .
+ This package contains a demo X2Go session broker that
+ runs out-of-the-box. However, it can not be configured
+ and it only manages one single X2Go server. This package
+ can be installed to test X2Go's clients, so you get an
+ idea of how your clients behave when set into broker mode.
 
 Package: x2gobroker-agent
 Architecture: any
@@ -89,17 +152,23 @@ Description: X2Go http(s) based session broker (common files)
  A session broker is most useful in load balanced
  X2Go server farms.
  .
- This package contains a setuid backend command that
+ This package contains a setuid agent command that
  is required by the X2Go session broker. This package
  has to be installed on all X2Go servers that shall get
- controlled via the X2Go session broker.
+ managed via the X2Go session broker.
+ .
+ WARNING: This package installs a setuid wrapper
+ (/usr/lib/x2go/broker/x2gobroker-agent) on your system.
+ This setuid wrapper aims to be a secure replacement
+ for the deprecated suidperl exectuable that was removed
+ from Perl (&gt;= 5.12).
  .
- WARNING: This package installs the setuid wrapper
- /usr/lib/x2go/broker/x2gobroker-command on your system.
  This wrapper is only able to execute the Perl script
- /usr/lib/x2go/broker/x2gobroker-command.pl. This is
- done with setuid privileges.
+ /usr/lib/x2go/broker/x2gobroker-agent.pl. For running
+ properly, x2gobroker-agent.pl needs setuid privileges.
  .
  If you hesitate to install this package, study the code
  of the named wrapper and the named Perl script beforehand.
- Nonetheless, you act on your own risk from here.
+ Note that the X2Go session broker will not work without this
+ x2gobroker-agent component installed on your to-be-managed
+ X2Go servers.
diff --git a/debian/x2gobroker-common.dirs b/debian/x2gobroker-agent.dirs
similarity index 100%
copy from debian/x2gobroker-common.dirs
copy to debian/x2gobroker-agent.dirs
diff --git a/debian/x2gobroker-common.dirs b/debian/x2gobroker-common.dirs
index 88c7d70..cec872f 100644
--- a/debian/x2gobroker-common.dirs
+++ b/debian/x2gobroker-common.dirs
@@ -1 +1,2 @@
+/usr/lib/cgi-bin
 /usr/lib/x2go/broker
\ No newline at end of file
diff --git a/debian/x2gobroker-common.install b/debian/x2gobroker-common.install
index e69de29..59f3588 100644
--- a/debian/x2gobroker-common.install
+++ b/debian/x2gobroker-common.install
@@ -0,0 +1 @@
+cgi/x2gobroker.cgi usr/lib/cgi-bin/
\ No newline at end of file
diff --git a/debian/x2gobroker-ldap.dirs b/debian/x2gobroker-ldap.dirs
new file mode 100644
index 0000000..d973e65
--- /dev/null
+++ b/debian/x2gobroker-ldap.dirs
@@ -0,0 +1 @@
+/etc/x2go
diff --git a/debian/x2gobroker-common.docs b/debian/x2gobroker-ldap.docs
similarity index 100%
copy from debian/x2gobroker-common.docs
copy to debian/x2gobroker-ldap.docs
diff --git a/debian/x2gobroker-ldap.install b/debian/x2gobroker-ldap.install
new file mode 100644
index 0000000..71e503b
--- /dev/null
+++ b/debian/x2gobroker-ldap.install
@@ -0,0 +1,2 @@
+etc/x2gobroker-ldap.cfg etc/x2go/
+lib/x2gobroker-ldap.pm usr/lib/x2go/broker/
diff --git a/debian/x2gobroker-ldap.links b/debian/x2gobroker-ldap.links
new file mode 100644
index 0000000..b8a8a9b
--- /dev/null
+++ b/debian/x2gobroker-ldap.links
@@ -0,0 +1 @@
+usr/lib/cgi-bin/x2gobroker.cgi usr/lib/cgi-bin/x2gobroker-ldap.cgi
diff --git a/debian/x2gobroker-simple.dirs b/debian/x2gobroker-simple.dirs
index 909bc86..d973e65 100644
--- a/debian/x2gobroker-simple.dirs
+++ b/debian/x2gobroker-simple.dirs
@@ -1,2 +1 @@
 /etc/x2go
-/usr/lib/cgi-bin
\ No newline at end of file
diff --git a/debian/x2gobroker-simple.install b/debian/x2gobroker-simple.install
index 00c2053..4313377 100644
--- a/debian/x2gobroker-simple.install
+++ b/debian/x2gobroker-simple.install
@@ -1,3 +1,2 @@
 etc/x2gobroker-simple.cfg etc/x2go/
 lib/x2gobroker-simple.pm usr/lib/x2go/broker/
-cgi/x2gobroker-simple.cgi usr/lib/cgi-bin/
\ No newline at end of file
diff --git a/debian/x2gobroker-simple.links b/debian/x2gobroker-simple.links
new file mode 100644
index 0000000..27df28e
--- /dev/null
+++ b/debian/x2gobroker-simple.links
@@ -0,0 +1 @@
+usr/lib/cgi-bin/x2gobroker.cgi usr/lib/cgi-bin/x2gobroker-simple.cgi
diff --git a/debian/x2gobroker-zeroconf.dirs b/debian/x2gobroker-zeroconf.dirs
new file mode 100644
index 0000000..d973e65
--- /dev/null
+++ b/debian/x2gobroker-zeroconf.dirs
@@ -0,0 +1 @@
+/etc/x2go
diff --git a/debian/x2gobroker-common.docs b/debian/x2gobroker-zeroconf.docs
similarity index 100%
copy from debian/x2gobroker-common.docs
copy to debian/x2gobroker-zeroconf.docs
diff --git a/debian/x2gobroker-zeroconf.install b/debian/x2gobroker-zeroconf.install
new file mode 100644
index 0000000..2f66b9f
--- /dev/null
+++ b/debian/x2gobroker-zeroconf.install
@@ -0,0 +1,2 @@
+etc/x2gobroker-zeroconf.cfg etc/x2go/
+lib/x2gobroker-zeroconf.pm usr/lib/x2go/broker/
diff --git a/debian/x2gobroker-zeroconf.links b/debian/x2gobroker-zeroconf.links
new file mode 100644
index 0000000..1d6c3cf
--- /dev/null
+++ b/debian/x2gobroker-zeroconf.links
@@ -0,0 +1 @@
+usr/lib/cgi-bin/x2gobroker.cgi usr/lib/cgi-bin/x2gobroker-zeroconf.cgi
diff --git a/etc/x2gobroker-simple.cfg b/etc/x2gobroker-ldap.cfg
similarity index 100%
copy from etc/x2gobroker-simple.cfg
copy to etc/x2gobroker-ldap.cfg
diff --git a/etc/x2gobroker-simple.cfg b/etc/x2gobroker-simple.cfg
index fe8e9bd..e69de29 100644
--- a/etc/x2gobroker-simple.cfg
+++ b/etc/x2gobroker-simple.cfg
@@ -1,24 +0,0 @@
-# This file is part of the  X2Go Project - <A HREF="http://www.x2go.org">http://www.x2go.org</A>
-# Copyright (C) 2011-2012 by Oleksandr Shneyder &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">oleksandr.shneyder at obviously-nice.de</A>&gt;
-# Copyright (C) 2011-2012 by Heinz-Markus Graesing &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">heinz-m.graesing at obviously-nice.de</A>&gt;
-# Copyright (C) 2012 by Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
-#
-# X2Go Session Broker is free software; you can redistribute it and/or modify
-# it under the terms of the GNU Affero General Public License as published by
-# the Free Software Foundation; either version 3 of the License, or
-# (at your option) any later version.
-#
-# X2Go Session Broker is distributed in the hope that it will be useful,
-# but WITHOUT ANY WARRANTY; without even the implied warranty of
-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-# GNU Affero General Public License for more details.
-#
-# You should have received a copy of the GNU Affero General Public License
-# along with this program; if not, write to the
-# Free Software Foundation, Inc.,
-# 51 Franklin St, Fifth Floor, Boston, MA 02110-1301, USA.
-
-ldapuri=<A HREF="ldap://&lt;ldapmaster.localdomain">ldap://&lt;ldapmaster.localdomain</A>&gt;
-#replica=<A HREF="ldapi:///">ldapi:///</A>
-binddn=&quot;cn=admin,dc=example,dc=net&quot;
-bindpw=&quot;&lt;very-secret&gt;&quot;
diff --git a/lib/x2gobroker-simple.pm b/lib/x2gobroker-ldap.pm
similarity index 100%
copy from lib/x2gobroker-simple.pm
copy to lib/x2gobroker-ldap.pm
diff --git a/lib/x2gobroker-simple.pm b/lib/x2gobroker-zeroconf.pm
similarity index 100%
copy from lib/x2gobroker-simple.pm
copy to lib/x2gobroker-zeroconf.pm


hooks/post-receive
-- 
x2gobroker.git (HTTP(S) Session broker for X2Go)

This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;x2gobroker.git&quot; (HTTP(S) Session broker for X2Go).

</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007850.html">[X2Go-Commits] x2gobroker.git - statusflag (branch) updated:	214487c2a586368f4811d813d7c196b293530afc
</A></li>
	<LI>Next message: <A HREF="007854.html">[X2Go-Commits] x2gobroker.git - statusflag (branch) updated:	6e7de2cf944d0e33436e6831e1b813c83d6f0e8f
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7851">[ date ]</a>
              <a href="thread.html#7851">[ thread ]</a>
              <a href="subject.html#7851">[ subject ]</a>
              <a href="author.html#7851">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/x2go-commits">More information about the X2Go-commits
mailing list</a><br>
</body></html>
