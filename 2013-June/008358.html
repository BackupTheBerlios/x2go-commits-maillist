<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [X2Go-Commits] x2gobroker.git - statusflag (branch) updated:	0.0.2.2-26-g0c8c841
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/x2go-commits/2013-June/index.html" >
   <LINK REL="made" HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2Go-Commits%5D%20x2gobroker.git%20-%20statusflag%20%28branch%29%20updated%3A%0A%090.0.2.2-26-g0c8c841&In-Reply-To=%3C20130604225842.C0AB25DB26%40ymir%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008357.html">
   <LINK REL="Next"  HREF="008359.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[X2Go-Commits] x2gobroker.git - statusflag (branch) updated:	0.0.2.2-26-g0c8c841</H1>
    <B>X2Go dev team</B> 
    <A HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2Go-Commits%5D%20x2gobroker.git%20-%20statusflag%20%28branch%29%20updated%3A%0A%090.0.2.2-26-g0c8c841&In-Reply-To=%3C20130604225842.C0AB25DB26%40ymir%3E"
       TITLE="[X2Go-Commits] x2gobroker.git - statusflag (branch) updated:	0.0.2.2-26-g0c8c841">git-admin at x2go.org
       </A><BR>
    <I>Wed Jun  5 00:58:42 CEST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="008357.html">[X2Go-Commits] x2gobroker.git - statusflag (branch) updated:	0.0.2.2-25-g8282f90
</A></li>
        <LI>Next message: <A HREF="008359.html">[X2Go-Commits] x2gobroker.git - statusflag (branch) updated:	0.0.2.2-27-g766abbb
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8358">[ date ]</a>
              <a href="thread.html#8358">[ thread ]</a>
              <a href="subject.html#8358">[ subject ]</a>
              <a href="author.html#8358">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch, statusflag has been updated
       via  0c8c8412912d6f0918d296d98cc4f1872db1b79b (commit)
      from  8282f90fcc078cb80d4679da5bfffc6569e70f25 (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit 0c8c8412912d6f0918d296d98cc4f1872db1b79b
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Wed Jun 5 00:58:40 2013 +0200

    don't show the value of the host session parameter in list_profiles()

-----------------------------------------------------------------------

Summary of changes:
 lib/x2gobroker-agent.pl           |    4 ++--
 x2gobroker/brokers/base_broker.py |    6 ++++++
 2 files changed, 8 insertions(+), 2 deletions(-)

The diff of changes is:
diff --git a/lib/x2gobroker-agent.pl b/lib/x2gobroker-agent.pl
index fab9942..7c80ae4 100755
--- a/lib/x2gobroker-agent.pl
+++ b/lib/x2gobroker-agent.pl
@@ -187,7 +187,7 @@ if($mode eq 'suspendsession')
 	InitX2GoUser($uid, $uidNumber, $gidNumber, $home);
 	print &quot;OK\n&quot;;
 	my $sid=shift;
-	exec (&quot;/bin/su - $uid -c \&quot;$(x2gopath lib)/x2gochangestatus S $sid\&quot;&quot;);
+	exec (&quot;/bin/su - $uid -c \&quot;\$(x2gopath lib)/x2gochangestatus S $sid\&quot;&quot;);
 }
 
 if($mode eq 'terminatesession')
@@ -195,7 +195,7 @@ if($mode eq 'terminatesession')
 	InitX2GoUser($uid, $uidNumber, $gidNumber, $home);
 	print &quot;OK\n&quot;;
 	my $sid=shift;
-	exec (&quot;/bin/su - $uid -c \&quot;$(x2gopath lib)/x2gochangestatus T $sid\&quot;&quot;);
+	exec (&quot;/bin/su - $uid -c \&quot;\$(x2gopath lib)/x2gochangestatus T $sid\&quot;&quot;);
 }
 
 if($mode eq 'ping')
diff --git a/x2gobroker/brokers/base_broker.py b/x2gobroker/brokers/base_broker.py
index db1ffb3..fd0e9a4 100644
--- a/x2gobroker/brokers/base_broker.py
+++ b/x2gobroker/brokers/base_broker.py
@@ -839,6 +839,12 @@ class X2GoBroker(object):
         for profile_id in self.get_profile_ids():
             profile = self.get_profile(profile_id)
 
+            for key in profile.keys():
+                if key.startswith('host'):
+                    del profile[key]
+
+            profile['host'] = []
+
             if self.use_session_autologin(profile_id):
                 profile['autologin'] = True
                 profile['key'] = 'key-comes-later'


hooks/post-receive
-- 
x2gobroker.git (HTTP(S) Session broker for X2Go)

This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;x2gobroker.git&quot; (HTTP(S) Session broker for X2Go).

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008357.html">[X2Go-Commits] x2gobroker.git - statusflag (branch) updated:	0.0.2.2-25-g8282f90
</A></li>
	<LI>Next message: <A HREF="008359.html">[X2Go-Commits] x2gobroker.git - statusflag (branch) updated:	0.0.2.2-27-g766abbb
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8358">[ date ]</a>
              <a href="thread.html#8358">[ thread ]</a>
              <a href="subject.html#8358">[ subject ]</a>
              <a href="author.html#8358">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/x2go-commits">More information about the X2Go-commits
mailing list</a><br>
</body></html>
