<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [X2go-Commits] pyhoca-gui.git - master (branch) updated:	0.1.0.10-117-g2bc0921
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/x2go-commits/2012-March/index.html" >
   <LINK REL="made" HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20pyhoca-gui.git%20-%20master%20%28branch%29%20updated%3A%0A%090.1.0.10-117-g2bc0921&In-Reply-To=%3C20120318212019.6FBF05DB35%40ymir%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002545.html">
   <LINK REL="Next"  HREF="002547.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[X2go-Commits] pyhoca-gui.git - master (branch) updated:	0.1.0.10-117-g2bc0921</H1>
    <B>X2Go dev team</B> 
    <A HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20pyhoca-gui.git%20-%20master%20%28branch%29%20updated%3A%0A%090.1.0.10-117-g2bc0921&In-Reply-To=%3C20120318212019.6FBF05DB35%40ymir%3E"
       TITLE="[X2go-Commits] pyhoca-gui.git - master (branch) updated:	0.1.0.10-117-g2bc0921">git-admin at x2go.org
       </A><BR>
    <I>Sun Mar 18 22:20:19 CET 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="002545.html">[X2go-Commits] python-x2go.git - master (branch) updated:	0.1.1.4-142-gcb74f7e
</A></li>
        <LI>Next message: <A HREF="002547.html">[X2go-Commits] pyhoca-gui.git - master (branch) updated:	0.1.0.10-118-ga4c8100
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2546">[ date ]</a>
              <a href="thread.html#2546">[ thread ]</a>
              <a href="subject.html#2546">[ subject ]</a>
              <a href="author.html#2546">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch, master has been updated
       via  2bc0921e14c4a7afb42636aa9b4cbc7b3cf2ad6d (commit)
       via  69050e8fca3b4e468f09bf51534b859c328ab86d (commit)
      from  1bafcdd48927872f3c265a528ff31958e14f3c93 (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit 2bc0921e14c4a7afb42636aa9b4cbc7b3cf2ad6d
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Sun Mar 18 22:20:13 2012 +0100

    Fix for CUPS printer recognition if no default printer was defined.

commit 69050e8fca3b4e468f09bf51534b859c328ab86d
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Sun Mar 18 21:55:12 2012 +0100

    The maximum number of menu items in published applications mode can now be specified as a session option for X2goSession instances.

-----------------------------------------------------------------------

Summary of changes:
 debian/changelog              |    3 +++
 pyhoca-gui                    |    2 +-
 pyhoca/wxgui/frontend.py      |   17 +++++++++++++++--
 pyhoca/wxgui/printingprefs.py |    7 +++++--
 4 files changed, 24 insertions(+), 5 deletions(-)

The diff of changes is:
diff --git a/debian/changelog b/debian/changelog
index 582bc18..4a6606f 100644
--- a/debian/changelog
+++ b/debian/changelog
@@ -71,6 +71,9 @@ pyhoca-gui (0.1.2.0-0~x2go1) UNRELEASED; urgency=low
     - Show the detected GUI language in GUI output.
     - Add support for published applications with no category submenus.
       Introduce cmd line option --published-applications-no-submenus &lt;int&gt;.
+    - The maximum number of menu items in published applications mode can now
+      be specified as a session option for X2goSession instances.
+    - Fix for CUPS printer recognition if no default printer was defined.
   * Depend on Python X2Go 0.1.2.0.
   * Install GNOME icons via dh_links.
   * Install X2Go icons with explicit install paths.
diff --git a/pyhoca-gui b/pyhoca-gui
index c831ab0..3a2c3e8 100755
--- a/pyhoca-gui
+++ b/pyhoca-gui
@@ -188,7 +188,7 @@ x2go_gui_options = [
                    {'args':['--disable-profilemanager'], 'default': False, 'action': 'store_true', 'help': 'disable the session profile manager window', },
                    {'args':['--display'], 'default': None, 'metavar': '&lt;hostname&gt;:&lt;screennumber&gt;', 'help': 'set the DISPLAY environment variable to &lt;hostname&gt;:&lt;screennumber&gt;', },
                    {'args':['--logon-window-position'], 'default': None, 'metavar': '&lt;x-pos&gt;x&lt;y-pos&gt;', 'help': 'give a custom position for the logon window, use negative values to position relative to right/bottom border', },
-                   {'args':['--published-applications-no-submenus'], 'default': 9, 'metavar': '&lt;number&gt;', 'help': 'the number of published applications that will be rendered without submenus', },
+                   {'args':['--published-applications-no-submenus'], 'default': 10, 'metavar': '&lt;number&gt;', 'help': 'the number of published applications that will be rendered without submenus', },
                  ]
 if _X2GOCLIENT_OS == 'Windows':
     x2go_gui_options.append(
diff --git a/pyhoca/wxgui/frontend.py b/pyhoca/wxgui/frontend.py
index 11fa4ca..e08c85f 100644
--- a/pyhoca/wxgui/frontend.py
+++ b/pyhoca/wxgui/frontend.py
@@ -388,7 +388,14 @@ class PyHocaGUI(wx.App, x2go.X2goClient):
 
                     if session_list[session_name].is_published_applications_provider() and not pubapp_session_resumed:
                         # resume sessions in published applications mode immediately
-                        pubapp_session = self._X2goClient__register_session(profile_name=profile_name, published_applications=True, cmd='PUBLISHED', session_type='published', session_name=session_name, return_object=True)
+                        pubapp_session = self._X2goClient__register_session(profile_name=profile_name,
+                                                                            published_applications=True,
+                                                                            cmd='PUBLISHED',
+                                                                            session_type='published',
+                                                                            session_name=session_name,
+                                                                            published_applications_no_submenus=self.args.published_applications_no_submenus,
+                                                                            return_object=True
+                                                                           )
                         pubapp_session.resume()
                         pubapp_session_resumed = True
                     elif session_list[session_name].is_published_applications_provider() and pubapp_session_resumed:
@@ -397,7 +404,13 @@ class PyHocaGUI(wx.App, x2go.X2goClient):
 
                 if not pubapp_session_resumed:
 
-                    pubapp_session = self._X2goClient__register_session(profile_name=profile_name, published_applications=True, cmd='PUBLISHED', session_type='published', return_object=True)
+                    pubapp_session = self._X2goClient__register_session(profile_name=profile_name,
+                                                                        published_applications=True,
+                                                                        cmd='PUBLISHED',
+                                                                        session_type='published',
+                                                                        published_applications_no_submenus=self.args.published_applications_no_submenus,
+                                                                        return_object=True
+                                                                       )
                     pubapp_session.start()
                     pubapp_session_started = True
 
diff --git a/pyhoca/wxgui/printingprefs.py b/pyhoca/wxgui/printingprefs.py
index 2c94ae2..1c8de98 100644
--- a/pyhoca/wxgui/printingprefs.py
+++ b/pyhoca/wxgui/printingprefs.py
@@ -219,11 +219,14 @@ class PyHocaGUI_PrintingPreferences(wx.Dialog):
         self.PdfViewCmd.SetValue(self.client_printing.get_property('pdfview_cmd'))
         self.PdfSaveToFolder.SetValue(self.client_printing.get_property('save_to_folder'))
         if self._defaultPrinter != '#PRINTSYSTEM_UNAVAILABLE#':
-            if self._defaultPrinter != None:
+            if self._availablePrinters:
                 try:
                     _printer_name = self._availablePrinters[self.client_printing.get_property('printer')]
                 except KeyError:
-                    _printer_name = self._availablePrinters[self._defaultPrinter]
+                    if self._defaultPrinter != None:
+                        _printer_name = self._availablePrinters[self._defaultPrinter]
+                    else:
+                        _printer_name = self._availablePrinters[self._availablePrinters.keys()[0]]
             else:
                 _printer_name = _(u'- no printers installed -')
                 self.PrintPrinter.Clear()


hooks/post-receive
-- 
pyhoca-gui.git (Python X2Go Client (wxPython GUI))

This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;pyhoca-gui.git&quot; (Python X2Go Client (wxPython GUI)).

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002545.html">[X2go-Commits] python-x2go.git - master (branch) updated:	0.1.1.4-142-gcb74f7e
</A></li>
	<LI>Next message: <A HREF="002547.html">[X2go-Commits] pyhoca-gui.git - master (branch) updated:	0.1.0.10-118-ga4c8100
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2546">[ date ]</a>
              <a href="thread.html#2546">[ thread ]</a>
              <a href="subject.html#2546">[ subject ]</a>
              <a href="author.html#2546">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/x2go-commits">More information about the X2go-commits
mailing list</a><br>
</body></html>
