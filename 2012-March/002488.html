<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [X2go-Commits] pyhoca-gui.git - master (branch) updated:	0.1.0.10-100-g649af1a
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/x2go-commits/2012-March/index.html" >
   <LINK REL="made" HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20pyhoca-gui.git%20-%20master%20%28branch%29%20updated%3A%0A%090.1.0.10-100-g649af1a&In-Reply-To=%3C20120313124427.E1BF05DB35%40ymir%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002487.html">
   <LINK REL="Next"  HREF="002489.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[X2go-Commits] pyhoca-gui.git - master (branch) updated:	0.1.0.10-100-g649af1a</H1>
    <B>X2Go dev team</B> 
    <A HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20pyhoca-gui.git%20-%20master%20%28branch%29%20updated%3A%0A%090.1.0.10-100-g649af1a&In-Reply-To=%3C20120313124427.E1BF05DB35%40ymir%3E"
       TITLE="[X2go-Commits] pyhoca-gui.git - master (branch) updated:	0.1.0.10-100-g649af1a">git-admin at x2go.org
       </A><BR>
    <I>Tue Mar 13 13:44:27 CET 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="002487.html">[X2go-Commits] pyhoca-gui.git - master (branch) updated:	0.1.0.10-98-g5ea8099
</A></li>
        <LI>Next message: <A HREF="002489.html">[X2go-Commits] pyhoca-gui.git - master (branch) updated:	0.1.0.10-101-g3da29cb
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2488">[ date ]</a>
              <a href="thread.html#2488">[ thread ]</a>
              <a href="subject.html#2488">[ subject ]</a>
              <a href="author.html#2488">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch, master has been updated
       via  649af1a6598de6243fb793f96c27ee4d964c1721 (commit)
       via  4e9ababbb27bb1718f35ea4a2b38805e4d0d87a7 (commit)
      from  5ea8099a87cea6efe6c44a6b2e70c170559cffd2 (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit 649af1a6598de6243fb793f96c27ee4d964c1721
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Tue Mar 13 13:40:09 2012 +0100

    normalize pathnames for MS Windows

commit 4e9ababbb27bb1718f35ea4a2b38805e4d0d87a7
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Tue Mar 13 13:35:18 2012 +0100

    Catch X2GoSessionRegistryException if used session uuid is not valid anymore.

-----------------------------------------------------------------------

Summary of changes:
 debian/changelog              |    2 ++
 pyhoca/wxgui/menus_taskbar.py |   33 ++++++++++++++++++---------------
 2 files changed, 20 insertions(+), 15 deletions(-)

The diff of changes is:
diff --git a/debian/changelog b/debian/changelog
index 2ee297a..12e28ff 100644
--- a/debian/changelog
+++ b/debian/changelog
@@ -61,6 +61,8 @@ pyhoca-gui (0.1.2.0-0~x2go1) UNRELEASED; urgency=low
     - Provide 'en' as default language if --lang has not been given on the
       command line (MS Windows issue).
     - Published Applications on MS Windows: icon size is 16x16.
+    - Catch X2GoSessionRegistryException if used session uuid is not valid
+      anymore.
   * Depend on Python X2Go 0.1.2.0.
   * Install GNOME icons via dh_links.
   * Install X2Go icons with explicit install paths.
diff --git a/pyhoca/wxgui/menus_taskbar.py b/pyhoca/wxgui/menus_taskbar.py
index 05a4ba7..d5071bd 100644
--- a/pyhoca/wxgui/menus_taskbar.py
+++ b/pyhoca/wxgui/menus_taskbar.py
@@ -332,16 +332,16 @@ def _generate_Menu_PublishedApplications(_PyHocaGUI, caller=None, profile_name=N
     _lang = _PyHocaGUI.lang
 
     _category_map = {
-        _(u'Multimedia'): (wx.Menu(), '%s/PyHoca/22x22/applications-multimedia.png' % _icons_location),
-        _(u'Development'): (wx.Menu(), '%s/PyHoca/22x22/applications-development.png' % _icons_location),
-        _(u'Education'): (wx.Menu(), '%s/PyHoca/22x22/applications-education.png' % _icons_location),
-        _(u'Games'): (wx.Menu(), '%s/PyHoca/22x22/applications-games.png' % _icons_location),
-        _(u'Graphics'): (wx.Menu(), '%s/PyHoca/22x22/applications-graphics.png' % _icons_location),
-        _(u'Internet'): (wx.Menu(), '%s/PyHoca/22x22/applications-internet.png' % _icons_location),
-        _(u'Office Applications'): (wx.Menu(), '%s/PyHoca/22x22/applications-office.png' % _icons_location),
-        _(u'System'): (wx.Menu(), '%s/PyHoca/22x22/applications-system.png' % _icons_location),
-        _(u'Utilities'): (wx.Menu(), '%s/PyHoca/22x22/applications-utilities.png' % _icons_location),
-        _(u'Other Applications'): (wx.Menu(), '%s/PyHoca/22x22/applications-other.png' % _icons_location),
+        _(u'Multimedia'): (wx.Menu(), os.path.normpath('%s/PyHoca/22x22/applications-multimedia.png' % _icons_location)),
+        _(u'Development'): (wx.Menu(), os.path.normpath('%s/PyHoca/22x22/applications-development.png' % _icons_location)),
+        _(u'Education'): (wx.Menu(), os.path.normpath('%s/PyHoca/22x22/applications-education.png' % _icons_location)),
+        _(u'Games'): (wx.Menu(), os.path.normpath('%s/PyHoca/22x22/applications-games.png' % _icons_location)),
+        _(u'Graphics'): (wx.Menu(), os.path.normpath('%s/PyHoca/22x22/applications-graphics.png' % _icons_location)),
+        _(u'Internet'): (wx.Menu(), os.path.normpath('%s/PyHoca/22x22/applications-internet.png' % _icons_location)),
+        _(u'Office Applications'): (wx.Menu(), os.path.normpath('%s/PyHoca/22x22/applications-office.png' % _icons_location)),
+        _(u'System'): (wx.Menu(), os.path.normpath('%s/PyHoca/22x22/applications-system.png' % _icons_location)),
+        _(u'Utilities'): (wx.Menu(), os.path.normpath('%s/PyHoca/22x22/applications-utilities.png' % _icons_location)),
+        _(u'Other Applications'): (wx.Menu(), os.path.normpath('%s/PyHoca/22x22/applications-other.png' % _icons_location)),
     }
     _empty_menus = _category_map.keys()
 
@@ -421,9 +421,9 @@ def _generate_Menu_PublishedApplications(_PyHocaGUI, caller=None, profile_name=N
             _menu_item = wx.MenuItem(_category_map[_menu_entry_cat][0], id=_pubapp_id, text=_menu_entry_name, help=_menu_entry_comment)
             if not _menu_entry_icon:
                 if x2go.defaults.X2GOCLIENT_OS == 'Windows':
-                    _menu_item.SetBitmap(wx.Bitmap('%s/PyHoca/16x16/x2go-logo-grey.png' % _icons_location))
+                    _menu_item.SetBitmap(wx.Bitmap(os.path.normpath('%s/PyHoca/16x16/x2go-logo-grey.png' % _icons_location)))
                 else:
-                    _menu_item.SetBitmap(wx.Bitmap('%s/PyHoca/22x22/x2go-logo-grey.png' % _icons_location))
+                    _menu_item.SetBitmap(wx.Bitmap(os.path.normpath('%s/PyHoca/22x22/x2go-logo-grey.png' % _icons_location)))
             else:
                 _menu_entry_icon_decoded = base64.b64decode(_menu_entry_icon)
                 if not re.match('^&lt;\?(xml|XML).*version=.*encoding=.*standalone=.*\?&gt;.*', _menu_entry_icon_decoded.split('\n')[0]):
@@ -800,9 +800,12 @@ class PyHocaGUI_Menu_TaskbarSessionManager(wx.Menu):
                 _this_id = wx.NewId()
 
                 _menu_profile_name = self._PyHocaGUI.show_profile_metatypes and '%s (%s)' % (profile_name, self._PyHocaGUI.get_profile_metatype(profile_name)) or profile_name
-                self.AppendMenu(text=_menu_profile_name, 
-                                id=_this_id, 
-                                submenu=PyHocaGUI_Menu_TaskbarSessionProfile(self._PyHocaGUI, caller=self, profile_name=profile_name))
+                try:
+                    self.AppendMenu(text=_menu_profile_name,
+                                    id=_this_id,
+                                    submenu=PyHocaGUI_Menu_TaskbarSessionProfile(self._PyHocaGUI, caller=self, profile_name=profile_name))
+                except X2GoSessionRegistryException:
+                    pass
 
         if _connected_sessions:
             self.AppendSeparator()


hooks/post-receive
-- 
pyhoca-gui.git (Python X2Go Client (wxPython GUI))

This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;pyhoca-gui.git&quot; (Python X2Go Client (wxPython GUI)).


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002487.html">[X2go-Commits] pyhoca-gui.git - master (branch) updated:	0.1.0.10-98-g5ea8099
</A></li>
	<LI>Next message: <A HREF="002489.html">[X2go-Commits] pyhoca-gui.git - master (branch) updated:	0.1.0.10-101-g3da29cb
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2488">[ date ]</a>
              <a href="thread.html#2488">[ thread ]</a>
              <a href="subject.html#2488">[ subject ]</a>
              <a href="author.html#2488">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/x2go-commits">More information about the X2go-commits
mailing list</a><br>
</body></html>
