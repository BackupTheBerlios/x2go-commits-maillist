<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [X2go-Commits] x2gobroker.git - master (branch) updated:	a131f337a4ff78a1390aabd576d9e1f8c25b8ff1
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/x2go-commits/2012-December/index.html" >
   <LINK REL="made" HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20x2gobroker.git%20-%20master%20%28branch%29%20updated%3A%0A%09a131f337a4ff78a1390aabd576d9e1f8c25b8ff1&In-Reply-To=%3C20121203143629.ECCE95DB1A%40ymir%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003783.html">
   <LINK REL="Next"  HREF="003785.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[X2go-Commits] x2gobroker.git - master (branch) updated:	a131f337a4ff78a1390aabd576d9e1f8c25b8ff1</H1>
    <B>X2Go dev team</B> 
    <A HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20x2gobroker.git%20-%20master%20%28branch%29%20updated%3A%0A%09a131f337a4ff78a1390aabd576d9e1f8c25b8ff1&In-Reply-To=%3C20121203143629.ECCE95DB1A%40ymir%3E"
       TITLE="[X2go-Commits] x2gobroker.git - master (branch) updated:	a131f337a4ff78a1390aabd576d9e1f8c25b8ff1">git-admin at x2go.org
       </A><BR>
    <I>Mon Dec  3 15:36:29 CET 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="003783.html">[X2go-Commits] x2gobroker.git - master (branch) updated:	5795a37779edcbb7017755544152d3f4c1809f2d
</A></li>
        <LI>Next message: <A HREF="003785.html">[X2go-Commits] x2gobroker.git - master (branch) updated:	e2e578a2843c24fa7af5d41dc07d718b09105d55
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3784">[ date ]</a>
              <a href="thread.html#3784">[ thread ]</a>
              <a href="subject.html#3784">[ subject ]</a>
              <a href="author.html#3784">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch, master has been updated
       via  a131f337a4ff78a1390aabd576d9e1f8c25b8ff1 (commit)
       via  737e3bfe0febd88f3be07647b2840950c5c4c8a0 (commit)
      from  5795a37779edcbb7017755544152d3f4c1809f2d (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit a131f337a4ff78a1390aabd576d9e1f8c25b8ff1
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Mon Dec 3 15:36:27 2012 +0100

    check enable option for backends and return 404 if backend is disabled

commit 737e3bfe0febd88f3be07647b2840950c5c4c8a0
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Mon Dec 3 15:32:03 2012 +0100

    remove debug output

-----------------------------------------------------------------------

Summary of changes:
 x2gobroker/defaults.py  |    3 ---
 x2gobroker/web/html.py  |    3 +++
 x2gobroker/web/plain.py |    4 +++-
 3 files changed, 6 insertions(+), 4 deletions(-)

The diff of changes is:
diff --git a/x2gobroker/defaults.py b/x2gobroker/defaults.py
index 0d3333c..4d02602 100644
--- a/x2gobroker/defaults.py
+++ b/x2gobroker/defaults.py
@@ -37,9 +37,6 @@ if os.environ.has_key('X2GOBROKER_DEFAULT_BACKEND'):
 else:
     X2GOBROKER_DEFAULT_BACKEND=&quot;zeroconf&quot;
 
-print X2GOBROKER_DEFAULT_BACKEND
-print X2GOBROKER_AGENT_CMD
-
 # defaults for X2Go Sessino Broker configuration file
 X2GOBROKER_CONFIG_DEFAULTS = {
     'global': {
diff --git a/x2gobroker/web/html.py b/x2gobroker/web/html.py
index fa2f294..07802eb 100644
--- a/x2gobroker/web/html.py
+++ b/x2gobroker/web/html.py
@@ -80,6 +80,9 @@ $output
         global_config = broker_backend.get_global_config()
         backend_config = broker_backend.get_backend_config(backend)
 
+        if not backend_config['enable']:
+            return web.notfound()
+
         data = web.input()
         try: username = data.user
         except AttributeError: username = ''
diff --git a/x2gobroker/web/plain.py b/x2gobroker/web/plain.py
index bed72f1..a05a4cb 100644
--- a/x2gobroker/web/plain.py
+++ b/x2gobroker/web/plain.py
@@ -56,6 +56,9 @@ class X2GoBrokerWebPlain:
         global_config = broker_backend.get_global_config()
         backend_config = broker_backend.get_backend_config(backend)
 
+        if not backend_config['enable']:
+            return web.notfound()
+
         data = web.input()
         try: username = data.user
         except AttributeError: username = ''
@@ -71,7 +74,6 @@ class X2GoBrokerWebPlain:
         except AttributeError: new_password = ''
 
         output = ''
-
         self._gen_http_header()
 
         if broker_backend.check_access(username=username, password=password, authid=authid):


hooks/post-receive
-- 
x2gobroker.git (HTTP(S) Session broker for X2Go)

This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;x2gobroker.git&quot; (HTTP(S) Session broker for X2Go).

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003783.html">[X2go-Commits] x2gobroker.git - master (branch) updated:	5795a37779edcbb7017755544152d3f4c1809f2d
</A></li>
	<LI>Next message: <A HREF="003785.html">[X2go-Commits] x2gobroker.git - master (branch) updated:	e2e578a2843c24fa7af5d41dc07d718b09105d55
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3784">[ date ]</a>
              <a href="thread.html#3784">[ thread ]</a>
              <a href="subject.html#3784">[ subject ]</a>
              <a href="author.html#3784">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/x2go-commits">More information about the X2go-commits
mailing list</a><br>
</body></html>
