<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [X2go-Commits] pyhoca-gui.git - build-main (branch) updated: 0.2.1.1
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/x2go-commits/2012-December/index.html" >
   <LINK REL="made" HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20pyhoca-gui.git%20-%20build-main%20%28branch%29%20updated%3A%200.2.1.1&In-Reply-To=%3C20121218120615.11E545DB1A%40ymir%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003897.html">
   <LINK REL="Next"  HREF="003899.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[X2go-Commits] pyhoca-gui.git - build-main (branch) updated: 0.2.1.1</H1>
    <B>X2Go dev team</B> 
    <A HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20pyhoca-gui.git%20-%20build-main%20%28branch%29%20updated%3A%200.2.1.1&In-Reply-To=%3C20121218120615.11E545DB1A%40ymir%3E"
       TITLE="[X2go-Commits] pyhoca-gui.git - build-main (branch) updated: 0.2.1.1">git-admin at x2go.org
       </A><BR>
    <I>Tue Dec 18 13:06:14 CET 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="003897.html">[X2go-Commits] pyhoca-gui.git - master (branch) updated:	0.2.1.0-5-g074593a
</A></li>
        <LI>Next message: <A HREF="003899.html">[X2go-Commits] x2goserver.git - master (branch) updated:	3.1.1.3-108-gab7c23b
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3898">[ date ]</a>
              <a href="thread.html#3898">[ thread ]</a>
              <a href="subject.html#3898">[ subject ]</a>
              <a href="author.html#3898">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch, build-main has been updated
       via  074593a51c7470bc814a6b87b7bb81b26021014e (commit)
       via  7773602142bdd6e45a9c20c5e08dc2f14dd3e585 (commit)
       via  b95ab3113e1fc16b3357e99371dd13792dabf0ee (commit)
       via  6ee0f510213b14747de479d9bfc0b1ff6de20016 (commit)
       via  b438cba88ab7d7a9f2ea08f349c4963ca3ec34fa (commit)
      from  5bb9a4b0aa33329c2b2a79260b54a6b87334332a (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
-----------------------------------------------------------------------

Summary of changes:
 debian/changelog              |   21 ++++++++-----
 debian/control                |    2 +-
 pyhoca/wxgui/__init__.py      |    2 +-
 pyhoca/wxgui/frontend.py      |    7 ++---
 pyhoca/wxgui/menus_taskbar.py |   66 ++++++++++++++++++++++++-----------------
 5 files changed, 58 insertions(+), 40 deletions(-)

The diff of changes is:
diff --git a/debian/changelog b/debian/changelog
index 49aeba3..c042ddf 100644
--- a/debian/changelog
+++ b/debian/changelog
@@ -1,3 +1,13 @@
+pyhoca-gui (0.2.1.1-0~x2go1) unstable; urgency=low
+
+  * New upstream version (0.2.1.1):
+    - Do not disable the session profile template when creating a session
+      profile from an already existing session profile. (Fixes: #90).
+    - Use new feature in Python X2Go 0.2.1.1 that allows the differentiation
+      of sessions associated to different session profiles.
+
+ -- Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;  Tue, 18 Dec 2012 12:52:57 +0100
+
 pyhoca-gui (0.2.1.0-0~x2go1) unstable; urgency=low
 
   [ Mike Gabriel ]
@@ -29,8 +39,7 @@ pyhoca-gui (0.2.1.0-0~x2go1) unstable; urgency=low
     - Make ,,maxdim'' option configurable through session profile manager.
     - Fix naming mismatch ,,autologin'' vs. ,,autoconnect''.
     - Introduce profile manager tab ,,Link Quality''. Move printing into renamed
-      tab ,,Resource Sharing''. Shrink profile manager window, closes upstream
-      issue: #13.
+      tab ,,Resource Sharing''. Shrink profile manager window. (Fixes: #13).
     - Implement SSH agent, automatic key discovery, and SSH agent authentication
       request forwarding in session profile manager.
     - Add SSH agent README.
@@ -364,10 +373,8 @@ pyhoca-gui (0.1.0.7-0~x2go1) unstable; urgency=low
 
   * New upstream version (0.1.0.7)
     - minor i18n fixes (de)
-    - Delaying taskbar icon closure as much as possible (closes upstream
-      issue #79).
-    - Check if print system (CUPS/WinSpool) is available or not (close
-      upstream issue #74)
+    - Delaying taskbar icon closure as much as possible.
+    - Check if print system (CUPS/WinSpool) is available or not.
     - On no such command errors, detect if we already have a session_name. If
       not, leave it out in the GUI notification.
     - Add HOOK_session_startup_failed as a GUI notification (was: exception
@@ -406,7 +413,7 @@ pyhoca-gui (0.1.0.5-0~x2go1) unstable; urgency=low
     - Make tab traversal work in logon window.
     - Update i18n (en, de, nl).
     - Fix session auto-connecting.
-  * React to bug #627990, prefer man2html-base over man2html.
+  * React to bug Debian bug #627990, prefer man2html-base over man2html.
   * Depend on Python X2Go 0.1.1.2
 
  -- Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;  Fri, 01 Jul 2011 13:55:42 +0200
diff --git a/debian/control b/debian/control
index 9b8a7f7..3d1c1de 100644
--- a/debian/control
+++ b/debian/control
@@ -30,7 +30,7 @@ Architecture: all
 Depends: 
  ${misc:Depends},
  python,
- python-x2go (&gt;=0.2.1.0-0~),
+ python-x2go (&gt;=0.2.1.1-0~),
  python-argparse,
  python-notify,
  python-setproctitle,
diff --git a/pyhoca/wxgui/__init__.py b/pyhoca/wxgui/__init__.py
index 0fe95eb..467b22e 100644
--- a/pyhoca/wxgui/__init__.py
+++ b/pyhoca/wxgui/__init__.py
@@ -18,6 +18,6 @@
 # Free Software Foundation, Inc.,
 # 51 Franklin St, Fifth Floor, Boston, MA 02110-1301, USA.
 
-__VERSION__ = '0.2.1.0'
+__VERSION__ = '0.2.1.1'
 
 from frontend import *
diff --git a/pyhoca/wxgui/frontend.py b/pyhoca/wxgui/frontend.py
index b52659e..a77672b 100644
--- a/pyhoca/wxgui/frontend.py
+++ b/pyhoca/wxgui/frontend.py
@@ -885,7 +885,7 @@ class PyHocaGUI(wx.App, x2go.X2goClient):
         session_name = self._eventid_sessionnames_map[evt.GetId()]
         self._disable_session_name(profile_name, session_name)
         if self._X2goClient__server_is_alive(session_uuid):
-            gevent.spawn(self._X2goClient__resume_session, session_name=session_name)
+            gevent.spawn(self._X2goClient__resume_session, session_name=session_name, match_profile_name=profile_name)
             self._X2goClient__list_sessions(session_uuid, refresh_cache=True)
         self._eventid_sessionnames_map = {}
 
@@ -901,7 +901,7 @@ class PyHocaGUI(wx.App, x2go.X2goClient):
         session_uuid = self._X2goClient__client_registered_sessions_of_profile_name(profile_name)[0]
         session_name = self._eventid_sessionnames_map[evt.GetId()]
         self._disable_session_name(profile_name, session_name)
-        gevent.spawn(self._X2goClient__suspend_session, session_uuid, session_name=session_name)
+        gevent.spawn(self._X2goClient__suspend_session, session_uuid, session_name=session_name, match_profile_name=profile_name)
         self._eventid_sessionnames_map = {}
         if self.disconnect_on_suspend and self.get_session(session_uuid).has_terminal_session():
             self.OnServerDisconnect(evt)
@@ -918,7 +918,7 @@ class PyHocaGUI(wx.App, x2go.X2goClient):
         session_uuid = self._X2goClient__client_registered_sessions_of_profile_name(profile_name)[0]
         session_name = self._eventid_sessionnames_map[evt.GetId()]
         self._disable_session_name(profile_name, session_name)
-        gevent.spawn(self._X2goClient__terminate_session, session_uuid, session_name=session_name)
+        gevent.spawn(self._X2goClient__terminate_session, session_uuid, session_name=session_name, match_profile_name=profile_name)
         self._eventid_sessionnames_map = {}
         if self.disconnect_on_terminate and self.get_session(session_uuid).has_terminal_session():
             self.OnServerDisconnect(evt)
@@ -1020,7 +1020,6 @@ class PyHocaGUI(wx.App, x2go.X2goClient):
 
         &quot;&quot;&quot;
         profile_name = self._eventid_profilenames_map[evt.GetId()]
-        self._temp_disabled_profile_names.append(profile_name)
         self._pyhoca_logger('using session profile %s as template for new profile' % profile_name, loglevel=x2go.log.loglevel_INFO, )
         profilemanager.PyHocaGUI_ProfileManager(self, 'COPY', profile_name=profile_name)
 
diff --git a/pyhoca/wxgui/menus_taskbar.py b/pyhoca/wxgui/menus_taskbar.py
index 8fb35ab..e7c07cf 100644
--- a/pyhoca/wxgui/menus_taskbar.py
+++ b/pyhoca/wxgui/menus_taskbar.py
@@ -212,7 +212,7 @@ class PyHocaGUI_Menu_TaskbarSessionActions(wx.Menu):
             self._PyHocaGUI._eventid_sessionnames_map[ID_SUSPENDSESSION] = \
             self._PyHocaGUI._eventid_sessionnames_map[ID_TERMINATESESSION] = session_name
 
-        _s = self._PyHocaGUI.get_session_of_session_name(session_name, return_object=True)
+        _s = self._PyHocaGUI.get_session_of_session_name(session_name, return_object=True, match_profile_name=profile_name)
         _session_status = status
         if session_info is not None:
             _session_status = session_info.get_status()
@@ -423,7 +423,7 @@ def _generate_Menu_PublishedApplications(_PyHocaGUI, caller=None, profile_name=N
 
     &quot;&quot;&quot;
     _lang = _PyHocaGUI.lang
-    _pubapp_session = _PyHocaGUI.get_session_of_session_name(session_name, return_object=True)
+    _pubapp_session = _PyHocaGUI.get_session_of_session_name(session_name, return_object=True, match_profile_name=profile_name)
     try:
         menu_map = _pubapp_session.get_published_applications(lang=_lang, max_no_submenus=_PyHocaGUI.args.published_applications_no_submenus)
     except AttributeError:
@@ -702,38 +702,50 @@ class PyHocaGUI_Menu_TaskbarSessionProfile(wx.Menu):
 
                     if _session_list_names:
 
-                        self.AppendSeparator()
-
+                        _session_list_matching_profile = []
                         for session_name in _session_list_names:
 
-                            session = self._PyHocaGUI.get_session_of_session_name(session_name, return_object=True)
+                            session = self._PyHocaGUI.get_session_of_session_name(session_name, return_object=True, match_profile_name=profile_name)
 
-                            _s_id = wx.NewId()
+                            if not session:
+                                continue
+                            else:
+                                _session_list_matching_profile.append(session)
 
-                            if _session_list[session_name].get_status() == 'R':
-                                state = _(u'Running')
-                            elif _session_list[session_name].get_status() == 'S':
-                                state = _(u'Suspended')
-                            _marker = ''
-                            if session and session.is_master_session():
-                                _marker = '(*)'
-                            if session:
-                                session_submenu = self.AppendMenu(id=_s_id, text=u'%s: &#187;%s&#171; %s' % (state, session_name, _marker),
-                                                                  submenu=PyHocaGUI_Menu_TaskbarSessionActions(self._PyHocaGUI, caller=self,
-                                                                                                               profile_name=profile_name,
-                                                                                                               session_name=session_name,
-                                                                                                               session_info=_session_list[session_name],
-                                                                                                              )
+                        if _session_list_matching_profile:
+
+                            self.AppendSeparator()
+
+                            for session in _session_list_matching_profile:
+
+                                session_name = session.get_session_name()
+
+                                _s_id = wx.NewId()
+
+                                if _session_list[session_name].get_status() == 'R':
+                                    state = _(u'Running')
+                                elif _session_list[session_name].get_status() == 'S':
+                                    state = _(u'Suspended')
+                                _marker = ''
+                                if session and session.is_master_session():
+                                    _marker = '(*)'
+                                if session:
+                                    session_submenu = self.AppendMenu(id=_s_id, text=u'%s: &#187;%s&#171; %s' % (state, session_name, _marker),
+                                                                      submenu=PyHocaGUI_Menu_TaskbarSessionActions(self._PyHocaGUI, caller=self,
+                                                                                                                   profile_name=profile_name,
+                                                                                                                   session_name=session_name,
+                                                                                                                   session_info=_session_list[session_name],
+                                                                                                                  )
                                                                  )
-                                if self._PyHocaGUI._temp_disabled_session_names.has_key(profile_name) and session_name in self._PyHocaGUI._temp_disabled_session_names[profile_name]:
-                                    session_submenu.Enable(False)
+                                    if self._PyHocaGUI._temp_disabled_session_names.has_key(profile_name) and session_name in self._PyHocaGUI._temp_disabled_session_names[profile_name]:
+                                        session_submenu.Enable(False)
 
-                        # redefine list of session names to decide if the clean all session menu item is not be shown
-                        _session_list_names = [ _s_name for _s_name in _session_list.keys() if not _session_list[_s_name].is_published_applications_provider() ]
+                            # redefine list of session names to decide if the clean all session menu item is not be shown
+                            _session_list_names = [ _s.get_session_name() for _s in _session_list_matching_profile if not _session_list[_s.get_session_name()].is_published_applications_provider() ]
 
-                        if _session_list_names:
-                            self.Append(id=ID_CLEANSESSIONS, text=_(u&quot;&amp;Clean all sessions&quot;))
-                            self._PyHocaGUI.Bind(wx.EVT_MENU, self._PyHocaGUI.OnCleanSessions, id=ID_CLEANSESSIONS)
+                            if _session_list_names:
+                                self.Append(id=ID_CLEANSESSIONS, text=_(u&quot;&amp;Clean all sessions&quot;))
+                                self._PyHocaGUI.Bind(wx.EVT_MENU, self._PyHocaGUI.OnCleanSessions, id=ID_CLEANSESSIONS)
 
                 if not self._PyHocaGUI.restricted_trayicon:
 


hooks/post-receive
-- 
pyhoca-gui.git (Python X2Go Client (wxPython GUI))

This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;pyhoca-gui.git&quot; (Python X2Go Client (wxPython GUI)).

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003897.html">[X2go-Commits] pyhoca-gui.git - master (branch) updated:	0.2.1.0-5-g074593a
</A></li>
	<LI>Next message: <A HREF="003899.html">[X2go-Commits] x2goserver.git - master (branch) updated:	3.1.1.3-108-gab7c23b
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3898">[ date ]</a>
              <a href="thread.html#3898">[ thread ]</a>
              <a href="subject.html#3898">[ subject ]</a>
              <a href="author.html#3898">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/x2go-commits">More information about the X2go-commits
mailing list</a><br>
</body></html>
