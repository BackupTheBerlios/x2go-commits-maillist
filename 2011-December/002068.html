<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [X2go-Commits] nx-libs.git - client-only (branch) updated:	01e7385c78bee34c165c6c325c9acdc8b61b29c3
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/x2go-commits/2011-December/index.html" >
   <LINK REL="made" HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20nx-libs.git%20-%20client-only%20%28branch%29%20updated%3A%0A%0901e7385c78bee34c165c6c325c9acdc8b61b29c3&In-Reply-To=%3C20111231164918.AB99C5DB1F%40ymir%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002067.html">
   <LINK REL="Next"  HREF="002069.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[X2go-Commits] nx-libs.git - client-only (branch) updated:	01e7385c78bee34c165c6c325c9acdc8b61b29c3</H1>
    <B>X2go dev team</B> 
    <A HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20nx-libs.git%20-%20client-only%20%28branch%29%20updated%3A%0A%0901e7385c78bee34c165c6c325c9acdc8b61b29c3&In-Reply-To=%3C20111231164918.AB99C5DB1F%40ymir%3E"
       TITLE="[X2go-Commits] nx-libs.git - client-only (branch) updated:	01e7385c78bee34c165c6c325c9acdc8b61b29c3">git-admin at x2go.org
       </A><BR>
    <I>Sat Dec 31 17:49:18 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="002067.html">[X2go-Commits] nx-libs.git - master (branch) updated:	nxproxy/3.5.0-1-177-g2fe05f6
</A></li>
        <LI>Next message: <A HREF="002069.html">[X2go-Commits] nx-libs.git - client-only (branch) updated:	ed21418d727acc385a9f7ea9065adee0a7bc3109
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2068">[ date ]</a>
              <a href="thread.html#2068">[ thread ]</a>
              <a href="subject.html#2068">[ subject ]</a>
              <a href="author.html#2068">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch, client-only has been updated
       via  01e7385c78bee34c165c6c325c9acdc8b61b29c3 (commit)
       via  becc3846f8891483dba8077c5433b709c034151b (commit)
       via  816f97cd36d75ad7c65dd5c2c5e78de39417bbe1 (commit)
       via  96ee521cc660379e2f535f489efe481c032d4845 (commit)
      from  07f065572f8ba4d9314dc6255077c3e123b84f4d (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit 01e7385c78bee34c165c6c325c9acdc8b61b29c3
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Sat Dec 31 17:49:08 2011 +0100

    fix copy+paste error in 011_nxcomp_sa-restorer.patch

commit becc3846f8891483dba8077c5433b709c034151b
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Sat Dec 31 17:46:04 2011 +0100

    Add x11proto-core-dev as build-dependency, remove direct dependency to libx11-6 from libxcomp3. Also: wrap long line in changelog.

commit 816f97cd36d75ad7c65dd5c2c5e78de39417bbe1
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Sat Dec 31 17:43:25 2011 +0100

    Add patch: 011_nxcomp_sa-restorer.patch.

commit 96ee521cc660379e2f535f489efe481c032d4845
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Sat Dec 31 17:42:10 2011 +0100

    Add patch: 005_nxcomp_gcc43.patch.

-----------------------------------------------------------------------

Summary of changes:
 debian/changelog                            |    7 ++-
 debian/control                              |    2 +-
 debian/patches/005_nxcomp_gcc43.patch       |   77 +++++++++++++++++++++++++++
 debian/patches/011_nxcomp_sa-restorer.patch |   25 +++++++++
 debian/patches/series                       |    2 +
 5 files changed, 111 insertions(+), 2 deletions(-)
 create mode 100644 debian/patches/005_nxcomp_gcc43.patch
 create mode 100644 debian/patches/011_nxcomp_sa-restorer.patch

The diff of changes is:
diff --git a/debian/changelog b/debian/changelog
index 1152466..d8fd9b9 100644
--- a/debian/changelog
+++ b/debian/changelog
@@ -30,10 +30,15 @@ nx-libs-client-only (3.5.0-1) UNRELEASED; urgency=low
   * X2Go Packaging Team becomes maintainer, Mike Gabriel + Reinhard Tartler
     become uploaders.
   * Make `breaks-without-version' lintian overrides needless.
-  * Set homepage of NoMachine upstream site (using <A HREF="http://www.nomachine.com/sources.php">http://www.nomachine.com/sources.php</A>).
+  * Set homepage of NoMachine upstream site
+    (using <A HREF="http://www.nomachine.com/sources.php">http://www.nomachine.com/sources.php</A>).
   * Packaging Vcs has been relocated to Alioth.
   * Add more upstream source information to README.source.
   * Make package descriptions in /debian/control more explanatory.
   * Enforce nxcomp package build from main Makefile (via patch).
+  * Add patch: 005_nxcomp_gcc43.patch.
+  * Add patch: 011_nxcomp_sa-restorer.patch.
+  * Add x11proto-core-dev as build-dependency, remove direct dependency to
+    libx11-6 from libxcomp3.
 
  -- Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;  Wed, 28 Dec 2011 19:05:48 +0100
diff --git a/debian/control b/debian/control
index 1bb5673..e09d83e 100644
--- a/debian/control
+++ b/debian/control
@@ -10,6 +10,7 @@ Build-Depends:
  libpng-dev,
  libjpeg-dev,
  zlib1g-dev,
+ x11proto-core-dev,
  quilt (&gt;= 0.46-7~),
  autoconf
 Standards-Version: 3.9.2
@@ -33,7 +34,6 @@ Description: NX proxy (NoMachine)
 Package: libxcomp3
 Architecture: any
 Depends:
- libx11-6,
  ${shlibs:Depends},
  ${misc:Depends}
 Breaks: nxcomp (&lt;=3.5.1)
diff --git a/debian/patches/005_nxcomp_gcc43.patch b/debian/patches/005_nxcomp_gcc43.patch
new file mode 100644
index 0000000..31cb984
--- /dev/null
+++ b/debian/patches/005_nxcomp_gcc43.patch
@@ -0,0 +1,77 @@
+Description: gcc43 fix
+ Use builtin includes to build with gcc43.
+ .
+ Originally contributed by Marcelo Boveto Shima &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">marceloshima at gmail.com</A>&gt;.
+Forwarded: not-yet
+Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
+Last-Update: 2011-12-31
+--- a/nxcomp/Message.cpp      2010-03-18 19:32:44.476930493 -0300
++++ b/nxcomp/Message.cpp   2010-03-18 19:40:48.669719034 -0300
+@@ -15,9 +15,9 @@
+ /*                                                                        */
+ /**************************************************************************/
+ 
+-#include &lt;stdio.h&gt;
++#include &lt;cstdio&gt;
+ #include &lt;unistd.h&gt;
+-#include &lt;string.h&gt;
++#include &lt;cstring&gt;
+ 
+ #include &lt;algorithm&gt;
+ 
+--- a/nxcomp/Misc.cpp 2010-03-18 19:32:44.488465101 -0300
++++ b/nxcomp/Misc.cpp      2010-03-18 19:40:48.669719034 -0300
+@@ -15,11 +15,11 @@
+ /*                                                                        */
+ /**************************************************************************/
+ 
+-#include &lt;stdio.h&gt;
+-#include &lt;ctype.h&gt;
+-#include &lt;stdlib.h&gt;
++#include &lt;cstdio&gt;
++#include &lt;cctype&gt;
++#include &lt;cstdlib&gt;
+ #include &lt;unistd.h&gt;
+-#include &lt;signal.h&gt;
++#include &lt;csignal&gt;
+ 
+ #include &lt;errno.h&gt;
+ #include &lt;string.h&gt;
+--- a/nxcomp/Misc.h   2010-03-18 19:32:44.488465101 -0300
++++ b/nxcomp/Misc.h        2010-03-18 19:40:48.669719034 -0300
+@@ -21,8 +21,8 @@
+ #include &lt;iostream&gt;
+ #include &lt;fstream&gt;
+ 
+-#include &lt;errno.h&gt;
+-#include &lt;string.h&gt;
++#include &lt;cerrno&gt;
++#include &lt;cstring&gt;
+ 
+ #ifdef __sun
+ 
+--- a/nxcomp/Proxy.cpp        2010-03-18 19:32:44.547273410 -0300
++++ b/nxcomp/Proxy.cpp     2010-03-18 19:40:48.669719034 -0300
+@@ -15,9 +15,9 @@
+ /*                                                                        */
+ /**************************************************************************/
+ 
+-#include &lt;stdio.h&gt;
++#include &lt;cstdio&gt;
+ #include &lt;unistd.h&gt;
+-#include &lt;stdlib.h&gt;
++#include &lt;cstdlib&gt;
+ #include &lt;sys/types.h&gt;
+ #include &lt;sys/stat.h&gt;
+ 
+--- a/nxcomp/Split.cpp        2010-03-18 19:32:44.688465322 -0300
++++ nxcomp-ubuntu/Split.cpp     2010-03-18 19:40:48.669719034 -0300
+@@ -16,7 +16,7 @@
+ /**************************************************************************/
+ 
+ #include &lt;unistd.h&gt;
+-#include &lt;string.h&gt;
++#include &lt;cstring&gt;
+ #include &lt;sys/stat.h&gt;
+ #include &lt;sys/types.h&gt;
+ #include &lt;utime.h&gt;
diff --git a/debian/patches/011_nxcomp_sa-restorer.patch b/debian/patches/011_nxcomp_sa-restorer.patch
new file mode 100644
index 0000000..afaa29f
--- /dev/null
+++ b/debian/patches/011_nxcomp_sa-restorer.patch
@@ -0,0 +1,25 @@
+Description: sa_restorer vs. memset
+ Use memset instead of setting .sa_restorer to NULL.
+Forwarded: not-yet
+Author: St&#233;phane Graber &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">stgraber at ubuntu.com</A>&gt;
+Last-Update: 2011-12-31
+--- a/nxcomp/Loop.cpp
++++ b/nxcomp/Loop.cpp
+@@ -5895,7 +5895,7 @@
+ 
+   #if defined(__linux__)
+ 
+-  newAction.sa_restorer = NULL;
++  memset(&amp;newAction, NULL, sizeof(newAction));
+ 
+   #endif
+ 
+@@ -6513,7 +6513,7 @@
+ 
+   #if defined(__linux__)
+ 
+-  action.sa_restorer = NULL;
++  memset(&amp;action, NULL, sizeof(action));
+ 
+   #endif
+ 
diff --git a/debian/patches/series b/debian/patches/series
index 862de55..f6ede8b 100644
--- a/debian/patches/series
+++ b/debian/patches/series
@@ -1,3 +1,5 @@
 001_add-main-makefile.patch
+005_nxcomp_gcc43.patch
+011_nxcomp_sa-restorer.patch
 012_nxcomp_makefile-uninstall.patch
 015_nxproxy_makefile-uninstall.patch


hooks/post-receive
-- 
nx-libs.git (NX libraries)

This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;nx-libs.git&quot; (NX libraries).


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002067.html">[X2go-Commits] nx-libs.git - master (branch) updated:	nxproxy/3.5.0-1-177-g2fe05f6
</A></li>
	<LI>Next message: <A HREF="002069.html">[X2go-Commits] nx-libs.git - client-only (branch) updated:	ed21418d727acc385a9f7ea9065adee0a7bc3109
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2068">[ date ]</a>
              <a href="thread.html#2068">[ thread ]</a>
              <a href="subject.html#2068">[ subject ]</a>
              <a href="author.html#2068">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/x2go-commits">More information about the X2go-commits
mailing list</a><br>
</body></html>
