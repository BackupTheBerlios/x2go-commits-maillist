<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [X2go-Commits] nx-libs.git - master (branch) updated:	nxagent/3.5.0-7-10-g43c04db
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/x2go-commits/2011-December/index.html" >
   <LINK REL="made" HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20nx-libs.git%20-%20master%20%28branch%29%20updated%3A%0A%09nxagent/3.5.0-7-10-g43c04db&In-Reply-To=%3C20111229094248.640305DB1F%40ymir%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002034.html">
   <LINK REL="Next"  HREF="002036.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[X2go-Commits] nx-libs.git - master (branch) updated:	nxagent/3.5.0-7-10-g43c04db</H1>
    <B>X2go dev team</B> 
    <A HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20nx-libs.git%20-%20master%20%28branch%29%20updated%3A%0A%09nxagent/3.5.0-7-10-g43c04db&In-Reply-To=%3C20111229094248.640305DB1F%40ymir%3E"
       TITLE="[X2go-Commits] nx-libs.git - master (branch) updated:	nxagent/3.5.0-7-10-g43c04db">git-admin at x2go.org
       </A><BR>
    <I>Thu Dec 29 10:42:48 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="002034.html">[X2go-Commits] nx-libs.git - master (branch) updated:	nxagent/3.5.0-7-8-g4cffd99
</A></li>
        <LI>Next message: <A HREF="002036.html">[X2go-Commits] nx-libs.git - master (branch) updated:	nxagent/3.5.0-7-11-gc93ae96
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2035">[ date ]</a>
              <a href="thread.html#2035">[ thread ]</a>
              <a href="subject.html#2035">[ subject ]</a>
              <a href="author.html#2035">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch, master has been updated
       via  43c04dbfd48025bf6eda40e9b82c812f44290188 (commit)
       via  9f226601ff68e75b2baa68bbf08da369c62527e1 (commit)
      from  4cffd99f2288646aa8b48752ae307db4bfa9d1fd (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit 43c04dbfd48025bf6eda40e9b82c812f44290188
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Thu Dec 29 10:42:42 2011 +0100

    Rework FreeNX patches to be applicable to latest NX sources.

commit 9f226601ff68e75b2baa68bbf08da369c62527e1
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Thu Dec 29 10:25:45 2011 +0100

    Adapt path names in FreeNX patches to meet requirements for source tree of this package.

-----------------------------------------------------------------------

Summary of changes:
 debian/changelog                                   |    3 ++
 debian/patches/101_nxagent_set-rgb-path.patch      |    4 +-
 .../102_xserver-xext_set-securitypolicy-path.patch |    4 +-
 .../patches/103_nxagent_set-X0-config-path.patch   |    8 ++--
 debian/patches/104_nxagent_enable_debug.patch      |   15 +++-----
 ...105_nxagent_export-remote-keyboard-config.patch |   14 ++++----
 .../patches/106_nxagent_utf8-copy-clipboard.patch  |    4 +-
 ..._clipboard-compound-text+small-bed-sheets.patch |    8 ++--
 debian/patches/108_nxagent_wine-close-delay.patch  |    8 ++--
 .../109_nxagent_locale-utf8-compound-text.patch    |   10 +++---
 debian/patches/200_nxagent_unbrand-agent.patch     |   36 ++++++++++----------
 11 files changed, 56 insertions(+), 58 deletions(-)

The diff of changes is:
diff --git a/debian/changelog b/debian/changelog
index 4d21afe..075ff4e 100644
--- a/debian/changelog
+++ b/debian/changelog
@@ -19,6 +19,9 @@ nx-libs (2:3.5.0-0~x2go2) UNRELEASED; urgency=low
     - 108_nxagent_wine-close-delay.patch
     - 109_nxagent_locale-utf8-compound-text.patch
     - 200_nxagent_unbrand-agent.patch
+  * Adapt path names in FreeNX patches to meet requirements for source tree of this
+    package.
+  * Rework FreeNX patches to be applicable to latest NX sources.
 
  -- Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;  Wed, 28 Dec 2011 19:06:26 +0100
 
diff --git a/debian/patches/101_nxagent_set-rgb-path.patch b/debian/patches/101_nxagent_set-rgb-path.patch
index db41168..bcbfa0c 100644
--- a/debian/patches/101_nxagent_set-rgb-path.patch
+++ b/debian/patches/101_nxagent_set-rgb-path.patch
@@ -3,8 +3,8 @@
 ## All lines beginning with `## DP:' are a description of the patch.
 ## DP: Change the path to the keyboard configuration file
 
---- a/programs/Xserver/os/oscolor.c
-+++ b/programs/Xserver/os/oscolor.c
+--- a/nx-X11/programs/Xserver/os/oscolor.c
++++ b/nx-X11/programs/Xserver/os/oscolor.c
 @@ -53,7 +53,7 @@
  #include &lt;sys/stat.h&gt;
  #include &lt;unistd.h&gt;
diff --git a/debian/patches/102_xserver-xext_set-securitypolicy-path.patch b/debian/patches/102_xserver-xext_set-securitypolicy-path.patch
index c0978c9..4e04dfd 100644
--- a/debian/patches/102_xserver-xext_set-securitypolicy-path.patch
+++ b/debian/patches/102_xserver-xext_set-securitypolicy-path.patch
@@ -3,8 +3,8 @@
 ## All lines beginning with `## DP:' are a description of the patch.
 ## DP: Change the path to the keyboard configuration file
 
---- a/programs/Xserver/Xext/security.c
-+++ b/programs/Xserver/Xext/security.c
+--- a/nx-X11/programs/Xserver/Xext/security.c
++++ b/nx-X11/programs/Xserver/Xext/security.c
 @@ -86,7 +86,7 @@
  
  #ifdef NXAGENT_SERVER
diff --git a/debian/patches/103_nxagent_set-X0-config-path.patch b/debian/patches/103_nxagent_set-X0-config-path.patch
index 326c91b..d99eae8 100644
--- a/debian/patches/103_nxagent_set-X0-config-path.patch
+++ b/debian/patches/103_nxagent_set-X0-config-path.patch
@@ -1,5 +1,5 @@
---- a/nxagent/programs/Xserver/hw/nxagent/Keyboard.c
-+++ b/nxagent/programs/Xserver/hw/nxagent/Keyboard.c
+--- a/nx-X11/programs/Xserver/hw/nxagent/Keyboard.c
++++ b/nx-X11/programs/Xserver/hw/nxagent/Keyboard.c
 @@ -136,7 +136,7 @@
  #define XKB_ALTERNATE_BASE_DIRECTORY   &quot;/usr/X11R6/lib/X11/xkb&quot;
  #endif
@@ -9,7 +9,7 @@
  #endif
  #ifndef XKB_DFLT_RULES_FILE
  #define XKB_DFLT_RULES_FILE  &quot;xfree86&quot;
-@@ -978,8 +978,7 @@
+@@ -985,8 +985,7 @@
  
          XkbGetControls(nxagentDisplay, XkbAllControlsMask, xkb);
  
@@ -19,7 +19,7 @@
  
          nxagentXkbConfigFilePath = malloc((nxagentXkbConfigFilePathSize + 1) * sizeof(char));
  
-@@ -988,9 +987,7 @@
+@@ -995,9 +994,7 @@
            FatalError(&quot;nxagentKeyboardProc: malloc failed.&quot;);
          }
  
diff --git a/debian/patches/104_nxagent_enable_debug.patch b/debian/patches/104_nxagent_enable_debug.patch
index 6debbaf..e1f4c06 100644
--- a/debian/patches/104_nxagent_enable_debug.patch
+++ b/debian/patches/104_nxagent_enable_debug.patch
@@ -1,17 +1,12 @@
-## 90_enable_debug.dpatch by  &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">marceloshima at gmail.com</A>&gt;
-##
-## All lines beginning with `## DP:' are a description of the patch.
-## DP: No description.
-
---- a/nxagent/programs/Xserver/hw/nxagent/Imakefile	2010-09-17 14:49:52.000000000 +0200
-+++ b/nxagent/programs/Xserver/hw/nxagent/Imakefile	2010-09-17 15:02:43.113911514 +0200
-@@ -205,7 +205,8 @@
+--- a/nx-X11/programs/Xserver/hw/nxagent/Imakefile
++++ b/nx-X11/programs/Xserver/hw/nxagent/Imakefile
+@@ -203,7 +203,8 @@
            -DNXAGENT_ONSTART \
            -DNXAGENT_SPLASH \
            -DNXAGENT_ARTSD \
 -          -UNX_DEBUG_INPUT \
 +          -DNX_DEBUG_INPUT \
 +          -DDEBUG \
+ 	  -DRANDR_10_INTERFACE \
+ 	  -DRANDR_12_INTERFACE \
            -UPANORAMIX \
-           -UDEBUG_TREE
- 
diff --git a/debian/patches/105_nxagent_export-remote-keyboard-config.patch b/debian/patches/105_nxagent_export-remote-keyboard-config.patch
index efd6e53..ec8575e 100644
--- a/debian/patches/105_nxagent_export-remote-keyboard-config.patch
+++ b/debian/patches/105_nxagent_export-remote-keyboard-config.patch
@@ -4,8 +4,8 @@
 ## All lines beginning with `## DP:' are a description of the patch.
 ## DP: Export the client keyboard configurations to a file
 
---- a/nxagent/programs/Xserver/hw/nxagent/Error.c
-+++ b/nxagent/programs/Xserver/hw/nxagent/Error.c
+--- a/nx-X11/programs/Xserver/hw/nxagent/Error.c
++++ b/nx-X11/programs/Xserver/hw/nxagent/Error.c
 @@ -497,7 +497,7 @@
    return rootPath;
  }
@@ -15,8 +15,8 @@
  {
  
    char *rootPath;
---- a/nxagent/programs/Xserver/hw/nxagent/Error.h
-+++ b/nxagent/programs/Xserver/hw/nxagent/Error.h
+--- a/nx-X11/programs/Xserver/hw/nxagent/Error.h
++++ b/nx-X11/programs/Xserver/hw/nxagent/Error.h
 @@ -34,4 +34,6 @@
  
  void nxagentEndRedirectToClientsLog(void);
@@ -24,8 +24,8 @@
 +char *nxagentGetSessionPath(void);
 +
  #endif /* __Error_H__ */
---- a/nxagent/programs/Xserver/hw/nxagent/Keyboard.c
-+++ b/nxagent/programs/Xserver/hw/nxagent/Keyboard.c
+--- a/nx-X11/programs/Xserver/hw/nxagent/Keyboard.c
++++ b/nx-X11/programs/Xserver/hw/nxagent/Keyboard.c
 @@ -52,6 +52,7 @@
  #include &quot;Keyboard.h&quot;
  #include &quot;Events.h&quot;
@@ -34,7 +34,7 @@
  
  #include &quot;NXlib.h&quot;
  
-@@ -1770,6 +1771,42 @@
+@@ -1790,6 +1791,42 @@
    }
    #endif
  
diff --git a/debian/patches/106_nxagent_utf8-copy-clipboard.patch b/debian/patches/106_nxagent_utf8-copy-clipboard.patch
index 08b0c10..21a8ec0 100644
--- a/debian/patches/106_nxagent_utf8-copy-clipboard.patch
+++ b/debian/patches/106_nxagent_utf8-copy-clipboard.patch
@@ -1,5 +1,5 @@
---- a/nxagent/programs/Xserver/hw/nxagent/Clipboard.c
-+++ b/nxagent/programs/Xserver/hw/nxagent/Clipboard.c
+--- a/nx-X11/programs/Xserver/hw/nxagent/Clipboard.c
++++ b/nx-X11/programs/Xserver/hw/nxagent/Clipboard.c
 @@ -166,7 +166,9 @@
  
    if (target == XA_STRING) return True;
diff --git a/debian/patches/107_nxagent_clipboard-compound-text+small-bed-sheets.patch b/debian/patches/107_nxagent_clipboard-compound-text+small-bed-sheets.patch
index 1388bf9..bde9356 100644
--- a/debian/patches/107_nxagent_clipboard-compound-text+small-bed-sheets.patch
+++ b/debian/patches/107_nxagent_clipboard-compound-text+small-bed-sheets.patch
@@ -1,5 +1,5 @@
---- a/nxagent/programs/Xserver/hw/nxagent/Clipboard.c
-+++ b/nxagent/programs/Xserver/hw/nxagent/Clipboard.c
+--- a/nx-X11/programs/Xserver/hw/nxagent/Clipboard.c
++++ b/nx-X11/programs/Xserver/hw/nxagent/Clipboard.c
 @@ -1226,10 +1226,11 @@
      Atom xa_STRING[4];
      xEvent x;
@@ -15,8 +15,8 @@
  
      ChangeWindowProperty(pWin,
                           property,
---- a/nxagent/programs/Xserver/hw/nxagent/Image.c
-+++ b/nxagent/programs/Xserver/hw/nxagent/Image.c
+--- a/nx-X11/programs/Xserver/hw/nxagent/Image.c
++++ b/nx-X11/programs/Xserver/hw/nxagent/Image.c
 @@ -644,6 +644,10 @@
              pDrawable -&gt; depth != 1 &amp;&amp;
                  nxagentOption(DeferLevel) &gt;= 1)
diff --git a/debian/patches/108_nxagent_wine-close-delay.patch b/debian/patches/108_nxagent_wine-close-delay.patch
index 4ea4cd6..ede8473 100644
--- a/debian/patches/108_nxagent_wine-close-delay.patch
+++ b/debian/patches/108_nxagent_wine-close-delay.patch
@@ -1,5 +1,5 @@
---- a/nxagent/programs/Xserver/hw/nxagent/Window.c
-+++ b/nxagent/programs/Xserver/hw/nxagent/Window.c
+--- a/nx-X11/programs/Xserver/hw/nxagent/Window.c
++++ b/nx-X11/programs/Xserver/hw/nxagent/Window.c
 @@ -176,6 +176,14 @@
  
  static int nxagentForceExposure(WindowPtr pWin, pointer ptr);
@@ -15,7 +15,7 @@
  /*
   * This is currently unused.
   */
-@@ -1640,6 +1648,17 @@
+@@ -1858,6 +1866,17 @@
    nxagentAddConfiguredWindow(pWin, CWStackingOrder);
    nxagentAddConfiguredWindow(pWin, CW_Shape);
  
@@ -33,7 +33,7 @@
    #ifdef SHAPE
  
    /*
-@@ -1686,6 +1705,17 @@
+@@ -1904,6 +1923,17 @@
      return True;
    }
  
diff --git a/debian/patches/109_nxagent_locale-utf8-compound-text.patch b/debian/patches/109_nxagent_locale-utf8-compound-text.patch
index fe48930..248e657 100644
--- a/debian/patches/109_nxagent_locale-utf8-compound-text.patch
+++ b/debian/patches/109_nxagent_locale-utf8-compound-text.patch
@@ -1,5 +1,5 @@
---- a/nxagent/programs/Xserver/hw/nxagent/Init.c
-+++ b/nxagent/programs/Xserver/hw/nxagent/Init.c
+--- a/nx-X11/programs/Xserver/hw/nxagent/Init.c
++++ b/nx-X11/programs/Xserver/hw/nxagent/Init.c
 @@ -64,6 +64,9 @@
  #include &quot;NX.h&quot;
  #include &quot;NXlib.h&quot;
@@ -10,7 +10,7 @@
  /*
   * Set here the required log level.
   */
-@@ -339,6 +342,20 @@
+@@ -348,6 +351,20 @@
     */
  
    blackRoot = TRUE;
@@ -31,8 +31,8 @@
  }
  
  void InitInput(argc, argv)
---- a/nxagent/programs/Xserver/hw/nxagent/Rootless.c
-+++ b/nxagent/programs/Xserver/hw/nxagent/Rootless.c
+--- a/nx-X11/programs/Xserver/hw/nxagent/Rootless.c
++++ b/nx-X11/programs/Xserver/hw/nxagent/Rootless.c
 @@ -32,6 +32,10 @@
  
  #include &quot;NXlib.h&quot;
diff --git a/debian/patches/200_nxagent_unbrand-agent.patch b/debian/patches/200_nxagent_unbrand-agent.patch
index 7a2b4d0..8e441ca 100644
--- a/debian/patches/200_nxagent_unbrand-agent.patch
+++ b/debian/patches/200_nxagent_unbrand-agent.patch
@@ -1,6 +1,6 @@
---- a/nxagent/programs/Xserver/hw/nxagent/Screen.c
-+++ b/nxagent/programs/Xserver/hw/nxagent/Screen.c
-@@ -1539,7 +1539,20 @@
+--- a/nx-X11/programs/Xserver/hw/nxagent/Screen.c
++++ b/nx-X11/programs/Xserver/hw/nxagent/Screen.c
+@@ -1754,7 +1754,20 @@
        #ifdef TEST
        fprintf(stderr, &quot;nxagentOpenScreen: Created new default window with id [%ld].\n&quot;,
                    nxagentDefaultWindows[pScreen-&gt;myNum]);
@@ -21,8 +21,8 @@
  
        if (nxagentOption(Fullscreen))
        {
---- a/nxagent/programs/Xserver/hw/nxagent/Screen.h
-+++ b/nxagent/programs/Xserver/hw/nxagent/Screen.h
+--- a/nx-X11/programs/Xserver/hw/nxagent/Screen.h
++++ b/nx-X11/programs/Xserver/hw/nxagent/Screen.h
 @@ -36,6 +36,8 @@
  #define MIN_NXAGENT_HEIGHT 60
  #define NXAGENT_FRAME_WIDTH 2000
@@ -32,19 +32,8 @@
  #define nxagentSetPrintGeometry(screen) \
      nxagentPrintGeometryFlags = (1 &lt;&lt; (screen));
      
---- a/nxagent/programs/Xserver/hw/nxagent/Display.c
-+++ b/nxagent/programs/Xserver/hw/nxagent/Display.c
-@@ -1861,7 +1861,7 @@
-   strncpy(default_path, &quot;&quot;, 255);
- 
-   strcat(icon_filename, NXAGENT_ICON_NAME);
--  strcat(default_path,&quot;/usr/NX/share/images/&quot;);
-+  strcat(default_path,&quot;/usr/share/pixmaps/&quot;);
-   strcat(default_path,icon_filename);
- 
-   if ((icon_fp = fopen(default_path, &quot;r&quot;)) == NULL)
---- a/nxagent/programs/Xserver/hw/nxagent/Splash.c
-+++ b/nxagent/programs/Xserver/hw/nxagent/Splash.c
+--- a/nx-X11/programs/Xserver/hw/nxagent/Splash.c
++++ b/nx-X11/programs/Xserver/hw/nxagent/Splash.c
 @@ -204,6 +204,7 @@
  
    nxagentPixmapLogo = XCreatePixmap(nxagentDisplay, win, width, height, nxagentLogoDepth);
@@ -53,3 +42,14 @@
    if (!nxagentPixmapLogo)
    {
      return;
+--- a/nx-X11/programs/Xserver/hw/nxagent/Display.c
++++ b/nx-X11/programs/Xserver/hw/nxagent/Display.c
+@@ -1919,7 +1919,7 @@
+   XlibPixmap IconPixmap;
+   XlibPixmap IconShape;
+ 
+-  snprintf(default_path, PATH_MAX-1, &quot;/usr/NX/share/images/%s&quot;, NXAGENT_ICON_NAME);
++  snprintf(default_path, PATH_MAX-1, &quot;/usr/share/pixmaps/%s&quot;, NXAGENT_ICON_NAME);
+ 
+   if ((icon_fp = fopen(default_path, &quot;r&quot;)) == NULL)
+   {


hooks/post-receive
-- 
nx-libs.git (NX libraries)

This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;nx-libs.git&quot; (NX libraries).


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002034.html">[X2go-Commits] nx-libs.git - master (branch) updated:	nxagent/3.5.0-7-8-g4cffd99
</A></li>
	<LI>Next message: <A HREF="002036.html">[X2go-Commits] nx-libs.git - master (branch) updated:	nxagent/3.5.0-7-11-gc93ae96
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2035">[ date ]</a>
              <a href="thread.html#2035">[ thread ]</a>
              <a href="subject.html#2035">[ subject ]</a>
              <a href="author.html#2035">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/x2go-commits">More information about the X2go-commits
mailing list</a><br>
</body></html>
