<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [X2go-Commits] x2gobroker.git - master (branch) updated:	0.0.0.3-2-g64a4bbc
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/x2go-commits/2013-February/index.html" >
   <LINK REL="made" HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20x2gobroker.git%20-%20master%20%28branch%29%20updated%3A%0A%090.0.0.3-2-g64a4bbc&In-Reply-To=%3C20130223232344.D82393BC43%40ymir%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004248.html">
   <LINK REL="Next"  HREF="004250.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[X2go-Commits] x2gobroker.git - master (branch) updated:	0.0.0.3-2-g64a4bbc</H1>
    <B>X2Go dev team</B> 
    <A HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20x2gobroker.git%20-%20master%20%28branch%29%20updated%3A%0A%090.0.0.3-2-g64a4bbc&In-Reply-To=%3C20130223232344.D82393BC43%40ymir%3E"
       TITLE="[X2go-Commits] x2gobroker.git - master (branch) updated:	0.0.0.3-2-g64a4bbc">git-admin at x2go.org
       </A><BR>
    <I>Sun Feb 24 00:23:44 CET 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="004248.html">[X2go-Commits] x2goclient.git - master (branch) updated:	4.0.0.0-21-ga60fb73
</A></li>
        <LI>Next message: <A HREF="004250.html">[X2go-Commits] x2goclient.git - master (branch) updated:	4.0.0.0-22-g8867d02
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4249">[ date ]</a>
              <a href="thread.html#4249">[ thread ]</a>
              <a href="subject.html#4249">[ subject ]</a>
              <a href="author.html#4249">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch, master has been updated
       via  64a4bbcdb88c6c7c9748da79e11e0cec7fe37bed (commit)
       via  7ed759b99d34ebfafaf169816a6e545be555bad8 (commit)
      from  e1970e0d61508915fe9bea869f5139a5c6cd7cac (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit 64a4bbcdb88c6c7c9748da79e11e0cec7fe37bed
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Sun Feb 24 00:23:40 2013 +0100

    Capture DNS resolver failures on client ACLs in case the one of the listed hostnames in one client ACL definition is not resolvable. Such a failure will deny access to the corresponding session profile.

commit 7ed759b99d34ebfafaf169816a6e545be555bad8
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Thu Feb 21 21:48:26 2013 +0100

    Continue development...

-----------------------------------------------------------------------

Summary of changes:
 debian/changelog                  |   10 ++++++++++
 sbin/x2gobroker-pubkeyauthorizer  |    2 +-
 x2gobroker/__init__.py            |    2 +-
 x2gobroker/brokers/base_broker.py |    9 +++++++--
 4 files changed, 19 insertions(+), 4 deletions(-)

The diff of changes is:
diff --git a/debian/changelog b/debian/changelog
index 6871bdf..e32ed19 100644
--- a/debian/changelog
+++ b/debian/changelog
@@ -1,3 +1,13 @@
+x2gobroker (0.0.0.4-0~x2go1) UNRELEASED; urgency=low
+
+  * New upstream version (0.0.0.4):
+    - Capture DNS resolver failures on client ACLs in case the
+      one of the listed hostnames in one client ACL definition is
+      not resolvable. Such a failure will deny access to the
+      corresponding session profile.
+
+ -- Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;  Thu, 21 Feb 2013 21:47:32 +0100
+
 x2gobroker (0.0.0.3-0~x2go1) unstable; urgency=low
 
   * New upstream version (0.0.0.3):
diff --git a/sbin/x2gobroker-pubkeyauthorizer b/sbin/x2gobroker-pubkeyauthorizer
index a28a068..62fed95 100755
--- a/sbin/x2gobroker-pubkeyauthorizer
+++ b/sbin/x2gobroker-pubkeyauthorizer
@@ -36,7 +36,7 @@ import logging.config
 from pwd import getpwnam
 from grp import getgrnam
 
-__VERSION__ = '0.0.0.3'
+__VERSION__ = '0.0.0.4'
 __AUTHOR__ = 'Mike Gabriel (X2Go Project) &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;'
 
 PROG_NAME = os.path.basename(sys.argv[0])
diff --git a/x2gobroker/__init__.py b/x2gobroker/__init__.py
index 6684a5b..576a849 100644
--- a/x2gobroker/__init__.py
+++ b/x2gobroker/__init__.py
@@ -18,5 +18,5 @@
 # Free Software Foundation, Inc.,
 # 51 Franklin St, Fifth Floor, Boston, MA 02110-1301, USA.
 
-__VERSION__ = '0.0.0.3'
+__VERSION__ = '0.0.0.4'
 __AUTHOR__ = 'Mike Gabriel (X2Go Project) &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;'
diff --git a/x2gobroker/brokers/base_broker.py b/x2gobroker/brokers/base_broker.py
index 9e811c0..ad3e3e7 100644
--- a/x2gobroker/brokers/base_broker.py
+++ b/x2gobroker/brokers/base_broker.py
@@ -301,8 +301,13 @@ class X2GoBroker(object):
                     _acls_clients_deny[idx] = '0.0.0.0/0'
                     _acls_clients_deny.insert(idx, '::/0')
 
-            _allow_address_set = netaddr.IPSet(_acls_clients_allow)
-            _deny_address_set = netaddr.IPSet(_acls_clients_deny)
+            _allow_address_set = []
+            _deny_address_set = ['ALL']
+            try:
+                _allow_address_set = netaddr.IPSet(_acls_clients_allow)
+                _deny_address_set = netaddr.IPSet(_acls_clients_deny)
+            except netaddr.core.AddrFormatError, e:
+                logger_error.error('base_broker.X2GoBroker.check_acls(): netaddr.core.AddrFormatError - {why}'.format(why=str(e)))
 
             _allow_client = self._client_address in _allow_address_set
             _deny_client = self._client_address in _deny_address_set


hooks/post-receive
-- 
x2gobroker.git (HTTP(S) Session broker for X2Go)

This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;x2gobroker.git&quot; (HTTP(S) Session broker for X2Go).

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004248.html">[X2go-Commits] x2goclient.git - master (branch) updated:	4.0.0.0-21-ga60fb73
</A></li>
	<LI>Next message: <A HREF="004250.html">[X2go-Commits] x2goclient.git - master (branch) updated:	4.0.0.0-22-g8867d02
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4249">[ date ]</a>
              <a href="thread.html#4249">[ thread ]</a>
              <a href="subject.html#4249">[ subject ]</a>
              <a href="author.html#4249">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/x2go-commits">More information about the X2go-commits
mailing list</a><br>
</body></html>
