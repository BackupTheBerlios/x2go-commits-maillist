<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [X2go-Commits] cups-x2go.git - build-main (branch) updated: 3.0.0.4
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/x2go-commits/2012-September/index.html" >
   <LINK REL="made" HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20cups-x2go.git%20-%20build-main%20%28branch%29%20updated%3A%203.0.0.4&In-Reply-To=%3C20120925140000.A688A5DB19%40ymir%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003292.html">
   <LINK REL="Next"  HREF="003294.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[X2go-Commits] cups-x2go.git - build-main (branch) updated: 3.0.0.4</H1>
    <B>X2Go dev team</B> 
    <A HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20cups-x2go.git%20-%20build-main%20%28branch%29%20updated%3A%203.0.0.4&In-Reply-To=%3C20120925140000.A688A5DB19%40ymir%3E"
       TITLE="[X2go-Commits] cups-x2go.git - build-main (branch) updated: 3.0.0.4">git-admin at x2go.org
       </A><BR>
    <I>Tue Sep 25 16:00:00 CEST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="003292.html">[X2go-Commits] cups-x2go.git - master (branch) updated:	3.0.0.3-8-g25c010f
</A></li>
        <LI>Next message: <A HREF="003294.html">[X2go-Commits] python-x2go.git - master (branch) updated:	0.2.0.9-16-g94d6922
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3293">[ date ]</a>
              <a href="thread.html#3293">[ thread ]</a>
              <a href="subject.html#3293">[ subject ]</a>
              <a href="author.html#3293">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch, build-main has been updated
       via  25c010ff996d90a904bed9ce225be76e7393911c (commit)
       via  90bc39eb514ea22e3848144c3690e33094fd26ee (commit)
       via  d1b85e1ea683f5efecde43b34cefd339b63398b7 (commit)
       via  7be426bcf5b604d2229dd8321a6d21f570a89483 (commit)
       via  86e725ac8e514d40abcef9db2367be05736d0604 (commit)
       via  6a7c597b3fa5004c1d24640c48dbca4bf718c180 (commit)
       via  ea845a5c5a6c5ff3dfabfe7a77e4a0d120d8f57a (commit)
       via  57cfdc83af8b5fd2a7e330c6c1af2fe93767190c (commit)
      from  eeb0842b295fb02d1a58611cecab640a65bb1300 (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
-----------------------------------------------------------------------

Summary of changes:
 CUPS-X2GO.ppd     |    8 ++++----
 VERSION.cups-x2go |    2 +-
 cups-x2go         |   31 +++++++++++++++++++------------
 cups-x2go.conf    |    8 ++++----
 debian/changelog  |   14 ++++++++++++++
 debian/control    |   16 +++++++++-------
 6 files changed, 51 insertions(+), 28 deletions(-)

The diff of changes is:
diff --git a/CUPS-X2GO.ppd b/CUPS-X2GO.ppd
index 7ecd5e6..d3d5207 100644
--- a/CUPS-X2GO.ppd
+++ b/CUPS-X2GO.ppd
@@ -28,10 +28,10 @@
 *PCFileName:	&quot;CUPS-X2GO.PPD&quot;
 *Manufacturer:	&quot;Generic&quot;
 *Product:	&quot;(CUPS v1.1)&quot;
-*ModelName:     &quot;Generic CUPS-X2GO Printer&quot;
-*ShortNickName: &quot;Generic CUPS-X2GO Printer&quot;
-*NickName:      &quot;Generic CUPS-X2GO Printer&quot;
-*1284DeviceID:  &quot;MFG:Generic;MDL:CUPS-X2GO Printer;DES:Generic CUPS-X2GO Printer;CLS:PRINTER;CMD:POSTSCRIPT;&quot;
+*ModelName:     &quot;Generic CUPS-X2Go Printer&quot;
+*ShortNickName: &quot;Generic CUPS-X2Go Printer&quot;
+*NickName:      &quot;Generic CUPS-X2Go Printer&quot;
+*1284DeviceID:  &quot;MFG:Generic;MDL:CUPS-X2Go Printer;DES:Generic CUPS-X2Go Printer;CLS:PRINTER;CMD:POSTSCRIPT;&quot;
 *% cupsFilter:    &quot;application/vnd.cups-postscript 0 pstitleiconv&quot;
 *PSVersion:	&quot;(2017.000) 0&quot;
 *LanguageLevel:	&quot;2&quot;
diff --git a/VERSION.cups-x2go b/VERSION.cups-x2go
index ea258a6..6f3d48d 100644
--- a/VERSION.cups-x2go
+++ b/VERSION.cups-x2go
@@ -1 +1 @@
-3.0.0.3
+3.0.0.4
diff --git a/cups-x2go b/cups-x2go
index 2275525..967c9ee 100755
--- a/cups-x2go
+++ b/cups-x2go
@@ -1,6 +1,6 @@
 #!/usr/bin/perl
 
-# X2go CUPS backend 
+# X2Go CUPS backend 
 # Copyright 2009-2011 Obviously Nice
 #
 #  This program is free software; you can redistribute it and/or modify it
@@ -26,20 +26,20 @@ use strict;
 
 openlog($0,'cons,pid','user');
 
-## if the CUPS server is X2go server at the same time, use ,,local'' here, otherwise
-## name the hostname of your master X2go server within in your X2go cluster. This
+## if the CUPS server is X2Go server at the same time, use ,,local'' here, otherwise
+## name the hostname of your master X2Go server within in your X2Go cluster. This
 ## host then is used for querying session information.
 my $x2goserver = &quot;local&quot;;
 
 ## DSA key for user x2goprint (new path and filename, default in cups-x2go backend)
-## this private key has to be valid for all X2go servers that print via the CUPS
+## this private key has to be valid for all X2Go servers that print via the CUPS
 ## server that cups-x2go is installed on. The corresponding public key has to
 ## be installed in &lt;remote-x2goserverX&gt;:~x2goprint/.ssh/authorized_keys
 my $printdsa = &quot;/root/.ssh/id_dsa-x2goprint&quot;;
 
 # PS2PDF command
-my $ps2pdf = &quot;/usr/bin/gs -q -dCompatibilityLevel=1.4 -dNOPAUSE -dBATCH -dSAFER -sDEVICE=pdfwrite -sOutputFile=\&quot;%s.pdf\&quot; -dAutoRotatePages=/PageByPage -dAutoFilterColorImages=false -dColorImageFilter=/FlateEncode -dPDFSETTINGS=/prepress -c .setpdfwrite -f \&quot;%s\&quot;&quot;;
-#my $ps2pdf = &quot;/usr/bin/gs -q -dCompatibilityLevel=1.4 -dNOPAUSE -dBATCH -dSAFER -sDEVICE=pdfwrite -sOutputFile=\&quot;%s.pdf\&quot; -dAutoRotatePages=/PageByPage -dAutoFilterColorImages=false -dColorImageFilter=/FlateEncode -dPDFSETTINGS=/prepress -c .setpdfwrite -f /usr/bin/margin-offset.ps \&quot;%s\&quot;&quot;;
+my $ps2pdf = &quot;/usr/bin/gs -q -dCompatibilityLevel=1.4 -dNOPAUSE -dBATCH -dSAFER -sDEVICE=pdfwrite -sOutputFile=\&quot;%s.pdf\&quot; -dAutoRotatePages=/PageByPage -dAutoFilterColorImages=false -dColorImageFilter=/FlateEncode -dPDFSETTINGS=/prepress -dDoNumCopies -c .setpdfwrite -f \&quot;%s\&quot;&quot;;
+#my $ps2pdf = &quot;/usr/bin/gs -q -dCompatibilityLevel=1.4 -dNOPAUSE -dBATCH -dSAFER -sDEVICE=pdfwrite -sOutputFile=\&quot;%s.pdf\&quot; -dAutoRotatePages=/PageByPage -dAutoFilterColorImages=false -dColorImageFilter=/FlateEncode -dPDFSETTINGS=/prepress -dDoNumCopies -c .setpdfwrite -f /usr/bin/margin-offset.ps \&quot;%s\&quot;&quot;;
 
 ## loglevel for cups-x2go, possible values: emerg, alert, crit, err, warning, notice, info, debug
 my $strloglevel = &quot;notice&quot;;
@@ -70,6 +70,7 @@ sub readconfig
 				{
 					$x2goserver=$value;
 					$x2goserver=~s/ //g;
+					$x2goserver=~s/\&quot;//g;
 				}
 				if($option eq &quot;printdsa&quot;)
 				{
@@ -108,15 +109,19 @@ sub getsessions
 	my $sesslist;
 	if ( $x2goserver eq &quot;local&quot; )
 	{
+		syslog(&quot;debug&quot;, &quot;Querying local X2Go server for a session list...&quot;);
+
 		# run x2golistsessions locally
 		$sesslist=`su $userName -c &quot;x2golistsessions --all-servers&quot;`;
 	}
 	else
 	{
-		# Calling x2goprint with a single parameter &lt;username&gt; will result in an x2golistsessions --all-servers command on the
-		# remote X2go server.
+		syslog(&quot;debug&quot;, &quot;Querying remote X2Go server $x2goserver for a session list...&quot;);
+		# Calling x2goprint with a single parameter &lt;username&gt; will result in an
+		# x2golistsessions --all-servers command on the remote X2Go server.
 		$sesslist=`ssh -i $printdsa x2goprint\@$x2goserver &quot;sudo x2goprint $userName&quot;`;
 	}
+	syslog(&quot;debug&quot;, $sesslist);
 	@sessions=split(&quot;\n&quot;,$sesslist);
 }
 
@@ -136,12 +141,12 @@ sub printfile
 		# log that we are about to process a print job
 		syslog('debug', &quot;x2goprint $userName $sess ${sess}_$bname ${sess}_$bname.title&quot;);
 
-                # process print job
+		# process print job
 		system( &quot;x2goprint $userName $sess ${sess}_$bname ${sess}_$bname.title&quot; );
 	}
 	else
 	{
-		# push spool job to remote X2go server... and launch x2goprint there (with sudo!!!)
+		# push spool job to remote X2Go server... and launch x2goprint there (with sudo!!!)
 
 		# PDF file
 		syslog('debug', &quot;scp -i $printdsa $pfile x2goprint\@$x2gosession_host:~x2goprint/${sess}_$bname&quot;);
@@ -149,7 +154,7 @@ sub printfile
 		# title file
 		syslog('debug', &quot;scp -i $printdsa $tfile x2goprint\@$x2gosession_host:~x2goprint/${sess}_$bname.title&quot;);
 		system (&quot;scp -i $printdsa $tfile x2goprint\@$x2gosession_host:~x2goprint/${sess}_$bname.title&quot;);
-		# run x2goprint on remote X2go server
+		# run x2goprint on remote X2Go server
 		syslog('debug', &quot;ssh -i $printdsa  x2goprint\@$x2gosession_host \&quot;sudo x2goprint $userName $sess ${sess}_$bname ${sess}_$bname.title\&quot;&quot; );
 		system( &quot;ssh -i $printdsa  x2goprint\@$x2gosession_host \&quot;sudo x2goprint $userName $sess ${sess}_$bname ${sess}_$bname.title\&quot;&quot; );
 
@@ -161,7 +166,7 @@ sub printfile
 
 if (!$ARGV[0])
 {
-	print &quot;file cups-x2go:/ \&quot;Virtual X2GO Printer\&quot; \&quot;CUPS-X2GO\&quot; \&quot;MFG:Generic;MDL:CUPS-X2GO Printer;DES:Generic CUPS-X2GO Printer;CLS:PRINTER;CMD:POSTSCRIPT;\&quot;\n&quot;;
+	print &quot;file cups-x2go:/ \&quot;Virtual X2Go Printer\&quot; \&quot;CUPS-X2Go\&quot; \&quot;MFG:Generic;MDL:CUPS-X2Go Printer;DES:Generic CUPS-X2Go Printer;CLS:PRINTER;CMD:POSTSCRIPT;\&quot;\n&quot;;
 	exit 0;
 }
 
@@ -221,6 +226,8 @@ print TITLE $jobTitle;
 close (TITLE);
 
 getsessions();
+syslog('debug', &quot;Retrieved session list: @sessions\n&quot;);
+
 for(my $i=0; $i&lt;scalar(@sessions);$i++ )
 {
 	my @sinfo=split(&quot;\\|&quot;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">, at sessions</A>[$i]);
diff --git a/cups-x2go.conf b/cups-x2go.conf
index e44f6dc..89ed3ce 100644
--- a/cups-x2go.conf
+++ b/cups-x2go.conf
@@ -2,19 +2,19 @@
 ###  cups-x2go.conf -- CUPS Backend Configuration
 ###
 
-## if the CUPS server is X2go server at the same time, use ,,local'' here, otherwise
-## name the hostname of your master X2go server within in your X2go cluster. This
+## if the CUPS server is X2Go server at the same time, use ,,local'' here, otherwise
+## name the hostname of your master X2Go server within in your X2Go cluster. This
 ## host then is used for querying session information.
 #x2goserver = local
 
 ## DSA key for user x2goprint (new path and filename, default in cups-x2go backend)
-## this private key has to be valid for all X2go servers that print via the CUPS
+## this private key has to be valid for all X2Go servers that print via the CUPS
 ## server that cups-x2go is installed on. The corresponding public key has to
 ## be installed in &lt;remote-x2goserverX&gt;:~x2goprint/.ssh/authorized_keys
 #printdsa = /root/.ssh/id_dsa-x2goprint
 
 ## command to generate PDF file
-#ps2pdf = /usr/bin/gs -q -dCompatibilityLevel=1.4 -dNOPAUSE -dBATCH -dSAFER -sDEVICE=pdfwrite -sOutputFile=\&quot;%s.pdf\&quot; -dAutoRotatePages=/PageByPage -dAutoFilterColorImages=false -dColorImageFilter=/FlateEncode -dPDFSETTINGS=/prepress -c .setpdfwrite -f \&quot;%s\&quot;
+#ps2pdf = /usr/bin/gs -q -dCompatibilityLevel=1.4 -dNOPAUSE -dBATCH -dSAFER -sDEVICE=pdfwrite -sOutputFile=\&quot;%s.pdf\&quot; -dAutoRotatePages=/PageByPage -dAutoFilterColorImages=false -dColorImageFilter=/FlateEncode -dPDFSETTINGS=/prepress -dDoNumCopies -c .setpdfwrite -f \&quot;%s\&quot;
 
 ## loglevel for cups-x2go, possible values: emerg, alert, crit, err, warning, notice, info, debug
 #loglevel = notice
diff --git a/debian/changelog b/debian/changelog
index 1847fe7..5fc5b5f 100644
--- a/debian/changelog
+++ b/debian/changelog
@@ -1,3 +1,17 @@
+cups-x2go (3.0.0.4-0~x2go1) unstable; urgency=low
+
+  [ Mike Gabriel ]
+  * New upstream version (3.0.0.4):
+    - Add more debug messages.
+    - Use proper project name where appropriate and possible (,,X2Go'').
+  * Maintainer change in package: X2Go Developers &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">x2go-dev at lists.berlios.de</A>&gt;.
+
+  [ Helmer Teles ]
+  * New upstream version (3.0.0.4):
+    - Fix ignoring number of copies to be printed for single pages.
+
+ -- Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;  Tue, 25 Sep 2012 15:59:04 +0200
+
 cups-x2go (3.0.0.3-0~x2go1) unstable; urgency=low
 
   [ Mike Gabriel ]
diff --git a/debian/control b/debian/control
index efc9df0..aa4948f 100644
--- a/debian/control
+++ b/debian/control
@@ -1,8 +1,10 @@
 Source: cups-x2go
 Section: x11
-Priority: extra
-Maintainer: Oleksandr Shneyder &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">oleksandr.shneyder at obviously-nice.de</A>&gt;
-Uploaders: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
+Priority: optional
+Maintainer: X2Go Developers &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">x2go-dev at lists.berlios.de</A>&gt;
+Uploaders:
+ Oleksandr Shneyder &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">oleksandr.shneyder at obviously-nice.de</A>&gt;,
+ Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;,
 Build-Depends:
  debhelper (&gt;= 7)
 Standards-Version: 3.9.1
@@ -17,13 +19,13 @@ Depends:
  ghostscript,
  cups-client,
  cups
-Description: X2GO printer for CUPS
- X2go is a server based computing environment with
+Description: Virtual X2Go printer for CUPS
+ X2Go is a server based computing environment with
     - session resuming
-    - low bandwith support
+    - low bandwidth support
     - LDAP support
     - client side mass storage mounting support
     - audio support
     - authentication by smartcard and USB stick
  .
- CUPS-X2GO provides an X2go backend to CUPS.
+ CUPS-X2Go provides a CUPS-backend for X2Go printing.


hooks/post-receive
-- 
cups-x2go.git (CUPS Backend for X2Go Printing)

This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;cups-x2go.git&quot; (CUPS Backend for X2Go Printing).

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003292.html">[X2go-Commits] cups-x2go.git - master (branch) updated:	3.0.0.3-8-g25c010f
</A></li>
	<LI>Next message: <A HREF="003294.html">[X2go-Commits] python-x2go.git - master (branch) updated:	0.2.0.9-16-g94d6922
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3293">[ date ]</a>
              <a href="thread.html#3293">[ thread ]</a>
              <a href="subject.html#3293">[ subject ]</a>
              <a href="author.html#3293">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/x2go-commits">More information about the X2go-commits
mailing list</a><br>
</body></html>
