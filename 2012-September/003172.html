<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [X2go-Commits] x2goserver.git - master (branch) updated:	3.1.1.3-16-g0b3c71c
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/x2go-commits/2012-September/index.html" >
   <LINK REL="made" HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20x2goserver.git%20-%20master%20%28branch%29%20updated%3A%0A%093.1.1.3-16-g0b3c71c&In-Reply-To=%3C20120914204143.D11C95DB6D%40ymir%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003171.html">
   <LINK REL="Next"  HREF="003173.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[X2go-Commits] x2goserver.git - master (branch) updated:	3.1.1.3-16-g0b3c71c</H1>
    <B>X2Go dev team</B> 
    <A HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20x2goserver.git%20-%20master%20%28branch%29%20updated%3A%0A%093.1.1.3-16-g0b3c71c&In-Reply-To=%3C20120914204143.D11C95DB6D%40ymir%3E"
       TITLE="[X2go-Commits] x2goserver.git - master (branch) updated:	3.1.1.3-16-g0b3c71c">git-admin at x2go.org
       </A><BR>
    <I>Fri Sep 14 22:41:43 CEST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="003171.html">[X2go-Commits] x2goclient.git - master (branch) updated:	3.99.2.2-42-g4b90ef0
</A></li>
        <LI>Next message: <A HREF="003173.html">[X2go-Commits] pyhoca-gui.git - master (branch) updated:	0.2.0.4-15-g549b097
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3172">[ date ]</a>
              <a href="thread.html#3172">[ thread ]</a>
              <a href="subject.html#3172">[ subject ]</a>
              <a href="author.html#3172">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch, master has been updated
       via  0b3c71ca7b6e3681a2ade80346621b22ffa7f255 (commit)
       via  98512000e2b0208849d93b97f0e9a216f0c18c28 (commit)
       via  1590476de31766028725fa1272dfcc50b7d1305e (commit)
      from  22ede8d3f939d849856feeaad0e777738fbeea9b (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit 0b3c71ca7b6e3681a2ade80346621b22ffa7f255
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Fri Sep 14 22:41:37 2012 +0200

    Make sure when launching desktop session through the Xsession mechanism that the LD_LIBRARY_PATH variable stays intact. Closes #29.

commit 98512000e2b0208849d93b97f0e9a216f0c18c28
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Fri Sep 14 16:43:05 2012 +0200

    Depend on nx-libs (&gt;=3.5.0.15-0~) which has the Xrandr symlinks folder.

commit 1590476de31766028725fa1272dfcc50b7d1305e
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Fri Sep 14 16:39:58 2012 +0200

    For applications inside of a session, use NX's Xrandr library instead of Xorg's Xrandr library (partially closes #28).

-----------------------------------------------------------------------

Summary of changes:
 debian/changelog              |    5 +++++
 debian/control                |    2 +-
 x2goserver/bin/x2goruncommand |    7 +++++--
 3 files changed, 11 insertions(+), 3 deletions(-)

The diff of changes is:
diff --git a/debian/changelog b/debian/changelog
index 740b935..1a33679 100644
--- a/debian/changelog
+++ b/debian/changelog
@@ -12,9 +12,14 @@ x2goserver (3.1.1.4-0~x2go1) UNRELEASED; urgency=low
     - Wrap padsp around rdesktop calls if pulse is used as audio protocol.
     - Add option ,,-r sound:local'' to rdesktop calls if pulse is enabled.
     - Proxy X2Go client-side shares into remote desktop session.
+    - For applications inside of a session, use NX's Xrandr library instead
+      of Xorg's Xrandr library (partially closes #28).
+    - Make sure when launching desktop session through the Xsession mechanism
+      that the LD_LIBRARY_PATH variable stays intact. Closes #29.
   * /debian/control:
     + Fix x2goagent dependency.
     + Add rdesktop and pulseaudio-utils to Suggests.
+    + Depend on nx-libs (&gt;=3.5.0.15-0~) which has the Xrandr symlinks folder.
 
   [ Oleksandr Shneyder ]
   * remove &quot;-nolisten tcp&quot; option with XDMCP sessions
diff --git a/debian/control b/debian/control
index ce2467e..def35e4 100644
--- a/debian/control
+++ b/debian/control
@@ -17,7 +17,7 @@ Architecture: any
 Depends:
  ${shlibs:Depends},
  ${misc:Depends},
- x2goagent (&gt;= 2:3.5.0.12-0~),
+ x2goagent (&gt;= 2:3.5.0.15-0~),
  lsof,
  openssh-client,
  openssh-server,
diff --git a/x2goserver/bin/x2goruncommand b/x2goserver/bin/x2goruncommand
index 7be8039..f5eb7aa 100755
--- a/x2goserver/bin/x2goruncommand
+++ b/x2goserver/bin/x2goruncommand
@@ -53,8 +53,11 @@ export QT_GRAPHICSSYSTEM=native
 IMEXIT=&quot;false&quot;
 
 NX_XINERAMA_LIBS=/usr/lib/nx/X11/Xinerama
+NX_XRANDR_LIBS=/usr/lib/nx/X11/Xrandr
 NX_LIBS=/usr/lib/nx/X11
-test -n &quot;$LD_LIBRARY_PATH&quot; &amp;&amp; LD_LIBRARY_PATH=$NX_XINERAMA_LIBS:$NX_LIBS:$LD_LIBRARY_PATH || LD_LIBRARY_PATH=&quot;$NX_XINERAMA_LIBS:$NX_LIBS&quot;
+test -n &quot;$LD_LIBRARY_PATH&quot; &amp;&amp; \
+  LD_LIBRARY_PATH=&quot;$NX_XINERAMA_LIBS:$NX_XRANDR_LIBS:$NX_LIBS:$LD_LIBRARY_PATH&quot; || \
+  LD_LIBRARY_PATH=&quot;$NX_XINERAMA_LIBS:$NX_XRANDR_LIBS:$NX_LIBS&quot;
 $X2GO_LIB_PATH/x2gosyslog &quot;$0&quot; &quot;debug&quot; &quot;exporting LD_LIBRARY_PATH=$LD_LIBRARY_PATH&quot;
 export LD_LIBRARY_PATH
 
@@ -213,7 +216,7 @@ if [ &quot;$EXEC&quot; != &quot;&quot; ] &amp;&amp; [ -x $EXEC ]; then
 	x2gofeature X2GO_XSESSION &amp;&gt;/dev/null &amp;&amp; [ &quot;x$X2GO_SESS_TYPE&quot; = &quot;xD&quot; ] &amp;&amp; {
 		STARTUP=&quot;$cmd$args&quot;
 		$X2GO_LIB_PATH/x2gosyslog &quot;$0&quot; &quot;notice&quot; &quot;launching session with Xsession-x2go mechanism, using STARTUP=\&quot;$STARTUP\&quot;&quot;
-		STARTUP=&quot;$STARTUP&quot; /etc/x2go/Xsession
+		STARTUP=&quot;/usr/bin/env LD_LIBRARY_PATH=${LD_LIBRARY_PATH} ${STARTUP}&quot; /etc/x2go/Xsession
 	} || {
 		$X2GO_LIB_PATH/x2gosyslog &quot;$0&quot; &quot;debug&quot; &quot;executing command \&quot;$cmd$args\&quot;...&quot;
 		$EXEC_WRAPPER $cmd$args


hooks/post-receive
-- 
x2goserver.git (X2Go Server)

This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;x2goserver.git&quot; (X2Go Server).

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003171.html">[X2go-Commits] x2goclient.git - master (branch) updated:	3.99.2.2-42-g4b90ef0
</A></li>
	<LI>Next message: <A HREF="003173.html">[X2go-Commits] pyhoca-gui.git - master (branch) updated:	0.2.0.4-15-g549b097
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3172">[ date ]</a>
              <a href="thread.html#3172">[ thread ]</a>
              <a href="subject.html#3172">[ subject ]</a>
              <a href="author.html#3172">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/x2go-commits">More information about the X2go-commits
mailing list</a><br>
</body></html>
