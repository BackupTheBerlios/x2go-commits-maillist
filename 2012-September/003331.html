<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [X2go-Commits] x2goserver.git - release/3.1.1.x (branch) updated:	3.1.1.4-6-g3a9f412
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/x2go-commits/2012-September/index.html" >
   <LINK REL="made" HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20x2goserver.git%20-%20release/3.1.1.x%20%28branch%29%20updated%3A%0A%093.1.1.4-6-g3a9f412&In-Reply-To=%3C20120929184415.F1E5A5DA6B%40ymir%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003330.html">
   <LINK REL="Next"  HREF="003332.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[X2go-Commits] x2goserver.git - release/3.1.1.x (branch) updated:	3.1.1.4-6-g3a9f412</H1>
    <B>X2Go dev team</B> 
    <A HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20x2goserver.git%20-%20release/3.1.1.x%20%28branch%29%20updated%3A%0A%093.1.1.4-6-g3a9f412&In-Reply-To=%3C20120929184415.F1E5A5DA6B%40ymir%3E"
       TITLE="[X2go-Commits] x2goserver.git - release/3.1.1.x (branch) updated:	3.1.1.4-6-g3a9f412">git-admin at x2go.org
       </A><BR>
    <I>Sat Sep 29 20:44:15 CEST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="003330.html">[X2go-Commits] x2goserver.git - master (branch) updated:	3.1.1.3-64-gf562fff
</A></li>
        <LI>Next message: <A HREF="003332.html">[X2go-Commits] python-x2go.git - master (branch) updated:	0.2.0.10-16-gd71817b
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3331">[ date ]</a>
              <a href="thread.html#3331">[ thread ]</a>
              <a href="subject.html#3331">[ subject ]</a>
              <a href="author.html#3331">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch, release/3.1.1.x has been updated
       via  3a9f412b1710c1b20a9e9b233c92532611dda001 (commit)
       via  cb4796d026014e9e07ec9ea3e80106bc03697f2f (commit)
       via  5cc4d72358fd7f99aeec74ce346f526315f33999 (commit)
       via  f8015d5c95b5d376bdf02b2fc7096c21ed368ce0 (commit)
      from  8da7d3082b406641fa2d4f363b51300b1c639bfa (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit 3a9f412b1710c1b20a9e9b233c92532611dda001
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Sat Sep 29 20:44:10 2012 +0200

    fix changelog entry

commit cb4796d026014e9e07ec9ea3e80106bc03697f2f
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Sat Sep 29 20:41:36 2012 +0200

    add BTS closures

commit 5cc4d72358fd7f99aeec74ce346f526315f33999
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Sat Sep 29 20:40:16 2012 +0200

    Remove redundant setting of syslog level.

commit f8015d5c95b5d376bdf02b2fc7096c21ed368ce0
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Sat Sep 29 20:39:43 2012 +0200

    Fix x2gogetapps when rendering multi-section .desktop files.

-----------------------------------------------------------------------

Summary of changes:
 debian/changelog           |    9 ++++++++-
 x2goserver/bin/x2gogetapps |   18 +++++++++++++++---
 2 files changed, 23 insertions(+), 4 deletions(-)

The diff of changes is:
diff --git a/debian/changelog b/debian/changelog
index a8465cc..3a74d77 100644
--- a/debian/changelog
+++ b/debian/changelog
@@ -3,7 +3,14 @@ x2goserver (3.1.1.5-0~x2go1) UNRELEASED; urgency=low
   [ St&#233;phane Graber ]
   * New upstream version (3.1.1.5):
     - Add a very basic SIGCHLD handler to x2gocleansessions. on SIGCHLD
-      let the script wait for cleaning up after its children.
+      let the script wait for cleaning up after its children. Closes
+      upstream issue #38.
+
+  [ Mike Gabriel ]
+  * New upstream version (3.1.1.5):
+    - Fix x2gogetapps when rendering multi-section .desktop files. Closes
+      upstream issue #43.
+    - Remove redundant setting of loglevel in x2gogetapps.
 
  -- Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;  Tue, 25 Sep 2012 15:03:32 +0200
 
diff --git a/x2goserver/bin/x2gogetapps b/x2goserver/bin/x2gogetapps
index 9460cd3..dbcd8c1 100755
--- a/x2goserver/bin/x2gogetapps
+++ b/x2goserver/bin/x2gogetapps
@@ -117,9 +117,24 @@ sub proc_desktop_file
 	if (open(F,&quot;&lt;$file&quot;))
 	{
 		print(&quot;&lt;desktop&gt;\n&quot;);
+		my $is_desktop_entry = 0;
 		while(!eof(F))
 		{
 			my $line=&lt;F&gt;;
+			if ( $line=~m/^\[Desktop Entry\] */ )
+			{
+				$is_desktop_entry = 1;
+				next;
+			}
+			if ( ! $is_desktop_entry )
+			{
+				next;
+			}
+			if ( $line=~m/^\[.*\] */ )
+			{
+				$is_desktop_entry = 0;
+				next;
+			}
 			if( $line=~m/^Categories/i || $line=~m/^Name/i || $line=~m/^Terminal/i || $line=~m/^Comment/i ||  $line=~m/^Exec/i)
 			{
 				print $line;
@@ -155,9 +170,6 @@ sub proc_desktop_file
 	}
 }
 
-openlog($0,'cons,pid','user');
-setlogmask( LOG_UPTO(x2gologlevel()) );
-
 if ( @ARGV ) {
 	syslog('info', &quot;x2gogetapps has been called with options: @ARGV&quot;);
 } else {


hooks/post-receive
-- 
x2goserver.git (X2Go Server)

This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;x2goserver.git&quot; (X2Go Server).

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003330.html">[X2go-Commits] x2goserver.git - master (branch) updated:	3.1.1.3-64-gf562fff
</A></li>
	<LI>Next message: <A HREF="003332.html">[X2go-Commits] python-x2go.git - master (branch) updated:	0.2.0.10-16-gd71817b
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3331">[ date ]</a>
              <a href="thread.html#3331">[ thread ]</a>
              <a href="subject.html#3331">[ subject ]</a>
              <a href="author.html#3331">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/x2go-commits">More information about the X2go-commits
mailing list</a><br>
</body></html>
