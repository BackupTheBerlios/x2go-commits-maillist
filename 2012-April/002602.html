<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [X2go-Commits] pyhoca-gui.git - master (branch) updated:	0.1.0.10-153-g2af9814
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/x2go-commits/2012-April/index.html" >
   <LINK REL="made" HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20pyhoca-gui.git%20-%20master%20%28branch%29%20updated%3A%0A%090.1.0.10-153-g2af9814&In-Reply-To=%3C20120401181612.4BF765DB35%40ymir%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002601.html">
   <LINK REL="Next"  HREF="002603.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[X2go-Commits] pyhoca-gui.git - master (branch) updated:	0.1.0.10-153-g2af9814</H1>
    <B>X2Go dev team</B> 
    <A HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20pyhoca-gui.git%20-%20master%20%28branch%29%20updated%3A%0A%090.1.0.10-153-g2af9814&In-Reply-To=%3C20120401181612.4BF765DB35%40ymir%3E"
       TITLE="[X2go-Commits] pyhoca-gui.git - master (branch) updated:	0.1.0.10-153-g2af9814">git-admin at x2go.org
       </A><BR>
    <I>Sun Apr  1 20:16:12 CEST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="002601.html">[X2go-Commits] pyhoca-gui.git - master (branch) updated:	0.1.0.10-152-g4e59e6a
</A></li>
        <LI>Next message: <A HREF="002603.html">[X2go-Commits] python-x2go.git - master (branch) updated:	0.1.1.4-166-g9787315
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2602">[ date ]</a>
              <a href="thread.html#2602">[ thread ]</a>
              <a href="subject.html#2602">[ subject ]</a>
              <a href="author.html#2602">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch, master has been updated
       via  2af9814fdec18b6fedf41c043bbd81e6d41efb7b (commit)
      from  4e59e6aa657b0f49f43a923c1336954da7cd55e3 (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit 2af9814fdec18b6fedf41c043bbd81e6d41efb7b
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Sun Apr 1 20:16:06 2012 +0200

    get setup.py with integrated NSIS installer running

-----------------------------------------------------------------------

Summary of changes:
 nsis_template.py |   86 +++++++++++++++++++++++++++--------------------------
 setup.py         |    8 ++--
 2 files changed, 48 insertions(+), 46 deletions(-)

The diff of changes is:
diff --git a/nsis_template.py b/nsis_template.py
index 88bc15e..ac73c36 100644
--- a/nsis_template.py
+++ b/nsis_template.py
@@ -18,14 +18,14 @@ Caption &quot;{program_desc}&quot;
 !define py2exeOutputDirectory '{output_dir}'
 
 ; The file to write
-OutFile &quot;installers\{program_name}_${{VERSION}}_win32-setup.exe&quot;
+OutFile &quot;..\\{program_name}_${{VERSION}}_win32-setup.exe&quot;
 
 ; The default installation directory
-InstallDir $PROGRAMFILES\{program_name}
+InstallDir $PROGRAMFILES\\{program_name}
 
 ; Registry key to check for directory (so if you install again, it will 
 ; overwrite the old one automatically)
-InstallDirRegKey HKLM &quot;Software\{program_name}&quot; &quot;Install_Dir&quot;
+InstallDirRegKey HKLM &quot;Software\\{program_name}&quot; &quot;Install_Dir&quot;
 
 ; Request application privileges for Windows Vista
 RequestExecutionLevel admin
@@ -34,7 +34,7 @@ RequestExecutionLevel admin
 
 ; Installer Language Configuration
 
-!include ${{PROGRAMFILES}}\NSIS\Include\LogicLib.nsh
+!include LogicLib.nsh
 
 var LC_MESSAGES
 
@@ -46,22 +46,22 @@ var WITHOUT_PULSEAUDIO
 var GSPRINT
 
 ; First is default
-LoadLanguageFile &quot;${NSISDIR}}\Contrib\Language files\English.nlf&quot;
-LoadLanguageFile &quot;${{NSISDIR}}\Contrib\Language files\Dutch.nlf&quot;
-;LoadLanguageFile &quot;${{NSISDIR}}\Contrib\Language files\French.nlf&quot;
-LoadLanguageFile &quot;${{NSISDIR}}\Contrib\Language files\German.nlf&quot;
-;LoadLanguageFile &quot;${{NSISDIR}}\Contrib\Language files\Korean.nlf&quot;
-;LoadLanguageFile &quot;${{NSISDIR}}\Contrib\Language files\Russian.nlf&quot;
-LoadLanguageFile &quot;${{NSISDIR}}\Contrib\Language files\Spanish.nlf&quot;
-;LoadLanguageFile &quot;${{NSISDIR}}\Contrib\Language files\Swedish.nlf&quot;
-;LoadLanguageFile &quot;${{NSISDIR}}\Contrib\Language files\TradChinese.nlf&quot;
-;LoadLanguageFile &quot;${{NSISDIR}}\Contrib\Language files\SimpChinese.nlf&quot;
-;LoadLanguageFile &quot;${{NSISDIR}}\Contrib\Language files\Slovak.nlf&quot;
+LoadLanguageFile &quot;${{NSISDIR}}\\Contrib\\Language files\\English.nlf&quot;
+LoadLanguageFile &quot;${{NSISDIR}}\\Contrib\\Language files\\Dutch.nlf&quot;
+;LoadLanguageFile &quot;${{NSISDIR}}\\Contrib\\Language files\\French.nlf&quot;
+LoadLanguageFile &quot;${{NSISDIR}}\\Contrib\\Language files\\German.nlf&quot;
+;LoadLanguageFile &quot;${{NSISDIR}}\\Contrib\\Language files\\Korean.nlf&quot;
+;LoadLanguageFile &quot;${{NSISDIR}}\\Contrib\\Language files\\Russian.nlf&quot;
+LoadLanguageFile &quot;${{NSISDIR}}\\Contrib\\Language files\\Spanish.nlf&quot;
+;LoadLanguageFile &quot;${{NSISDIR}}\\Contrib\\Language files\\Swedish.nlf&quot;
+;LoadLanguageFile &quot;${{NSISDIR}}\\Contrib\\Language files\\TradChinese.nlf&quot;
+;LoadLanguageFile &quot;${{NSISDIR}}\\Contrib\\Language files\\SimpChinese.nlf&quot;
+;LoadLanguageFile &quot;${{NSISDIR}}\\Contrib\\Language files\\Slovak.nlf&quot;
 
 ; License data
 ; Not exactly translated, but it shows what's needed
-LicenseLangString myLicenseData ${{LANG_ENGLISH}}} &quot;LICENSE.txt&quot;
-LicenseLangString myLicenseData ${LANG_DUTCH}}} &quot;LICENSE.txt&quot;
+LicenseLangString myLicenseData ${{LANG_ENGLISH}} &quot;LICENSE.txt&quot;
+LicenseLangString myLicenseData ${{LANG_DUTCH}} &quot;LICENSE.txt&quot;
 ;LicenseLangString myLicenseData ${{LANG_FRENCH}} &quot;LICENSE.txt&quot;
 LicenseLangString myLicenseData ${{LANG_GERMAN}} &quot;LICENSE.txt&quot;
 ;LicenseLangString myLicenseData ${{LANG_KOREAN}} &quot;LICENSE.txt&quot;
@@ -123,24 +123,26 @@ Function .onInit
         ${{Switch}} $LANGUAGE
           ${{Case}} 1031
             StrCpy $LC_MESSAGES &quot;de&quot;
-            !include nsis_include\de.nsi
+            !include &quot;nsis_include\\de.nsi&quot;
             ${{Break}}
           ${{Case}} 1033
             StrCpy $LC_MESSAGES &quot;en&quot;
-            !include nsis_include\en.nsi
+            !include &quot;nsis_include\\en.nsi&quot;
             ${{Break}}
           ${{Case}} 1043
             StrCpy $LC_MESSAGES &quot;nl&quot;
-            !include nsis_include\nl.nsi
+            !include &quot;nsis_include\\nl.nsi&quot;
             ${{Break}}
           ${{Case}} 1034
             StrCpy $LC_MESSAGES &quot;es&quot;
-            !include nsis_include\es.nsi
+            !include &quot;nsis_include\\es.nsi&quot;
             ${{Break}}
         ${{EndSwitch}}
 
         StrCmp $LANGUAGE &quot;cancel&quot; 0 +2
-                Abort
+            Abort
+
+FunctionEnd
 
 ;--------------------------------
 
@@ -161,16 +163,16 @@ Section &quot;{program_name} ($REQUIRED)&quot;
   SectionIn RO
   ; Set output path to the installation directory.
   SetOutPath $INSTDIR
-  File /r /x .svn /x .git ${{py2exeOutputDirectory}}\*.*
+  File /r /x .svn /x .git ${{py2exeOutputDirectory}}\\*.*
 
   ; Write the installation path into the registry
-  WriteRegStr HKLM SOFTWARE\{program_name} &quot;Install_Dir&quot; &quot;$INSTDIR&quot;
+  WriteRegStr HKLM SOFTWARE\\{program_name} &quot;Install_Dir&quot; &quot;$INSTDIR&quot;
 
   ; Write the uninstall keys for Windows
-  WriteRegStr HKLM &quot;Software\Microsoft\Windows\CurrentVersion\Uninstall\{program_name}&quot; &quot;DisplayName&quot; &quot;{program_name}&quot;
-  WriteRegStr HKLM &quot;Software\Microsoft\Windows\CurrentVersion\Uninstall\{program_name}&quot; &quot;UninstallString&quot; '&quot;$INSTDIR\uninstall.exe&quot;'
-  WriteRegDWORD HKLM &quot;Software\Microsoft\Windows\CurrentVersion\Uninstall\{program_name}&quot; &quot;NoModify&quot; 1
-  WriteRegDWORD HKLM &quot;Software\Microsoft\Windows\CurrentVersion\Uninstall\{program_name}&quot; &quot;NoRepair&quot; 1
+  WriteRegStr HKLM &quot;Software\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\{program_name}&quot; &quot;DisplayName&quot; &quot;{program_name}&quot;
+  WriteRegStr HKLM &quot;Software\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\{program_name}&quot; &quot;UninstallString&quot; '&quot;$INSTDIR\\uninstall.exe&quot;'
+  WriteRegDWORD HKLM &quot;Software\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\{program_name}&quot; &quot;NoModify&quot; 1
+  WriteRegDWORD HKLM &quot;Software\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\{program_name}&quot; &quot;NoRepair&quot; 1
   WriteUninstaller &quot;uninstall.exe&quot;
 
 SectionEnd
@@ -178,20 +180,20 @@ SectionEnd
 ; Optional section (can be disabled by the user)
 Section &quot;$STARTMENU_LINKS&quot;
 
-  CreateDirectory &quot;$SMPROGRAMS\{program_name}&quot;
-  CreateShortCut &quot;$SMPROGRAMS\{program_name}\{program_name}.lnk&quot; &quot;$INSTDIR\{program_name}.exe&quot; &quot;--quiet --start-xserver --start-pulseaudio --lang $LC_MESSAGES&quot; &quot;$INSTDIR\icons\{program_name}.ico&quot; 0
-  CreateShortCut &quot;$SMPROGRAMS\{program_name}\{program_name} ($WITHOUT_PULSEAUDIO).lnk&quot; &quot;$INSTDIR\{program_name}.exe&quot; &quot;--quiet --start-xserver --lang $LC_MESSAGES&quot; &quot;$INSTDIR\icons\{program_name}.ico&quot; 0
-  CreateShortCut &quot;$SMPROGRAMS\{program_name}\{program_name} (debug).lnk&quot; &quot;$INSTDIR\{program_name}.exe&quot; &quot;--debug --libdebug --start-xserver --start-pulseaudio --lang $LC_MESSAGES&quot; &quot;$INSTDIR\icons\{program_name}.ico&quot; 0
-  CreateShortCut &quot;$SMPROGRAMS\{program_name}\{program_name} ($WITHOUT_PULSEAUDIO, debug).lnk&quot; &quot;$INSTDIR\{program_name}.exe&quot; &quot;--debug --libdebug --start-xserver --lang $LC_MESSAGES&quot; &quot;$INSTDIR\icons\{program_name}.ico&quot; 0
-  CreateShortCut &quot;$SMPROGRAMS\{program_name}\X2go Website.lnk&quot; &quot;<A HREF="http://www.x2go.org">http://www.x2go.org</A>&quot; &quot;&quot; &quot;$INSTDIR\icons\pyhoca_x2go-logo-ubuntu.ico&quot; 0
-  CreateShortCut &quot;$SMPROGRAMS\{program_name}\Uninstall.lnk&quot; &quot;$INSTDIR\uninstall.exe&quot; &quot;&quot; &quot;$INSTDIR\uninstall.exe&quot; 0
+  CreateDirectory &quot;$SMPROGRAMS\\{program_name}&quot;
+  CreateShortCut &quot;$SMPROGRAMS\\{program_name}\\{program_name}.lnk&quot; &quot;$INSTDIR\\{program_name}.exe&quot; &quot;--quiet --start-xserver --start-pulseaudio --lang $LC_MESSAGES&quot; &quot;$INSTDIR\\icons\\{program_name}.ico&quot; 0
+  CreateShortCut &quot;$SMPROGRAMS\\{program_name}\\{program_name} ($WITHOUT_PULSEAUDIO).lnk&quot; &quot;$INSTDIR\\{program_name}.exe&quot; &quot;--quiet --start-xserver --lang $LC_MESSAGES&quot; &quot;$INSTDIR\\icons\\{program_name}.ico&quot; 0
+  CreateShortCut &quot;$SMPROGRAMS\\{program_name}\\{program_name} (debug).lnk&quot; &quot;$INSTDIR\\{program_name}.exe&quot; &quot;--debug --libdebug --start-xserver --start-pulseaudio --lang $LC_MESSAGES&quot; &quot;$INSTDIR\\icons\\{program_name}.ico&quot; 0
+  CreateShortCut &quot;$SMPROGRAMS\\{program_name}\\{program_name} ($WITHOUT_PULSEAUDIO, debug).lnk&quot; &quot;$INSTDIR\\{program_name}.exe&quot; &quot;--debug --libdebug --start-xserver --lang $LC_MESSAGES&quot; &quot;$INSTDIR\\icons\\{program_name}.ico&quot; 0
+  CreateShortCut &quot;$SMPROGRAMS\\{program_name}\\X2go Website.lnk&quot; &quot;<A HREF="http://www.x2go.org">http://www.x2go.org</A>&quot; &quot;&quot; &quot;$INSTDIR\\icons\\pyhoca_x2go-logo-ubuntu.ico&quot; 0
+  CreateShortCut &quot;$SMPROGRAMS\\{program_name}\\Uninstall.lnk&quot; &quot;$INSTDIR\\uninstall.exe&quot; &quot;&quot; &quot;$INSTDIR\\uninstall.exe&quot; 0
 
 SectionEnd
 
 ; Optional section (can be disabled by the user)
 Section &quot;$DESKTOP_LINKS&quot;
 
-  CreateShortCut &quot;$DESKTOP\{program_name}.lnk&quot; &quot;$INSTDIR\{program_name}.exe&quot; &quot;--quiet --start-xserver --start-pulseaudio --lang $LC_MESSAGES&quot; &quot;$INSTDIR\icons\{program_name}.ico&quot; 0
+  CreateShortCut &quot;$DESKTOP\\{program_name}.lnk&quot; &quot;$INSTDIR\\{program_name}.exe&quot; &quot;--quiet --start-xserver --start-pulseaudio --lang $LC_MESSAGES&quot; &quot;$INSTDIR\\icons\\{program_name}.ico&quot; 0
 
 SectionEnd
 
@@ -202,18 +204,18 @@ SectionEnd
 Section &quot;Uninstall&quot;
 
   ; Remove registry keys
-  DeleteRegKey HKLM &quot;Software\Microsoft\Windows\CurrentVersion\Uninstall\{program_name}&quot;
-  DeleteRegKey HKLM SOFTWARE\{program_name}
+  DeleteRegKey HKLM &quot;Software\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\{program_name}&quot;
+  DeleteRegKey HKLM SOFTWARE\\{program_name}
 
   ; Remove files and uninstaller
-  Delete $INSTDIR\uninstall.exe
+  Delete $INSTDIR\\uninstall.exe
 
   ; Remove shortcuts, if any
-  Delete &quot;$SMPROGRAMS\{program_name}\*.*&quot;
-  Delete &quot;$DESKTOP\{program_name}.lnk&quot;
+  Delete &quot;$SMPROGRAMS\\{program_name}\\*.*&quot;
+  Delete &quot;$DESKTOP\\{program_name}.lnk&quot;
 
   ; Remove directories used
-  RMDir &quot;$SMPROGRAMS\{program_name}&quot;
+  RMDir &quot;$SMPROGRAMS\\{program_name}&quot;
   RMDir /r /REBOOTOK $INSTDIR
 
 SectionEnd
diff --git a/setup.py b/setup.py
index ee20f1f..1ca1150 100755
--- a/setup.py
+++ b/setup.py
@@ -46,6 +46,8 @@ LICENSE = 'GPLv3+'
 AUTHOR = 'Mike Gabriel, Dick Kniep'
 URL = '<A HREF="http://www.x2go.org">http://www.x2go.org</A>'
 
+NSIS_COMPILE = os.path.join(os.environ['ProgramFiles'], 'NSIS', 'makensis.exe')
+
 #
 # to build .exe file, run on Windows:
 # ,,python setup.py py2exe''
@@ -68,8 +70,6 @@ def datafilelist(installbase, sourcebase):
 
 class NSISScript(object):
 
-    NSIS_COMPILE = &quot;makensis&quot;
-
     def __init__(self, program_name, program_desc, program_version, dist_dir, icon_loc):
         self.program_name = program_name
         self.program_desc =  program_desc
@@ -93,7 +93,7 @@ class NSISScript(object):
         subproc = subprocess.Popen(
             # &quot;/P5&quot; uses realtime priority for the LZMA compression stage.
             # This can get annoying though.
-            [self.NSIS_COMPILE, self.pathname, &quot;/P5&quot;], env=os.environ)
+            [NSIS_COMPILE, self.pathname, &quot;/P5&quot;], env=os.environ)
         subproc.communicate()
 
         retcode = subproc.returncode
@@ -151,7 +151,7 @@ if platform.system() == 'Windows':
 
     cmd_class.update(
         {
-            &quot;py2exe&quot;: build_installer,
+            &quot;build_exe&quot;: build_installer,
         }
     )
 


hooks/post-receive
-- 
pyhoca-gui.git (Python X2Go Client (wxPython GUI))

This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;pyhoca-gui.git&quot; (Python X2Go Client (wxPython GUI)).

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002601.html">[X2go-Commits] pyhoca-gui.git - master (branch) updated:	0.1.0.10-152-g4e59e6a
</A></li>
	<LI>Next message: <A HREF="002603.html">[X2go-Commits] python-x2go.git - master (branch) updated:	0.1.1.4-166-g9787315
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2602">[ date ]</a>
              <a href="thread.html#2602">[ thread ]</a>
              <a href="subject.html#2602">[ subject ]</a>
              <a href="author.html#2602">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/x2go-commits">More information about the X2go-commits
mailing list</a><br>
</body></html>
