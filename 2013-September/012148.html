<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [X2Go-Commits] python-paramiko.git - x2go (branch) updated:	39aa60e05a848e7f3613422d377c5e3c0a77e764
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/x2go-commits/2013-September/index.html" >
   <LINK REL="made" HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2Go-Commits%5D%20python-paramiko.git%20-%20x2go%20%28branch%29%20updated%3A%0A%0939aa60e05a848e7f3613422d377c5e3c0a77e764&In-Reply-To=%3C20130904074813.9F2AA5DB20%40ymir%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012147.html">
   <LINK REL="Next"  HREF="012149.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[X2Go-Commits] python-paramiko.git - x2go (branch) updated:	39aa60e05a848e7f3613422d377c5e3c0a77e764</H1>
    <B>X2Go dev team</B> 
    <A HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2Go-Commits%5D%20python-paramiko.git%20-%20x2go%20%28branch%29%20updated%3A%0A%0939aa60e05a848e7f3613422d377c5e3c0a77e764&In-Reply-To=%3C20130904074813.9F2AA5DB20%40ymir%3E"
       TITLE="[X2Go-Commits] python-paramiko.git - x2go (branch) updated:	39aa60e05a848e7f3613422d377c5e3c0a77e764">git-admin at x2go.org
       </A><BR>
    <I>Wed Sep  4 09:48:13 CEST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="012147.html">[X2Go-Commits] page changed: doc:installation:x2goclient
</A></li>
        <LI>Next message: <A HREF="012149.html">[X2Go-Commits] python-x2go.git - master (branch) updated:	0.4.0.8-7-g77bf9f6
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12148">[ date ]</a>
              <a href="thread.html#12148">[ thread ]</a>
              <a href="subject.html#12148">[ subject ]</a>
              <a href="author.html#12148">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch, x2go has been updated
       via  39aa60e05a848e7f3613422d377c5e3c0a77e764 (commit)
       via  e6ea5c239d850c5316ed9e73adc412bc73d57ed2 (commit)
       via  4477e38fa779f7c491002dbe5d0867523435cd05 (commit)
       via  8eae362ebca99499be1f936fe5409e36ce52c352 (commit)
      from  3589edbe9676dbcce32fb57885e99e35462f7507 (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit 39aa60e05a848e7f3613422d377c5e3c0a77e764
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Wed Sep 4 09:48:07 2013 +0200

    New upstream release.
    
    * New upstream release.
    * /debian/patches:
      + Add patch: 002_locked-keys-are-valid.patch
      + Add patch: 003_hash-hostnames.patch

commit e6ea5c239d850c5316ed9e73adc412bc73d57ed2
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Wed Sep 4 09:44:31 2013 +0200

    Revert &quot;Add method kwarg ,,hash_hostname'' to hostkeys.HostKeyEntry.add() method. Enable host key hashing by default as is standard with serveral current (Open)SSH implementations.&quot;
    
    This reverts commit 61c56f03a7678124f5115eb00b5015faae11c1e8.

commit 4477e38fa779f7c491002dbe5d0867523435cd05
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Wed Sep 4 09:44:20 2013 +0200

    Revert &quot;Add method kwarg ,,hash_hostname'' to hostkeys.HostKeyEntry.add() method. Enable host key hashing by default as is standard with serveral current (Open)SSH implementations.&quot;
    
    This reverts commit a44ccafd66925c53caed0cb9ae65641b7e87acf3.

commit 8eae362ebca99499be1f936fe5409e36ce52c352
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Wed Sep 4 09:44:07 2013 +0200

    Revert &quot;Detect valid SSH private keys that may require unlocking/decrypting prior to being usable.&quot;
    
    This reverts commit 3a61f5253c8aba4b88003950fd1c6caa5646190c.

-----------------------------------------------------------------------

Summary of changes:
 debian/changelog                               |    8 +++--
 debian/patches/002_locked-keys-are-valid.patch |   29 +++++++++++++++++++
 debian/patches/003_hash-hostnames.patch        |   37 ++++++++++++++++++++++++
 debian/patches/series                          |    2 ++
 paramiko/client.py                             |    5 +---
 paramiko/hostkeys.py                           |    7 ++---
 6 files changed, 76 insertions(+), 12 deletions(-)
 create mode 100644 debian/patches/002_locked-keys-are-valid.patch
 create mode 100644 debian/patches/003_hash-hostnames.patch

The diff of changes is:
diff --git a/debian/changelog b/debian/changelog
index 282c6a1..4d9adca 100644
--- a/debian/changelog
+++ b/debian/changelog
@@ -1,7 +1,9 @@
-paramiko (1.11.0-0~git20130429) UNRELEASED; urgency=low
+paramiko (1.11.0-0) UNRELEASED; urgency=low
 
-  * New upstream, using Git commit: 777d1576ca825f43d00f699865ead9bc0c37c637.
-    Development version.
+  * New upstream release.
+  * /debian/patches:
+    + Add patch: 002_locked-keys-are-valid.patch
+    + Add patch: 003_hash-hostnames.patch
 
  -- Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;  Mon, 29 Apr 2013 13:08:38 +0200
 
diff --git a/debian/patches/002_locked-keys-are-valid.patch b/debian/patches/002_locked-keys-are-valid.patch
new file mode 100644
index 0000000..8a6a92c
--- /dev/null
+++ b/debian/patches/002_locked-keys-are-valid.patch
@@ -0,0 +1,29 @@
+commit 3a61f5253c8aba4b88003950fd1c6caa5646190c
+Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
+Date:   Wed Sep 4 00:58:46 2013 +0200
+
+    Detect valid SSH private keys that may require unlocking/decrypting prior to being usable.
+
+diff --git a/paramiko/client.py b/paramiko/client.py
+index 493d548..5b28990 100644
+--- a/paramiko/client.py
++++ b/paramiko/client.py
+@@ -33,7 +33,7 @@ from paramiko.dsskey import DSSKey
+ from paramiko.hostkeys import HostKeys
+ from paramiko.resource import ResourceManager
+ from paramiko.rsakey import RSAKey
+-from paramiko.ssh_exception import SSHException, BadHostKeyException
++from paramiko.ssh_exception import PasswordRequiredException, SSHException, BadHostKeyException
+ from paramiko.transport import Transport
+ from paramiko.util import retry_on_signal
+ 
+@@ -466,6 +466,9 @@ class SSHClient (object):
+                         if not two_factor:
+                             return
+                         break
++                    except PasswordRequiredException, e:
++                        saved_exception = e
++                        break
+                     except SSHException, e:
+                         saved_exception = e
+ 
diff --git a/debian/patches/003_hash-hostnames.patch b/debian/patches/003_hash-hostnames.patch
new file mode 100644
index 0000000..3afa317
--- /dev/null
+++ b/debian/patches/003_hash-hostnames.patch
@@ -0,0 +1,37 @@
+commit 61c56f03a7678124f5115eb00b5015faae11c1e8
+Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
+Date:   Wed May 8 13:15:59 2013 +0200
+
+    Add method kwarg ,,hash_hostname'' to hostkeys.HostKeyEntry.add() method. Enable host key hashing by default as is standard with serveral current (Open)SSH implementations.
+
+diff --git a/paramiko/hostkeys.py b/paramiko/hostkeys.py
+index f64e6e6..0f29f2b 100644
+--- a/paramiko/hostkeys.py
++++ b/paramiko/hostkeys.py
+@@ -130,9 +130,9 @@ class HostKeys (UserDict.DictMixin):
+         if filename is not None:
+             self.load(filename)
+ 
+-    def add(self, hostname, keytype, key):
++    def add(self, hostname, keytype, key, hash_hostname=True):
+         &quot;&quot;&quot;
+-        Add a host key entry to the table.  Any existing entry for a
++        Add a host key entry to the table. Any existing entry for a
+         C{(hostname, keytype)} pair will be replaced.
+ 
+         @param hostname: the hostname (or IP) to add
+@@ -141,11 +141,14 @@ class HostKeys (UserDict.DictMixin):
+         @type keytype: str
+         @param key: the key to add
+         @type key: L{PKey}
++
+         &quot;&quot;&quot;
+         for e in self._entries:
+             if (hostname in e.hostnames) and (e.key.get_name() == keytype):
+                 e.key = key
+                 return
++        if not hostname.startswith('|1|') and hash_hostname:
++            hostname = self.hash_host(hostname)
+         self._entries.append(HostKeyEntry([hostname], key))
+ 
+     def load(self, filename):
diff --git a/debian/patches/series b/debian/patches/series
index 0813e3c..52ca39f 100644
--- a/debian/patches/series
+++ b/debian/patches/series
@@ -1 +1,3 @@
 001_no-upstream-makefile.patch
+002_locked-keys-are-valid.patch
+003_hash-hostnames.patch
diff --git a/paramiko/client.py b/paramiko/client.py
index 5b28990..493d548 100644
--- a/paramiko/client.py
+++ b/paramiko/client.py
@@ -33,7 +33,7 @@ from paramiko.dsskey import DSSKey
 from paramiko.hostkeys import HostKeys
 from paramiko.resource import ResourceManager
 from paramiko.rsakey import RSAKey
-from paramiko.ssh_exception import PasswordRequiredException, SSHException, BadHostKeyException
+from paramiko.ssh_exception import SSHException, BadHostKeyException
 from paramiko.transport import Transport
 from paramiko.util import retry_on_signal
 
@@ -466,9 +466,6 @@ class SSHClient (object):
                         if not two_factor:
                             return
                         break
-                    except PasswordRequiredException, e:
-                        saved_exception = e
-                        break
                     except SSHException, e:
                         saved_exception = e
 
diff --git a/paramiko/hostkeys.py b/paramiko/hostkeys.py
index 0f29f2b..f64e6e6 100644
--- a/paramiko/hostkeys.py
+++ b/paramiko/hostkeys.py
@@ -130,9 +130,9 @@ class HostKeys (UserDict.DictMixin):
         if filename is not None:
             self.load(filename)
 
-    def add(self, hostname, keytype, key, hash_hostname=True):
+    def add(self, hostname, keytype, key):
         &quot;&quot;&quot;
-        Add a host key entry to the table. Any existing entry for a
+        Add a host key entry to the table.  Any existing entry for a
         C{(hostname, keytype)} pair will be replaced.
 
         @param hostname: the hostname (or IP) to add
@@ -141,14 +141,11 @@ class HostKeys (UserDict.DictMixin):
         @type keytype: str
         @param key: the key to add
         @type key: L{PKey}
-
         &quot;&quot;&quot;
         for e in self._entries:
             if (hostname in e.hostnames) and (e.key.get_name() == keytype):
                 e.key = key
                 return
-        if not hostname.startswith('|1|') and hash_hostname:
-            hostname = self.hash_host(hostname)
         self._entries.append(HostKeyEntry([hostname], key))
 
     def load(self, filename):


hooks/post-receive
-- 
python-paramiko.git (Debian package python-paramiko)

This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;python-paramiko.git&quot; (Debian package python-paramiko).

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012147.html">[X2Go-Commits] page changed: doc:installation:x2goclient
</A></li>
	<LI>Next message: <A HREF="012149.html">[X2Go-Commits] python-x2go.git - master (branch) updated:	0.4.0.8-7-g77bf9f6
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12148">[ date ]</a>
              <a href="thread.html#12148">[ thread ]</a>
              <a href="subject.html#12148">[ subject ]</a>
              <a href="author.html#12148">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/x2go-commits">More information about the X2Go-commits
mailing list</a><br>
</body></html>
