<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [X2Go-Commits] x2goserver.git - build-main (branch) updated:	3.0.99.10-32-gd1a5d75
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/x2go-commits/2013-December/index.html" >
   <LINK REL="made" HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2Go-Commits%5D%20x2goserver.git%20-%20build-main%20%28branch%29%20updated%3A%0A%093.0.99.10-32-gd1a5d75&In-Reply-To=%3C20131204051811.023F05DB28%40ymir%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015514.html">
   <LINK REL="Next"  HREF="015504.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[X2Go-Commits] x2goserver.git - build-main (branch) updated:	3.0.99.10-32-gd1a5d75</H1>
    <B>X2Go dev team</B> 
    <A HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2Go-Commits%5D%20x2goserver.git%20-%20build-main%20%28branch%29%20updated%3A%0A%093.0.99.10-32-gd1a5d75&In-Reply-To=%3C20131204051811.023F05DB28%40ymir%3E"
       TITLE="[X2Go-Commits] x2goserver.git - build-main (branch) updated:	3.0.99.10-32-gd1a5d75">git-admin at x2go.org
       </A><BR>
    <I>Wed Dec  4 06:18:10 CET 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="015514.html">[X2Go-Commits] x2goserver.git - build-main (branch) updated:	3.0.99.10-28-gb4684dd
</A></li>
        <LI>Next message: <A HREF="015504.html">[X2Go-Commits] x2goserver.git - build-main (branch) updated:	3.0.99.10-35-gb1de1ed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15516">[ date ]</a>
              <a href="thread.html#15516">[ thread ]</a>
              <a href="subject.html#15516">[ subject ]</a>
              <a href="author.html#15516">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch, build-main has been updated
       via  d1a5d757ef2e45912f2f58162a6e6c39fa482d13 (commit)
      from  6d06ba1e3e965314e6a8753b11e69aeb45f8b5ad (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
-----------------------------------------------------------------------

Summary of changes:
 debian/changelog                             |    2 ++
 debian/po/POTFILES.in                        |    1 +
 debian/po/de.po                              |   44 ++++++++++++++++++++++++++
 debian/po/templates.pot                      |   41 ++++++++++++++++++++++++
 debian/templates                             |    9 ++++++
 debian/x2goserver.docs                       |    1 +
 debian/x2goserver.postinst                   |    3 ++
 x2goserver/doc/README.upgrade-pgsql-database |   44 ++++++++++++++++++++++++++
 8 files changed, 145 insertions(+)
 create mode 100644 debian/po/POTFILES.in
 create mode 100644 debian/po/de.po
 create mode 100644 debian/po/templates.pot
 create mode 100644 debian/templates
 create mode 100644 x2goserver/doc/README.upgrade-pgsql-database

The diff of changes is:
diff --git a/debian/changelog b/debian/changelog
index 57a32f7..bc47463 100644
--- a/debian/changelog
+++ b/debian/changelog
@@ -41,6 +41,8 @@ x2goserver (3.1.0.0-0~x2go1) UNRELEASED; urgency=low
     - Make sure x2gocleansessions close _all_ open file handles after
       forking as a daemon.
   * Let x2goserver package suggest x2goserver-fmbindings.
+  * Add package upgrade warning for installation using PostgreSQL. The
+    upgrade warning refers to README.upgrade-pgsql-database.
 
  -- Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;  Wed, 01 Feb 2012 13:45:00 +0100
 
diff --git a/debian/po/POTFILES.in b/debian/po/POTFILES.in
new file mode 100644
index 0000000..cef83a3
--- /dev/null
+++ b/debian/po/POTFILES.in
@@ -0,0 +1 @@
+[type: gettext/rfc822deb] templates
diff --git a/debian/po/de.po b/debian/po/de.po
new file mode 100644
index 0000000..dc47d07
--- /dev/null
+++ b/debian/po/de.po
@@ -0,0 +1,44 @@
+#
+#    Translators, if you are not familiar with the PO format, gettext
+#    documentation is worth reading, especially sections dedicated to
+#    this format, e.g. by running:
+#         info -n '(gettext)PO Files'
+#         info -n '(gettext)Header Entry'
+#
+#    Some information specific to po-debconf are available at
+#            /usr/share/doc/po-debconf/README-trans
+#         or <A HREF="http://www.debian.org/intl/l10n/po-debconf/README-trans">http://www.debian.org/intl/l10n/po-debconf/README-trans</A>
+#
+#    Developers do not need to manually edit POT or PO files.
+#
+msgid &quot;&quot;
+msgstr &quot;&quot;
+&quot;Project-Id-Version: PACKAGE VERSION\n&quot;
+&quot;Report-Msgid-Bugs-To: <A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">x2goserver at packages.debian.org</A>\n&quot;
+&quot;POT-Creation-Date: 2012-02-06 21:20+0100\n&quot;
+&quot;PO-Revision-Date: 2012-02-06 21:25+0100\n&quot;
+&quot;Last-Translator: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;\n&quot;
+&quot;Language-Team: LANGUAGE &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">LL at li.org</A>&gt;\n&quot;
+&quot;Language: \n&quot;
+&quot;MIME-Version: 1.0\n&quot;
+&quot;Content-Type: text/plain; charset=ISO-8859-15\n&quot;
+&quot;Content-Transfer-Encoding: 8bit\n&quot;
+
+#. Type: text
+#. Description
+#: ../templates:1001
+msgid &quot;X2Go Server / PostgreSQL Upgrade&quot;
+msgstr &quot;X2Go Server / PostgreSQL Upgrade&quot;
+
+#. Type: text
+#. Description
+#: ../templates:1001
+msgid &quot;You have configured X2Go Server with PostgreSQL as session DB backend and you are upgrading x2goserver from a version minor to 3.1.0.0.&quot;
+msgstr &quot;Ihr X2Go Server nutzt eine PostgreSQL Datenbank, um X2Go Sitzungsdaten zu verwalten und Sie aktualisieren gerade das Paket x2goserver von einer Version kleiner als 3.1.0.0.&quot;
+
+#. Type: text
+#. Description
+#: ../templates:1001
+msgid &quot;Please follow these PostgreSQL DB upgrade instructions before you continue using your X2Go Server: /usr/share/doc/x2goserver/README.upgrade-pgsql-database&quot;
+msgstr &quot;Bitte befolgen Sie daher die PostgreSQL-Aktualisierungshinweise bevor sie mit der Weiternutzung Ihres X2Go Servers fortfahren: /usr/share/x2goserver/README.upgrade-pgsl-database&quot;
+
diff --git a/debian/po/templates.pot b/debian/po/templates.pot
new file mode 100644
index 0000000..1667bd9
--- /dev/null
+++ b/debian/po/templates.pot
@@ -0,0 +1,41 @@
+# SOME DESCRIPTIVE TITLE.
+# Copyright (C) YEAR THE PACKAGE'S COPYRIGHT HOLDER
+# This file is distributed under the same license as the PACKAGE package.
+# FIRST AUTHOR &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">EMAIL at ADDRESS</A>&gt;, YEAR.
+#
+#, fuzzy
+msgid &quot;&quot;
+msgstr &quot;&quot;
+&quot;Project-Id-Version: PACKAGE VERSION\n&quot;
+&quot;Report-Msgid-Bugs-To: <A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">x2goserver at packages.debian.org</A>\n&quot;
+&quot;POT-Creation-Date: 2012-02-06 21:20+0100\n&quot;
+&quot;PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n&quot;
+&quot;Last-Translator: FULL NAME &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">EMAIL at ADDRESS</A>&gt;\n&quot;
+&quot;Language-Team: LANGUAGE &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">LL at li.org</A>&gt;\n&quot;
+&quot;Language: \n&quot;
+&quot;MIME-Version: 1.0\n&quot;
+&quot;Content-Type: text/plain; charset=CHARSET\n&quot;
+&quot;Content-Transfer-Encoding: 8bit\n&quot;
+
+#. Type: text
+#. Description
+#: ../templates:1001
+msgid &quot;X2Go Server / PostgreSQL Upgrade&quot;
+msgstr &quot;&quot;
+
+#. Type: text
+#. Description
+#: ../templates:1001
+msgid &quot;&quot;
+&quot;You have configured X2Go Server with PostgreSQL as session DB backend and &quot;
+&quot;you are upgrading x2goserver from a version minor to 3.1.0.0.&quot;
+msgstr &quot;&quot;
+
+#. Type: text
+#. Description
+#: ../templates:1001
+msgid &quot;&quot;
+&quot;Please follow these PostgreSQL DB upgrade instructions before you continue &quot;
+&quot;using your X2Go Server: /usr/share/doc/x2goserver/README.upgrade-pgsql-&quot;
+&quot;database&quot;
+msgstr &quot;&quot;
diff --git a/debian/templates b/debian/templates
new file mode 100644
index 0000000..384574a
--- /dev/null
+++ b/debian/templates
@@ -0,0 +1,9 @@
+Template: x2goserver/postgresql-upgrade-3_1_0_0
+Type: text
+_Description: X2Go Server / PostgreSQL Upgrade
+ You have configured X2Go Server with PostgreSQL as session DB backend and
+ you are upgrading x2goserver from a version minor to 3.1.0.0.
+ .
+ Please follow these PostgreSQL DB upgrade instructions before you continue
+ using your X2Go Server:
+ /usr/share/doc/x2goserver/README.upgrade-pgsql-database
diff --git a/debian/x2goserver.docs b/debian/x2goserver.docs
index 6c7d3af..869c67e 100644
--- a/debian/x2goserver.docs
+++ b/debian/x2goserver.docs
@@ -1 +1,2 @@
 x2goserver/.build_man2html/html
+x2goserver/doc/*
diff --git a/debian/x2goserver.postinst b/debian/x2goserver.postinst
index 68d83d7..f1582a8 100755
--- a/debian/x2goserver.postinst
+++ b/debian/x2goserver.postinst
@@ -5,6 +5,9 @@
 
 set -e
 
+# Source debconf library.
+. /usr/share/debconf/confmodule
+
 # summary of how this script can be called:
 #        * &lt;postinst&gt; `configure' &lt;most-recently-configured-version&gt;
 #        * &lt;old-postinst&gt; `abort-upgrade' &lt;new version&gt;
diff --git a/x2goserver/doc/README.upgrade-pgsql-database b/x2goserver/doc/README.upgrade-pgsql-database
new file mode 100644
index 0000000..bb78733
--- /dev/null
+++ b/x2goserver/doc/README.upgrade-pgsql-database
@@ -0,0 +1,44 @@
+
+#######################################
+###
+### X2Go DB maintenance after upgrades
+###
+#######################################
+
+UPGRADING
+=========
+
+Normally no DB upgrades are necessary on x2goserver package upgrades. However, there are some
+exceptions for some specific version of the x2goserver package.
+
+
+Upgrading to x2goserver 3.1.0.0
+-------------------------------
+
+From: x2goserver (&lt;= 3.0.99.10)
+To: x2goserver (&gt;= 3.1.0.0)
+
+A new column has been added to the database: ,,used_ports''.
+
+X2Go users in the PostgreSQL database need access to this new column.
+
+Alternative 1: recreate all X2Go db users
+
+  x2godbadmin --rmuser &lt;username&gt;
+  x2godbadmin --adduser &lt;username&gt;
+
+Alternative 2:
+
+  Run this SQL command for each x2gouser_&lt;user&gt; in the X2Go PostgreSQL database
+
+   $ su - postgres
+   $ psql 
+   psql (&lt;YOUR-PSQL-VERSION)
+   Type &quot;help&quot; for help.
+   .
+   postgres=# \connect x2go_sessions
+   x2go_sessions=# GRANT SELECT ON used_ports TO &quot;x2gouser_&lt;username1&gt;&quot;;
+   x2go_sessions=# GRANT SELECT ON used_ports TO &quot;x2gouser_&lt;username2&gt;&quot;;
+   ...
+
+


hooks/post-receive
-- 
x2goserver.git (X2Go Server)

This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;x2goserver.git&quot; (X2Go Server).

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015514.html">[X2Go-Commits] x2goserver.git - build-main (branch) updated:	3.0.99.10-28-gb4684dd
</A></li>
	<LI>Next message: <A HREF="015504.html">[X2Go-Commits] x2goserver.git - build-main (branch) updated:	3.0.99.10-35-gb1de1ed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15516">[ date ]</a>
              <a href="thread.html#15516">[ thread ]</a>
              <a href="subject.html#15516">[ subject ]</a>
              <a href="author.html#15516">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/x2go-commits">More information about the X2Go-commits
mailing list</a><br>
</body></html>
