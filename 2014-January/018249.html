<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [X2Go-Commits] x2goserver.git - build-baikal (branch) updated:	3.0.0-1
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/x2go-commits/2014-January/index.html" >
   <LINK REL="made" HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2Go-Commits%5D%20x2goserver.git%20-%20build-baikal%20%28branch%29%20updated%3A%0A%093.0.0-1&In-Reply-To=%3C20140103195027.318525DB22%40ymir%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018239.html">
   <LINK REL="Next"  HREF="018229.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[X2Go-Commits] x2goserver.git - build-baikal (branch) updated:	3.0.0-1</H1>
    <B>X2Go dev team</B> 
    <A HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2Go-Commits%5D%20x2goserver.git%20-%20build-baikal%20%28branch%29%20updated%3A%0A%093.0.0-1&In-Reply-To=%3C20140103195027.318525DB22%40ymir%3E"
       TITLE="[X2Go-Commits] x2goserver.git - build-baikal (branch) updated:	3.0.0-1">git-admin at x2go.org
       </A><BR>
    <I>Fri Jan  3 20:50:27 CET 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="018239.html">[X2Go-Commits] x2goserver.git - build-baikal (branch) updated:	3.0.1-9
</A></li>
        <LI>Next message: <A HREF="018229.html">[X2Go-Commits] x2goserver.git - build-baikal (branch) updated:	3.0.99-2-3-g17f0a8f
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18249">[ date ]</a>
              <a href="thread.html#18249">[ thread ]</a>
              <a href="subject.html#18249">[ subject ]</a>
              <a href="author.html#18249">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch, build-baikal has been updated
       via  24a8f38963badf1ba8a32276c5f67807cdf5148b (commit)
      from  235238a43856cfb66fb8a2a3ba46d7e54120d0f9 (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
-----------------------------------------------------------------------

Summary of changes:
 INSTALL                       |   37 ++++++++++
 debian/README.Debian          |    6 ++
 debian/changelog              |  130 +++++++++++++++++++++++++++++++++
 debian/compat                 |    1 +
 debian/control                |   24 +++++++
 debian/copyright              |   35 +++++++++
 debian/cron.d.ex              |    4 ++
 debian/dirs                   |    4 ++
 debian/emacsen-install.ex     |   45 ++++++++++++
 debian/emacsen-remove.ex      |   15 ++++
 debian/emacsen-startup.ex     |   25 +++++++
 debian/init.d                 |   82 +++++++++++++++++++++
 debian/init.d.ex              |   81 +++++++++++++++++++++
 debian/manpage.1.ex           |   59 +++++++++++++++
 debian/manpage.sgml.ex        |  156 ++++++++++++++++++++++++++++++++++++++++
 debian/manpage.xml.ex         |  148 ++++++++++++++++++++++++++++++++++++++
 debian/menu.ex                |    2 +
 debian/postinst.ex            |   41 +++++++++++
 debian/postrm.ex              |   39 ++++++++++
 debian/preinst                |   97 +++++++++++++++++++++++++
 debian/preinst.ex             |   38 ++++++++++
 debian/prerm.ex               |   40 +++++++++++
 debian/rules                  |  119 ++++++++++++++++++++++++++++++
 debian/watch.ex               |   22 ++++++
 debian/x2goserver-default.ex  |   10 +++
 debian/x2goserver.doc-base.EX |   22 ++++++
 sql                           |    1 +
 x2gocleansessions             |   48 ++++++++++---
 x2gocmdexitmessage            |    7 ++
 x2gocreatebase.sh             |   24 ++++---
 x2golistsessions              |   42 ++++-------
 x2golistsessions_root         |   33 ++-------
 x2golistsessions_sql          |   10 ++-
 x2gomountdirs                 |  160 +++++++++++++++++++++++++++++++++--------
 x2gopgwrapper_local           |   84 ++++++++++++++++++++--
 x2gopgwrapper_net             |  117 +++++++++++++++++++++++++-----
 x2goresume-session            |    3 +-
 x2goruncommand                |   97 +++++++++++++++++++++++--
 x2gostartagent                |   48 ++++++++++---
 x2gosuspend-agent             |   10 +++
 x2gosuspend-session           |    3 +-
 x2goterminate-session         |    5 +-
 x2goumount                    |   18 ++++-
 x2goumount_session            |   24 ++++++-
 44 files changed, 1865 insertions(+), 151 deletions(-)
 create mode 100644 INSTALL
 create mode 100644 debian/README.Debian
 create mode 100644 debian/changelog
 create mode 100644 debian/compat
 create mode 100644 debian/control
 create mode 100644 debian/copyright
 create mode 100644 debian/cron.d.ex
 create mode 100644 debian/dirs
 create mode 100644 debian/docs
 create mode 100644 debian/emacsen-install.ex
 create mode 100644 debian/emacsen-remove.ex
 create mode 100644 debian/emacsen-startup.ex
 create mode 100644 debian/init.d
 create mode 100644 debian/init.d.ex
 create mode 100644 debian/manpage.1.ex
 create mode 100644 debian/manpage.sgml.ex
 create mode 100644 debian/manpage.xml.ex
 create mode 100644 debian/menu.ex
 create mode 100644 debian/postinst.ex
 create mode 100644 debian/postrm.ex
 create mode 100755 debian/preinst
 create mode 100644 debian/preinst.ex
 create mode 100644 debian/prerm.ex
 create mode 100755 debian/rules
 create mode 100644 debian/watch.ex
 create mode 100644 debian/x2goserver-default.ex
 create mode 100644 debian/x2goserver.doc-base.EX
 create mode 100644 sql
 create mode 100755 x2gocmdexitmessage
 create mode 100755 x2gosuspend-agent

The diff of changes is:
diff --git a/INSTALL b/INSTALL
new file mode 100644
index 0000000..953cc74
--- /dev/null
+++ b/INSTALL
@@ -0,0 +1,37 @@
+install sudo,fuse,sshfs
+
+use visudo and add string in sudoers:
+%users ALL=(ALL) NOPASSWD: /usr/bin/x2gopgwrapper
+
+if you  want to allow only users from group x2gousers use X2GO system, 
+#add group &quot;x2gousers&quot;
+and change in sudoers  %users to %x2gousers
+
+INSTALL server scripts:
+
+mkdir /etc/x2go
+cp sql /etc/x2go/
+copy x2go* in any directory in $PATH
+daemon x2gocleansessions - clean all finished sessions, enable it by system start
+
+IF YOU WANT TO USE LOCAL DATABASE:
+you need to install postgresql
+
+echo -n local &gt; /etc/x2go/sql
+
+use x2gocreatebase.sh to create database for x2go
+
+IF YOU WANT TO USE REMOTE DATABASE:
+echo -n &quot;sqlserver address&quot; &gt; /etc/x2go/sql
+
+you need to creata DSA key for ssh connection with database server
+mkdirhier /root/.x2go/ssh/.pg/
+ssh-keygen -t dsa -f /root/.x2go/ssh/.pg/id_dsa
+press &quot;Enter&quot; for empty passphrase
+
+copy public part &quot;/root/.x2go/ssh/.pg/id_dsa.pub&quot; on computer with running sql server
+(for example with scp)
+and add it to ~postgres/.ssh/authorized_keys
+cat id_dsa.pub &gt;&gt; ~postgres/.ssh/authorized_keys
+
+
diff --git a/debian/README.Debian b/debian/README.Debian
new file mode 100644
index 0000000..8325992
--- /dev/null
+++ b/debian/README.Debian
@@ -0,0 +1,6 @@
+x2goserver for Debian
+---------------------
+
+&lt;possible notes regarding this package - if none, delete this file&gt;
+
+ -- Oleksandr Shneyder &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">oleksandr.shneyder at obviously-nice.de</A>&gt;  Thu,  8 Feb 2007 15:21:30 +0100
diff --git a/debian/changelog b/debian/changelog
new file mode 100644
index 0000000..c6b7b40
--- /dev/null
+++ b/debian/changelog
@@ -0,0 +1,130 @@
+x2goserver (3.0.0-1) unstable; urgency=low
+
+  * Printing support (need x2goprint and cups-x2go)
+  * add group x2gousers and configure sudo in preinstall script
+
+ -- Oleksandr Shneyder &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">oleksandr.shneyder at obviously-nice.de</A>&gt;  Wed, 04 Mar 2009 16:49:59 +0100
+
+x2goserver (2.0.1-19) unstable; urgency=low
+
+  * fixed installinit script break if x2goserver not running 
+
+ -- Oleksandr Shneyder &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">oleksandr.shneyder at obviously-nice.de</A>&gt;  Fri, 30 Jan 2009 08:38:03 +0100
+
+x2goserver (2.0.1-18) unstable; urgency=low
+
+  * fixed preinst script to work with ubuntu
+
+ -- Oleksandr Shneyder &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">oleksandr.shneyder at obviously-nice.de</A>&gt;  Thu, 29 Jan 2009 10:09:25 +0100
+
+x2goserver (2.0.1-17) unstable; urgency=low
+
+  * changes in database (start x2gocreatebase.sh):
+  *           session_id - varchar(500)
+  *           column &quot;fsport&quot; for fs tunnel
+  * changes in x2gostartagent: add fsport to session info
+  * changes in x2gopgwrapper_(local/net): fsport in listsessions
+  * changes in x2gomountdirs: mount using reverse ssh tun
+
+ -- Oleksandr Shneyder &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">oleksandr.shneyder at obviously-nice.de</A>&gt;  Thu, 15 Jan 2009 17:25:54 +0100
+
+x2goserver (2.0.1-16) unstable; urgency=low
+
+  * added x2gosuspend-agent to suspend session on clicking &quot;close&quot; button on x2goagent
+
+ -- Oleksandr Shneyder &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">oleksandr.shneyder at obviously-nice.de</A>&gt;  Mon, 03 Nov 2008 16:11:56 +0100
+
+x2goserver (2.0.1-15) unstable; urgency=low
+
+  * Fixed: run command with arguments
+  * Error message if command not exists
+
+ -- Oleksandr Shneyder &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">oleksandr.shneyder at obviously-nice.de</A>&gt;  Thu, 09 Oct 2008 15:42:29 +0000
+
+x2goserver (2.0.1-14) unstable; urgency=low
+
+  * added: list sessions from all servers
+
+ -- Oleksandr Shneyder &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">oleksandr.shneyder at obviously-nice.de</A>&gt;  Wed, 08 Oct 2008 10:16:18 +0200
+
+x2goserver (2.0.1-13) unstable; urgency=low
+
+  * changes to enable &quot;rootless&quot; mode
+
+ -- Oleksandr Shneyder &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">oleksandr.shneyder at obviously-nice.de</A>&gt;  Thu, 25 Sep 2008 17:33:18 +0200
+
+x2goserver (2.0.1-12) unstable; urgency=low
+
+  * changes in x2gomount/umount to use with gnome
+
+ -- Oleksandr Shneyder &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">admin at power.obviously-nice.de</A>&gt;  Fri, 29 Aug 2008 11:18:43 +0200
+
+x2goserver (2.0.1-11) unstable; urgency=low
+
+  * now x2gomountdirs can mount dirs on client hosts with ssh ports other then 22 
+
+ -- Oleksandr Shneyder &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">oleksandr.shneyder at obviously-nice.de</A>&gt;  Fri, 21 Sep 2007 12:12:34 +0200
+
+x2goserver (2.0.1-10) unstable; urgency=low
+
+  * x2gomountdirs fixed mounting directories with &quot; &quot; in path
+  * changed /bin/sh to /bin/bash in scripts
+  * x2gostartgent append color depth to session's name
+
+ -- Oleksandr Shneyder &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">oleksandr.shneyder at obviously-nice.de</A>&gt;  Thu, 13 Sep 2007 14:01:17 +0200
+
+x2goserver (2.0.1-9) unstable; urgency=low
+
+  * esd support
+
+ -- Oleksandr Shneyder &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">oleksandr.shneyder at obviously-nice.de</A>&gt;  Tue,  7 Aug 2007 15:31:51 +0200
+
+x2goserver (2.0.1-8) unstable; urgency=low
+
+  * changed architecture to &quot;all&quot;
+
+ -- Oleksandr Shneyder &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">oleksandr.shneyder at obviously-nice.de</A>&gt;  Thu, 28 Jun 2007 10:11:10 +0200
+
+x2goserver (2.0.1-7) unstable; urgency=low
+
+  * support for amd64
+
+ -- Oleksandr Shneyder &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">oleksandr.shneyder at obviously-nice.de</A>&gt;  Tue, 26 Jun 2007 16:32:53 +0200
+
+x2goserver (2.0.1-6) unstable; urgency=low
+
+  * close std file descriptors in daemon
+
+ -- Oleksandr Shneyder &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">oleksandr.shneyder at obviously-nice.de</A>&gt;  Wed, 25 Apr 2007 10:40:22 +0200
+
+x2goserver (2.0.1-5) unstable; urgency=low
+
+  * fix listsusp in wrapper
+
+ -- Oleksandr Shneyder &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">oleksandr.shneyder at obviously-nice.de</A>&gt;  Tue, 20 Mar 2007 12:06:00 +0100
+
+x2goserver (2.0.1-4) unstable; urgency=low
+
+  * fix getdisplays and getports in wrapper
+
+ -- Oleksandr Shneyder &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">oleksandr.shneyder at obviously-nice.de</A>&gt;  Tue, 20 Mar 2007 12:06:54 +0100
+
+x2goserver (2.0.1-3) unstable; urgency=low
+
+  * listallrunning and listsusp in postgress wrapper
+  * changes in database template, unique display and ports
+
+ -- Oleksandr Shneyder &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">oleksandr.shneyder at obviously-nice.de</A>&gt;  Mon, 19 Mar 2007 15:13:32 +0100
+
+x2goserver (2.0.1-2) unstable; urgency=low
+
+  * get server name with `hostname` in cleansessions
+
+ -- root &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">root at x2gotest1.x2go.obviously-nice.de</A>&gt;  Wed, 28 Feb 2007 09:49:48 +0100
+
+x2goserver (2.0.1-1) unstable; urgency=low
+
+  * Initial release (Closes: #nnnn)  &lt;nnnn is the bug number of your ITP&gt;
+
+ -- Oleksandr Shneyder &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">oleksandr.shneyder at obviously-nice.de</A>&gt;  Thu,  8 Feb 2007 15:21:30 +0100
+
diff --git a/debian/compat b/debian/compat
new file mode 100644
index 0000000..7ed6ff8
--- /dev/null
+++ b/debian/compat
@@ -0,0 +1 @@
+5
diff --git a/debian/control b/debian/control
new file mode 100644
index 0000000..9448d4b
--- /dev/null
+++ b/debian/control
@@ -0,0 +1,24 @@
+Source: x2goserver
+Section: x11
+Priority: extra
+Maintainer: Oleksandr Shneyder &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">oleksandr.shneyder at obviously-nice.de</A>&gt;
+Build-Depends: debhelper (&gt;= 5)
+Standards-Version: 3.7.2
+
+Package: x2goserver
+Architecture: all
+Depends: x2goagent, sudo, lsof, ssh
+Recommends: sshfs, postgresql
+Description: x2goserver (daemon and tools)
+ x2go is a serverbased computing environment with
+ - session resuming
+ - low bandwith support
+ - LDAP support
+ - client side mass storage mounting support
+ - audio/arts support
+ - authentification by smartcard and usb-stick
+ - kde control-center modules for administration
+ - kde based tools for just in time messaging and client surveillance
+ .
+ x2goserver contains the main daemon and tools for
+ session administrations (scripts).
\ No newline at end of file
diff --git a/debian/copyright b/debian/copyright
new file mode 100644
index 0000000..4a7fdf6
--- /dev/null
+++ b/debian/copyright
@@ -0,0 +1,35 @@
+This package was debianized by Oleksandr Shneyder &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">oleksandr.shneyder at obviously-nice.de</A>&gt; on
+Thu,  1 Feb 2007 14:11:03 +0100.
+
+It was downloaded from www.obviously-nice.de
+
+Upstream Author: Oleksandr Shneyder &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">oleksandr.shneyder at obviously-nice.de</A>&gt;
+
+Copyright (C) 2007  obviously nice - <A HREF="http://www.obviouslynice.de">http://www.obviouslynice.de</A>
+
+This program is free software; you can redistribute it and/or modify  
+it under the terms of the GNU General Public License as published by  
+the Free Software Foundation; either version 2 of the License, or     
+(at your option) any later version.                                   
+                                                                      
+This program is distributed in the hope that it will be useful,       
+but WITHOUT ANY WARRANTY; without even the implied warranty of        
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         
+GNU General Public License for more details.                          
+                                                                      
+You should have received a copy of the GNU General Public License     
+along with this program; if not, write to the                         
+Free Software Foundation, Inc.,                                       
+59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.             
+
+Copyright (C) 2007  Oleksandr Shneyder
<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">+oleksandr.shneyder at obviously-nice.de</A>
+
+On Debian systems, the complete text of the GNU General
+Public License can be found in `/usr/share/common-licenses/GPL'.
+
+
+
+The Debian packaging is (C) 2007, Oleksandr Shneyder &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">oleksandr.shneyder at obviously-nice.de</A>&gt; and
+is licensed under the GPL, see above.
+
diff --git a/debian/cron.d.ex b/debian/cron.d.ex
new file mode 100644
index 0000000..88d0304
--- /dev/null
+++ b/debian/cron.d.ex
@@ -0,0 +1,4 @@
+#
+# Regular cron jobs for the x2goserver package
+#
+0 4	* * *	root	x2goserver_maintenance
diff --git a/debian/dirs b/debian/dirs
new file mode 100644
index 0000000..b9b8278
--- /dev/null
+++ b/debian/dirs
@@ -0,0 +1,4 @@
+usr/bin
+usr/sbin
+etc/x2go
+usr/lib/x2go/script
diff --git a/debian/docs b/debian/docs
new file mode 100644
index 0000000..e69de29
diff --git a/debian/emacsen-install.ex b/debian/emacsen-install.ex
new file mode 100644
index 0000000..0a9ed36
--- /dev/null
+++ b/debian/emacsen-install.ex
@@ -0,0 +1,45 @@
+#! /bin/sh -e
+# /usr/lib/emacsen-common/packages/install/x2goserver
+
+# Written by Jim Van Zandt &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">jrv at debian.org</A>&gt;, borrowing heavily
+# from the install scripts for gettext by Santiago Vila
+# &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">sanvila at ctv.es</A>&gt; and octave by Dirk Eddelbuettel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">edd at debian.org</A>&gt;.
+
+FLAVOR=$1
+PACKAGE=x2goserver
+
+if [ ${FLAVOR} = emacs ]; then exit 0; fi
+
+echo install/${PACKAGE}: Handling install for emacsen flavor ${FLAVOR}
+
+#FLAVORTEST=`echo $FLAVOR | cut -c-6`
+#if [ ${FLAVORTEST} = xemacs ] ; then
+#    SITEFLAG=&quot;-no-site-file&quot;
+#else
+#    SITEFLAG=&quot;--no-site-file&quot;
+#fi
+FLAGS=&quot;${SITEFLAG} -q -batch -l path.el -f batch-byte-compile&quot;
+
+ELDIR=/usr/share/emacs/site-lisp/${PACKAGE}
+ELCDIR=/usr/share/${FLAVOR}/site-lisp/${PACKAGE}
+
+# Install-info-altdir does not actually exist. 
+# Maybe somebody will write it.
+if test -x /usr/sbin/install-info-altdir; then
+    echo install/${PACKAGE}: install Info links for ${FLAVOR}
+    install-info-altdir --quiet --section &quot;&quot; &quot;&quot; --dirname=${FLAVOR} /usr/info/${PACKAGE}.info.gz
+fi
+
+install -m 755 -d ${ELCDIR}
+cd ${ELDIR}
+FILES=`echo *.el`
+cp ${FILES} ${ELCDIR}
+cd ${ELCDIR}
+
+cat &lt;&lt; EOF &gt; path.el
+(setq load-path (cons &quot;.&quot; load-path) byte-compile-warnings nil)
+EOF
+${FLAVOR} ${FLAGS} ${FILES}
+rm -f *.el path.el
+
+exit 0
diff --git a/debian/emacsen-remove.ex b/debian/emacsen-remove.ex
new file mode 100644
index 0000000..7570757
--- /dev/null
+++ b/debian/emacsen-remove.ex
@@ -0,0 +1,15 @@
+#!/bin/sh -e
+# /usr/lib/emacsen-common/packages/remove/x2goserver
+
+FLAVOR=$1
+PACKAGE=x2goserver
+
+if [ ${FLAVOR} != emacs ]; then
+    if test -x /usr/sbin/install-info-altdir; then
+        echo remove/${PACKAGE}: removing Info links for ${FLAVOR}
+        install-info-altdir --quiet --remove --dirname=${FLAVOR} /usr/info/x2goserver.info.gz
+    fi
+
+    echo remove/${PACKAGE}: purging byte-compiled files for ${FLAVOR}
+    rm -rf /usr/share/${FLAVOR}/site-lisp/${PACKAGE}
+fi
diff --git a/debian/emacsen-startup.ex b/debian/emacsen-startup.ex
new file mode 100644
index 0000000..a117cba
--- /dev/null
+++ b/debian/emacsen-startup.ex
@@ -0,0 +1,25 @@
+;; -*-emacs-lisp-*-
+;;
+;; Emacs startup file, e.g.  /etc/emacs/site-start.d/50x2goserver.el
+;; for the Debian x2goserver package
+;;
+;; Originally contributed by Nils Naumann &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">naumann at unileoben.ac.at</A>&gt;
+;; Modified by Dirk Eddelbuettel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">edd at debian.org</A>&gt;
+;; Adapted for dh-make by Jim Van Zandt &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">jrv at debian.org</A>&gt;
+
+;; The x2goserver package follows the Debian/GNU Linux 'emacsen' policy and
+;; byte-compiles its elisp files for each 'emacs flavor' (emacs19,
+;; xemacs19, emacs20, xemacs20...).  The compiled code is then
+;; installed in a subdirectory of the respective site-lisp directory.
+;; We have to add this to the load-path:
+(let ((package-dir (concat &quot;/usr/share/&quot;
+                           (symbol-name flavor)
+                           &quot;/site-lisp/x2goserver&quot;)))
+;; If package-dir does not exist, the x2goserver package must have
+;; removed but not purged, and we should skip the setup.
+  (when (file-directory-p package-dir)
+        (setq load-path (cons package-dir load-path))
+       (autoload 'x2goserver-mode &quot;x2goserver-mode&quot;
+         &quot;Major mode for editing x2goserver files.&quot; t)
+       (add-to-list 'auto-mode-alist '(&quot;\\.x2goserver$&quot; . x2goserver-mode))))
+
diff --git a/debian/init.d b/debian/init.d
new file mode 100644
index 0000000..c41fe23
--- /dev/null
+++ b/debian/init.d
@@ -0,0 +1,82 @@
+#! /bin/sh
+#
+# skeleton	example file to build /etc/init.d/ scripts.
+#		This file should be used to construct scripts for /etc/init.d.
+#
+#		Written by Miquel van Smoorenburg &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">miquels at cistron.nl</A>&gt;.
+#		Modified for Debian 
+#		by Ian Murdock &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">imurdock at gnu.ai.mit.edu</A>&gt;.
+#
+# Version:	@(#)skeleton  1.9  26-Feb-2001  <A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">miquels at cistron.nl</A>
+#
+
+PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin
+export HOSTNAME
+DAEMON=/usr/sbin/x2gocleansessions
+NAME=x2goserver
+DESC=x2goserver
+
+test -x $DAEMON || exit 0
+
+# Include x2goserver defaults if available
+if [ -f /etc/default/x2goserver ] ; then
+	. /etc/default/x2goserver
+fi
+
+set -e
+
+case &quot;$1&quot; in
+  start)
+	echo -n &quot;Starting $DESC: &quot;
+	start-stop-daemon --start --quiet --pidfile /var/run/$NAME.pid \
+		--exec $DAEMON -- $DAEMON_OPTS
+	echo &quot;$NAME.&quot;
+	;;
+  stop)
+	echo -n &quot;Stopping $DESC: &quot;
+	start-stop-daemon --stop --quiet --pidfile /var/run/$NAME.pid 
+	
+	echo &quot;$NAME.&quot;
+	;;
+  #reload)
+	#
+	#	If the daemon can reload its config files on the fly
+	#	for example by sending it SIGHUP, do it here.
+	#
+	#	If the daemon responds to changes in its config file
+	#	directly anyway, make this a do-nothing entry.
+	#
+	# echo &quot;Reloading $DESC configuration files.&quot;
+	# start-stop-daemon --stop --signal 1 --quiet --pidfile \
+	#	/var/run/$NAME.pid --exec $DAEMON
+  #;;
+  force-reload)
+	#
+	#	If the &quot;reload&quot; option is implemented, move the &quot;force-reload&quot;
+	#	option to the &quot;reload&quot; entry above. If not, &quot;force-reload&quot; is
+	#	just the same as &quot;restart&quot; except that it does nothing if the
+	#   daemon isn't already running.
+	# check wether $DAEMON is running. If so, restart
+	start-stop-daemon --stop --test --quiet --pidfile \
+		/var/run/$NAME.pid  \
+	&amp;&amp; $0 restart \
+	|| exit 0
+	;;
+  restart)
+    echo -n &quot;Restarting $DESC: &quot;
+	start-stop-daemon --stop --oknodo --quiet --pidfile \
+		/var/run/$NAME.pid 
+	sleep 1
+	start-stop-daemon --start --quiet --pidfile \
+		/var/run/$NAME.pid --exec $DAEMON -- $DAEMON_OPTS
+	echo &quot;$NAME.&quot;
+	;;
+  *)
+	N=/etc/init.d/$NAME
+	# echo &quot;Usage: $N {start|stop|restart|reload|force-reload}&quot; &gt;&amp;2
+	echo &quot;Usage: $N {start|stop|restart|force-reload}&quot; &gt;&amp;2
+	exit 1
+	;;
+esac
+
+exit 0
diff --git a/debian/init.d.ex b/debian/init.d.ex
new file mode 100644
index 0000000..9d4e4b6
--- /dev/null
+++ b/debian/init.d.ex
@@ -0,0 +1,81 @@
+#! /bin/sh
+#
+# skeleton	example file to build /etc/init.d/ scripts.
+#		This file should be used to construct scripts for /etc/init.d.
+#
+#		Written by Miquel van Smoorenburg &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">miquels at cistron.nl</A>&gt;.
+#		Modified for Debian 
+#		by Ian Murdock &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">imurdock at gnu.ai.mit.edu</A>&gt;.
+#
+# Version:	@(#)skeleton  1.9  26-Feb-2001  <A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">miquels at cistron.nl</A>
+#
+
+PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin
+DAEMON=/usr/sbin/x2goserver
+NAME=x2goserver
+DESC=x2goserver
+
+test -x $DAEMON || exit 0
+
+# Include x2goserver defaults if available
+if [ -f /etc/default/x2goserver ] ; then
+	. /etc/default/x2goserver
+fi
+
+set -e
+
+case &quot;$1&quot; in
+  start)
+	echo -n &quot;Starting $DESC: &quot;
+	start-stop-daemon --start --quiet --pidfile /var/run/$NAME.pid \
+		--exec $DAEMON -- $DAEMON_OPTS
+	echo &quot;$NAME.&quot;
+	;;
+  stop)
+	echo -n &quot;Stopping $DESC: &quot;
+	start-stop-daemon --stop --quiet --pidfile /var/run/$NAME.pid \
+		--exec $DAEMON
+	echo &quot;$NAME.&quot;
+	;;
+  #reload)
+	#
+	#	If the daemon can reload its config files on the fly
+	#	for example by sending it SIGHUP, do it here.
+	#
+	#	If the daemon responds to changes in its config file
+	#	directly anyway, make this a do-nothing entry.
+	#
+	# echo &quot;Reloading $DESC configuration files.&quot;
+	# start-stop-daemon --stop --signal 1 --quiet --pidfile \
+	#	/var/run/$NAME.pid --exec $DAEMON
+  #;;
+  force-reload)
+	#
+	#	If the &quot;reload&quot; option is implemented, move the &quot;force-reload&quot;
+	#	option to the &quot;reload&quot; entry above. If not, &quot;force-reload&quot; is
+	#	just the same as &quot;restart&quot; except that it does nothing if the
+	#   daemon isn't already running.
+	# check wether $DAEMON is running. If so, restart
+	start-stop-daemon --stop --test --quiet --pidfile \
+		/var/run/$NAME.pid --exec $DAEMON \
+	&amp;&amp; $0 restart \
+	|| exit 0
+	;;
+  restart)
+    echo -n &quot;Restarting $DESC: &quot;
+	start-stop-daemon --stop --quiet --pidfile \
+		/var/run/$NAME.pid --exec $DAEMON
+	sleep 1
+	start-stop-daemon --start --quiet --pidfile \
+		/var/run/$NAME.pid --exec $DAEMON -- $DAEMON_OPTS
+	echo &quot;$NAME.&quot;
+	;;
+  *)
+	N=/etc/init.d/$NAME
+	# echo &quot;Usage: $N {start|stop|restart|reload|force-reload}&quot; &gt;&amp;2
+	echo &quot;Usage: $N {start|stop|restart|force-reload}&quot; &gt;&amp;2
+	exit 1
+	;;
+esac
+
+exit 0
diff --git a/debian/manpage.1.ex b/debian/manpage.1.ex
new file mode 100644
index 0000000..343ab46
--- /dev/null
+++ b/debian/manpage.1.ex
@@ -0,0 +1,59 @@
+.\&quot;                                      Hey, EMACS: -*- nroff -*-
+.\&quot; First parameter, NAME, should be all caps
+.\&quot; Second parameter, SECTION, should be 1-8, maybe w/ subsection
+.\&quot; other parameters are allowed: see man(7), man(1)
+.TH X2GOSERVER SECTION &quot;Februar  8, 2007&quot;
+.\&quot; Please adjust this date whenever revising the manpage.
+.\&quot;
+.\&quot; Some roff macros, for reference:
+.\&quot; .nh        disable hyphenation
+.\&quot; .hy        enable hyphenation
+.\&quot; .ad l      left justify
+.\&quot; .ad b      justify to both left and right margins
+.\&quot; .nf        disable filling
+.\&quot; .fi        enable filling
+.\&quot; .br        insert line break
+.\&quot; .sp &lt;n&gt;    insert n+1 empty lines
+.\&quot; for manpage-specific macros, see man(7)
+.SH NAME
+x2goserver \- program to do something
+.SH SYNOPSIS
+.B x2goserver
+.RI [ options ] &quot; files&quot; ...
+.br
+.B bar
+.RI [ options ] &quot; files&quot; ...
+.SH DESCRIPTION
+This manual page documents briefly the
+.B x2goserver
+and
+.B bar
+commands.
+.PP
+.\&quot; TeX users may be more comfortable with the \fB&lt;whatever&gt;\fP and
+.\&quot; \fI&lt;whatever&gt;\fP escape sequences to invode bold face and italics, 
+.\&quot; respectively.
+\fBx2goserver\fP is a program that...
+.SH OPTIONS
+These programs follow the usual GNU command line syntax, with long
+options starting with two dashes (`-').
+A summary of options is included below.
+For a complete description, see the Info files.
+.TP
+.B \-h, \-\-help
+Show summary of options.
+.TP
+.B \-v, \-\-version
+Show version of program.
+.SH SEE ALSO
+.BR bar (1),
+.BR baz (1).
+.br
+The programs are documented fully by
+.IR &quot;The Rise and Fall of a Fooish Bar&quot; ,
+available via the Info system.
+.SH AUTHOR
+x2goserver was written by &lt;upstream author&gt;.
+.PP
+This manual page was written by Oleksandr Shneyder &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">oleksandr.shneyder at obviously-nice.de</A>&gt;,
+for the Debian project (but may be used by others).
diff --git a/debian/manpage.sgml.ex b/debian/manpage.sgml.ex
new file mode 100644
index 0000000..a1817e6
--- /dev/null
+++ b/debian/manpage.sgml.ex
@@ -0,0 +1,156 @@
+&lt;!doctype refentry PUBLIC &quot;-//OASIS//DTD DocBook V4.1//EN&quot; [
+
+&lt;!-- Process this file with docbook-to-man to generate an nroff manual
+     page: `docbook-to-man manpage.sgml &gt; manpage.1'.  You may view
+     the manual page with: `docbook-to-man manpage.sgml | nroff -man |
+     less'.  A typical entry in a Makefile or Makefile.am is:
+
+manpage.1: manpage.sgml
+	docbook-to-man $&lt; &gt; $@
+
+    
+	The docbook-to-man binary is found in the docbook-to-man package.
+	Please remember that if you create the nroff version in one of the
+	debian/rules file targets (such as build), you will need to include
+	docbook-to-man in your Build-Depends control field.
+
+  --&gt;
+
+  &lt;!-- Fill in your name for FIRSTNAME and SURNAME. --&gt;
+  &lt;!ENTITY dhfirstname &quot;&lt;firstname&gt;FIRSTNAME&lt;/firstname&gt;&quot;&gt;
+  &lt;!ENTITY dhsurname   &quot;&lt;surname&gt;SURNAME&lt;/surname&gt;&quot;&gt;
+  &lt;!-- Please adjust the date whenever revising the manpage. --&gt;
+  &lt;!ENTITY dhdate      &quot;&lt;date&gt;Februar  8, 2007&lt;/date&gt;&quot;&gt;
+  &lt;!-- SECTION should be 1-8, maybe w/ subsection other parameters are
+       allowed: see man(7), man(1). --&gt;
+  &lt;!ENTITY dhsection   &quot;&lt;manvolnum&gt;SECTION&lt;/manvolnum&gt;&quot;&gt;
+  &lt;!ENTITY dhemail     &quot;&lt;email&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">oleksandr.shneyder at obviously-nice.de</A>&lt;/email&gt;&quot;&gt;
+  &lt;!ENTITY dhusername  &quot;Oleksandr Shneyder&quot;&gt;
+  &lt;!ENTITY dhucpackage &quot;&lt;refentrytitle&gt;X2GOSERVER&lt;/refentrytitle&gt;&quot;&gt;
+  &lt;!ENTITY dhpackage   &quot;x2goserver&quot;&gt;
+
+  &lt;!ENTITY debian      &quot;&lt;productname&gt;Debian&lt;/productname&gt;&quot;&gt;
+  &lt;!ENTITY gnu         &quot;&lt;acronym&gt;GNU&lt;/acronym&gt;&quot;&gt;
+  &lt;!ENTITY gpl         &quot;&gnu; &lt;acronym&gt;GPL&lt;/acronym&gt;&quot;&gt;
+]&gt;
+
+&lt;refentry&gt;
+  &lt;refentryinfo&gt;
+    &lt;address&gt;
+      &dhemail;
+    &lt;/address&gt;
+    &lt;author&gt;
+      &dhfirstname;
+      &dhsurname;
+    &lt;/author&gt;
+    &lt;copyright&gt;
+      &lt;year&gt;2003&lt;/year&gt;
+      &lt;holder&gt;&dhusername;&lt;/holder&gt;
+    &lt;/copyright&gt;
+    &dhdate;
+  &lt;/refentryinfo&gt;
+  &lt;refmeta&gt;
+    &dhucpackage;
+
+    &dhsection;
+  &lt;/refmeta&gt;
+  &lt;refnamediv&gt;
+    &lt;refname&gt;&dhpackage;&lt;/refname&gt;
+
+    &lt;refpurpose&gt;program to do something&lt;/refpurpose&gt;
+  &lt;/refnamediv&gt;
+  &lt;refsynopsisdiv&gt;
+    &lt;cmdsynopsis&gt;
+      &lt;command&gt;&dhpackage;&lt;/command&gt;
+
+      &lt;arg&gt;&lt;option&gt;-e &lt;replaceable&gt;this&lt;/replaceable&gt;&lt;/option&gt;&lt;/arg&gt;
+
+      &lt;arg&gt;&lt;option&gt;--example &lt;replaceable&gt;that&lt;/replaceable&gt;&lt;/option&gt;&lt;/arg&gt;
+    &lt;/cmdsynopsis&gt;
+  &lt;/refsynopsisdiv&gt;
+  &lt;refsect1&gt;
+    &lt;title&gt;DESCRIPTION&lt;/title&gt;
+
+    &lt;para&gt;This manual page documents briefly the
+      &lt;command&gt;&dhpackage;&lt;/command&gt; and &lt;command&gt;bar&lt;/command&gt;
+      commands.&lt;/para&gt;
+
+    &lt;para&gt;This manual page was written for the &debian; distribution
+      because the original program does not have a manual page.
+      Instead, it has documentation in the &gnu;
+      &lt;application&gt;Info&lt;/application&gt; format; see below.&lt;/para&gt;
+
+    &lt;para&gt;&lt;command&gt;&dhpackage;&lt;/command&gt; is a program that...&lt;/para&gt;
+
+  &lt;/refsect1&gt;
+  &lt;refsect1&gt;
+    &lt;title&gt;OPTIONS&lt;/title&gt;
+
+    &lt;para&gt;These programs follow the usual &gnu; command line syntax,
+      with long options starting with two dashes (`-').  A summary of
+      options is included below.  For a complete description, see the
+      &lt;application&gt;Info&lt;/application&gt; files.&lt;/para&gt;
+
+    &lt;variablelist&gt;
+      &lt;varlistentry&gt;
+        &lt;term&gt;&lt;option&gt;-h&lt;/option&gt;
+          &lt;option&gt;--help&lt;/option&gt;
+        &lt;/term&gt;
+        &lt;listitem&gt;
+          &lt;para&gt;Show summary of options.&lt;/para&gt;
+        &lt;/listitem&gt;
+      &lt;/varlistentry&gt;
+      &lt;varlistentry&gt;
+        &lt;term&gt;&lt;option&gt;-v&lt;/option&gt;
+          &lt;option&gt;--version&lt;/option&gt;
+        &lt;/term&gt;
+        &lt;listitem&gt;
+          &lt;para&gt;Show version of program.&lt;/para&gt;
+        &lt;/listitem&gt;
+      &lt;/varlistentry&gt;
+    &lt;/variablelist&gt;
+  &lt;/refsect1&gt;
+  &lt;refsect1&gt;
+    &lt;title&gt;SEE ALSO&lt;/title&gt;
+
+    &lt;para&gt;bar (1), baz (1).&lt;/para&gt;
+
+    &lt;para&gt;The programs are documented fully by &lt;citetitle&gt;The Rise and
+      Fall of a Fooish Bar&lt;/citetitle&gt; available via the
+      &lt;application&gt;Info&lt;/application&gt; system.&lt;/para&gt;
+  &lt;/refsect1&gt;
+  &lt;refsect1&gt;
+    &lt;title&gt;AUTHOR&lt;/title&gt;
+
+    &lt;para&gt;This manual page was written by &dhusername; &dhemail; for
+      the &debian; system (but may be used by others).  Permission is
+      granted to copy, distribute and/or modify this document under
+      the terms of the &gnu; General Public License, Version 2 any 
+	  later version published by the Free Software Foundation.
+    &lt;/para&gt;
+	&lt;para&gt;
+	  On Debian systems, the complete text of the GNU General Public
+	  License can be found in /usr/share/common-licenses/GPL.
+	&lt;/para&gt;
+
+  &lt;/refsect1&gt;
+&lt;/refentry&gt;
+
+&lt;!-- Keep this comment at the end of the file
+Local variables:
+mode: sgml
+sgml-omittag:t
+sgml-shorttag:t
+sgml-minimize-attributes:nil
+sgml-always-quote-attributes:t
+sgml-indent-step:2
+sgml-indent-data:t
+sgml-parent-document:nil
+sgml-default-dtd-file:nil
+sgml-exposed-tags:nil
+sgml-local-catalogs:nil
+sgml-local-ecat-files:nil
+End:
+--&gt;
+
+
diff --git a/debian/manpage.xml.ex b/debian/manpage.xml.ex
new file mode 100644
index 0000000..edd79ea
--- /dev/null
+++ b/debian/manpage.xml.ex
@@ -0,0 +1,148 @@
+&lt;?xml version='1.0' encoding='ISO-8859-1'?&gt;
+&lt;!DOCTYPE refentry PUBLIC &quot;-//OASIS//DTD DocBook XML V4.2//EN&quot;
+&quot;<A HREF="http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd">http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd</A>&quot; [
+
+&lt;!--
+
+Process this file with an XSLT processor: `xsltproc \
+-''-nonet /usr/share/sgml/docbook/stylesheet/xsl/nwalsh/\
+manpages/docbook.xsl manpage.dbk'.  A manual page
+&lt;package&gt;.&lt;section&gt; will be generated.  You may view the
+manual page with: nroff -man &lt;package&gt;.&lt;section&gt; | less'.  A
+typical entry in a Makefile or Makefile.am is:
+
+DB2MAN=/usr/share/sgml/docbook/stylesheet/xsl/nwalsh/\
+manpages/docbook.xsl
+XP=xsltproc -''-nonet
+
+manpage.1: manpage.dbk
+        $(XP) $(DB2MAN) $&lt;
+    
+The xsltproc binary is found in the xsltproc package.  The
+XSL files are in docbook-xsl.  Please remember that if you
+create the nroff version in one of the debian/rules file
+targets (such as build), you will need to include xsltproc
+and docbook-xsl in your Build-Depends control field.
+
+--&gt;
+
+  &lt;!-- Fill in your name for FIRSTNAME and SURNAME. --&gt;
+  &lt;!ENTITY dhfirstname &quot;&lt;firstname&gt;FIRSTNAME&lt;/firstname&gt;&quot;&gt;
+  &lt;!ENTITY dhsurname   &quot;&lt;surname&gt;SURNAME&lt;/surname&gt;&quot;&gt;
+  &lt;!-- Please adjust the date whenever revising the manpage. --&gt;
+  &lt;!ENTITY dhdate      &quot;&lt;date&gt;Februar  8, 2007&lt;/date&gt;&quot;&gt;
+  &lt;!-- SECTION should be 1-8, maybe w/ subsection other parameters are
+       allowed: see man(7), man(1). --&gt;
+  &lt;!ENTITY dhsection   &quot;&lt;manvolnum&gt;SECTION&lt;/manvolnum&gt;&quot;&gt;
+  &lt;!ENTITY dhemail     &quot;&lt;email&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">oleksandr.shneyder at obviously-nice.de</A>&lt;/email&gt;&quot;&gt;
+  &lt;!ENTITY dhusername  &quot;Oleksandr Shneyder&quot;&gt;
+  &lt;!ENTITY dhucpackage &quot;&lt;refentrytitle&gt;X2GOSERVER&lt;/refentrytitle&gt;&quot;&gt;
+  &lt;!ENTITY dhpackage   &quot;x2goserver&quot;&gt;
+
+  &lt;!ENTITY debian      &quot;&lt;productname&gt;Debian&lt;/productname&gt;&quot;&gt;
+  &lt;!ENTITY gnu         &quot;&lt;acronym&gt;GNU&lt;/acronym&gt;&quot;&gt;
+  &lt;!ENTITY gpl         &quot;&gnu; &lt;acronym&gt;GPL&lt;/acronym&gt;&quot;&gt;
+]&gt;
+
+&lt;refentry&gt;
+  &lt;refentryinfo&gt;
+    &lt;address&gt;
+      &dhemail;
+    &lt;/address&gt;
+    &lt;author&gt;
+      &dhfirstname;
+      &dhsurname;
+    &lt;/author&gt;
+    &lt;copyright&gt;
+      &lt;year&gt;2003&lt;/year&gt;
+      &lt;holder&gt;&dhusername;&lt;/holder&gt;
+    &lt;/copyright&gt;
+    &dhdate;
+  &lt;/refentryinfo&gt;
+  &lt;refmeta&gt;
+    &dhucpackage;
+
+    &dhsection;
+  &lt;/refmeta&gt;
+  &lt;refnamediv&gt;
+    &lt;refname&gt;&dhpackage;&lt;/refname&gt;
+
+    &lt;refpurpose&gt;program to do something&lt;/refpurpose&gt;
+  &lt;/refnamediv&gt;
+  &lt;refsynopsisdiv&gt;
+    &lt;cmdsynopsis&gt;
+      &lt;command&gt;&dhpackage;&lt;/command&gt;
+
+      &lt;arg&gt;&lt;option&gt;-e &lt;replaceable&gt;this&lt;/replaceable&gt;&lt;/option&gt;&lt;/arg&gt;
+
+      &lt;arg&gt;&lt;option&gt;--example &lt;replaceable&gt;that&lt;/replaceable&gt;&lt;/option&gt;&lt;/arg&gt;
+    &lt;/cmdsynopsis&gt;
+  &lt;/refsynopsisdiv&gt;
+  &lt;refsect1&gt;
+    &lt;title&gt;DESCRIPTION&lt;/title&gt;
+
+    &lt;para&gt;This manual page documents briefly the
+      &lt;command&gt;&dhpackage;&lt;/command&gt; and &lt;command&gt;bar&lt;/command&gt;
+      commands.&lt;/para&gt;
+
+    &lt;para&gt;This manual page was written for the &debian; distribution
+      because the original program does not have a manual page.
+      Instead, it has documentation in the &gnu;
+      &lt;application&gt;Info&lt;/application&gt; format; see below.&lt;/para&gt;
+
+    &lt;para&gt;&lt;command&gt;&dhpackage;&lt;/command&gt; is a program that...&lt;/para&gt;
+
+  &lt;/refsect1&gt;
+  &lt;refsect1&gt;
+    &lt;title&gt;OPTIONS&lt;/title&gt;
+
+    &lt;para&gt;These programs follow the usual &gnu; command line syntax,
+      with long options starting with two dashes (`-').  A summary of
+      options is included below.  For a complete description, see the
+      &lt;application&gt;Info&lt;/application&gt; files.&lt;/para&gt;
+
+    &lt;variablelist&gt;
+      &lt;varlistentry&gt;
+        &lt;term&gt;&lt;option&gt;-h&lt;/option&gt;
+          &lt;option&gt;--help&lt;/option&gt;
+        &lt;/term&gt;
+        &lt;listitem&gt;
+          &lt;para&gt;Show summary of options.&lt;/para&gt;
+        &lt;/listitem&gt;
+      &lt;/varlistentry&gt;
+      &lt;varlistentry&gt;
+        &lt;term&gt;&lt;option&gt;-v&lt;/option&gt;
+          &lt;option&gt;--version&lt;/option&gt;
+        &lt;/term&gt;
+        &lt;listitem&gt;
+          &lt;para&gt;Show version of program.&lt;/para&gt;
+        &lt;/listitem&gt;
+      &lt;/varlistentry&gt;
+    &lt;/variablelist&gt;
+  &lt;/refsect1&gt;
+  &lt;refsect1&gt;
+    &lt;title&gt;SEE ALSO&lt;/title&gt;
+
+    &lt;para&gt;bar (1), baz (1).&lt;/para&gt;
+
+    &lt;para&gt;The programs are documented fully by &lt;citetitle&gt;The Rise and
+      Fall of a Fooish Bar&lt;/citetitle&gt; available via the
+      &lt;application&gt;Info&lt;/application&gt; system.&lt;/para&gt;
+  &lt;/refsect1&gt;
+  &lt;refsect1&gt;
+    &lt;title&gt;AUTHOR&lt;/title&gt;
+
+    &lt;para&gt;This manual page was written by &dhusername; &dhemail; for
+      the &debian; system (but may be used by others).  Permission is
+      granted to copy, distribute and/or modify this document under
+      the terms of the &gnu; General Public License, Version 2 any 
+	  later version published by the Free Software Foundation.
+    &lt;/para&gt;
+	&lt;para&gt;
+	  On Debian systems, the complete text of the GNU General Public
+	  License can be found in /usr/share/common-licenses/GPL.
+	&lt;/para&gt;
+
+  &lt;/refsect1&gt;
+&lt;/refentry&gt;
+
diff --git a/debian/menu.ex b/debian/menu.ex
new file mode 100644
index 0000000..5fe32c1
--- /dev/null
+++ b/debian/menu.ex
@@ -0,0 +1,2 @@
+?package(x2goserver):needs=&quot;X11|text|vc|wm&quot; section=&quot;Apps/see-menu-manual&quot;\
+  title=&quot;x2goserver&quot; command=&quot;/usr/bin/x2goserver&quot;
diff --git a/debian/postinst.ex b/debian/postinst.ex
new file mode 100644
index 0000000..5a6a780
--- /dev/null
+++ b/debian/postinst.ex
@@ -0,0 +1,41 @@
+#!/bin/sh
+# postinst script for x2goserver
+#
+# see: dh_installdeb(1)
+
+set -e
+
+# summary of how this script can be called:
+#        * &lt;postinst&gt; `configure' &lt;most-recently-configured-version&gt;
+#        * &lt;old-postinst&gt; `abort-upgrade' &lt;new version&gt;
+#        * &lt;conflictor's-postinst&gt; `abort-remove' `in-favour' &lt;package&gt;
+#          &lt;new-version&gt;
+#        * &lt;postinst&gt; `abort-remove'
+#        * &lt;deconfigured's-postinst&gt; `abort-deconfigure' `in-favour'
+#          &lt;failed-install-package&gt; &lt;version&gt; `removing'
+#          &lt;conflicting-package&gt; &lt;version&gt;
+# for details, see <A HREF="http://www.debian.org/doc/debian-policy/">http://www.debian.org/doc/debian-policy/</A> or
+# the debian-policy package
+
+
+case &quot;$1&quot; in
+    configure)
+    ;;
+
+    abort-upgrade|abort-remove|abort-deconfigure)
+    ;;
+
+    *)
+        echo &quot;postinst called with unknown argument \`$1'&quot; &gt;&amp;2
+        exit 1
+    ;;
+esac
+
+# dh_installdeb will replace this with shell code automatically
+# generated by other debhelper scripts.
+
+#DEBHELPER#
+
+exit 0
+
+
diff --git a/debian/postrm.ex b/debian/postrm.ex
new file mode 100644
index 0000000..791f2d6
--- /dev/null
+++ b/debian/postrm.ex
@@ -0,0 +1,39 @@
+#!/bin/sh
+# postrm script for x2goserver
+#
+# see: dh_installdeb(1)
+
+set -e
+
+# summary of how this script can be called:
+#        * &lt;postrm&gt; `remove'
+#        * &lt;postrm&gt; `purge'
+#        * &lt;old-postrm&gt; `upgrade' &lt;new-version&gt;
+#        * &lt;new-postrm&gt; `failed-upgrade' &lt;old-version&gt;
+#        * &lt;new-postrm&gt; `abort-install'
+#        * &lt;new-postrm&gt; `abort-install' &lt;old-version&gt;
+#        * &lt;new-postrm&gt; `abort-upgrade' &lt;old-version&gt;
+#        * &lt;disappearer's-postrm&gt; `disappear' &lt;overwriter&gt;
+#          &lt;overwriter-version&gt;
+# for details, see <A HREF="http://www.debian.org/doc/debian-policy/">http://www.debian.org/doc/debian-policy/</A> or
+# the debian-policy package
+
+
+case &quot;$1&quot; in
+    purge|remove|upgrade|failed-upgrade|abort-install|abort-upgrade|disappear)
+    ;;
+
+    *)
+        echo &quot;postrm called with unknown argument \`$1'&quot; &gt;&amp;2
+        exit 1
+    ;;
+esac
+
+# dh_installdeb will replace this with shell code automatically
+# generated by other debhelper scripts.
+
+#DEBHELPER#
+
+exit 0
+
+
diff --git a/debian/preinst b/debian/preinst
new file mode 100755
index 0000000..1f73c6b
--- /dev/null
+++ b/debian/preinst
@@ -0,0 +1,97 @@
+#!/bin/bash
+# preinst script for x2goserver
+#
+# see: dh_installdeb(1)
+
+#set -e
+
+# summary of how this script can be called:
+#        * &lt;new-preinst&gt; `install'
+#        * &lt;new-preinst&gt; `install' &lt;old-version&gt;
+#        * &lt;new-preinst&gt; `upgrade' &lt;old-version&gt;
+#        * &lt;old-preinst&gt; `abort-upgrade' &lt;new-version&gt;
+# for details, see <A HREF="http://www.debian.org/doc/debian-policy/">http://www.debian.org/doc/debian-policy/</A> or
+# the debian-policy package
+
+case &quot;$1&quot; in
+    install|upgrade)
+    VERSION=$2
+    V1=`echo $VERSION|awk '{split($0,a,&quot;.&quot;); print a[1]}'`
+    V2=`echo $VERSION|awk '{split($0,a,&quot;.&quot;); print a[2]}'`
+    DV=`echo $VERSION|awk '{split($0,a,&quot;.&quot;); print a[3]}'`
+    V3=`echo $DV|awk '{split($0,a,&quot;-&quot;); print a[1]}'`
+    V4=`echo $DV|awk '{split($0,a,&quot;-&quot;); print a[2]}'`
+    if [ &quot;$V1&quot; == &quot;&quot; ]
+    then
+        V1=0
+    fi
+    
+    if [ &quot;$V2&quot; == &quot;&quot; ]
+    then
+        V2=0
+    fi
+    
+    if [ &quot;$V3&quot; == &quot;&quot; ]
+    then
+        V3=0
+    fi
+    
+    if [ &quot;$V4&quot; == &quot;&quot; ]
+    then
+        V4=0
+    fi
+    
+    VSUM=$(($V1*100000 + $V2*10000 + $V3*100 +$V4))
+    if [ $(( $VSUM &lt; 200117 &amp;&amp; $VSUM != 0)) != 0 ] 
+    then
+        echo &quot;
+
+
+
+----------------
+Attention:
+
+you are upgrading to a newer version of x2goserver. Please close all running x2go sessions and make sure that nobody will login during the installation procedure. You'll need to import a new database layout for this version, so please start the import script /usr/lib/x2go/script/x2gocreatebase.sh on your data base server after the packages have been installed.
+----------------
+
+Press Enter to continue
+
+&quot;
+      read
+    fi
+    X2GOGRP=`getent group | grep x2gousers`
+    
+    if [ &quot;$X2GOGRP&quot; == &quot;&quot; ]
+    then 
+         addgroup --system x2gousers
+    fi
+    
+    SUDOCONF=`cat /etc/sudoers | grep x2gopgwrapper | grep x2gousers`
+    if [ &quot;$SUDOCONF&quot; == &quot;&quot; ]
+    then
+          echo &quot;
+#### X2GO section
+%x2gousers ALL=(ALL) NOPASSWD: /usr/bin/x2gopgwrapper
+&quot; &gt;&gt; /etc/sudoers       
+    fi
+
+    echo &quot;Attention: If you want to allow users to log into the x2go system, you'll need to add them to the \&quot;x2gousers\&quot; group&quot;
+    ;;
+
+    abort-upgrade)
+    ;;
+
+    *)
+        echo &quot;preinst called with unknown argument \`$1'&quot; &gt;&amp;2
+        exit 1
+    ;;
+esac
+
+# dh_installdeb will replace this with shell code automatically
+# generated by other debhelper scripts.
+
+#DEBHELPER#
+
+exit 0
+
+
diff --git a/debian/preinst.ex b/debian/preinst.ex
new file mode 100644
index 0000000..cad3fac
--- /dev/null
+++ b/debian/preinst.ex
@@ -0,0 +1,38 @@
+#!/bin/sh
+# preinst script for x2goserver
+#
+# see: dh_installdeb(1)
+
+set -e
+
+# summary of how this script can be called:
+#        * &lt;new-preinst&gt; `install'
+#        * &lt;new-preinst&gt; `install' &lt;old-version&gt;
+#        * &lt;new-preinst&gt; `upgrade' &lt;old-version&gt;
+#        * &lt;old-preinst&gt; `abort-upgrade' &lt;new-version&gt;
+# for details, see <A HREF="http://www.debian.org/doc/debian-policy/">http://www.debian.org/doc/debian-policy/</A> or
+# the debian-policy package
+
+
+case &quot;$1&quot; in
+    install|upgrade)
+    echo &quot;prev version is $2&quot;
+    ;;
+
+    abort-upgrade)
+    ;;
+
+    *)
+        echo &quot;preinst called with unknown argument \`$1'&quot; &gt;&amp;2
+        exit 1
+    ;;
+esac
+
+# dh_installdeb will replace this with shell code automatically
+# generated by other debhelper scripts.
+
+#DEBHELPER#
+
+exit 0
+
+
diff --git a/debian/prerm.ex b/debian/prerm.ex
new file mode 100644
index 0000000..d78641f
--- /dev/null
+++ b/debian/prerm.ex
@@ -0,0 +1,40 @@
+#!/bin/sh
+# prerm script for x2goserver
+#
+# see: dh_installdeb(1)
+
+set -e
+
+# summary of how this script can be called:
+#        * &lt;prerm&gt; `remove'
+#        * &lt;old-prerm&gt; `upgrade' &lt;new-version&gt;
+#        * &lt;new-prerm&gt; `failed-upgrade' &lt;old-version&gt;
+#        * &lt;conflictor's-prerm&gt; `remove' `in-favour' &lt;package&gt; &lt;new-version&gt;
+#        * &lt;deconfigured's-prerm&gt; `deconfigure' `in-favour'
+#          &lt;package-being-installed&gt; &lt;version&gt; `removing'
+#          &lt;conflicting-package&gt; &lt;version&gt;
+# for details, see <A HREF="http://www.debian.org/doc/debian-policy/">http://www.debian.org/doc/debian-policy/</A> or
+# the debian-policy package
+
+
+case &quot;$1&quot; in
+    remove|upgrade|deconfigure)
+    ;;
+
+    failed-upgrade)
+    ;;
+
+    *)
+        echo &quot;prerm called with unknown argument \`$1'&quot; &gt;&amp;2
+        exit 1
+    ;;
+esac
+
+# dh_installdeb will replace this with shell code automatically
+# generated by other debhelper scripts.
+
+#DEBHELPER#
+
+exit 0
+
+
diff --git a/debian/rules b/debian/rules
new file mode 100755
index 0000000..681a023
--- /dev/null
+++ b/debian/rules
@@ -0,0 +1,119 @@
+#!/usr/bin/make -f
+# -*- makefile -*-
+# Sample debian/rules that uses debhelper.
+# This file was originally written by Joey Hess and Craig Small.
+# As a special exception, when this file is copied by dh-make into a
+# dh-make output file, you may use that output file without restriction.
+# This special exception was added by Craig Small in version 0.37 of dh-make.
+
+# Uncomment this to turn on verbose mode.
+#export DH_VERBOSE=1
+
+
+
+
+CFLAGS = -Wall -g
+
+ifneq (,$(findstring noopt,$(DEB_BUILD_OPTIONS)))
+	CFLAGS += -O0
+else
+	CFLAGS += -O2
+endif
+
+configure: configure-stamp
+configure-stamp:
+	dh_testdir
+	# Add here commands to configure the package.
+
+	touch configure-stamp
+
+
+build: build-stamp
+
+build-stamp: configure-stamp 
+	dh_testdir
+
+	# Add here commands to compile the package.
+	#docbook-to-man debian/x2goserver.sgml &gt; x2goserver.1
+
+	touch $@
+
+clean:
+	dh_testdir
+	dh_testroot
+	rm -f build-stamp configure-stamp
+
+	# Add here commands to clean up after the build process.
+
+	dh_clean 
+
+install: build
+	dh_testdir
+	dh_testroot
+	dh_clean -k 
+	dh_installdirs
+
+	# Add here commands to install the package into debian/x2goserver.
+	install  x2gocmdexitmessage  $(CURDIR)/debian/x2goserver/usr/bin/
+	install  x2gogetservers  $(CURDIR)/debian/x2goserver/usr/bin/
+	install  x2golistsessions  $(CURDIR)/debian/x2goserver/usr/bin/
+	install  x2golistsessions_root  $(CURDIR)/debian/x2goserver/usr/bin/
+	install  x2golistsessions_sql  $(CURDIR)/debian/x2goserver/usr/bin/
+	install  x2gomountdirs  $(CURDIR)/debian/x2goserver/usr/bin/
+	install  x2gopgwrapper  $(CURDIR)/debian/x2goserver/usr/bin/
+	install  x2gopgwrapper_local  $(CURDIR)/debian/x2goserver/usr/bin/
+	install  x2gopgwrapper_net  $(CURDIR)/debian/x2goserver/usr/bin/
+	install  x2goresume-session  $(CURDIR)/debian/x2goserver/usr/bin/
+	install  x2goruncommand  $(CURDIR)/debian/x2goserver/usr/bin/
+	install  x2goshowblocks  $(CURDIR)/debian/x2goserver/usr/bin/
+	install  x2gostartagent  $(CURDIR)/debian/x2goserver/usr/bin/
+	install  x2gosuspend-session  $(CURDIR)/debian/x2goserver/usr/bin/
+	install  x2gosuspend-agent  $(CURDIR)/debian/x2goserver/usr/bin/
+	install  x2goterminate  $(CURDIR)/debian/x2goserver/usr/bin/
+	install  x2goterminate-session  $(CURDIR)/debian/x2goserver/usr/bin/
+	install  x2goumount  $(CURDIR)/debian/x2goserver/usr/bin/
+	install  x2goumount_session  $(CURDIR)/debian/x2goserver/usr/bin/
+	cp  sql  $(CURDIR)/debian/x2goserver/etc/x2go/
+	install  x2gocleansessions  $(CURDIR)/debian/x2goserver/usr/sbin/
+	install  x2gocreatebase.sh  $(CURDIR)/debian/x2goserver/usr/lib/x2go/script
+
+
+
+
+# Build architecture-independent files here.
+binary-indep: build install
+# We have nothing to do by default.
+
+# Build architecture-dependent files here.
+binary-arch: build install
+	dh_testdir
+	dh_testroot
+	dh_installchangelogs 
+	dh_installdocs
+	dh_installexamples
+#	dh_install
+#	dh_installmenu
+#	dh_installdebconf	
+#	dh_installlogrotate
+#	dh_installemacsen
+#	dh_installpam
+#	dh_installmime
+#	dh_python
+	dh_installinit -R
+#	dh_installcron
+#	dh_installinfo
+	dh_installman
+	dh_link
+	dh_strip
+	dh_compress
+	dh_fixperms
+#	dh_perl
+#	dh_makeshlibs
+	dh_installdeb
+	dh_shlibdeps
+	dh_gencontrol
+	dh_md5sums
+	dh_builddeb
+
+binary: binary-indep binary-arch
+.PHONY: build clean binary-indep binary-arch binary install configure
diff --git a/debian/watch.ex b/debian/watch.ex
new file mode 100644
index 0000000..472c4c7
--- /dev/null
+++ b/debian/watch.ex
@@ -0,0 +1,22 @@
+# Example watch control file for uscan
+# Rename this file to &quot;watch&quot; and then you can run the &quot;uscan&quot; command
+# to check for upstream updates and more.
+# See uscan(1) for format
+
+# Compulsory line, this is a version 3 file
+version=3
+
+# Uncomment to examine a Webpage 
+# &lt;Webpage URL&gt; &lt;string match&gt;
+#<A HREF="http://www.example.com/downloads.php">http://www.example.com/downloads.php</A> x2goserver-(.*)\.tar\.gz
+
+# Uncomment to examine a Webserver directory
+#<A HREF="http://www.example.com/pub/x2goserver-(.*">http://www.example.com/pub/x2goserver-(.*</A>)\.tar\.gz
+
+# Uncommment to examine a FTP server
+#<A HREF="ftp://ftp.example.com/pub/x2goserver-(.*">ftp://ftp.example.com/pub/x2goserver-(.*</A>)\.tar\.gz debian uupdate
+
+# Uncomment to find new files on sourceforge, for debscripts &gt;= 2.9
+# <A HREF="http://sf.net/x2goserver/x2goserver-(.*">http://sf.net/x2goserver/x2goserver-(.*</A>)\.tar\.gz
+
+
diff --git a/debian/x2goserver-default.ex b/debian/x2goserver-default.ex
new file mode 100644
index 0000000..ad6479a
--- /dev/null
+++ b/debian/x2goserver-default.ex
@@ -0,0 +1,10 @@
+# Defaults for x2goserver initscript
+# sourced by /etc/init.d/x2goserver
+# installed at /etc/default/x2goserver by the maintainer scripts
+
+#
+# This is a POSIX shell fragment
+#
+
+# Additional options that are passed to the Daemon.
+DAEMON_OPTS=&quot;&quot;
diff --git a/debian/x2goserver.doc-base.EX b/debian/x2goserver.doc-base.EX
new file mode 100644
index 0000000..7d379a3
--- /dev/null
+++ b/debian/x2goserver.doc-base.EX
@@ -0,0 +1,22 @@
+Document: x2goserver
+Title: Debian x2goserver Manual
+Author: &lt;insert document author here&gt;
+Abstract: This manual describes what x2goserver is
+ and how it can be used to
+ manage online manuals on Debian systems.
+Section: unknown
+
+Format: debiandoc-sgml
+Files: /usr/share/doc/x2goserver/x2goserver.sgml.gz
+
+Format: postscript
+Files: /usr/share/doc/x2goserver/x2goserver.ps.gz
+
+Format: text
+Files: /usr/share/doc/x2goserver/x2goserver.text.gz
+
+Format: HTML
+Index: /usr/share/doc/x2goserver/html/index.html
+Files: /usr/share/doc/x2goserver/html/*.html
+
+  
diff --git a/sql b/sql
new file mode 100644
index 0000000..c2c027f
--- /dev/null
+++ b/sql
@@ -0,0 +1 @@
+local
\ No newline at end of file
diff --git a/x2gocleansessions b/x2gocleansessions
index c23056f..491d634 100755
--- a/x2gocleansessions
+++ b/x2gocleansessions
@@ -34,11 +34,38 @@ sub check_stat
 }
 
 
+sub catch_term
+{
+   unlink(&quot;/var/run/x2goserver.pid&quot;);
+   exit;
+}
+
 my $uname;
 my $serv=$ENV{'HOSTNAME'};
 
-while(sleep 5)
+my $pid = fork();
+if (not defined $pid) 
+{
+  print &quot;resources not avilable.\n&quot;;
+} 
+elsif ($pid != 0) 
 {
+    open (F,&quot;&gt;/var/run/x2goserver.pid&quot;);
+    print F &quot;$pid\n&quot;;
+    close(F);
+}
+elsif ($pid == 0 )
+{
+
+ close(STDIN);
+ close(STDOUT);
+ close(STDERR);
+ 
+ $SIG{TERM}=\&amp;catch_term;
+ 
+ while(sleep 5)
+ {
+  $serv=`hostname`;
   my $outp=`x2golistsessions_sql $serv 2&gt;/dev/null`;
 
   my @outp=split(&quot;\n&quot;,&quot;$outp&quot;);
@@ -48,16 +75,16 @@ while(sleep 5)
      my @sinfo=split('\\|',&quot;@outp[$i]&quot;);
      if(@sinfo[4]eq 'F')
      {
-	 print &quot;@sinfo[1], is blocked\n&quot;;
-	 print &quot;(@sinfo[1])Unmounting all shares\n&quot;;	        
-	 system( &quot;su @sinfo[11] -c \&quot;export HOSTNAME &amp;&amp; x2goumount_session @sinfo[1]\&quot;&quot;);
+	 #print &quot;@sinfo[1], is blocked\n&quot;;
+	 #print &quot;(@sinfo[1])Unmounting all shares\n&quot;;	        
+	 system( &quot;su @sinfo[11] -c \&quot;export HOSTNAME &amp;&amp; x2goumount_session @sinfo[1]\&quot; 2&gt; /dev/null&quot;);
      }       
      elsif(! check_pid (@sinfo[0]<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">, at sinfo</A>[1]<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">, at sinfo</A>[12]))
      {
          system(&quot;su @sinfo[11] -c \&quot;sudo x2gopgwrapper changestatus 'F' @sinfo[1] \&quot; &gt; /dev/null&quot;);
-	 print &quot;@sinfo[1], pid @sinfo[0] not exist, changing status from @sinfo[4] to F\n&quot;;
-	 print &quot;(@sinfo[1])Unmounting all shares\n&quot;;	 
-	 system( &quot;su @sinfo[11] -c \&quot;export HOSTNAME &amp;&amp; x2goumount_session @sinfo[1]\&quot;&quot;);
+	 #print &quot;@sinfo[1], pid @sinfo[0] not exist, changing status from @sinfo[4] to F\n&quot;;
+	 #print &quot;(@sinfo[1])Unmounting all shares\n&quot;;	 
+	 system( &quot;su @sinfo[11] -c \&quot;export HOSTNAME &amp;&amp; x2goumount_session @sinfo[1]\&quot; 2&gt; /dev/null&quot;);
      }
      else
      { 
@@ -66,11 +93,12 @@ while(sleep 5)
            if(!check_stat(@sinfo[1]<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">, at sinfo</A>[11]))
 	   {
                system(&quot;su @sinfo[11] -c  \&quot;sudo x2gopgwrapper changestatus 'S' @sinfo[1] \&quot; &gt; /dev/null&quot;);
-	       print &quot;@sinfo[1], is suspended, changing status from @sinfo[4] to S\n&quot;;
-	       print &quot;(@sinfo[1])Unmounting all shares\n&quot;;	        
-	       system( &quot;su @sinfo[11] -c \&quot;export HOSTNAME &amp;&amp; x2goumount_session @sinfo[1]\&quot;&quot;);
+	       #print &quot;@sinfo[1], is suspended, changing status from @sinfo[4] to S\n&quot;;
+	       #print &quot;(@sinfo[1])Unmounting all shares\n&quot;;	        
+	       system( &quot;su @sinfo[11] -c \&quot;export HOSTNAME &amp;&amp; x2goumount_session @sinfo[1]\&quot; 2&gt; /dev/null&quot;);
            }
        }       
      }
   }
+ }
 }
\ No newline at end of file
diff --git a/x2gocmdexitmessage b/x2gocmdexitmessage
new file mode 100755
index 0000000..29da10e
--- /dev/null
+++ b/x2gocmdexitmessage
@@ -0,0 +1,7 @@
+#!/bin/bash
+
+
+X2GO_ROOT=${HOME}/.x2go
+MESSAGE_FILE=$X2GO_ROOT/C-$1/cmdoutput
+
+cat $MESSAGE_FILE
\ No newline at end of file
diff --git a/x2gocreatebase.sh b/x2gocreatebase.sh
index 9eaf4a1..6bb025d 100755
--- a/x2gocreatebase.sh
+++ b/x2gocreatebase.sh
@@ -1,10 +1,12 @@
 #!/bin/bash
+
+su postgres -c &quot;dropdb x2go_sessions&quot;
 su postgres -c &quot;createdb x2go_sessions&quot;
 su postgres -c &quot;echo \&quot;create table sessions(
-		session_id varchar(100) primary key, 
+		session_id varchar(500) primary key, 
                 display integer not null, 
-		uname varchar(20) not null, 
-		server varchar(20) not null,
+		uname varchar(100) not null, 
+		server varchar(100) not null,
 		client inet,
 		status char(1) not null default 'R',
 		init_time timestamp not null default now(),
@@ -12,26 +14,26 @@ su postgres -c &quot;echo \&quot;create table sessions(
 		cookie char(33),
 		agent_pid int,
 		gr_port int,
-		sound_port int, 
-		unique(display,server)
+		sound_port int,
+		fs_port int,
+		unique(display)
 		)\&quot; | psql x2go_sessions&quot;
 
 su postgres -c &quot;echo \&quot;create table messages(mess_id varchar(20) primary key, message text)\&quot; | psql x2go_sessions&quot;
 
 su postgres -c &quot;echo \&quot;create table user_messages(
                 mess_id varchar(20) not null, 
-		uname varchar(20) not null
+		uname varchar(100) not null
 		)\&quot; | psql x2go_sessions&quot;
 
 su postgres -c &quot;echo \&quot;create table used_ports(
-                server varchar(20) not null,
-		session_id varchar(100) references sessions on delete cascade, 
-		port integer not null, 
-		primary key(server,port)
+                server varchar(100) not null,
+		session_id varchar(500) references sessions on delete cascade, 
+		port integer primary key
 		)\&quot; | psql x2go_sessions&quot;
 
 su postgres -c &quot;echo \&quot;create table mounts(
-                session_id varchar(100) references sessions on delete restrict,
+                session_id varchar(500) references sessions on delete restrict,
 		path varchar(512) not null, 
 		client inet not null, 
 		primary key(path,client)
diff --git a/x2golistsessions b/x2golistsessions
index 9b01454..726cc6d 100755
--- a/x2golistsessions
+++ b/x2golistsessions
@@ -1,24 +1,6 @@
 #!/usr/bin/perl
 use strict;
 
-sub check_pid
-{
-   my $pid=shift;
-   my $sess=shift;
-   my $sec=shift;
-   if($sec &lt; 30)
-   {
-      return 1;
-   }
-   open (F,&quot;&lt;/proc/$pid/cmdline&quot;) or return 0;
-   my $text=&lt;F&gt;;
-   close (F);
-   if($text =~ m/$sess/)
-   {
-      return 1;
-   }
-   return 0;
-}
 
 sub check_stat
 {
@@ -32,10 +14,22 @@ sub check_stat
    return 1;
 }
 
-
-my $serv=$ENV{'HOSTNAME'};
+my $serv=shift;
+if( ! $serv)
+{
+   $serv=$ENV{'HOSTNAME'};
+}
 my $uname=$ENV{'USER'};
-my $outp=`sudo x2gopgwrapper listsessions $serv`;
+my $outp;
+if($serv eq &quot;--all-servers&quot;)
+{
+ $outp=`sudo x2gopgwrapper listsessions_all`;
+}
+else
+{
+ $outp=`sudo x2gopgwrapper listsessions $serv`;
+}
+
 my @outp=split(&quot;\n&quot;,&quot;$outp&quot;);
 for(my $i=0;$i&lt;@outp;$i++)
 {
@@ -46,12 +40,6 @@ for(my $i=0;$i&lt;@outp;$i++)
      {
            print &quot;@outp[$i]\n&quot;;
      }       
-     elsif(! check_pid (@sinfo[0]<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">, at sinfo</A>[1]<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">, at sinfo</A>[12]) )
-     {
-
-         system(&quot;sudo x2gopgwrapper changestatus 'F' @sinfo[1] &gt; /dev/null&quot;);
-         system( &quot;x2goumount_session @sinfo[1]&quot;);
-     }
      else
      { 
        if(@sinfo[4]eq 'R')
diff --git a/x2golistsessions_root b/x2golistsessions_root
index 2a069d5..4e128b7 100755
--- a/x2golistsessions_root
+++ b/x2golistsessions_root
@@ -1,24 +1,6 @@
 #!/usr/bin/perl
 use strict;
 
-sub check_pid
-{
-   my $pid=shift;
-   my $sess=shift;
-   my $sec=shift;
-   if($sec &lt; 30)
-   {
-      return 1;
-   }
-   open (F,&quot;&lt;/proc/$pid/cmdline&quot;) or return 0;
-   my $text=&lt;F&gt;;
-   close (F);
-   if($text =~ m/$sess/)
-   {
-      return 1;
-   }
-   return 0;
-}
 
 sub check_stat
 {
@@ -35,10 +17,15 @@ sub check_stat
 
 
 my $uname;
-my $serv=$ENV{'HOSTNAME'};
+
+my $serv=shift;
+if( ! $serv)
+{
+   $serv=$ENV{'HOSTNAME'};
+}
+
 my $outp=`x2golistsessions_sql $serv 2&gt;/dev/null`;
 
-print $serv;
 
 my @outp=split(&quot;\n&quot;,&quot;$outp&quot;);
 
@@ -49,12 +36,6 @@ for(my $i=0;$i&lt;@outp;$i++)
      {
            print &quot;@outp[$i]\n&quot;;
      }       
-     elsif(! check_pid (@sinfo[0]<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">, at sinfo</A>[1]<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">, at sinfo</A>[12]))
-     {
-         system(&quot;su - @sinfo[11] -c \&quot;sudo x2gopgwrapper changestatus 'F' @sinfo[1] \&quot; &gt; /dev/null&quot;);
-         @outp[$i] =~ s/\|R\|/\|F\|/;
-         @outp[$i] =~ s/\|S\|/\|F\|/;
-     }
      else
      { 
        if(@sinfo[4]eq 'R')
diff --git a/x2golistsessions_sql b/x2golistsessions_sql
index 5f4839b..aa44679 100755
--- a/x2golistsessions_sql
+++ b/x2golistsessions_sql
@@ -1,7 +1,15 @@
 #!/usr/bin/perl
 use strict;
 my $serv=shift;
-my $outp=`sudo x2gopgwrapper listsessionsroot $serv`;
+my $outp;
+if($serv eq &quot;--all-servers&quot;)
+{
+ $outp=`sudo x2gopgwrapper listsessionsroot_all`;
+}
+else
+{
+ $outp=`sudo x2gopgwrapper listsessionsroot $serv`;
+}
 $outp =~ s/ //g;
 $outp =~ s/\*/ /g;
 
diff --git a/x2gomountdirs b/x2gomountdirs
index 100de70..6cfc3cd 100755
--- a/x2gomountdirs
+++ b/x2gomountdirs
@@ -5,9 +5,44 @@ my $type=shift;
 my $session=shift;
 my $user=shift;
 my $key=shift;
-my $dirlist=shift;
+my @dl;
+my $i=0;
<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">+ at dl</A>[$i]=shift;
+while(@dl[$i])
+{
+    $i++;
+    @dl[$i]=shift;
+}
+my $dirlist=join(&quot; &quot;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">, at dl</A>);
+chop($dirlist);
+my $reverse=0;
+my $port=&quot;22&quot;;
+print &quot;dirs:$dirlist\n&quot;;
+if($dirlist =~ m/__REVERSESSH_PORT__/)
+{
+    @dl=split(&quot;__REVERSESSH_PORT__&quot;,&quot;$dirlist&quot;);
+    $dirlist=@dl[0];
+    $port=@dl[1];
+    $reverse=1;
+}
+
+if($dirlist =~ m/__SSH_PORT__/)
+{
+   @dl=split(&quot;__SSH_PORT__&quot;,&quot;$dirlist&quot;);
+   $dirlist=@dl[0];
+   $port=@dl[1];
+}
 
-my $host=(split(&quot; &quot;,$ENV{'SSH_CLIENT'}))[0];
+print &quot;ssh port:$port\n&quot;;
+my $host;
+if($reverse == 0)
+{
+   $host=(split(&quot; &quot;,$ENV{'SSH_CLIENT'}))[0];
+}
+else
+{
+  $host='127.0.0.1';
+}
 print &quot;Host:$host\n&quot;;
 print &quot;User:$user\n&quot;;
 
@@ -27,47 +62,116 @@ open (F,&quot;&gt;$key.ident&quot;);
 print F &quot;$host $rsa_identity&quot;;
 close(F);
 
-#my $mdir=&quot;/tmp/$ENV{'USER'}_media&quot;;
-my $mdir=&quot;$ENV{'HOME'}/media&quot;;
-mkdir($mdir);
+
+my $mdir=&quot;/tmp/$ENV{'USER'}_media&quot;;
+my $ldir=&quot;$ENV{'HOME'}/media&quot;;
+my $spooldir_lnk=&quot;$ENV{'HOME'}/.x2go/C-$session/spool&quot;;
+my $spooldir=&quot;/tmp/spool_$ENV{'USER'}&quot;;
+
+if(! -e $mdir)
+{
+   mkdir($mdir);
+}
+chmod(0700,$mdir);
+
+if(! -e $spooldir)
+{
+   mkdir($spooldir);
+}
+chmod(0700,$spooldir);
+
+$spooldir=&quot;$spooldir/$session&quot;;
+if(! -e $spooldir)
+{
+   mkdir($spooldir);
+}
+chmod(0700,$spooldir);
+
+if( -d $ldir)
+{
+    rmdir($ldir);
+}
+
+if( ! -l $ldir)
+{
+   system (&quot;ln -s $mdir $ldir&quot;);
+}
+
+if( -d $spooldir_lnk)
+{
+    rmdir($spooldir_lnk);
+}
+
+if( ! -l $spooldir_lnk)
+{
+   system (&quot;ln -s $spooldir $spooldir_lnk&quot;);
+}
 
 my $uname=$ENV{'USER'};
 
 my @dirs=split(':',$dirlist);
 for(my $i=0;$i&lt;@dirs;$i++)
 {
-       my $p=@dirs[$i];
-       if($type ne &quot;dir&quot;)
+       my $printspool=0;
+       my $mntpath;
+       if(@dirs[$i]=~m/__PRINT_SPOOL_/)
        {
-           $p=~s/\/ramdrive\/mnt\///;
+            @dirs[$i]=~s/__PRINT_SPOOL_//;
+            $printspool=1;
+            $mntpath=$spooldir;
        }
-       $p=~s/\//_/g;
-       mkdir(&quot;$mdir/$p&quot;);
-       my $mntpath=&quot;$mdir/$p&quot;;
+       else
+       {
+            my $p=@dirs[$i];
+            if($type ne &quot;dir&quot;)
+            {
+                $p=~s/\/ramdrive\/mnt\///;
+            }
+            $p=~s/\//_/g;
+            $p=~s/ /_/g;
+            $p=~s/_cygdrive_//g;
+            $p=~s/~//g;
+            mkdir(&quot;$mdir/$p&quot;);
+            $mntpath=&quot;$mdir/$p&quot;;
+       }
+
+       print &quot;starting:sudo x2gopgwrapper insertmount $session \&quot;$mntpath\&quot; $host\n&quot;;
        my $outp=`sudo x2gopgwrapper insertmount $session \&quot;$mntpath\&quot; $host`;
+       print &quot;result: $outp&quot;;
        if($outp =~ m/INSERT/)
        {
-            print &quot;inserted, sshfs  -o IdentityFile=$key,UserKnownHostsFile=$key.ident $user\@$host:@dirs[$i] $mdir/$p\n&quot;;
-            if(system(&quot;sshfs  -o IdentityFile=$key,UserKnownHostsFile=$key.ident $user\@$host:@dirs[$i] $mdir/$p&quot;)==0)
+            print &quot;inserted,\nsshfs  -o IdentityFile=$key,UserKnownHostsFile=$key.ident $user\@$host:\&quot;@dirs[$i]\&quot; \&quot;$mntpath\&quot; -p $port\n&quot;;
+            if(system(&quot;sshfs  -o Cipher=blowfish,IdentityFile=$key,UserKnownHostsFile=$key.ident $user\@$host:\&quot;@dirs[$i]\&quot; \&quot;$mntpath\&quot; -p $port 2&gt;&gt;~/mounts.log&quot;)==0)
             {   
         	print &quot;mount @dirs[$i] ok\n&quot;;
-        	my $fname=&quot;$ENV{'HOME'}/Desktop&quot;;
-		$p=@dirs[$i];
-        	$p=~s/\//%2f/g;
-		$fname=&quot;$fname/$p&quot;;
-		if($type eq &quot;dir&quot;)
-		{
-	    	    $fname=&quot;$fname(sshfs-disk)&quot;;
-		}
-		else
+		if(! $printspool)
 		{
-	    	    $fname=&quot;$fname(sshfs-removable)&quot;;
-		    $fname=~s/%2framdrive%2fmnt%2f//;
+        	    my $fname=&quot;$ENV{'HOME'}/Desktop&quot;;
+		    my $p=@dirs[$i];
+        	    $p=~s/\/cygdrive\///g;
+            	    $p=~s/\//_/g;
+		    $fname=&quot;$fname/$p&quot;;
+		    if($type eq &quot;dir&quot;)
+		    {
+	    		$fname=&quot;$fname(sshfs-disk)&quot;;
+		    }
+		    else
+		    {
+			if($fname =~ m/CDROM/)
+			{
+	    	    	    $fname=&quot;$fname(sshfs-cdrom)&quot;;
+			}
+			else
+			{
+	    	    	    $fname=&quot;$fname(sshfs-removable)&quot;;
+			}
+			$fname=~s/_ramdrive_mnt_//;
+		    }
+		    print &quot;fname: $fname\n&quot;;
+		    open(F,&quot;&gt;$fname&quot;);
+		    print F &quot;$mntpath\n$session\n\n\0&quot;;
+		    close(F);
 		}
-		print &quot;fname: $fname\n&quot;;
-		open(F,&quot;&gt;$fname&quot;);
-		print F &quot;$mntpath\n$session&quot;;
-		close(F);
     	    }
     	    else
     	    {
diff --git a/x2gopgwrapper_local b/x2gopgwrapper_local
index 7b44887..721cb7e 100755
--- a/x2gopgwrapper_local
+++ b/x2gopgwrapper_local
@@ -7,11 +7,11 @@ UNAME=$SUDO_USER
 case &quot;$1&quot; in
 
 getdisplays)
-  echo &quot;select '|'||display||'|' from sessions  where server = '$2';&quot;|psql -t x2go_sessions
+  echo &quot;select '|'||display||'|' from sessions;&quot;|psql -t x2go_sessions
   ;;
 
 getports)
-  echo &quot;select '|'||port||'|' from used_ports  where server = '$2';&quot;|psql -t x2go_sessions
+  echo &quot;select '|'||port||'|' from used_ports;&quot;|psql -t x2go_sessions
   ;;
 
 getservers)
@@ -22,10 +22,18 @@ listsessions)
   echo &quot;select agent_pid, session_id, display, server, status,\
    to_char(init_time,'DD.MM.YY*HH24:MI:SS'),cookie,client,gr_port,\
    sound_port,to_char(last_time,'DD.MM.YY*HH24:MI:SS'),uname,\
-   to_char(now()-init_time,'SSSS') from  sessions  \
+   to_char(now()-init_time,'SSSS'),fs_port from  sessions  \
    where status !='F' and server='$2' and uname='$UNAME' order by status desc;&quot;|psql -t x2go_sessions
   ;;
 
+listsessions_all)
+  echo &quot;select agent_pid, session_id, display, server, status,\
+   to_char(init_time,'DD.MM.YY*HH24:MI:SS'),cookie,client,gr_port,\
+   sound_port,to_char(last_time,'DD.MM.YY*HH24:MI:SS'),uname,\
+   to_char(now()-init_time,'SSSS'),fs_port  from  sessions  \
+   where status !='F' and uname='$UNAME' order by status desc;&quot;|psql -t x2go_sessions
+  ;;
+
 listsessionsroot)
   if [ &quot;$UNAME&quot; != &quot;root&quot; ]
   then
@@ -35,10 +43,76 @@ listsessionsroot)
   echo &quot;select agent_pid, session_id, display, server, status,\
    to_char(init_time,'DD.MM.YY*HH24:MI:SS'),cookie,client,gr_port,\
    sound_port,to_char(last_time,'DD.MM.YY*HH24:MI:SS'),uname,\
-   to_char(now()-init_time,'SSSS') from  sessions  \
+   to_char(now()-init_time,'SSSS'),fs_port  from  sessions  \
    where server='$2'  order by status desc;&quot;|psql -t x2go_sessions
   ;;
 
+listsessionsroot_all)
+  if [ &quot;$UNAME&quot; != &quot;root&quot; ]
+  then
+    echo &quot;$UNAME, You have not permission to do this job!&quot;
+    exit  
+  fi
+  echo &quot;select agent_pid, session_id, display, server, status,\
+   to_char(init_time,'DD.MM.YY*HH24:MI:SS'),cookie,client,gr_port,\
+   sound_port,to_char(last_time,'DD.MM.YY*HH24:MI:SS'),uname,\
+   to_char(now()-init_time,'SSSS'),fs_port  from  sessions  \
+   order by status desc;&quot;|psql -t x2go_sessions
+  ;;
+
+listsusp)
+  if [ &quot;$UNAME&quot; != &quot;root&quot; ]
+  then
+    echo &quot;$UNAME, You have not permission to do this job!&quot;
+    exit  
+  fi
+  echo &quot;select session_id, display, uname, server,extract( day from now()-last_time)*24*60+extract(hour from now()-last_time)*60+extract(minute from now()-last_time)\
+   from sessions where server='$2' and status='S';&quot;|psql -t x2go_sessions
+  ;;
+
+listallrunning)
+  if [ &quot;$UNAME&quot; != &quot;root&quot; ]
+  then
+    echo &quot;$UNAME, You have not permission to do this job!&quot;
+    exit  
+  fi
+  echo &quot;select agent_pid, session_id, display, server, status,\
+   to_char(init_time,'DD.MM.YY*HH24:MI:SS'),cookie,client,gr_port,\
+   sound_port,to_char(last_time,'DD.MM.YY*HH24:MI:SS'),uname,\
+   to_char(now()-init_time,'SSSS'),fs_port  from  sessions  \
+   where status='R';&quot;|psql -t x2go_sessions
+  ;;
+
+listmails)
+  if [ &quot;$UNAME&quot; != &quot;root&quot; ]
+  then
+    echo &quot;$UNAME, You have not permission to do this job!&quot;
+    exit  
+  fi
+  echo &quot;select user_messages.mess_id,sessions.session_id,\
+      sessions.uname,sessions.display from sessions,user_messages,\
+      messages where sessions.uname=user_messages.uname and sessions.status!='F'\
+      and messages.mess_id=user_messages.mess_id and sessions.server='$2';&quot;|psql -t x2go_sessions
+  ;;
+
+getmail)
+  if [ &quot;$UNAME&quot; != &quot;root&quot; ]
+  then
+    echo &quot;$UNAME, You have not permission to do this job!&quot;
+    exit  
+  fi
+  echo &quot;select message from messages where mess_id='$2';&quot;|psql -t x2go_sessions
+  ;;
+
+rmmail)
+  if [ &quot;$UNAME&quot; != &quot;root&quot; ]
+  then
+    echo &quot;$UNAME, You have not permission to do this job!&quot;
+    exit  
+  fi
+  echo &quot;delete from user_messages where mess_id='$2' and uname='$3';&quot;|psql -t x2go_sessions
+  ;;
+
 rmsessionsroot)
   if [ &quot;$UNAME&quot; != &quot;root&quot; ]
   then
@@ -72,7 +146,7 @@ insertsession)
 
 createsession)
   echo &quot;update sessions set status='R',last_time=now(),cookie='$2',agent_pid='$3',\
-   client='$4',gr_port='$5',sound_port='$6' where session_id='$7' and uname='$UNAME';&quot;|psql x2go_sessions
+   client='$4',gr_port='$5',sound_port='$6',fs_port='$7' where session_id='$8' and uname='$UNAME';&quot;|psql x2go_sessions
   ;;
 
 insertport)
diff --git a/x2gopgwrapper_net b/x2gopgwrapper_net
index 10c1b54..a3b9275 100755
--- a/x2gopgwrapper_net
+++ b/x2gopgwrapper_net
@@ -9,91 +9,170 @@ UNAME=$SUDO_USER
 case &quot;$2&quot; in
 
 getdisplays)
-  ssh -i ~postgres/.ssh/id_dsa postgres@$SERVER &quot;echo \&quot;select '|'||display||'|' from sessions  where server = '$3';\&quot;|psql -t x2go_sessions&quot;
+  ssh -i /root/.x2go/ssh/.pg/id_dsa postgres@$SERVER &quot;echo \&quot;select '|'||display||'|' from sessions;\&quot;|psql -t x2go_sessions&quot;
   ;;
 
 getports)
-  ssh -i ~postgres/.ssh/id_dsa postgres@$SERVER &quot;echo \&quot;select '|'||port||'|' from used_ports  where server = '$3';\&quot;|psql -t x2go_sessions&quot;
+  ssh -i /root/.x2go/ssh/.pg/id_dsa postgres@$SERVER &quot;echo \&quot;select '|'||port||'|' from used_ports;\&quot;|psql -t x2go_sessions&quot;
   ;;
 
 getservers)
-  ssh -i ~postgres/.ssh/id_dsa postgres@$SERVER &quot;echo \&quot;select server,count(*) from sessions where status != 'F' group by server;\&quot;|psql -t x2go_sessions&quot;
+  ssh -i /root/.x2go/ssh/.pg/id_dsa postgres@$SERVER &quot;echo \&quot;select server,count(*) from sessions where status != 'F' group by server;\&quot;|psql -t x2go_sessions&quot;
   ;;
 
 listsessions)
-  ssh -i ~postgres/.ssh/id_dsa postgres@$SERVER &quot;echo \&quot;select agent_pid, session_id, display, server, status,\
+  ssh -i /root/.x2go/ssh/.pg/id_dsa postgres@$SERVER &quot;echo \&quot;select agent_pid, session_id, display, server, status,\
    to_char(init_time,'DD.MM.YY*HH24:MI:SS'),cookie,client,gr_port,\
    sound_port,to_char(last_time,'DD.MM.YY*HH24:MI:SS'),uname,\
-   to_char(now()-init_time,'SSSS') from  sessions  \
+   to_char(now()-init_time,'SSSS'),fs_port from  sessions  \
    where status !='F' and server='$3' and uname='$UNAME' order by status desc;\&quot;|psql -t x2go_sessions&quot;
   ;;
 
+listsessions_all)
+  ssh -i /root/.x2go/ssh/.pg/id_dsa postgres@$SERVER &quot;echo \&quot;select agent_pid, session_id, display, server, status,\
+   to_char(init_time,'DD.MM.YY*HH24:MI:SS'),cookie,client,gr_port,\
+   sound_port,to_char(last_time,'DD.MM.YY*HH24:MI:SS'),uname,\
+   to_char(now()-init_time,'SSSS'),fs_port  from  sessions  \
+   where status !='F' and uname='$UNAME' order by status desc;\&quot;|psql -t x2go_sessions&quot;
+  ;;
+
 listsessionsroot)
   if [ &quot;$UNAME&quot; != &quot;root&quot; ]
   then
     echo &quot;$UNAME, You have not permission to do this job!&quot;
     exit  
   fi
-  ssh -i ~postgres/.ssh/id_dsa postgres@$SERVER &quot;echo \&quot;select agent_pid, session_id, display, server, status,\
+  ssh -i /root/.x2go/ssh/.pg/id_dsa postgres@$SERVER &quot;echo \&quot;select agent_pid, session_id, display, server, status,\
    to_char(init_time,'DD.MM.YY*HH24:MI:SS'),cookie,client,gr_port,\
    sound_port,to_char(last_time,'DD.MM.YY*HH24:MI:SS'),uname,\
-   to_char(now()-init_time,'SSSS') from  sessions  \
+   to_char(now()-init_time,'SSSS'),fs_port  from  sessions  \
    where server='$3'  order by status desc;\&quot;|psql -t x2go_sessions&quot;
   ;;
 
+listsessionsroot_all)
+  if [ &quot;$UNAME&quot; != &quot;root&quot; ]
+  then
+    echo &quot;$UNAME, You have not permission to do this job!&quot;
+    exit  
+  fi
+  ssh -i /root/.x2go/ssh/.pg/id_dsa postgres@$SERVER &quot;echo \&quot;select agent_pid, session_id, display, server, status,\
+   to_char(init_time,'DD.MM.YY*HH24:MI:SS'),cookie,client,gr_port,\
+   sound_port,to_char(last_time,'DD.MM.YY*HH24:MI:SS'),uname,\
+   to_char(now()-init_time,'SSSS'),fs_port  from  sessions  \
+   order by status desc;\&quot;|psql -t x2go_sessions&quot;
+  ;;
+
+listsusp)
+  if [ &quot;$UNAME&quot; != &quot;root&quot; ]
+  then
+    echo &quot;$UNAME, You have not permission to do this job!&quot;
+    exit  
+  fi
+  ssh -i /root/.x2go/ssh/.pg/id_dsa postgres@$SERVER &quot;echo \&quot;select session_id, display, uname, server,extract( day from now()-last_time)*24*60+extract(hour from now()-last_time)*60+extract(minute from now()-last_time)\
+  from sessions where server='$3' and status='S';\&quot;|psql -t x2go_sessions&quot;
+  ;;
+
+
+listallrunning)
+  if [ &quot;$UNAME&quot; != &quot;root&quot; ]
+  then
+    echo &quot;$UNAME, You have not permission to do this job!&quot;
+    exit  
+  fi
+  ssh -i /root/.x2go/ssh/.pg/id_dsa postgres@$SERVER &quot;echo \&quot;select agent_pid, session_id, display, server, status,\
+   to_char(init_time,'DD.MM.YY*HH24:MI:SS'),cookie,client,gr_port,\
+   sound_port,to_char(last_time,'DD.MM.YY*HH24:MI:SS'),uname,\
+   to_char(now()-init_time,'SSSS'),fs_port  from  sessions  \
+   where status='R';\&quot;|psql -t x2go_sessions&quot;
+  ;;
+
+listmails)
+  if [ &quot;$UNAME&quot; != &quot;root&quot; ]
+  then
+    echo &quot;$UNAME, You have not permission to do this job!&quot;
+    exit  
+  fi
+  ssh -i /root/.x2go/ssh/.pg/id_dsa postgres@$SERVER &quot;echo \&quot;select user_messages.mess_id,sessions.session_id,\
+      sessions.uname,sessions.display from sessions,user_messages,\
+      messages where sessions.uname=user_messages.uname and sessions.status!='F'\
+      and messages.mess_id=user_messages.mess_id and sessions.server='$3';\&quot;|psql -t x2go_sessions&quot;
+  ;;
+
+getmail)
+  if [ &quot;$UNAME&quot; != &quot;root&quot; ]
+  then
+    echo &quot;$UNAME, You have not permission to do this job!&quot;
+    exit  
+  fi
+  ssh -i /root/.x2go/ssh/.pg/id_dsa postgres@$SERVER &quot;echo \&quot;select message\
+      from messages where mess_id='$3';\&quot;|psql -t x2go_sessions&quot;
+  ;;
+
+
+rmmail)
+  if [ &quot;$UNAME&quot; != &quot;root&quot; ]
+  then
+    echo &quot;$UNAME, You have not permission to do this job!&quot;
+    exit  
+  fi
+  ssh -i /root/.x2go/ssh/.pg/id_dsa postgres@$SERVER &quot;echo \&quot;delete from \
+  user_messages where mess_id='$3' and uname='$4';\&quot;|psql -t x2go_sessions&quot;
+  ;;
+
+
 rmsessionsroot)
   if [ &quot;$UNAME&quot; != &quot;root&quot; ]
   then
     echo &quot;$UNAME, You have not permission to do this job!&quot;
     exit  
   fi
-  ssh -i ~postgres/.ssh/id_dsa postgres@$SERVER &quot;echo \&quot;delete from  sessions  \
+  ssh -i /root/.x2go/ssh/.pg/id_dsa postgres@$SERVER &quot;echo \&quot;delete from  sessions  \
    where session_id='$3' ;\&quot;|psql -t x2go_sessions&quot;
   ;;
 
 
 getagent)
-  ssh -i ~postgres/.ssh/id_dsa postgres@$SERVER &quot;echo \&quot;select agent_pid from sessions  where session_id = '$3';\&quot;|psql -t x2go_sessions&quot;
+  ssh -i /root/.x2go/ssh/.pg/id_dsa postgres@$SERVER &quot;echo \&quot;select agent_pid from sessions  where session_id = '$3';\&quot;|psql -t x2go_sessions&quot;
   ;;
 
 getdisplay)
-  ssh -i ~postgres/.ssh/id_dsa postgres@$SERVER &quot;echo \&quot;select display from sessions  where session_id = '$3';\&quot;|psql -t x2go_sessions&quot;
+  ssh -i /root/.x2go/ssh/.pg/id_dsa postgres@$SERVER &quot;echo \&quot;select display from sessions  where session_id = '$3';\&quot;|psql -t x2go_sessions&quot;
   ;;
 
 changestatus)
-  ssh -i ~postgres/.ssh/id_dsa postgres@$SERVER &quot;echo \&quot;update sessions set last_time=now(),status='$3' where session_id = '$4' and uname='$UNAME';\&quot;|psql -t x2go_sessions&quot;
+  ssh -i /root/.x2go/ssh/.pg/id_dsa postgres@$SERVER &quot;echo \&quot;update sessions set last_time=now(),status='$3' where session_id = '$4' and uname='$UNAME';\&quot;|psql -t x2go_sessions&quot;
   ;;
 
 resume)
-  ssh -i ~postgres/.ssh/id_dsa postgres@$SERVER &quot;echo \&quot;update sessions set last_time=now(),status='R',client='$3' where session_id = '$4' and uname='$UNAME';\&quot;|psql -t x2go_sessions&quot;
+  ssh -i /root/.x2go/ssh/.pg/id_dsa postgres@$SERVER &quot;echo \&quot;update sessions set last_time=now(),status='R',client='$3' where session_id = '$4' and uname='$UNAME';\&quot;|psql -t x2go_sessions&quot;
   ;;
 
 insertsession)
-  ssh -i ~postgres/.ssh/id_dsa postgres@$SERVER &quot;echo \&quot;insert into sessions (display,server,uname,session_id) values \
+  ssh -i /root/.x2go/ssh/.pg/id_dsa postgres@$SERVER &quot;echo \&quot;insert into sessions (display,server,uname,session_id) values \
   ('$3','$4','$UNAME','$5');\&quot;|psql x2go_sessions&quot;
   ;;
 
 createsession)
-  ssh -i ~postgres/.ssh/id_dsa postgres@$SERVER &quot;echo \&quot;update sessions set status='R',last_time=now(),cookie='$3',agent_pid='$4',\
-   client='$5',gr_port='$6',sound_port='$7' where session_id='$8' and uname='$UNAME';\&quot;|psql x2go_sessions&quot;
+  ssh -i /root/.x2go/ssh/.pg/id_dsa postgres@$SERVER &quot;echo \&quot;update sessions set status='R',last_time=now(),cookie='$3',agent_pid='$4',\
+   client='$5',gr_port='$6',sound_port='$7',fs_port='$8' where session_id='$9' and uname='$UNAME';\&quot;|psql x2go_sessions&quot;
   ;;
 
 insertport)
-  ssh -i ~postgres/.ssh/id_dsa postgres@$SERVER &quot;echo \&quot;insert into used_ports (server,session_id,port) values \
+  ssh -i /root/.x2go/ssh/.pg/id_dsa postgres@$SERVER &quot;echo \&quot;insert into used_ports (server,session_id,port) values \
   ('$3','$4','$5');\&quot;|psql x2go_sessions&quot;
   ;;
 
 insertmount)
-  ssh -i ~postgres/.ssh/id_dsa postgres@$SERVER &quot;echo \&quot;insert into mounts (session_id,path,client) values \
+  ssh -i /root/.x2go/ssh/.pg/id_dsa postgres@$SERVER &quot;echo \&quot;insert into mounts (session_id,path,client) values \
   ('$3','$4','$5');\&quot;|psql x2go_sessions&quot;
   ;;
 
 deletemount)
-  ssh -i ~postgres/.ssh/id_dsa postgres@$SERVER &quot;echo \&quot;delete from mounts where session_id='$3' and path='$4';\&quot;|psql x2go_sessions&quot;
+  ssh -i /root/.x2go/ssh/.pg/id_dsa postgres@$SERVER &quot;echo \&quot;delete from mounts where session_id='$3' and path='$4';\&quot;|psql x2go_sessions&quot;
   ;;
 
 getmounts)
-  ssh -i ~postgres/.ssh/id_dsa postgres@$SERVER &quot;echo \&quot;select client,path from mounts where session_id = '$3';\&quot;|psql -t x2go_sessions&quot;
+  ssh -i /root/.x2go/ssh/.pg/id_dsa postgres@$SERVER &quot;echo \&quot;select client,path from mounts where session_id = '$3';\&quot;|psql -t x2go_sessions&quot;
   ;;
 
 *)
diff --git a/x2goresume-session b/x2goresume-session
index 5fb7da0..f55a36d 100755
--- a/x2goresume-session
+++ b/x2goresume-session
@@ -1,4 +1,5 @@
-#!/bin/sh
+#!/bin/bash
+
 SESSION_NAME=$1
 X2GO_GEOMETRY=$2
 X2GO_LINK=$3
diff --git a/x2goruncommand b/x2goruncommand
index b1c3d9c..66071db 100755
--- a/x2goruncommand
+++ b/x2goruncommand
@@ -1,19 +1,106 @@
 #!/bin/bash
+
 DISPLAY=&quot;:$1&quot;
 X2GO_AGENT_PID=$2
 X2GO_SESSION=$3
-ARTS_SERVER=localhost:$4
 cmd=$5
+sndsys=$6
+X2GO_SESS_TYPE=$7
 export DISPLAY
 export X2GO_AGENT_PID
 export X2GO_SESSION
-export ARTS_SERVER
-$cmd 
+cmd=`echo $cmd |sed 's/X2GO_SPACE_CHAR/ /g'`
 
-kill -9 $X2GO_AGENT_PID
+X2GO_ROOT=${HOME}/.x2go
+MESSAGE_FILE=$X2GO_ROOT/C-$X2GO_SESSION/cmdoutput
+echo &quot;exec $cmd&quot; &gt;&gt; $MESSAGE_FILE
 
+if [ &quot;$sndsys&quot; == &quot;esd&quot; ]
+then
+  export ESPEAKER=localhost:$4
+elif [ &quot;$sndsys&quot; == &quot;arts&quot; ]
+then 
+  export ARTS_SERVER=localhost:$4
+fi
 
-sudo x2gopgwrapper changestatus 'F' $X2GO_SESSION  &gt; /dev/null
+if [ &quot;$cmd&quot; == &quot;WWWBROWSER&quot; ]
+then
+     if [ -e &quot;/usr/bin/firefox&quot; ]
+     then
+         cmd=&quot;/usr/bin/firefox&quot;
+     elif  [ -e &quot;/usr/bin/iceweasel&quot; ]
+     then
+         cmd=&quot;/usr/bin/iceweasel&quot;
+     elif  [ -e &quot;/usr/bin/abrowser&quot; ]
+     then
+         cmd=&quot;/usr/bin/abrowser&quot;
+     elif  [ -e &quot;/usr/bin/konqueror&quot; ]
+     then
+         cmd=&quot;/usr/bin/konqueror&quot;
+     elif  [ -e &quot;/usr/bin/galeon&quot; ]
+     then
+         cmd=&quot;/usr/bin/galeon&quot;
+     fi
+fi
+
+if [ &quot;$cmd&quot; == &quot;MAILCLIENT&quot; ]
+then
+     if [ -e &quot;/usr/bin/thunderbird&quot; ]
+     then
+         cmd=&quot;/usr/bin/thunderbird&quot;
+     elif  [ -e &quot;/usr/bin/icedove&quot; ]
+     then
+         cmd=&quot;/usr/bin/icedove&quot;
+     elif  [ -e &quot;/usr/bin/kmail&quot; ]
+     then
+         cmd=&quot;/usr/bin/kmail&quot;
+     elif  [ -e &quot;/usr/bin/evolution&quot; ]
+     then
+         cmd=&quot;/usr/bin/evolution&quot;
+     fi
+fi
+
+if [ &quot;$cmd&quot; == &quot;OFFICE&quot; ]
+then
+     if [ -e &quot;/usr/bin/ooffice&quot; ]
+     then
+         cmd=&quot;/usr/bin/ooffice&quot;
+     fi
+fi
 
+if [ &quot;$cmd&quot; == &quot;TERMINAL&quot; ]
+then
+     if [ -e &quot;/usr/bin/konsole&quot; ]
+     then
+         cmd=&quot;/usr/bin/konsole&quot;
+     elif  [ -e &quot;/usr/bin/gnome-terminal&quot; ]
+     then
+         cmd=&quot;/usr/bin/gnome-terminal&quot;
+     elif  [ -e &quot;/usr/bin/rxvt&quot; ]
+     then
+         cmd=&quot;/usr/bin/rxvt&quot;
+     elif  [ -e &quot;/usr/bin/xterm&quot; ]
+     then
+         cmd=&quot;/usr/bin/xterm&quot;
+     fi
+fi
+
+EXEC=`which $cmd`
+if [ &quot;$EXEC&quot; != &quot;&quot; ] &amp;&amp; [ -x `which $cmd` ]
+then
+  $cmd
+  if [  &quot;$X2GO_SESS_TYPE&quot; == &quot;R&quot; ] #### some applications can quit immediately, we waiting until x2goagent exists
+  then
+     while [ -d /proc/$X2GO_AGENT_PID ]
+     do
+         sleep 1
+     done
+  fi
+else
+   echo &quot;X2GORUNCOMMAND ERR NOEXEC:$cmd&quot; &gt; $MESSAGE_FILE
+fi 
+
+kill -TERM  $X2GO_AGENT_PID
+sudo x2gopgwrapper changestatus 'F' $X2GO_SESSION  &gt; /dev/null
 export HOSTNAME
 x2goumount_session $X2GO_SESSION
diff --git a/x2gostartagent b/x2gostartagent
index a734bc8..cf48c4d 100755
--- a/x2gostartagent
+++ b/x2gostartagent
@@ -1,4 +1,4 @@
-#!/bin/sh
+#!/bin/bash
 
 X2GO_PORT=49 #First port for X2GO=50
 SSH_PORT=30000 #First ssh port 30001
@@ -13,10 +13,26 @@ X2GO_TYPE=$4
 X2GO_KBD_LAYOUT=$5
 X2GO_KBD_TYPE=$6
 X2GO_SET_KBD=$7
-
+X2GO_STYPE=$8
+X2GO_CMD=$9
 X2GO_RESIZE=0
 X2GO_FULLSCREEN=0
 
+
+export NX_CLIENT=/usr/bin/x2gosuspend-agent
+
+COLORDEPTH=`echo &quot;$X2GO_TYPE&quot;|awk '{split($0,a,&quot;-depth_&quot;); print a[2]}'`
+
+SESSION_TYPE=&quot;D&quot;
+
+if [ &quot;$X2GO_STYPE&quot; == &quot;R&quot; ]
+then
+  SESSION_TYPE=&quot;R&quot;
+elif  [ &quot;$X2GO_STYPE&quot; == &quot;S&quot; ]
+then
+  SESSION_TYPE=&quot;S&quot;
+fi
+
 if [ &quot;$X2GO_CLIENT&quot; == &quot;&quot; ]
 then
    X2GO_CLIENT=$HOSTNAME
@@ -31,16 +47,24 @@ do
  X2GO_PORT=$(($X2GO_PORT + 1))
  X2GO_PORT=`echo &quot;for(\\$i=$X2GO_PORT;\\$br ne \&quot;true\&quot;;\\$i++){ if(\&quot;$USED_DISPLAYS\&quot; =~ m/\\|\\$i\\|/){\\$br=\&quot;false\&quot;;}else{\\$br=\&quot;true\&quot;;print \\$i;}}&quot;|perl`
 
- 
-SESSION_NAME=${USER}-${X2GO_PORT}-`date +&quot;%s&quot;`
-OUTPUT=`sudo x2gopgwrapper insertsession $X2GO_PORT $HOSTNAME $SESSION_NAME`
+ if  [ -e &quot;/tmp/.X${X2GO_PORT}-lock&quot; ] || [ -e &quot;/tmp/.X11-unix/X${X2GO_PORT}&quot; ] 
+ then
+    OUTPUT=&quot;XXX&quot;
+ else
+   SESSION_NAME=${USER}-${X2GO_PORT}-`date +&quot;%s&quot;`
+   if [ &quot;$COLORDEPTH&quot; != &quot;&quot; ]
+   then
+       SESSION_NAME=&quot;$SESSION_NAME&quot;_st${SESSION_TYPE}${X2GO_CMD}_dp${COLORDEPTH}
+   fi
+   OUTPUT=`sudo x2gopgwrapper insertsession $X2GO_PORT $HOSTNAME $SESSION_NAME`
+ fi 
 done
 
 
 USED_PORTS=`sudo x2gopgwrapper getports $HOSTNAME`
 
 
-while [ &quot;$GR_PORT&quot; == &quot;&quot; ] || [ &quot;$SOUND_PORT&quot; == &quot;&quot; ]
+while [ &quot;$GR_PORT&quot; == &quot;&quot; ] || [ &quot;$SOUND_PORT&quot; == &quot;&quot; ] || [ &quot;$FS_PORT&quot; == &quot;&quot; ]
 do
   OUTPUT=&quot;&quot;
   while [ &quot;`echo \&quot;$OUTPUT\&quot; | awk '{print $1,$3}'`&quot; != &quot;INSERT 1&quot; ]
@@ -65,8 +89,11 @@ do
   if [ &quot;$GR_PORT&quot; == &quot;&quot; ]
   then
      GR_PORT=$SSH_PORT
-  else
+  elif [ &quot;$SOUND_PORT&quot; == &quot;&quot; ]
+  then
      SOUND_PORT=$SSH_PORT
+  else
+     FS_PORT=$SSH_PORT
   fi
 done
 
@@ -131,15 +158,13 @@ SAVED_DISPLAY=$DISPLAY
 DISPLAY=nx/nx,options=${SESSION_DIR}/options:${X2GO_PORT} 
 export DISPLAY
 
-DEFAULT_FONT_PATH=$(echo $(grep -v '^ *#' /etc/X11/xorg.conf | grep FontPath  | awk '{print $2}' | sed -r &quot;s/^[\&quot;']|[\&quot;']$//g&quot;) | sed 's/ /,/g')
-
 
-LD_LIBRARY_PATH=$X2GO_LIB x2goagent  -geometry ${X2GO_GEOMETRY} -name &quot;X2GO-${SESSION_NAME}&quot; -fp $DEFAULT_FONT_PATH  ${NX_AGENT} 2&gt;${SESSION_DIR}/session.log &amp;
+LD_LIBRARY_PATH=$X2GO_LIB x2goagent  -$SESSION_TYPE -geometry ${X2GO_GEOMETRY} -name &quot;X2GO-${SESSION_NAME}&quot;  ${NX_AGENT} 2&gt;${SESSION_DIR}/session.log &amp;
 
 X2GO_AGENT_PID=$!
 
 X2GO_SND_PORT=1024
-sudo x2gopgwrapper createsession $X2GO_COOKIE $X2GO_AGENT_PID $X2GO_CLIENT $GR_PORT $SOUND_PORT $SESSION_NAME &gt; /dev/null
+sudo x2gopgwrapper createsession $X2GO_COOKIE $X2GO_AGENT_PID $X2GO_CLIENT $GR_PORT $SOUND_PORT $FS_PORT $SESSION_NAME &gt; /dev/null
 
 echo $X2GO_PORT
 echo $X2GO_COOKIE
@@ -147,3 +172,4 @@ echo $X2GO_AGENT_PID
 echo $SESSION_NAME
 echo $GR_PORT
 echo $SOUND_PORT
+echo $FS_PORT
\ No newline at end of file
diff --git a/x2gosuspend-agent b/x2gosuspend-agent
new file mode 100755
index 0000000..95219b7
--- /dev/null
+++ b/x2gosuspend-agent
@@ -0,0 +1,10 @@
+#!/usr/bin/perl
+
+shift;
+shift;
+shift;
+
+my $capt=shift;
+my @words=split(&quot; &quot;,$capt);
+
+system(&quot;/usr/bin/x2gosuspend-session @words[2] &gt; /dev/null&quot;);
\ No newline at end of file
diff --git a/x2gosuspend-session b/x2gosuspend-session
index 6fdd9f1..db819f3 100755
--- a/x2gosuspend-session
+++ b/x2gosuspend-session
@@ -1,4 +1,5 @@
-#!/bin/sh
+#!/bin/bash
+
 SESSION_NAME=$1
 
 
diff --git a/x2goterminate-session b/x2goterminate-session
index 2e9b7ca..59560d4 100755
--- a/x2goterminate-session
+++ b/x2goterminate-session
@@ -1,10 +1,11 @@
-#!/bin/sh
+#!/bin/bash
+
 SESSION_NAME=$1
 X2GO_AGENT_PID=`sudo x2gopgwrapper getagent $SESSION_NAME` 
 X2GO_AGENT_PID=`echo &quot;$X2GO_AGENT_PID&quot;| awk {'print $1'}`
 
 sudo x2gopgwrapper changestatus 'F' $SESSION_NAME  &gt; /dev/null
 
-kill $X2GO_AGENT_PID
+kill -TERM $X2GO_AGENT_PID
 export HOSTNAME
 x2goumount_session $SESSION_NAME
diff --git a/x2goumount b/x2goumount
index 1d0f6da..928c3c1 100755
--- a/x2goumount
+++ b/x2goumount
@@ -7,9 +7,18 @@ my $dir=&lt;F&gt;;
 my $session=&lt;F&gt;;
 close(F);
 
+$session=~s/\n//;
+
 chomp($dir);
 my $uname=$ENV{'USER'};
 
+my $use_zenity=0;
+
+if($ENV{'GNOME_DESKTOP_SESSION_ID'} ne &quot;&quot;)
+{
+     $use_zenity=1;
+}
+
 if(system( &quot;fusermount -u $dir&quot; ) == 0)
 {
      unlink($fname);
@@ -18,5 +27,12 @@ if(system( &quot;fusermount -u $dir&quot; ) == 0)
 }
 else
 {
-    system(&quot;x2gomessage --type error --code 0 --text $dir&amp;&quot;);
+    if($use_zenity == 0)
+    {
+         system(&quot;kdialog --error \&quot;Can't umount:\n $dir\&quot;&amp;&quot;);
+    }
+    else
+    {
+         system(&quot;zenity --error --text \&quot;Can't umount:\n $dir\&quot;&amp;&quot;);
+    }
 }
diff --git a/x2goumount_session b/x2goumount_session
index 2f1af56..64b212f 100755
--- a/x2goumount_session
+++ b/x2goumount_session
@@ -32,6 +32,13 @@ open (F,&quot;&lt;/etc/mtab&quot;) or die &quot;Can't open /etc/mtab for reading&quot;;
 my @mounts=&lt;F&gt;;
 close(F);
 
+my $use_zenity=0;
+
+if($ENV{'GNOME_DESKTOP_SESSION_ID'} ne &quot;&quot;)
+{
+     $use_zenity=1;
+}
+
 
 for($i=0;$i&lt;@outp;$i++)
 {
@@ -70,12 +77,19 @@ break:
        else
        {
                  $ENV{'DISPLAY'}=&quot;:$display&quot;;
-                 system(&quot;x2gomessage --type error --code 0 --text @line[1]&amp;&quot;);
+                 if($use_zenity == 0)
+		 {
+        	    system(&quot;kdialog --error \&quot;@line[1]\&quot;&amp;&quot;);
+		 }
+		 else
+		 {
+                    system(&quot;zenity --error --text \&quot;@line[1]\&quot;&amp;&quot;);
+		 }
        }
     }
     if(! $found)
     {
-	$remote=~s/\//%2f/g;
+	$remote=~s/\//_/g;
 	$remote=(split(&quot;:&quot;,&quot;$remote&quot;))[1];
 	$remote=&quot;$ENV{'HOME'}/Desktop/$remote&quot;;
 	if( -e &quot;$remote(sshfs-disk)&quot;)
@@ -88,7 +102,11 @@ break:
 	{
 	   unlink(&quot;$remote(sshfs-removable)&quot;);
 	}
-        print &quot;$session \&quot;@line[1]\&quot;\n&quot;; 
+	if( -e &quot;$remote(sshfs-cdrom)&quot;)
+	{
+	   unlink(&quot;$remote(sshfs-cdrom)&quot;);
+	}
+        #print &quot;$session \&quot;@line[1]\&quot;\n&quot;; 
 	system(&quot;sudo x2gopgwrapper deletemount $session \&quot;@line[1]\&quot;&gt; /dev/null&quot;);
         rmdir (@line[1]);
     }


hooks/post-receive
-- 
x2goserver.git (X2Go Server)

This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;x2goserver.git&quot; (X2Go Server).

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018239.html">[X2Go-Commits] x2goserver.git - build-baikal (branch) updated:	3.0.1-9
</A></li>
	<LI>Next message: <A HREF="018229.html">[X2Go-Commits] x2goserver.git - build-baikal (branch) updated:	3.0.99-2-3-g17f0a8f
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18249">[ date ]</a>
              <a href="thread.html#18249">[ thread ]</a>
              <a href="subject.html#18249">[ subject ]</a>
              <a href="author.html#18249">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/x2go-commits">More information about the X2Go-commits
mailing list</a><br>
</body></html>
