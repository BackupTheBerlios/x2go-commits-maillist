<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [X2Go-Commits] x2goserver.git - build-baikal (branch) updated:	3.1.1.3-20-gee00478
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/x2go-commits/2014-January/index.html" >
   <LINK REL="made" HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2Go-Commits%5D%20x2goserver.git%20-%20build-baikal%20%28branch%29%20updated%3A%0A%093.1.1.3-20-gee00478&In-Reply-To=%3C20140103195129.799A65DB91%40ymir%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018852.html">
   <LINK REL="Next"  HREF="018792.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[X2Go-Commits] x2goserver.git - build-baikal (branch) updated:	3.1.1.3-20-gee00478</H1>
    <B>X2Go dev team</B> 
    <A HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2Go-Commits%5D%20x2goserver.git%20-%20build-baikal%20%28branch%29%20updated%3A%0A%093.1.1.3-20-gee00478&In-Reply-To=%3C20140103195129.799A65DB91%40ymir%3E"
       TITLE="[X2Go-Commits] x2goserver.git - build-baikal (branch) updated:	3.1.1.3-20-gee00478">git-admin at x2go.org
       </A><BR>
    <I>Fri Jan  3 20:51:29 CET 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="018852.html">[X2Go-Commits] x2goserver.git - build-baikal (branch) updated:	3.1.1.3-19-g973db62
</A></li>
        <LI>Next message: <A HREF="018792.html">[X2Go-Commits] x2goserver.git - build-baikal (branch) updated:	3.1.1.3-25-g73c4040
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18869">[ date ]</a>
              <a href="thread.html#18869">[ thread ]</a>
              <a href="subject.html#18869">[ subject ]</a>
              <a href="author.html#18869">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch, build-baikal has been updated
       via  ee00478b155558b87456288aded9c77604313bfa (commit)
      from  973db626cf5d84e7c62bb6dc58c094f86512db1a (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
-----------------------------------------------------------------------

Summary of changes:
 Makefile                                      |   20 +++++++++++++++++++-
 Makefile.PL                                   |    9 +++++++++
 x2goserver/lib/x2gologlevel.pm =&gt; X2Go/Log.pm |   12 +++++++++++-
 debian/changelog                              |   12 ++++++++----
 debian/control                                |   18 ++++++++++++++++++
 debian/libx2go-log-perl.install               |    2 ++
 debian/rules                                  |    6 +++++-
 x2goserver-compat/Makefile                    |    2 +-
 x2goserver-extensions/Makefile                |    2 +-
 x2goserver-fmbindings/Makefile                |    2 +-
 x2goserver-printing/Makefile                  |    2 +-
 x2goserver-printing/bin/x2goprint             |    4 ++--
 x2goserver-pyhoca/Makefile                    |    2 +-
 x2goserver-xsession/Makefile                  |    2 +-
 x2goserver/Makefile                           |    2 +-
 x2goserver/bin/x2gogetapps                    |    5 ++++-
 x2goserver/bin/x2gogetservers                 |    4 ++--
 x2goserver/bin/x2golistdesktops               |    4 ++--
 x2goserver/bin/x2golistmounts                 |    5 ++---
 x2goserver/bin/x2golistsessions               |    4 ++--
 x2goserver/bin/x2gomountdirs                  |    4 ++--
 x2goserver/bin/x2gosessionlimit               |    4 ++--
 x2goserver/bin/x2goshowblocks                 |    4 ++--
 x2goserver/bin/x2goumount-session             |    7 +++----
 x2goserver/lib/x2gochangestatus               |    4 ++--
 x2goserver/lib/x2gocreatesession              |    4 ++--
 x2goserver/lib/x2gogetagent                   |    4 ++--
 x2goserver/lib/x2gogetdisplays                |    4 ++--
 x2goserver/lib/x2gogetports                   |    4 ++--
 x2goserver/lib/x2gogetstatus                  |    4 ++--
 x2goserver/lib/x2goinsertport                 |    4 ++--
 x2goserver/lib/x2goinsertsession              |    4 ++--
 x2goserver/lib/x2golistsessions_sql           |    4 ++--
 x2goserver/lib/x2gologlevel                   |    5 ++---
 x2goserver/lib/x2goresume                     |    4 ++--
 x2goserver/lib/x2gormport                     |    4 ++--
 x2goserver/lib/x2gosqlitewrapper.pl           |   17 ++++-------------
 x2goserver/lib/x2gosuspend-agent              |    5 ++---
 x2goserver/lib/x2gosyslog                     |    4 ++--
 x2goserver/sbin/x2gocleansessions             |    5 ++---
 x2goserver/sbin/x2godbadmin                   |    5 ++---
 x2goserver/sbin/x2golistsessions_root         |    6 ++----
 42 files changed, 140 insertions(+), 89 deletions(-)
 create mode 100644 Makefile.PL
 rename x2goserver/lib/x2gologlevel.pm =&gt; X2Go/Log.pm (93%)
 create mode 100644 debian/libx2go-log-perl.install

The diff of changes is:
diff --git a/Makefile b/Makefile
index 3be40f9..df27aa0 100755
--- a/Makefile
+++ b/Makefile
@@ -4,11 +4,14 @@ RM_FILE=rm -f
 RM_DIR=rmdir -p --ignore-fail-on-non-empty
 
 DESTDIR=
-PREFIX=/usr/local
+PREFIX ?= /usr/local
 ETCDIR=/etc/x2go
 LIBDIR=$(PREFIX)/lib/x2go
 SHAREDIR=$(PREFIX)/share/x2go
 
+PERL ?= /usr/bin/perl
+PERL_INSTALLDIRS ?=
+
 all: build
 
 build: build-arch build-indep
@@ -24,6 +27,7 @@ build_man2html:
 	$(MAKE) -C x2goserver-pyhoca $@
 
 clean:
+	-$(MAKE) -f Makefile.perl clean
 	$(MAKE) -C x2goserver $@
 	$(MAKE) -C x2goserver-printing $@
 	$(MAKE) -C x2goserver-compat $@
@@ -32,6 +36,16 @@ clean:
 	$(MAKE) -C x2goserver-fmbindings $@
 	$(MAKE) -C x2goserver-pyhoca $@
 
+distclean:
+	-$(MAKE) -f Makefile.perl realclean
+	$(MAKE) -C x2goserver clean
+	$(MAKE) -C x2goserver-printing clean
+	$(MAKE) -C x2goserver-compat clean
+	$(MAKE) -C x2goserver-extensions clean
+	$(MAKE) -C x2goserver-xsession clean
+	$(MAKE) -C x2goserver-fmbindings clean
+	$(MAKE) -C x2goserver-pyhoca clean
+
 build-arch:
 	$(MAKE) -C x2goserver $@
 	$(MAKE) -C x2goserver-printing $@
@@ -42,6 +56,8 @@ build-arch:
 	$(MAKE) -C x2goserver-pyhoca $@
 
 build-indep:
+	$(PERL) Makefile.PL INSTALLDIRS=$(PERL_INSTALLDIRS)
+	$(MAKE) -f Makefile.perl
 	$(MAKE) -C x2goserver $@
 	$(MAKE) -C x2goserver-printing $@
 	$(MAKE) -C x2goserver-compat $@
@@ -51,6 +67,7 @@ build-indep:
 	$(MAKE) -C x2goserver-pyhoca $@
 
 install:
+	$(MAKE) -f Makefile.perl install
 	$(MAKE) -C x2goserver $@
 	$(MAKE) -C x2goserver-printing $@
 	$(MAKE) -C x2goserver-compat $@
@@ -60,6 +77,7 @@ install:
 	$(MAKE) -C x2goserver-pyhoca $@
 
 uninstall:
+	$(MAKE) -f Makefile.perl uninstall
 	$(MAKE) -C x2goserver-printing $@
 	$(MAKE) -C x2goserver-compat $@
 	$(MAKE) -C x2goserver-xsession $@
diff --git a/Makefile.PL b/Makefile.PL
new file mode 100644
index 0000000..68d6fde
--- /dev/null
+++ b/Makefile.PL
@@ -0,0 +1,9 @@
+#!/usr/bin/perl
+
+use ExtUtils::MakeMaker;
+
+WriteMakefile(FIRST_MAKEFILE =&gt; 'Makefile.perl',
+	      PMLIBDIRS =&gt; ['X2Go'],
+	      NAME =&gt; '',
+	      VERSION =&gt; '3.2.0.0',
+	     );
diff --git a/x2goserver/lib/x2gologlevel.pm b/X2Go/Log.pm
similarity index 93%
rename from x2goserver/lib/x2gologlevel.pm
rename to X2Go/Log.pm
index 1183e6c..0312b46 100644
--- a/x2goserver/lib/x2gologlevel.pm
+++ b/X2Go/Log.pm
@@ -20,7 +20,17 @@
 # Copyright (C) 2007-2012  Oleksandr Shneyder &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">oleksandr.shneyder at obviously-nice.de</A>&gt;
 # Copyright (C) 2007-2012  Heinz-Markus Graesing &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">heinz-m.graesing at obviously-nice.de</A>&gt;
 
-package x2gologlevel;
+package X2Go::Log;
+
+=head1 NAME
+
+X2Go::Log - X2Go Logging modules for Perl
+
+=head1 DESCRIPTION
+
+X2Go Log module X2Go components.
+
+=cut
 
 use strict;
 use Config::Simple;
diff --git a/debian/changelog b/debian/changelog
index 85fecec..260db0a 100644
--- a/debian/changelog
+++ b/debian/changelog
@@ -1,13 +1,14 @@
-x2goserver (3.1.1.4-0~x2go1) UNRELEASED; urgency=low
+x2goserver (3.2.0.0-0~x2go1) UNRELEASED; urgency=low
 
   [ Jan Engelhardt ]
-  * New upstream version (3.1.1.4):
+  * New upstream version (3.2.0.0):
     - Add -pie as linker flag. Fixes non-position-independent-executable
       (x2gosqlitewrapper.c). The executable is now completely position
       independent.
 
   [ Mike Gabriel ]
-  * New upstream version (3.1.1.4):
+  * Bump next upstream version to 3.2.0.0.
+  * New upstream version (3.2.0.0):
     - Fix x2gosessionlimit script.
     - Wrap padsp around rdesktop calls if pulse is used as audio protocol.
     - Add option ,,-r sound:local'' to rdesktop calls if pulse is enabled.
@@ -16,14 +17,17 @@ x2goserver (3.1.1.4-0~x2go1) UNRELEASED; urgency=low
       of Xorg's Xrandr library (partially closes #28).
     - Make sure when launching desktop session through the Xsession mechanism
       that the LD_LIBRARY_PATH variable stays intact. Closes #29.
+    - Transform x2gologlevel.pm into proper Perl module X2Go::Log
   * /debian/control:
     + Maintainer change in package: X2Go Developers &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">x2go-dev at lists.berlios.de</A>&gt;.
     + Depend on nx-libs (&gt;=3.5.0.15-0~) which has the Xrandr symlinks folder.
     + Add rdesktop and pulseaudio-utils to Suggests.
     + Priority: optional.
+    + Package X2Go::Log in separate package: libx2go-log-perl.
 
   [ Oleksandr Shneyder ]
-  * remove &quot;-nolisten tcp&quot; option with XDMCP sessions
+  * New upstream version (3.2.0.0):
+    - Remove &quot;-nolisten tcp&quot; option with XDMCP sessions.
 
  -- Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;  Tue, 03 Jul 2012 10:03:28 +0200
 
diff --git a/debian/control b/debian/control
index 4cfca15..90953dc 100644
--- a/debian/control
+++ b/debian/control
@@ -13,11 +13,29 @@ Homepage: <A HREF="http://code.x2go.org/releases/source/x2goserver">http://code.x2go.org/releases/source/x2goserver</A>
 Vcs-Git: <A HREF="git://code.x2go.org/x2goserver.git">git://code.x2go.org/x2goserver.git</A>
 Vcs-Browser: <A HREF="http://code.x2go.org/gitweb?p=x2goserver.git;a=summary">http://code.x2go.org/gitweb?p=x2goserver.git;a=summary</A>
 
+Package: libx2go-log-perl
+Architecture: any
+Section: perl
+Depends:
+ ${perl:Depends},
+ ${misc:Depends},
+Description: X2Go server daemon scripts
+ X2Go is a server based computing environment with
+    - session resuming
+    - low bandwidth support
+    - LDAP support
+    - client side mass storage mounting support
+    - audio support
+    - authentication by smartcard and USB stick
+ .
+ This package contains the X2Go::Log Perl module.
+
 Package: x2goserver
 Architecture: any
 Depends:
  ${shlibs:Depends},
  ${misc:Depends},
+ libx2go-log-perl (&gt;= ${source:Version}), libx2go-perl-log (&lt;&lt; ${source:Version}.1~),
  x2goagent (&gt;= 2:3.5.0.15-0~),
  lsof,
  openssh-client,
diff --git a/debian/libx2go-log-perl.install b/debian/libx2go-log-perl.install
new file mode 100644
index 0000000..c019a96
--- /dev/null
+++ b/debian/libx2go-log-perl.install
@@ -0,0 +1,2 @@
+usr/share/perl5/X2Go
+usr/share/man/man3
\ No newline at end of file
diff --git a/debian/rules b/debian/rules
index b32e08d..959a9e0 100755
--- a/debian/rules
+++ b/debian/rules
@@ -3,8 +3,12 @@
 %:
 	dh $@
 
+override_dh_auto_build:
+	PERL_INSTALLDIRS=vendor dh_auto_build
+
 override_dh_auto_install:
-	make -f Makefile build-arch
+	$(MAKE) -f Makefile build-arch
+	PREFIX=/usr dh_auto_install
 
 override_dh_auto_clean:
 	rm -fv x2gosqlitewrapper
diff --git a/x2goserver-compat/Makefile b/x2goserver-compat/Makefile
index d8a3c95..72619cd 100755
--- a/x2goserver-compat/Makefile
+++ b/x2goserver-compat/Makefile
@@ -11,7 +11,7 @@ RM_FILE=rm -f
 RM_DIR=rmdir -p --ignore-fail-on-non-empty
 
 DESTDIR=
-PREFIX=/usr/local
+PREFIX ?= /usr/local
 ETCDIR=/etc/x2go
 BINDIR=$(PREFIX)/bin
 #SBINDIR=$(PREFIX)/sbin
diff --git a/x2goserver-extensions/Makefile b/x2goserver-extensions/Makefile
index 13cf560..ae9eae2 100755
--- a/x2goserver-extensions/Makefile
+++ b/x2goserver-extensions/Makefile
@@ -11,7 +11,7 @@ RM_FILE=rm -f
 RM_DIR=rmdir -p --ignore-fail-on-non-empty
 
 DESTDIR=
-PREFIX=/usr/local
+PREFIX ?= /usr/local
 ETCDIR=/etc/x2go
 BINDIR=$(PREFIX)/bin
 #SBINDIR=$(PREFIX)/sbin
diff --git a/x2goserver-fmbindings/Makefile b/x2goserver-fmbindings/Makefile
index 8661e83..4d68485 100755
--- a/x2goserver-fmbindings/Makefile
+++ b/x2goserver-fmbindings/Makefile
@@ -11,7 +11,7 @@ RM_FILE=rm -f
 RM_DIR=rmdir -p --ignore-fail-on-non-empty
 
 DESTDIR=
-PREFIX=/usr/local
+PREFIX ?= /usr/local
 ETCDIR=/etc/x2go
 BINDIR=$(PREFIX)/bin
 #SBINDIR=$(PREFIX)/sbin
diff --git a/x2goserver-printing/Makefile b/x2goserver-printing/Makefile
index 1c956f4..0eb6842 100755
--- a/x2goserver-printing/Makefile
+++ b/x2goserver-printing/Makefile
@@ -11,7 +11,7 @@ RM_FILE=rm -f
 RM_DIR=rmdir -p --ignore-fail-on-non-empty
 
 DESTDIR=
-PREFIX=/usr/local
+PREFIX ?= /usr/local
 ETCDIR=/etc/x2go
 BINDIR=$(PREFIX)/bin
 #SBINDIR=$(PREFIX)/sbin
diff --git a/x2goserver-printing/bin/x2goprint b/x2goserver-printing/bin/x2goprint
index e3f3f8f..f1c0d20 100755
--- a/x2goserver-printing/bin/x2goprint
+++ b/x2goserver-printing/bin/x2goprint
@@ -28,10 +28,10 @@ use Sys::Syslog qw( :standard :macros );
 
 use lib `echo -n \$(x2gobasepath)/lib/x2go`;
 use x2godbwrapper;
-use x2gologlevel;
+use X2Go::Log qw(loglevel);
 
 openlog($0,'cons,pid','user');
-setlogmask( LOG_UPTO(x2gologlevel()) );
+setlogmask( LOG_UPTO(loglevel()) );
 
 
 syslog('info', &quot;x2goprint has been called with options: @ARGV&quot;);
diff --git a/x2goserver-pyhoca/Makefile b/x2goserver-pyhoca/Makefile
index 95ab06d..6db725e 100755
--- a/x2goserver-pyhoca/Makefile
+++ b/x2goserver-pyhoca/Makefile
@@ -11,7 +11,7 @@ RM_FILE=rm -f
 RM_DIR=rmdir -p --ignore-fail-on-non-empty
 
 DESTDIR=
-PREFIX=/usr/local
+PREFIX ?= /usr/local
 ETCDIR=/etc/x2go
 BINDIR=$(PREFIX)/bin
 #SBINDIR=$(PREFIX)/sbin
diff --git a/x2goserver-xsession/Makefile b/x2goserver-xsession/Makefile
index 50c2818..77cb7f1 100755
--- a/x2goserver-xsession/Makefile
+++ b/x2goserver-xsession/Makefile
@@ -12,7 +12,7 @@ RM_FILE=rm -f
 RM_DIR=rmdir -p --ignore-fail-on-non-empty
 
 DESTDIR=
-PREFIX=/usr/local
+PREFIX ?= /usr/local
 ETCDIR=/etc/x2go
 #BINDIR=$(PREFIX)/bin
 #SBINDIR=$(PREFIX)/sbin
diff --git a/x2goserver/Makefile b/x2goserver/Makefile
index 979283b..59f2a0a 100755
--- a/x2goserver/Makefile
+++ b/x2goserver/Makefile
@@ -11,7 +11,7 @@ RM_FILE=rm -f
 RM_DIR=rmdir -p --ignore-fail-on-non-empty
 
 DESTDIR=
-PREFIX=/usr/local
+PREFIX ?= /usr/local
 ETCDIR=/etc/x2go
 BINDIR=$(PREFIX)/bin
 SBINDIR=$(PREFIX)/sbin
diff --git a/x2goserver/bin/x2gogetapps b/x2goserver/bin/x2gogetapps
index 9460cd3..de9c2ec 100755
--- a/x2goserver/bin/x2gogetapps
+++ b/x2goserver/bin/x2gogetapps
@@ -25,7 +25,10 @@ use Sys::Syslog qw( :standard :macros );
 use MIME::Base64 qw(encode_base64);
 
 use lib `echo -n \$(x2gobasepath)/lib/x2go`;
-use x2gologlevel;
+use X2Go::Log qw(loglevel);
+
+openlog($0,'cons,pid','user');
+setlogmask( LOG_UPTO(loglevel()) );
 
 my @iconext=(&quot;png&quot;,&quot;svg&quot;,&quot;jpeg&quot;,&quot;jpg&quot;,&quot;xpm&quot;,&quot;bmp&quot;);
 
diff --git a/x2goserver/bin/x2gogetservers b/x2goserver/bin/x2gogetservers
index d34cc98..cd49bfb 100755
--- a/x2goserver/bin/x2gogetservers
+++ b/x2goserver/bin/x2gogetservers
@@ -25,10 +25,10 @@ use Sys::Syslog qw( :standard :macros );
 
 use lib `echo -n \$(x2gobasepath)/lib/x2go`;
 use x2godbwrapper; 
-use x2gologlevel;
+use X2Go::Log qw(loglevel);
 
 openlog($0,'cons,pid','user');
-setlogmask( LOG_UPTO(x2gologlevel()) );
+setlogmask( LOG_UPTO(loglevel()) );
 
 my $servers = join(&quot;\n&quot;, db_getservers);
 print $servers;
diff --git a/x2goserver/bin/x2golistdesktops b/x2goserver/bin/x2golistdesktops
index acdd7c4..3a1b7f1 100755
--- a/x2goserver/bin/x2golistdesktops
+++ b/x2goserver/bin/x2golistdesktops
@@ -25,10 +25,10 @@ use Sys::Hostname;
 use Sys::Syslog qw( :standard :macros );
 
 use lib `echo -n \$(x2gobasepath)/lib/x2go`;
-use x2gologlevel;
+use X2Go::Log qw(loglevel);
 
 openlog($0,'cons,pid','user');
-setlogmask( LOG_UPTO(x2gologlevel()) );
+setlogmask( LOG_UPTO(loglevel()) );
 
 
 if ( @ARGV ) {
diff --git a/x2goserver/bin/x2golistmounts b/x2goserver/bin/x2golistmounts
index ade0c67..a143e04 100755
--- a/x2goserver/bin/x2golistmounts
+++ b/x2goserver/bin/x2golistmounts
@@ -25,11 +25,10 @@ use Sys::Syslog qw( :standard :macros );
 
 use lib `echo -n \$(x2gobasepath)/lib/x2go`;
 use x2godbwrapper; 
-use x2gologlevel;
+use X2Go::Log qw(loglevel);
 
 openlog($0,'cons,pid','user');
-setlogmask( LOG_UPTO(x2gologlevel()) );
-
+setlogmask( LOG_UPTO(loglevel()) );
 
 my $session_id=shift or die;
 
diff --git a/x2goserver/bin/x2golistsessions b/x2goserver/bin/x2golistsessions
index e4421b3..aa1b02a 100755
--- a/x2goserver/bin/x2golistsessions
+++ b/x2goserver/bin/x2golistsessions
@@ -26,10 +26,10 @@ use Sys::Syslog qw( :standard :macros );
 
 use lib `echo -n \$(x2gobasepath)/lib/x2go`;
 use x2godbwrapper; 
-use x2gologlevel;
+use X2Go::Log qw(loglevel);
 
 openlog($0,'cons,pid','user');
-setlogmask( LOG_UPTO(x2gologlevel()) );
+setlogmask( LOG_UPTO(loglevel()) );
 
 if ( @ARGV ) {
 	syslog('info', &quot;x2golistsessions has been called with options: @ARGV&quot;);
diff --git a/x2goserver/bin/x2gomountdirs b/x2goserver/bin/x2gomountdirs
index d4249ad..b04e89e 100755
--- a/x2goserver/bin/x2gomountdirs
+++ b/x2goserver/bin/x2gomountdirs
@@ -25,10 +25,10 @@ use Sys::Syslog qw( :standard :macros );
 
 use lib `echo -n \$(x2gobasepath)/lib/x2go`;
 use x2godbwrapper;
-use x2gologlevel;
+use X2Go::Log qw(loglevel);
 
 openlog($0,'cons,pid','user');
-setlogmask( LOG_UPTO(x2gologlevel()) );
+setlogmask( LOG_UPTO(loglevel()) );
 
 
 syslog('info', &quot;x2gomountdirs has been called with options: @ARGV&quot;);
diff --git a/x2goserver/bin/x2gosessionlimit b/x2goserver/bin/x2gosessionlimit
index 91f747b..5a991c7 100755
--- a/x2goserver/bin/x2gosessionlimit
+++ b/x2goserver/bin/x2gosessionlimit
@@ -25,10 +25,10 @@ use Config::Simple;
 use Sys::Syslog qw( :standard :macros );
 
 use lib `echo -n \$(x2gobasepath)/lib/x2go`;
-use x2gologlevel;
+use X2Go::Log qw(loglevel);
 
 openlog($0,'cons,pid','user');
-setlogmask( LOG_UPTO(x2gologlevel()) );
+setlogmask( LOG_UPTO(loglevel()) );
 
 
 syslog('info', &quot;x2gosessionlimit has been called&quot;);
diff --git a/x2goserver/bin/x2goshowblocks b/x2goserver/bin/x2goshowblocks
index f253a73..457874e 100755
--- a/x2goserver/bin/x2goshowblocks
+++ b/x2goserver/bin/x2goshowblocks
@@ -25,10 +25,10 @@ use Sys::Syslog qw( :standard :macros );
 
 use lib `echo -n \$(x2gobasepath)/lib/x2go`;
 use x2godbwrapper; 
-use x2gologlevel;
+use X2Go::Log qw(loglevel);
 
 openlog($0,'cons,pid','user');
-setlogmask( LOG_UPTO(x2gologlevel()) );
+setlogmask( LOG_UPTO(loglevel()) );
 
 
 syslog('info', &quot;x2goshowblocks has been called with options: @ARGV&quot;);
diff --git a/x2goserver/bin/x2goumount-session b/x2goserver/bin/x2goumount-session
index 01d3857..c1cd044 100755
--- a/x2goserver/bin/x2goumount-session
+++ b/x2goserver/bin/x2goumount-session
@@ -25,12 +25,11 @@ use Sys::Hostname;
 use Sys::Syslog qw( :standard :macros );
 
 use lib `echo -n \$(x2gobasepath)/lib/x2go`;
-use x2godbwrapper; 
-use x2gologlevel;
+use x2godbwrapper;
+use X2Go::Log qw(loglevel);
 
 openlog($0,'cons,pid','user');
-setlogmask( LOG_UPTO(x2gologlevel()) );
-
+setlogmask( LOG_UPTO(loglevel()) );
 
 syslog('info', &quot;x2goumount-session has been called with options: @ARGV&quot;);
 
diff --git a/x2goserver/lib/x2gochangestatus b/x2goserver/lib/x2gochangestatus
index ce33520..17226a9 100755
--- a/x2goserver/lib/x2gochangestatus
+++ b/x2goserver/lib/x2gochangestatus
@@ -25,10 +25,10 @@ use Sys::Syslog qw( :standard :macros );
 
 use lib `echo -n \$(x2gobasepath)/lib/x2go`;
 use x2godbwrapper; 
-use x2gologlevel;
+use X2Go::Log qw(loglevel);
 
 openlog($0,'cons,pid','user');
-setlogmask( LOG_UPTO(x2gologlevel()) );
+setlogmask( LOG_UPTO(loglevel()) );
 
 
 my $status=shift or die;
diff --git a/x2goserver/lib/x2gocreatesession b/x2goserver/lib/x2gocreatesession
index ceb62a9..ecd9db4 100755
--- a/x2goserver/lib/x2gocreatesession
+++ b/x2goserver/lib/x2gocreatesession
@@ -25,10 +25,10 @@ use Sys::Syslog qw( :standard :macros );
 
 use lib `echo -n \$(x2gobasepath)/lib/x2go`;
 use x2godbwrapper; 
-use x2gologlevel;
+use X2Go::Log qw(loglevel);
 
 openlog($0,'cons,pid','user');
-setlogmask( LOG_UPTO(x2gologlevel()) );
+setlogmask( LOG_UPTO(loglevel()) );
 
 
 my $cookie=shift or die;
diff --git a/x2goserver/lib/x2gogetagent b/x2goserver/lib/x2gogetagent
index 7462550..02e0144 100755
--- a/x2goserver/lib/x2gogetagent
+++ b/x2goserver/lib/x2gogetagent
@@ -25,10 +25,10 @@ use Sys::Syslog qw( :standard :macros );
 
 use lib `echo -n \$(x2gobasepath)/lib/x2go`;
 use x2godbwrapper; 
-use x2gologlevel;
+use X2Go::Log qw(loglevel);
 
 openlog($0,'cons,pid','user');
-setlogmask( LOG_UPTO(x2gologlevel()) );
+setlogmask( LOG_UPTO(loglevel()) );
 
 my $sid=shift or die;
 my $agent = db_getagent $sid;
diff --git a/x2goserver/lib/x2gogetdisplays b/x2goserver/lib/x2gogetdisplays
index db29b5c..7dd84f2 100755
--- a/x2goserver/lib/x2gogetdisplays
+++ b/x2goserver/lib/x2gogetdisplays
@@ -25,10 +25,10 @@ use Sys::Syslog qw( :standard :macros );
 
 use lib `echo -n \$(x2gobasepath)/lib/x2go`;
 use x2godbwrapper; 
-use x2gologlevel;
+use X2Go::Log qw(loglevel);
 
 openlog($0,'cons,pid','user');
-setlogmask( LOG_UPTO(x2gologlevel()) );
+setlogmask( LOG_UPTO(loglevel()) );
 
 
 my $host=shift or die;
diff --git a/x2goserver/lib/x2gogetports b/x2goserver/lib/x2gogetports
index b269800..4fe8c5e 100755
--- a/x2goserver/lib/x2gogetports
+++ b/x2goserver/lib/x2gogetports
@@ -25,10 +25,10 @@ use Sys::Syslog qw( :standard :macros );
 
 use lib `echo -n \$(x2gobasepath)/lib/x2go`;
 use x2godbwrapper; 
-use x2gologlevel;
+use X2Go::Log qw(loglevel);
 
 openlog($0,'cons,pid','user');
-setlogmask( LOG_UPTO(x2gologlevel()) );
+setlogmask( LOG_UPTO(loglevel()) );
 
 
 my $host=shift or die;
diff --git a/x2goserver/lib/x2gogetstatus b/x2goserver/lib/x2gogetstatus
index d2271a4..3dfb084 100755
--- a/x2goserver/lib/x2gogetstatus
+++ b/x2goserver/lib/x2gogetstatus
@@ -25,10 +25,10 @@ use Sys::Syslog qw( :standard :macros );
 
 use lib `echo -n \$(x2gobasepath)/lib/x2go`;
 use x2godbwrapper; 
-use x2gologlevel;
+use X2Go::Log qw(loglevel);
 
 openlog($0,'cons,pid','user');
-setlogmask( LOG_UPTO(x2gologlevel()) );
+setlogmask( LOG_UPTO(loglevel()) );
 
 my $status;
 my $sid=shift or die;
diff --git a/x2goserver/lib/x2goinsertport b/x2goserver/lib/x2goinsertport
index bc18d96..920b79c 100755
--- a/x2goserver/lib/x2goinsertport
+++ b/x2goserver/lib/x2goinsertport
@@ -25,10 +25,10 @@ use Sys::Syslog qw( :standard :macros );
 
 use lib `echo -n \$(x2gobasepath)/lib/x2go`;
 use x2godbwrapper; 
-use x2gologlevel;
+use X2Go::Log qw(loglevel);
 
 openlog($0,'cons,pid','user');
-setlogmask( LOG_UPTO(x2gologlevel()) );
+setlogmask( LOG_UPTO(loglevel()) );
 
 
 my $server=shift or die;
diff --git a/x2goserver/lib/x2goinsertsession b/x2goserver/lib/x2goinsertsession
index 372208b..da4f3da 100755
--- a/x2goserver/lib/x2goinsertsession
+++ b/x2goserver/lib/x2goinsertsession
@@ -25,10 +25,10 @@ use Sys::Syslog qw( :standard :macros );
 
 use lib `echo -n \$(x2gobasepath)/lib/x2go`;
 use x2godbwrapper; 
-use x2gologlevel;
+use X2Go::Log qw(loglevel);
 
 openlog($0,'cons,pid','user');
-setlogmask( LOG_UPTO(x2gologlevel()) );
+setlogmask( LOG_UPTO(loglevel()) );
 
 
 my $display=shift or die;
diff --git a/x2goserver/lib/x2golistsessions_sql b/x2goserver/lib/x2golistsessions_sql
index 6563705..27f1a5d 100755
--- a/x2goserver/lib/x2golistsessions_sql
+++ b/x2goserver/lib/x2golistsessions_sql
@@ -25,10 +25,10 @@ use Sys::Syslog qw( :standard :macros );
 
 use lib `echo -n \$(x2gobasepath)/lib/x2go`;
 use x2godbwrapper; 
-use x2gologlevel;
+use X2Go::Log qw(loglevel);
 
 openlog($0,'cons,pid','user');
-setlogmask( LOG_UPTO(x2gologlevel()) );
+setlogmask( LOG_UPTO(loglevel()) );
 
 
 my $serv=shift;
diff --git a/x2goserver/lib/x2gologlevel b/x2goserver/lib/x2gologlevel
index 9269097..5d5c49e 100755
--- a/x2goserver/lib/x2gologlevel
+++ b/x2goserver/lib/x2gologlevel
@@ -22,7 +22,6 @@
 
 use strict;
 
-use lib `echo -n \$(x2gobasepath)/lib/x2go`;
-use x2gologlevel;
+use X2Go::Log qw(loglevel);
 
-print x2gologlevel();
+print loglevel();
diff --git a/x2goserver/lib/x2goresume b/x2goserver/lib/x2goresume
index 7391cd3..501a599 100755
--- a/x2goserver/lib/x2goresume
+++ b/x2goserver/lib/x2goresume
@@ -25,10 +25,10 @@ use Sys::Syslog qw( :standard :macros );
 
 use lib `echo -n \$(x2gobasepath)/lib/x2go`;
 use x2godbwrapper; 
-use x2gologlevel;
+use X2Go::Log qw(loglevel);
 
 openlog($0,'cons,pid','user');
-setlogmask( LOG_UPTO(x2gologlevel()) );
+setlogmask( LOG_UPTO(loglevel()) );
 
 
 my $client=shift or die;
diff --git a/x2goserver/lib/x2gormport b/x2goserver/lib/x2gormport
index 4ba632d..3d8f5a9 100755
--- a/x2goserver/lib/x2gormport
+++ b/x2goserver/lib/x2gormport
@@ -25,10 +25,10 @@ use Sys::Syslog qw( :standard :macros );
 
 use lib `echo -n \$(x2gobasepath)/lib/x2go`;
 use x2godbwrapper; 
-use x2gologlevel;
+use X2Go::Log qw(loglevel);
 
 openlog($0,'cons,pid','user');
-setlogmask( LOG_UPTO(x2gologlevel()) );
+setlogmask( LOG_UPTO(loglevel()) );
 
 
 my $server=shift or die;
diff --git a/x2goserver/lib/x2gosqlitewrapper.pl b/x2goserver/lib/x2gosqlitewrapper.pl
index f47fdec..fdccfc9 100755
--- a/x2goserver/lib/x2gosqlitewrapper.pl
+++ b/x2goserver/lib/x2gosqlitewrapper.pl
@@ -36,19 +36,10 @@ use POSIX;
 
 use Config::Simple;
 use Sys::Syslog qw( :standard :macros );
-my $Config = new Config::Simple(syntax=&gt;'ini');
-$Config-&gt;read('/etc/x2go/x2goserver.conf' );
-my $strloglevel = $Config-&gt;param(&quot;log.loglevel&quot;);
-my $loglevel = LOG_NOTICE;
-if    ( $strloglevel eq &quot;emerg&quot; )  { $loglevel = LOG_EMERG; }
-elsif ( $strloglevel eq &quot;alert&quot; )  { $loglevel = LOG_ALERT; }
-elsif ( $strloglevel eq &quot;crit&quot; )   { $loglevel = LOG_CRIT; }
-elsif ( $strloglevel eq &quot;err&quot; )    { $loglevel = LOG_ERR; }
-elsif ( $strloglevel eq &quot;warning&quot; )   { $loglevel = LOG_WARNING; }
-elsif ( $strloglevel eq &quot;notice&quot; ) { $loglevel = LOG_NOTICE; }
-elsif ( $strloglevel eq &quot;info&quot; )   { $loglevel = LOG_INFO; }
-elsif ( $strloglevel eq &quot;debug&quot; )  { $loglevel = LOG_DEBUG; }
-setlogmask( LOG_UPTO($loglevel) );
+use X2Go::Log qw(loglevel);
+
+openlog($0,'cons,pid','user');
+setlogmask( LOG_UPTO(loglevel()) );
 
 ####
 #### end of duplicated syslogging code
diff --git a/x2goserver/lib/x2gosuspend-agent b/x2goserver/lib/x2gosuspend-agent
index 7000281..6c50e13 100755
--- a/x2goserver/lib/x2gosuspend-agent
+++ b/x2goserver/lib/x2gosuspend-agent
@@ -24,11 +24,10 @@ strict;
 use Sys::Syslog qw( :standard :macros );
 
 use lib `echo -n \$(x2gobasepath)/lib/x2go`;
-use x2gologlevel;
+use X2Go::Log qw(loglevel);
 
 openlog($0,'cons,pid','user');
-setlogmask( LOG_UPTO(x2gologlevel()) );
-
+setlogmask( LOG_UPTO(loglevel()) );
 
 shift;
 shift;
diff --git a/x2goserver/lib/x2gosyslog b/x2goserver/lib/x2gosyslog
index c7650f7..7c47ee1 100755
--- a/x2goserver/lib/x2gosyslog
+++ b/x2goserver/lib/x2gosyslog
@@ -24,9 +24,9 @@ use strict;
 use Sys::Syslog qw( :standard :macros );
 
 use lib `echo -n \$(x2gobasepath)/lib/x2go`;
-use x2gologlevel;
+use X2Go::Log qw(loglevel);
 
-setlogmask( LOG_UPTO(x2gologlevel()) );
+setlogmask( LOG_UPTO(loglevel()) );
 
 my $component = shift;
 my $loglevel = shift;
diff --git a/x2goserver/sbin/x2gocleansessions b/x2goserver/sbin/x2gocleansessions
index aaed31d..b3e99f9 100755
--- a/x2goserver/sbin/x2gocleansessions
+++ b/x2goserver/sbin/x2gocleansessions
@@ -26,11 +26,10 @@ use Sys::Syslog qw( :standard :macros );
 
 my $x2go_lib_path=`echo -n \$(x2gobasepath)/lib/x2go`;
 use lib `echo -n \$(x2gobasepath)/lib/x2go`;
-use x2gologlevel;
+use X2Go::Log qw(loglevel);
 
 openlog($0,'cons,pid','user');
-setlogmask( LOG_UPTO(x2gologlevel()) );
-
+setlogmask( LOG_UPTO(loglevel()) );
 
 sub check_pid
 {
diff --git a/x2goserver/sbin/x2godbadmin b/x2goserver/sbin/x2godbadmin
index fc86ca8..f9d813b 100755
--- a/x2goserver/sbin/x2godbadmin
+++ b/x2goserver/sbin/x2godbadmin
@@ -26,11 +26,10 @@ use Getopt::Long;
 use Config::Simple;   
 use DBI;
 
-use lib `echo -n \$(x2gobasepath)/lib/x2go`;
-use x2gologlevel;
+use X2Go::Log qw(loglevel);
 
 openlog($0,'cons,pid','user');
-setlogmask( LOG_UPTO(x2gologlevel()) );
+setlogmask( LOG_UPTO(loglevel()) );
 
 sub show_usage()
 {
diff --git a/x2goserver/sbin/x2golistsessions_root b/x2goserver/sbin/x2golistsessions_root
index 71fc5dd..c065777 100755
--- a/x2goserver/sbin/x2golistsessions_root
+++ b/x2goserver/sbin/x2golistsessions_root
@@ -23,12 +23,10 @@ use strict;
 use Sys::Hostname;
 use Sys::Syslog qw( :standard :macros );
 
-use lib `echo -n \$(x2gobasepath)/lib/x2go`;
-use x2gologlevel;
+use X2Go::Log qw(loglevel);
 
 openlog($0,'cons,pid','user');
-setlogmask( LOG_UPTO(x2gologlevel()) );
-
+setlogmask( LOG_UPTO(loglevel()) );
 
 sub check_stat
 {


hooks/post-receive
-- 
x2goserver.git (X2Go Server)

This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;x2goserver.git&quot; (X2Go Server).

</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018852.html">[X2Go-Commits] x2goserver.git - build-baikal (branch) updated:	3.1.1.3-19-g973db62
</A></li>
	<LI>Next message: <A HREF="018792.html">[X2Go-Commits] x2goserver.git - build-baikal (branch) updated:	3.1.1.3-25-g73c4040
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18869">[ date ]</a>
              <a href="thread.html#18869">[ thread ]</a>
              <a href="subject.html#18869">[ subject ]</a>
              <a href="author.html#18869">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/x2go-commits">More information about the X2Go-commits
mailing list</a><br>
</body></html>
