<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [X2Go-Commits] x2goserver.git - build-baikal (branch) updated:	3.0.99-2-125-g23bc2a9
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/x2go-commits/2014-January/index.html" >
   <LINK REL="made" HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2Go-Commits%5D%20x2goserver.git%20-%20build-baikal%20%28branch%29%20updated%3A%0A%093.0.99-2-125-g23bc2a9&In-Reply-To=%3C20140103195041.AA1AF5DB24%40ymir%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018359.html">
   <LINK REL="Next"  HREF="018360.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[X2Go-Commits] x2goserver.git - build-baikal (branch) updated:	3.0.99-2-125-g23bc2a9</H1>
    <B>X2Go dev team</B> 
    <A HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2Go-Commits%5D%20x2goserver.git%20-%20build-baikal%20%28branch%29%20updated%3A%0A%093.0.99-2-125-g23bc2a9&In-Reply-To=%3C20140103195041.AA1AF5DB24%40ymir%3E"
       TITLE="[X2Go-Commits] x2goserver.git - build-baikal (branch) updated:	3.0.99-2-125-g23bc2a9">git-admin at x2go.org
       </A><BR>
    <I>Fri Jan  3 20:50:41 CET 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="018359.html">[X2Go-Commits] x2goserver.git - build-baikal (branch) updated:	3.0.99-2-124-gdf5601a
</A></li>
        <LI>Next message: <A HREF="018360.html">[X2Go-Commits] x2goserver.git - build-baikal (branch) updated:	3.0.99-2-129-g46e1821
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18361">[ date ]</a>
              <a href="thread.html#18361">[ thread ]</a>
              <a href="subject.html#18361">[ subject ]</a>
              <a href="author.html#18361">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch, build-baikal has been updated
       via  23bc2a9885b2f5d6c4a1f5557520811604763f71 (commit)
      from  df5601ac74bd12e621d4e0c222258f1031a98178 (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
-----------------------------------------------------------------------

Summary of changes:
 debian/changelog                        |    2 ++
 debian/x2goserver.install               |   16 +---------------
 x2goserver/bin/x2goresume-session       |    4 +++-
 x2goserver/bin/x2goruncommand           |    4 +++-
 x2goserver/bin/x2gostartagent           |   14 ++++++++------
 x2goserver/bin/x2gosuspend-session      |    5 +++--
 x2goserver/bin/x2goterminate-session    |    6 ++++--
 x2goserver/compat/bin/x2gosuspend-agent |   30 ------------------------------
 8 files changed, 24 insertions(+), 57 deletions(-)
 delete mode 100755 x2goserver/compat/bin/x2gosuspend-agent

The diff of changes is:
diff --git a/debian/changelog b/debian/changelog
index 4fa2d6f..b5b4dba 100644
--- a/debian/changelog
+++ b/debian/changelog
@@ -21,6 +21,8 @@ x2goserver (3.0.99.5-0~x2go3) UNRELEASED; urgency=low
   * Tab'ified (forgotten) scripts in /usr/sbin.
   * Tab'ified (forgotten) init script.
   * Tab'ified (forgotten) scripts in x2goserver-extensions package.
+  * Install internal x2goserver scripts to /usr/lib/x2go, make sure scripts in /usr/bin
+    find these scripts.
 
   [Martin Oehler]
   * Removes old debug code fragment, fixes x2golistsessions parsing.
diff --git a/debian/x2goserver.install b/debian/x2goserver.install
index 33c7f5a..4b9097b 100644
--- a/debian/x2goserver.install
+++ b/debian/x2goserver.install
@@ -1,23 +1,9 @@
 x2goserver/bin/x2go*                    /usr/bin/
 x2goserver/sbin/x2go*                   /usr/sbin/
+x2goserver/lib/x2go*                    /usr/lib/x2go/
 x2goserver/etc/x2gosql/sql              /etc/x2go/x2gosql/
 x2goserver/etc/x2goserver.conf          /etc/x2go/
-x2goserver/lib/x2godbwrapper.pm         /usr/lib/x2go/
-x2goserver/lib/x2gosqlitewrapper.pl     /usr/lib/x2go/
 x2goserver/VERSION.x2goserver           /usr/share/x2go/versions/
 x2goserver/x2gosqlitewrapper            /usr/bin
-# the following executables should go to /usr/lib/x2go
-x2goserver/lib/x2gochangestatus         /usr/bin
-x2goserver/lib/x2gocreatesession        /usr/bin
-x2goserver/lib/x2goresume               /usr/bin
-x2goserver/lib/x2gogetagent             /usr/bin
-x2goserver/lib/x2gogetdisplays          /usr/bin
-x2goserver/lib/x2gogetports             /usr/bin
-x2goserver/lib/x2gogetservers           /usr/bin
-x2goserver/lib/x2goinsertport           /usr/bin
-x2goserver/lib/x2goinsertsession        /usr/bin
-x2goserver/lib/x2gosessionlimit         /usr/bin
-x2goserver/lib/x2golistsessions_sql     /usr/bin
-x2goserver/lib/x2golistsessions_root    /usr/bin
 # compatibility
 x2goserver/compat/bin/x2go*             /usr/bin
diff --git a/x2goserver/bin/x2goresume-session b/x2goserver/bin/x2goresume-session
index 0f90311..5c15d03 100755
--- a/x2goserver/bin/x2goresume-session
+++ b/x2goserver/bin/x2goresume-session
@@ -34,6 +34,8 @@ X2GO_ROOT=${HOME}/.x2go
 X2GO_RESIZE=0
 X2GO_FULLSCREEN=0
 
+X2GO_LIB_PATH=&quot;$(dirname $0)/../lib/x2go&quot;
+
 if [ &quot;$X2GO_GEOMETRY&quot; == &quot;&quot; ]
 then
 	X2GO_GEOMETRY=fullscreen
@@ -78,6 +80,6 @@ fi
 
 echo &quot;$NEWOPTIONS&quot; &gt;${SESSION_DIR}/options
 
-x2goresume  $X2GO_CLIENT $SESSION_NAME  &gt; /dev/null
+$X2GO_LIB_PATH/x2goresume  $X2GO_CLIENT $SESSION_NAME  &gt; /dev/null
 
 kill -HUP $X2GO_AGENT_PID
diff --git a/x2goserver/bin/x2goruncommand b/x2goserver/bin/x2goruncommand
index 1af50c2..419bf66 100755
--- a/x2goserver/bin/x2goruncommand
+++ b/x2goserver/bin/x2goruncommand
@@ -35,6 +35,8 @@ X2GO_ROOT=${HOME}/.x2go
 MESSAGE_FILE=$X2GO_ROOT/C-$X2GO_SESSION/cmdoutput
 echo &quot;exec $cmd&quot; &gt;&gt; $MESSAGE_FILE
 
+X2GO_LIB_PATH=&quot;$(dirname $0)/../lib/x2go&quot;
+
 IMEXIT=&quot;false&quot;
 
 if [ &quot;$sndsys&quot; == &quot;esd&quot; ]; then
@@ -110,6 +112,6 @@ else
 fi 
 
 kill -TERM  $X2GO_AGENT_PID
-x2gochangestatus 'F' $X2GO_SESSION  &gt; /dev/null
+$X2GO_LIB_PATH/x2gochangestatus 'F' $X2GO_SESSION  &gt; /dev/null
 export HOSTNAME
 x2goumount-session $X2GO_SESSION
diff --git a/x2goserver/bin/x2gostartagent b/x2goserver/bin/x2gostartagent
index 37fe767..f6a2971 100755
--- a/x2goserver/bin/x2gostartagent
+++ b/x2goserver/bin/x2gostartagent
@@ -38,6 +38,8 @@ X2GO_CMD=$9
 X2GO_RESIZE=0
 X2GO_FULLSCREEN=0
 
+X2GO_LIB_PATH=&quot;$(dirname $0)/../lib/x2go&quot;
+
 if [ &quot;$X2GO_STYPE&quot; == &quot;S&quot; ]; then
 
 	SHADOW_MODE=`echo &quot;$X2GO_CMD&quot;|awk '{split($0,a,&quot;XSHAD&quot;); print a[1]}'`
@@ -77,7 +79,7 @@ if [ &quot;$LWORD&quot; == &quot;LIMIT&quot; ]; then
 	exit -1
 fi
 
-export NX_CLIENT=/usr/bin/x2gosuspend-agent
+export NX_CLIENT=$X2GO_LIB_PATH/x2gosuspend-agent
 
 COLORDEPTH=`echo &quot;$X2GO_TYPE&quot;|awk '{split($0,a,&quot;-depth_&quot;); print a[2]}'`
 
@@ -93,7 +95,7 @@ if [ &quot;$X2GO_CLIENT&quot; == &quot;&quot; ]; then
 	X2GO_CLIENT=$HOSTNAME
 fi
 
-USED_DISPLAYS=`x2gogetdisplays $HOSTNAME`
+USED_DISPLAYS=`$X2GO_LIB_PATH/x2gogetdisplays $HOSTNAME`
 
 
 while [ &quot;$OUTPUT&quot;  != &quot;inserted&quot; ]; do
@@ -108,12 +110,12 @@ while [ &quot;$OUTPUT&quot;  != &quot;inserted&quot; ]; do
 			SESSION_NAME=&quot;$SESSION_NAME&quot;_st${SESSION_TYPE}${X2GO_CMD}_dp${COLORDEPTH}
 			SESSION_NAME=`echo &quot;$SESSION_NAME&quot; | sed  -e  &quot;s/:/PP/g&quot;`
 		fi
-		OUTPUT=`x2goinsertsession $X2GO_PORT $HOSTNAME $SESSION_NAME`
+		OUTPUT=`$X2GO_LIB_PATH/x2goinsertsession $X2GO_PORT $HOSTNAME $SESSION_NAME`
 	fi 
 done
 
 
-USED_PORTS=`x2gogetports $HOSTNAME`
+USED_PORTS=`$X2GO_LIB_PATH/x2gogetports $HOSTNAME`
 
 
 while [ &quot;$GR_PORT&quot; == &quot;&quot; ] || [ &quot;$SOUND_PORT&quot; == &quot;&quot; ] || [ &quot;$FS_PORT&quot; == &quot;&quot; ]; do
@@ -129,7 +131,7 @@ while [ &quot;$GR_PORT&quot; == &quot;&quot; ] || [ &quot;$SOUND_PORT&quot; == &quot;&quot; ] || [ &quot;$FS_PORT&quot; == &quot;&quot; ]; d
 			CR=`echo &quot;use IO::Socket; \\$sock = new IO::Socket::INET ( LocalAddr =&gt; 'localhost',LocalPort =&gt; \&quot;$SSH_PORT\&quot;,\
                                   Proto =&gt; 'tcp',Listen =&gt; 1,Reuse =&gt;1 ) or die ;print \&quot;OK\&quot;;close(\\$sock);&quot;|perl 2&gt;/dev/null`
 			if [ &quot;$CR&quot; == &quot;OK&quot; ]; then
-				OUTPUT=`x2goinsertport $HOSTNAME $SESSION_NAME $SSH_PORT`
+				OUTPUT=`$X2GO_LIB_PATH/x2goinsertport $HOSTNAME $SESSION_NAME $SSH_PORT`
 			fi
 		fi
 	done
@@ -224,7 +226,7 @@ X2GO_AGENT_PID=$!
 
 X2GO_SND_PORT=1024
 
-x2gocreatesession $X2GO_COOKIE $X2GO_AGENT_PID $X2GO_CLIENT $GR_PORT $SOUND_PORT $FS_PORT $SESSION_NAME &gt; /dev/null
+$X2GO_LIB_PATH/x2gocreatesession $X2GO_COOKIE $X2GO_AGENT_PID $X2GO_CLIENT $GR_PORT $SOUND_PORT $FS_PORT $SESSION_NAME &gt; /dev/null
 
 echo $X2GO_PORT
 echo $X2GO_COOKIE
diff --git a/x2goserver/bin/x2gosuspend-session b/x2goserver/bin/x2gosuspend-session
index 1f4084c..25f35a8 100755
--- a/x2goserver/bin/x2gosuspend-session
+++ b/x2goserver/bin/x2gosuspend-session
@@ -26,15 +26,16 @@ else
 	SESSION_NAME=$X2GO_SESSION
 fi
 
+X2GO_LIB_PATH=&quot;$(dirname $0)/../lib/x2go&quot;
 
-X2GO_AGENT_PID=`x2gogetagent $SESSION_NAME` 
+X2GO_AGENT_PID=`$X2GO_LIB_PATH/x2gogetagent $SESSION_NAME` 
 X2GO_AGENT_PID=`echo &quot;$X2GO_AGENT_PID&quot;| awk {'print $1'}`
 
 
 #workaround for knotify
 killall -HUP knotify
 
-x2gochangestatus 'S' $SESSION_NAME  &gt; /dev/null
+$X2GO_LIB_PATH/x2gochangestatus 'S' $SESSION_NAME  &gt; /dev/null
 
 
 kill -HUP $X2GO_AGENT_PID
diff --git a/x2goserver/bin/x2goterminate-session b/x2goserver/bin/x2goterminate-session
index 989e272..bf14490 100755
--- a/x2goserver/bin/x2goterminate-session
+++ b/x2goserver/bin/x2goterminate-session
@@ -26,10 +26,12 @@ else
 	SESSION_NAME=$X2GO_SESSION
 fi
 
-X2GO_AGENT_PID=`x2gogetagent $SESSION_NAME` 
+X2GO_LIB_PATH=&quot;$(dirname $0)/../lib/x2go&quot;
+
+X2GO_AGENT_PID=`$X2GO_LIB_PATH/x2gogetagent $SESSION_NAME` 
 X2GO_AGENT_PID=`echo &quot;$X2GO_AGENT_PID&quot;| awk {'print $1'}`
 
-x2gochangestatus 'F' $SESSION_NAME  &gt; /dev/null
+$X2GO_LIB_PATH/x2gochangestatus 'F' $SESSION_NAME  &gt; /dev/null
 
 kill -TERM $X2GO_AGENT_PID
 export HOSTNAME
diff --git a/x2goserver/compat/bin/x2gosuspend-agent b/x2goserver/compat/bin/x2gosuspend-agent
deleted file mode 100755
index 9ca6d4f..0000000
--- a/x2goserver/compat/bin/x2gosuspend-agent
+++ /dev/null
@@ -1,30 +0,0 @@
-#!/usr/bin/perl
-
-# Copyright (C) 2007-2011 X2go Project - <A HREF="http://wiki.x2go.org">http://wiki.x2go.org</A>
-#
-# This program is free software; you can redistribute it and/or modify
-# it under the terms of the GNU General Public License as published by
-# the Free Software Foundation; either version 2 of the License, or
-# (at your option) any later version.
-#
-# This program is distributed in the hope that it will be useful,
-# but WITHOUT ANY WARRANTY; without even the implied warranty of
-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-# GNU General Public License for more details.
-#
-# You should have received a copy of the GNU General Public License
-# along with this program; if not, write to the
-# Free Software Foundation, Inc.,
-# 51 Franklin St, Fifth Floor, Boston, MA 02110-1301, USA.
-#
-# Copyright (C) 2007-2011  Oleksandr Shneyder &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">oleksandr.shneyder at obviously-nice.de</A>&gt;
-# Copyright (C) 2007-2011  Heinz-Markus Graesing &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">heinz-m.graesing at obviously-nice.de</A>&gt;
-
-shift;
-shift;
-shift;
-
-my $capt=shift;
-my @words=split(&quot; &quot;,$capt);
-
-system(&quot;/usr/bin/x2gosuspend-session @words[2] &gt; /dev/null&quot;);
\ No newline at end of file


hooks/post-receive
-- 
x2goserver.git (X2Go Server)

This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;x2goserver.git&quot; (X2Go Server).

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018359.html">[X2Go-Commits] x2goserver.git - build-baikal (branch) updated:	3.0.99-2-124-gdf5601a
</A></li>
	<LI>Next message: <A HREF="018360.html">[X2Go-Commits] x2goserver.git - build-baikal (branch) updated:	3.0.99-2-129-g46e1821
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18361">[ date ]</a>
              <a href="thread.html#18361">[ thread ]</a>
              <a href="subject.html#18361">[ subject ]</a>
              <a href="author.html#18361">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/x2go-commits">More information about the X2Go-commits
mailing list</a><br>
</body></html>
