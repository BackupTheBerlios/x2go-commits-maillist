<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [X2Go-Commits] nx-libs.git - build-main (branch) updated:	nxagent/3.4.0-3
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/x2go-commits/2013-August/index.html" >
   <LINK REL="made" HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2Go-Commits%5D%20nx-libs.git%20-%20build-main%20%28branch%29%20updated%3A%0A%09nxagent/3.4.0-3&In-Reply-To=%3C20130830142202.E61025DB33%40ymir%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011341.html">
   <LINK REL="Next"  HREF="011332.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[X2Go-Commits] nx-libs.git - build-main (branch) updated:	nxagent/3.4.0-3</H1>
    <B>X2Go dev team</B> 
    <A HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2Go-Commits%5D%20nx-libs.git%20-%20build-main%20%28branch%29%20updated%3A%0A%09nxagent/3.4.0-3&In-Reply-To=%3C20130830142202.E61025DB33%40ymir%3E"
       TITLE="[X2Go-Commits] nx-libs.git - build-main (branch) updated:	nxagent/3.4.0-3">git-admin at x2go.org
       </A><BR>
    <I>Fri Aug 30 16:22:02 CEST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="011341.html">[X2Go-Commits] nx-libs.git - build-main (branch) updated:	nxagent/3.4.0-11
</A></li>
        <LI>Next message: <A HREF="011332.html">[X2Go-Commits] nx-libs.git - build-main (branch) updated:	nxagent/3.4.0-9
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11342">[ date ]</a>
              <a href="thread.html#11342">[ thread ]</a>
              <a href="subject.html#11342">[ subject ]</a>
              <a href="author.html#11342">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch, build-main has been updated
       via  d30ef0340e759378964b75e8143625ecaea245b0 (commit)
      from  25af86cd3aaa61dc4a3d69825aa523177c2229e1 (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
-----------------------------------------------------------------------

Summary of changes:
 nx-X11/programs/Xserver/hw/nxagent/Agent.h         |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Args.c          |   19 +-
 nx-X11/programs/Xserver/hw/nxagent/Args.h          |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Atoms.c         |   30 +-
 nx-X11/programs/Xserver/hw/nxagent/Atoms.h         |    4 +-
 nx-X11/programs/Xserver/hw/nxagent/Binder.c        |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Binder.h        |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/CHANGELOG       |  165 ------
 nx-X11/programs/Xserver/hw/nxagent/Client.c        |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Client.h        |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Clipboard.c     |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Clipboard.h     |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Colormap.c      |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Colormap.h      |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Composite.c     |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Composite.h     |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Cursor.c        |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Cursor.h        |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Dialog.c        |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Dialog.h        |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Display.c       |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Display.h       |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Drawable.c      |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Drawable.h      |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Error.c         |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Error.h         |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Events.c        |  603 ++------------------
 nx-X11/programs/Xserver/hw/nxagent/Events.h        |    8 +-
 nx-X11/programs/Xserver/hw/nxagent/Extensions.c    |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Extensions.h    |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Font.c          |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Font.h          |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/GC.c            |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/GCOps.c         |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/GCOps.h         |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/GCs.h           |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Handlers.c      |    5 +-
 nx-X11/programs/Xserver/hw/nxagent/Handlers.h      |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Holder.c        |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Holder.h        |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Icons.h         |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Image.c         |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Image.h         |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Imakefile       |    3 +-
 nx-X11/programs/Xserver/hw/nxagent/Init.c          |    4 +-
 nx-X11/programs/Xserver/hw/nxagent/Init.h          |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Keyboard.c      |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Keyboard.h      |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Keystroke.c     |   78 +--
 nx-X11/programs/Xserver/hw/nxagent/Keystroke.h     |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/LICENSE         |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Literals.h      |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Millis.c        |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Millis.h        |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/NXdispatch.c    |    2 +-
 .../Xserver/hw/nxagent/NXdispatch.c.NX.original    |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/NXdixfonts.c    |    2 +-
 .../Xserver/hw/nxagent/NXdixfonts.c.NX.original    |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/NXevents.c      |    2 +-
 .../Xserver/hw/nxagent/NXevents.c.NX.original      |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/NXextension.c   |    2 +-
 .../Xserver/hw/nxagent/NXextension.c.NX.original   |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/NXglyph.c       |    2 +-
 .../Xserver/hw/nxagent/NXglyph.c.NX.original       |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/NXglyphcurs.c   |    2 +-
 .../Xserver/hw/nxagent/NXglyphcurs.c.NX.original   |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/NXglyphstr.h    |    2 +-
 .../Xserver/hw/nxagent/NXglyphstr.h.NX.original    |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/NXmiglyph.c     |    2 +-
 .../Xserver/hw/nxagent/NXmiglyph.c.NX.original     |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/NXpicture.c     |    2 +-
 .../Xserver/hw/nxagent/NXpicture.c.NX.original     |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/NXpicturestr.h  |    2 +-
 .../Xserver/hw/nxagent/NXpicturestr.h.NX.original  |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/NXproperty.c    |    2 +-
 .../Xserver/hw/nxagent/NXproperty.c.NX.original    |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/NXrandr.c       |    2 +-
 .../Xserver/hw/nxagent/NXrandr.c.NX.original       |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/NXrender.c      |    2 +-
 .../Xserver/hw/nxagent/NXrender.c.NX.original      |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/NXwindow.c      |    2 +-
 .../Xserver/hw/nxagent/NXwindow.c.NX.original      |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/NXxrandr.c      |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/NXxrandr.h      |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/NXxrandrint.h   |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Options.c       |    8 +-
 nx-X11/programs/Xserver/hw/nxagent/Options.h       |   12 +-
 nx-X11/programs/Xserver/hw/nxagent/Pixels.c        |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Pixels.h        |   20 +-
 nx-X11/programs/Xserver/hw/nxagent/Pixmap.c        |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Pixmaps.h       |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Pointer.c       |   36 +-
 nx-X11/programs/Xserver/hw/nxagent/Pointer.h       |   11 +-
 nx-X11/programs/Xserver/hw/nxagent/Reconnect.c     |    6 +-
 nx-X11/programs/Xserver/hw/nxagent/Reconnect.h     |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Render.c        |  293 +---------
 nx-X11/programs/Xserver/hw/nxagent/Render.h        |    4 +-
 nx-X11/programs/Xserver/hw/nxagent/Rootless.c      |   99 +---
 nx-X11/programs/Xserver/hw/nxagent/Rootless.h      |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Screen.c        |  130 ++++-
 nx-X11/programs/Xserver/hw/nxagent/Screen.h        |    6 +-
 nx-X11/programs/Xserver/hw/nxagent/Splash.c        |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Splash.h        |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Split.c         |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Split.h         |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/TestExt.c       |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Trap.c          |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Trap.h          |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Utils.h         |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Visual.c        |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Visual.h        |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/Window.c        |  152 +----
 nx-X11/programs/Xserver/hw/nxagent/Windows.h       |    4 +-
 nx-X11/programs/Xserver/hw/nxagent/X/NXdamage.c    |    2 +-
 .../Xserver/hw/nxagent/X/NXdamage.c.NX.original    |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/X/NXdispatch.c  |   28 +-
 .../Xserver/hw/nxagent/X/NXdispatch.c.NX.original  |   28 +-
 nx-X11/programs/Xserver/hw/nxagent/X/NXdixfonts.c  |    2 +-
 .../Xserver/hw/nxagent/X/NXdixfonts.c.NX.original  |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/X/NXevents.c    |    2 +-
 .../Xserver/hw/nxagent/X/NXevents.c.NX.original    |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/X/NXextension.c |    2 +-
 .../Xserver/hw/nxagent/X/NXextension.c.NX.original |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/X/NXglxext.c    |    2 +-
 .../Xserver/hw/nxagent/X/NXglxext.c.NX.original    |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/X/NXglyph.c     |    2 +-
 .../Xserver/hw/nxagent/X/NXglyph.c.NX.original     |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/X/NXglyphcurs.c |    2 +-
 .../Xserver/hw/nxagent/X/NXglyphcurs.c.NX.original |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/X/NXglyphstr.h  |    2 +-
 .../Xserver/hw/nxagent/X/NXglyphstr.h.NX.original  |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/X/NXmiexpose.c  |    2 +-
 .../Xserver/hw/nxagent/X/NXmiexpose.c.NX.original  |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/X/NXmiglyph.c   |    2 +-
 .../Xserver/hw/nxagent/X/NXmiglyph.c.NX.original   |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/X/NXmitrap.c    |    2 +-
 .../Xserver/hw/nxagent/X/NXmitrap.c.NX.original    |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/X/NXmiwindow.c  |    2 +-
 .../Xserver/hw/nxagent/X/NXmiwindow.c.NX.original  |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/X/NXpicture.c   |   54 +-
 .../Xserver/hw/nxagent/X/NXpicture.c.NX.original   |   54 +-
 .../programs/Xserver/hw/nxagent/X/NXpicturestr.h   |    2 +-
 .../hw/nxagent/X/NXpicturestr.h.NX.original        |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/X/NXproperty.c  |    2 +-
 .../Xserver/hw/nxagent/X/NXproperty.c.NX.original  |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/X/NXrandr.c     |    2 +-
 .../Xserver/hw/nxagent/X/NXrandr.c.NX.original     |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/X/NXrender.c    |   60 +-
 .../Xserver/hw/nxagent/X/NXrender.c.NX.original    |   60 +-
 nx-X11/programs/Xserver/hw/nxagent/X/NXresource.c  |    2 +-
 .../Xserver/hw/nxagent/X/NXresource.c.NX.original  |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/X/NXshm.c       |    2 +-
 .../Xserver/hw/nxagent/X/NXshm.c.NX.original       |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/X/NXwindow.c    |    2 +-
 .../Xserver/hw/nxagent/X/NXwindow.c.NX.original    |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/X/NXxvdisp.c    |    2 +-
 .../Xserver/hw/nxagent/X/NXxvdisp.c.NX.original    |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/nxagent.xpm     |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/nxmissing.xpm   |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/os2Stub.c       |    2 +-
 nx-X11/programs/Xserver/hw/nxagent/screensaver     |    2 +-
 161 files changed, 382 insertions(+), 1866 deletions(-)

The diff of changes is:
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Agent.h b/nx-X11/programs/Xserver/hw/nxagent/Agent.h
index dbed1e0..13f87c9 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Agent.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Agent.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Args.c b/nx-X11/programs/Xserver/hw/nxagent/Args.c
index 8fbb275..0588f43 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Args.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/Args.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
@@ -562,15 +562,11 @@ int ddxProcessArgument(int argc, char *argv[], int i)
       if (!strcmp(argv[i],&quot;fullscreen&quot;))
       {
         nxagentChangeOption(Fullscreen, True);
-
-        nxagentChangeOption(AllScreens, True);
       }
       else if (!strcmp(argv[i],&quot;ipaq&quot;))
       {
         nxagentChangeOption(Fullscreen, True);
 
-        nxagentChangeOption(AllScreens, True);
-
         nxagentIpaq = True;
       }
       else
@@ -1075,14 +1071,10 @@ static void nxagentParseOptions(char *name, char *value)
     else if (!strcmp(value, &quot;1&quot;))
     {
       nxagentChangeOption(Fullscreen, True);
-
-      nxagentChangeOption(AllScreens, True);
     }
     else if (!strcmp(value, &quot;0&quot;))
     {
       nxagentChangeOption(Fullscreen, False);
-
-      nxagentChangeOption(AllScreens, False);
     }
     else
     {
@@ -1216,7 +1208,7 @@ static void nxagentParseOptions(char *name, char *value)
     {
       nxagentChangeOption(ClientOs, ClientOsSolaris);
     }
-    else if (strcmp(value, &quot;macosx&quot;) == 0)
+    else if (strcmp(value, &quot;mac&quot;) == 0)
     {
       nxagentChangeOption(ClientOs, ClientOsMac);
     }
@@ -1520,7 +1512,7 @@ N/A
       int splitMode = 0;
       int splitSize = 0;
 
-      unsigned int packMethod = PACK_NONE;
+      unsigned int packMethod  = PACK_NONE;
       unsigned int packQuality = 9;
 
       int dataLevel   = 0;
@@ -1688,11 +1680,6 @@ N/A
       nxagentChangeOption(Fullscreen, False);
     }
 
-    if (nxagentOption(AllScreens) == UNDEFINED)
-    {
-      nxagentChangeOption(AllScreens, False);
-    }
-
     if (nxagentOption(Binder) == UNDEFINED)
     {
       nxagentChangeOption(Binder, False);
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Args.h b/nx-X11/programs/Xserver/hw/nxagent/Args.h
index 9cb97ca..2aac8e3 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Args.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Args.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Atoms.c b/nx-X11/programs/Xserver/hw/nxagent/Atoms.c
index 578731f..13f9b80 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Atoms.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/Atoms.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
@@ -66,21 +66,19 @@ Atom nxagentAtoms[NXAGENT_NUMBER_OF_ATOMS];
 
 static char *nxagentAtomNames[NXAGENT_NUMBER_OF_ATOMS + 1] =
 {
-  &quot;NX_IDENTITY&quot;,                 /* 0  */
-  &quot;WM_PROTOCOLS&quot;,                /* 1  */
-  &quot;WM_DELETE_WINDOW&quot;,            /* 2  */
-  &quot;WM_NX_READY&quot;,                 /* 3  */
-  &quot;MCOPGLOBALS&quot;,                 /* 4  */
-  &quot;NX_CUT_BUFFER_SERVER&quot;,        /* 5  */
-  &quot;TARGETS&quot;,                     /* 6  */
-  &quot;TEXT&quot;,                        /* 7  */
-  &quot;NX_AGENT_SIGNATURE&quot;,          /* 8  */
-  &quot;NXDARWIN&quot;,                    /* 9  */
-  &quot;CLIPBOARD&quot;,                   /* 10 */
-  &quot;TIMESTAMP&quot;,                   /* 11 */
-  &quot;UTF8_STRING&quot;,                 /* 12 */
-  &quot;_NET_WM_STATE&quot;,               /* 13 */
-  &quot;_NET_WM_STATE_FULLSCREEN&quot;,    /* 14 */
+  &quot;NX_IDENTITY&quot;,          /* 0  */
+  &quot;WM_PROTOCOLS&quot;,         /* 1  */
+  &quot;WM_DELETE_WINDOW&quot;,     /* 2  */
+  &quot;WM_NX_READY&quot;,          /* 3  */
+  &quot;MCOPGLOBALS&quot;,          /* 4  */
+  &quot;NX_CUT_BUFFER_SERVER&quot;, /* 5  */
+  &quot;TARGETS&quot;,              /* 6  */
+  &quot;TEXT&quot;,                 /* 7  */
+  &quot;NX_AGENT_SIGNATURE&quot;,   /* 8  */
+  &quot;NXDARWIN&quot;,             /* 9  */
+  &quot;CLIPBOARD&quot;,            /* 10 */
+  &quot;TIMESTAMP&quot;,            /* 11 */
+  &quot;UTF8_STRING&quot;,          /* 12 */
   NULL,
   NULL
 };
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Atoms.h b/nx-X11/programs/Xserver/hw/nxagent/Atoms.h
index d5b7fe5..842b820 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Atoms.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Atoms.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
@@ -22,7 +22,7 @@
 #include &quot;../../include/window.h&quot;
 #include &quot;screenint.h&quot;
 
-#define NXAGENT_NUMBER_OF_ATOMS  16
+#define NXAGENT_NUMBER_OF_ATOMS  14
 
 extern Atom nxagentAtoms[NXAGENT_NUMBER_OF_ATOMS];
 
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Binder.c b/nx-X11/programs/Xserver/hw/nxagent/Binder.c
index d40aaeb..4fb5224 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Binder.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/Binder.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Binder.h b/nx-X11/programs/Xserver/hw/nxagent/Binder.h
index f28a82b..c4daeea 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Binder.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Binder.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/CHANGELOG b/nx-X11/programs/Xserver/hw/nxagent/CHANGELOG
index 64e41b8..4e964d0 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/CHANGELOG
+++ b/nx-X11/programs/Xserver/hw/nxagent/CHANGELOG
@@ -1,170 +1,5 @@
 ChangeLog:
 
-nxagent-3.4.0-16
-
-- Updated copyright to year 2011.
-
-nxagent-3.4.0-15
-
-- Added reference to fixed TR11H02405.
-
-nxagent-3.4.0-14
-
-- Reverted fix for TR03H02335 implemented in nxagent-3.4.0-6. The
-  emulation of right click by Control key + left click introduces
-  issues for some applications changing the reaction to the left click
-  depending on the state of Control key. Issue reported in TR03H02335
-  affects Apple laptop touchpads having a single button acting as
-  left button: on those devices the right button can be emulated by
-  a double-fingered tap (using two fingertips simultaneously).
-
-nxagent-3.4.0-13
-
-- Fixed TR12H02414. Exported property must be split if ChangeProperty
-  request exceeds 262140 bytes.
-
-- Reset AllScreens option at reconnection time if full screen mode
-  have to be automatically turned off.
-
-nxagent-3.4.0-12
-
-- If one of the two full screen modes is active ('one screen' or 'all
-  screens') both keystrokes Ctrl-Alt-F and Ctrl-Alt-Shift-F change the
-  mode back to 'windowed'.
-
-- Fixed TR11H02405. XRenderFreePicture is called only for pictures
-  that were actually created on the X server side.
-
-- Ctrl+Alt+f switch fullscreen to all monitors, while Ctrl+Alt+Shift+f
-  does it to one monitor only.
-
-- If the fullscreen option is enabled at the startup, session starts
-  in the fullscreen mode on all monitors.
-
-- Added a call to XReparentWindow in the nxagentSwitchAllScreens().
-
-- Corrected focus and grab when switching to fullscreen on
-  all monitors.
-
-- Removed a compile warning e deleted some unused variables.
-
-- Removed nxagentPointerAndKeyboardGrabbed variable. 
-
-- Use the override redirect attribute to switch to fullscreen to all
-  monitors instead of send _NET_WM_FULLSCREEN_MONITORS hint to the WM.
-
-- Added nxagentMinimizeFromFullScreen(), nxagentMaximizeToFullScreen()
-  and nxagentCreateIconWindow().
-
-- Removed check on EnterNotify to grab the keyboard in fullscreen
-  mode not only if mode is 'NotifyNormal'.
-
-nxagent-3.4.0-11
-
-- Corrected switching between viewport mode and resize mode.
-
-- Fixed TR04H02340. Keycode is correctly translated in shadow sessions
-  also if the remote X display is using evdev.
-
-nxagent-3.4.0-10
-
-- Handled XGrabKeyboard() return value.
-
-- Fixed TR10D01512. NumLock and CapsLock keys are now synchronized
-  between local and remote.
-
-nxagent-3.4.0-9
-
-- Fixed TR06H02362. No icon was swown in the task bar.
-
-- Fixed keyboard grab in fullscreen mode.
-
-- Fixed compiler warnings.
-
-nxagent-3.4.0-8
-
-- Grab the keyboard in fullscreen mode on EnterNotify only if mode is
-  'NotifyNormal'.
-
-- Yield control in the dispatch loop in case we stop the smart sche-
-  duler timer while waiting for a reply from the remote display.
-
-nxagent-3.4.0-7
-
-- Fixed TR08D01478. The communication with the compiz window manager
-  by means of the _NET_WM_PING property was not handled properly.
-
-- Fixed a type mismatch in XKB events on 64 bit platforms.
-
-- Moved grab/ungrab keyboard from focus in/out event to enter/leave
-  notify event.
-
-- Removed nxagentIconWindow because it's not longer used.
-
-nxagent-3.4.0-6
-
-- Fixed TR09F02102. Problem was with pointer buttons map.
-
-- Fixed TR02H02327. Some KeyRelease events was discarded.
-
-- Fixed up Num and Caps locks.
-
-- Fixed TR03H02335. Emulated right mouse button for Mac clients.
-
-- Added utilities to print info about internal and remote windows.
-
-- Fixed TR01F01995. Solved a picture resource leak by destroying remo-
-  te pictures only when their reference counter returns to zero.
-
-- Fixed TR04H02337. Errors occurred because pictures with no drawable
-  were handled badly.
-
-- Implemented handling nxagent's private for gradient pictures and so-
-  lid fill picture.
-
-- Fixed BadMatch condition check in function ProcRenderComposite.
-
-- Fixed nxagentComposite() to handle situations with source picture
-  drawable pointing to NULL.
-
-- Implemented render acceleration for requests:  CreateSolidFill,
-  CreateLinearGradient, CreateRadialGradient, CreateConicalGradient.
-
-- Fixed TR03G02196. Dialogs are shown to the fore when the NX session
-  is in fullscreen mode.
-
-- Changed mechanism to switch to fullscreen mode. Now the override
-  redirect attribute is no longer used and _NET_WM_STATE_FULLSCREEN
-  hint is sent to the WM.
-
-nxagent-3.4.0-5
-
-- Updated copyright to year 2010.
-
-nxagent-3.4.0-4
-
-- Fixed TR07F02090. Now XDMCP sessions start without problems.
-
-- Fixed TR08G02259. Corrected window border granularity of rootless
-  session at reconnection on 64 bit platforms.
-
-- Fixed TR11G02290. Forcing null timeout with queued events only if
-  display connection is up. This prevents the flood of session log.
-
-- Fixed TR10G02287. Now QueryTree's loop is aborted in case of failure
-  and session log isn't filled anymore with repeated warning messages.
-
-- Fixed TR01G02154. Corrected window placement when switching between
-  fullscreen and windowed mode.
-
-- Fixed TR09G02276. Now the agent does not receive unwanted characters
-  while interacting with the local window manager.
-
-- Implemented FR02G02174. Added ability to do large screen pans in
-  viewport mode through key combination Ctrl+Alt+Shift+Arrow.
-
-- Corrected parsing of the 'client' option when the client OS is Mac.
-
 nxagent-3.4.0-3
 
 - Fixed TR09G02271. The array containing the font name fields was not
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Client.c b/nx-X11/programs/Xserver/hw/nxagent/Client.c
index 63ed0e1..b0db1df 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Client.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/Client.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Client.h b/nx-X11/programs/Xserver/hw/nxagent/Client.h
index a9b06c8..4b12ed1 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Client.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Client.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Clipboard.c b/nx-X11/programs/Xserver/hw/nxagent/Clipboard.c
index 2742e14..442b1c8 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Clipboard.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/Clipboard.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Clipboard.h b/nx-X11/programs/Xserver/hw/nxagent/Clipboard.h
index 43189df..5a592a4 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Clipboard.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Clipboard.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Colormap.c b/nx-X11/programs/Xserver/hw/nxagent/Colormap.c
index b0f0507..d9a979a 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Colormap.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/Colormap.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Colormap.h b/nx-X11/programs/Xserver/hw/nxagent/Colormap.h
index b296059..a8e2254 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Colormap.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Colormap.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Composite.c b/nx-X11/programs/Xserver/hw/nxagent/Composite.c
index c79104f..44bab3c 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Composite.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/Composite.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Composite.h b/nx-X11/programs/Xserver/hw/nxagent/Composite.h
index e875d00..c5dede9 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Composite.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Composite.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Cursor.c b/nx-X11/programs/Xserver/hw/nxagent/Cursor.c
index 9ed7c23..7e43857 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Cursor.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/Cursor.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Cursor.h b/nx-X11/programs/Xserver/hw/nxagent/Cursor.h
index df7dc44..7b4e6be 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Cursor.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Cursor.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Dialog.c b/nx-X11/programs/Xserver/hw/nxagent/Dialog.c
index 0fb9491..c6f8a91 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Dialog.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/Dialog.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Dialog.h b/nx-X11/programs/Xserver/hw/nxagent/Dialog.h
index bd12f30..5c71fad 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Dialog.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Dialog.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Display.c b/nx-X11/programs/Xserver/hw/nxagent/Display.c
index 87be981..c1a80b3 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Display.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/Display.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Display.h b/nx-X11/programs/Xserver/hw/nxagent/Display.h
index 454150d..4c04c5b 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Display.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Display.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Drawable.c b/nx-X11/programs/Xserver/hw/nxagent/Drawable.c
index 9c16774..ddd7f13 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Drawable.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/Drawable.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Drawable.h b/nx-X11/programs/Xserver/hw/nxagent/Drawable.h
index c987fa1..6ce0e31 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Drawable.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Drawable.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Error.c b/nx-X11/programs/Xserver/hw/nxagent/Error.c
index 43bf859..2a81730 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Error.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/Error.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Error.h b/nx-X11/programs/Xserver/hw/nxagent/Error.h
index e55fd71..f7a53cb 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Error.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Error.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Events.c b/nx-X11/programs/Xserver/hw/nxagent/Events.c
index b9da934..83665ff 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Events.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/Events.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
@@ -76,9 +76,7 @@
 #include &quot;input.h&quot;
 #endif
 
-#define Time XlibXID
 #include &quot;XKBlib.h&quot;
-#undef Time
 
 #define GC     XlibGC
 #define Font   XlibFont
@@ -221,16 +219,6 @@ static void nxagentForwardRemoteExpose(void);
 static int nxagentClipAndSendExpose(WindowPtr pWin, pointer ptr);
 
 /*
- * This is from NXproperty.c.
- */
-
-int GetWindowProperty(WindowPtr pWin, Atom property, long longOffset,
-                          long longLength, Bool delete, Atom type,
-                              Atom *actualType, int *format, unsigned
-                                  long *nItems, unsigned long *bytesAfter,
-                                      unsigned char **propData);
-
-/*
  * Associate a resource to a drawable and
  * store the region affected by the split
  * operation.
@@ -286,280 +274,6 @@ void ProcessInputEvents()
   mieqProcessInputEvents();
 }
 
-#ifdef DEBUG_TREE
-
-/*
- * Print ID and name of window.
- */
-
-void nxagentRemoteWindowID(Window window, Bool newline)
-{
-#ifdef NO_I18N
-    char *winName;
-#else
-    XTextProperty tp;
-#endif
-
-  fprintf(stderr, &quot;0x%lx&quot;, window);
-
-  if (!window)
-  {
-    fprintf(stderr, &quot; (none) &quot;);
-  }
-  else
-  {
-    if (window == DefaultRootWindow(nxagentDisplay))
-    {
-      fprintf(stderr, &quot; (the root window) &quot;);
-    }
-
-#ifdef NO_I18N
-
-    if (!XFetchName(nxagentDisplay, window, &amp;winName))
-    {
-      fprintf(stderr, &quot; (has no name) &quot;);
-    }
-    else if (winName)
-    {
-      fprintf(stderr, &quot; \&quot;%s\&quot; &quot;, winName);
-      XFree(winName);
-    }
-
-#else
-
-    if (XGetWMName(nxagentDisplay, window, &amp;tp) != 0)
-    {
-      fprintf(stderr, &quot; (has no name) &quot;);
-    }
-    else if (tp.nitems &gt; 0)
-    {
-      int count = 0;
-      int i, ret;
-      char **list = NULL;
-
-      fprintf(stderr, &quot; \&quot;&quot;);
-
-      ret = XmbTextPropertyToTextList(nxagentDisplay, &amp;tp, &amp;list, &amp;count);
-
-      if ((ret == Success || ret &gt; 0) &amp;&amp; list != NULL)
-      {
-        for (i = 0; i &lt; count; i++)
-        {
-          fprintf(stderr, &quot;%s&quot;, list[i]);
-        }
-
-        XFreeStringList(list);
-      }
-      else
-      {
-        fprintf(stderr, &quot;%s&quot;, tp.value);
-      }
-
-      fprintf(stderr, &quot;\&quot; &quot;);
-    }
-
-#endif
-
-    else
-    {
-      fprintf(stderr, &quot; (has no name) &quot;);
-    }
-  }
-
-  if (newline == TRUE)
-  {
-    fprintf(stderr, &quot;\n&quot;);
-  }
-
-  return;
-}
-
-/*
- * Print info about remote window.
- */
-
-void nxagentRemoteWindowInfo(Window win, int indent, Bool newLine)
-{
-  XWindowAttributes attributes;
-  int i;
-
-  if (XGetWindowAttributes(nxagentDisplay, win, &amp;attributes) == 0)
-  {
-    return;
-  }
-
-  for (i = 0; i &lt; indent; i++)
-  {
-    fprintf(stderr, &quot; &quot;);
-  }
-
-  fprintf(stderr, &quot;x=%d y=%d width=%d height=%d class=%s map_state=%s &quot;
-             &quot;override_redirect=%s\n&quot;, attributes.x, attributes.y,
-                 attributes.width, attributes.height, (attributes.class == 0) ?
-                     &quot;InputOutput&quot; : &quot;InputOnly&quot;, (attributes.map_state == 0) ?
-                         &quot;IsUnmapped&quot; : (attributes.map_state == 1 ?
-                             &quot;IsUnviewable&quot; : &quot;IsViewable&quot;),
-                                 (attributes.override_redirect == 0) ?
-                                     &quot;No&quot; : &quot;Yes&quot; );
-
-  if (newLine == TRUE)
-  {
-    fprintf(stderr, &quot;\n&quot;);
-  }
-}
-
-/*
- * Walk remote windows tree.
- */
-
-void nxagentRemoteWindowsTree(Window window, int level)
-{
-  int i, j;
-  Window rootWin, parentWin;
-  unsigned int numChildren;
-  Window *childList;
-
-  if (!XQueryTree(nxagentDisplay, window, &amp;rootWin, &amp;parentWin, &amp;childList,
-                      &amp;numChildren))
-  {
-    fprintf(stderr, &quot;nxagentRemoteWindowsTree - XQueryTree failed.\n&quot;);
-
-    return;
-  }
-
-  if (level == 0)
-  {
-    fprintf(stderr, &quot;\n&quot;);
-
-    fprintf(stderr, &quot;  Root Window ID: &quot;);
-    nxagentRemoteWindowID(rootWin, TRUE);
-
-    fprintf(stderr, &quot;  Parent window ID: &quot;);
-    nxagentRemoteWindowID(parentWin, TRUE);
-  }
-
-  if (level == 0 || numChildren &gt; 0)
-  {
-    fprintf(stderr, &quot;     &quot;);
-
-    for (j = 0; j &lt; level; j++)
-    {
-      fprintf(stderr, &quot;    &quot;);
-    }
-
-    fprintf(stderr, &quot;%d child%s%s\n&quot;, numChildren, (numChildren == 1) ? &quot;&quot; :
-               &quot;ren&quot;, (numChildren == 1) ? &quot;:&quot; : &quot;.&quot;);
-  }
-
-  for (i = (int) numChildren - 1; i &gt;= 0; i--)
-  {
-    fprintf(stderr, &quot;      &quot;);
-
-    for (j = 0; j &lt; level; j++)
-    {
-      fprintf(stderr, &quot;     &quot;);
-    }
-
-    nxagentRemoteWindowID(childList[i], TRUE);
-
-    nxagentRemoteWindowInfo(childList[i], (level * 5) + 6, TRUE);
-
-    nxagentRemoteWindowsTree(childList[i], level + 1);
-  }
-
-  if (childList)
-  {
-    XFree((char *) childList);
-  }
-}
-
-/*
- * Print info about internal window.
- */
-
-void nxagentInternalWindowInfo(WindowPtr pWin, int indent, Bool newLine)
-{
-  int i;
-  int result;
-  unsigned long ulReturnItems;
-  unsigned long ulReturnBytesLeft;
-  Atom          atomReturnType;
-  int           iReturnFormat;
-  unsigned char *pszReturnData = NULL;
-
-  fprintf(stderr, &quot;Window ID=[0x%lx] Remote ID=[0x%lx] &quot;, pWin -&gt; drawable.id,
-             nxagentWindow(pWin));
-
-  result = GetWindowProperty(pWin, MakeAtom(&quot;WM_NAME&quot;, 7, False) , 0,
-                                sizeof(CARD32), False, AnyPropertyType,
-                                    &amp;atomReturnType, &amp;iReturnFormat,
-                                        &amp;ulReturnItems, &amp;ulReturnBytesLeft,
-                                            &amp;pszReturnData);
-
-  fprintf(stderr, &quot;Name: &quot;);
-
-  if (result == Success &amp;&amp; pszReturnData != NULL)
-  {
-    pszReturnData[ulReturnItems] = '\0';
-
-    fprintf(stderr, &quot;\&quot;%s\&quot;\n&quot;, (char *) pszReturnData);
-  }
-  else
-  {
-    fprintf(stderr, &quot;%s\n&quot;, &quot;( has no name )&quot;);
-  }
-
-  for (i = 0; i &lt; indent; i++)
-  {
-    fprintf(stderr, &quot; &quot;);
-  }
-
-  fprintf(stderr, &quot;x=%d y=%d width=%d height=%d class=%s map_state=%s &quot;
-             &quot;override_redirect=%s&quot;, pWin -&gt; drawable.x, pWin -&gt; drawable.y,
-                 pWin -&gt; drawable.width, pWin -&gt; drawable.height,
-                     (pWin -&gt; drawable.class == 0) ? &quot;InputOutput&quot; :
-                         &quot;InputOnly&quot;, (pWin -&gt; mapped == 0) ?
-                             &quot;IsUnmapped&quot; : (pWin -&gt; mapped == 1 ?
-                                 &quot;IsUnviewable&quot; : &quot;IsViewable&quot;),
-                                     (pWin -&gt; overrideRedirect == 0) ?
-                                         &quot;No&quot; : &quot;Yes&quot;);
-
-  if (newLine == TRUE)
-  {
-    fprintf(stderr, &quot;\n&quot;);
-  }
-}
-
-/*
- * Walk internal windows tree.
- */
-
-void nxagentInternalWindowsTree(WindowPtr pWin, int indent)
-{
-  WindowPtr pChild;
-  int i;
-
-  while (pWin)
-  {
-    pChild = pWin -&gt; firstChild;
-
-    for (i = 0; i &lt; indent; i++)
-    {
-      fprintf(stderr, &quot; &quot;);
-    }
-
-    nxagentInternalWindowInfo(pWin, indent, TRUE);
-
-    fprintf(stderr, &quot;\n&quot;);
-
-    nxagentInternalWindowsTree(pChild, indent + 4);
-
-    pWin = pWin -&gt; nextSib;
-  }
-}
-
-#endif /* DEBUG_TREE */
-
 void nxagentSwitchResizeMode(ScreenPtr pScreen)
 {
   XSizeHints sizeHints;
@@ -576,14 +290,8 @@ void nxagentSwitchResizeMode(ScreenPtr pScreen)
 
     nxagentLaunchDialog(DIALOG_DISABLE_DESKTOP_RESIZE_MODE);
 
-    if (nxagentOption(Fullscreen) == 0)
-    {
-      sizeHints.max_width = nxagentOption(RootWidth);
-      sizeHints.max_height = nxagentOption(RootHeight);
-
-      XSetWMNormalHints(nxagentDisplay, nxagentDefaultWindows[pScreen-&gt;myNum],
-                            &amp;sizeHints);
-    }
+    sizeHints.max_width = nxagentOption(RootWidth);
+    sizeHints.max_height = nxagentOption(RootHeight);
   }
   else
   {
@@ -591,8 +299,7 @@ void nxagentSwitchResizeMode(ScreenPtr pScreen)
 
     nxagentLaunchDialog(DIALOG_ENABLE_DESKTOP_RESIZE_MODE);
 
-    nxagentRRSetScreenConfig(pScreen, nxagentOption(Width),
-                                 nxagentOption(Height));
+    nxagentRRSetScreenConfig(pScreen, nxagentOption(Width), nxagentOption(Height));
 
     if (nxagentOption(ClientOs) == ClientOsWinnt)
     {
@@ -601,10 +308,10 @@ void nxagentSwitchResizeMode(ScreenPtr pScreen)
 
     sizeHints.max_width = WidthOfScreen(DefaultScreenOfDisplay(nxagentDisplay));
     sizeHints.max_height = HeightOfScreen(DefaultScreenOfDisplay(nxagentDisplay));
-
-    XSetWMNormalHints(nxagentDisplay, nxagentDefaultWindows[pScreen-&gt;myNum],
-                          &amp;sizeHints);
   }
+
+  XSetWMNormalHints(nxagentDisplay, nxagentDefaultWindows[pScreen-&gt;myNum],
+                       &amp;sizeHints);
 }
 
 void nxagentShadowSwitchResizeMode(ScreenPtr pScreen)
@@ -804,7 +511,6 @@ void nxagentDispatchEvents(PredicateFuncPtr predicate)
   Bool startKbd = False;
   Bool closeSession = False;
   Bool switchFullscreen = False;
-  Bool switchAllScreens = False;
 
   /*
    * Last entered top level window.
@@ -949,22 +655,6 @@ void nxagentDispatchEvents(PredicateFuncPtr predicate)
           {
             break;
           }
-
-          #ifdef DEBUG_TREE
-
-          case doDebugTree:
-          {
-            fprintf(stderr, &quot;\n ========== nxagentRemoteWindowsTree ==========\n&quot;);
-            nxagentRemoteWindowsTree(nxagentWindow(WindowTable[0]), 0);
-
-            fprintf(stderr, &quot;\n========== nxagentInternalWindowsTree ==========\n&quot;);
-            nxagentInternalWindowsTree(WindowTable[0], 0);
-
-            break;
-          }
-
-          #endif /* DEBUG_TREE */
-
           case doCloseSession:
           {
             closeSession = TRUE;
@@ -989,36 +679,6 @@ void nxagentDispatchEvents(PredicateFuncPtr predicate)
 
             break;
           }
-          case doSwitchAllScreens:
-          {
-            switchAllScreens = TRUE;
-
-            break;
-          }
-          case doViewportMoveUp:
-          {
-            nxagentMoveViewport(pScreen, 0, -nxagentOption(Height));
-
-            break;
-          }
-          case doViewportMoveDown:
-          {
-            nxagentMoveViewport(pScreen, 0, nxagentOption(Height));
-
-            break;
-          }
-          case doViewportMoveLeft:
-          {
-            nxagentMoveViewport(pScreen, -nxagentOption(Width), 0);
-
-            break;
-          }
-          case doViewportMoveRight:
-          {
-            nxagentMoveViewport(pScreen, nxagentOption(Width), 0);
-
-            break;
-          }
           case doViewportUp:
           {
             nxagentMoveViewport(pScreen, 0, -nextinc(viewportInc));
@@ -1095,8 +755,6 @@ void nxagentDispatchEvents(PredicateFuncPtr predicate)
 
         if (nxagentOption(ViewOnly) == 0 &amp;&amp; nxagentOption(Shadow) == 1 &amp;&amp; result == doNothing)
         {
-          X.xkey.keycode = nxagentConvertKeycode(X.xkey.keycode);
-
           NXShadowEvent(nxagentDisplay, X);
         }
 
@@ -1105,27 +763,6 @@ void nxagentDispatchEvents(PredicateFuncPtr predicate)
       case KeyRelease:
       {
         enum HandleEventResult result;
-        int sendKey = 0;
-
-/*
-FIXME: If we don't flush the queue here, it could happen
-       that the inputInfo structure will not be up to date
-       when we perform the following check on down keys.
-*/
-        ProcessInputEvents();
-
-/*
-FIXME: Don't enqueue the KeyRelease event if the key was
-       not already pressed. This workaround avoids a fake
-       KeyPress is enqueued by the XKEYBOARD extension.
-       Another solution would be to let the events are
-       enqueued and to remove the KeyPress afterwards.
-*/
-        if (BitIsOn(inputInfo.keyboard -&gt; key -&gt; down,
-                       nxagentConvertKeycode(X.xkey.keycode)))
-        {
-          sendKey = 1;
-        }
 
         #ifdef TEST
         fprintf(stderr, &quot;nxagentDispatchEvents: Going to handle new KeyRelease event.\n&quot;);
@@ -1171,7 +808,7 @@ FIXME: Don't enqueue the KeyRelease event if the key was
           x.u.keyButtonPointer.time = nxagentLastEventTime;
         }
 
-        if (!(nxagentCheckSpecialKeystroke(&amp;X.xkey, &amp;result)) &amp;&amp; sendKey == 1)
+        if (!(nxagentCheckSpecialKeystroke(&amp;X.xkey, &amp;result)))
         {
           mieqEnqueue(&amp;x);
 
@@ -1179,8 +816,6 @@ FIXME: Don't enqueue the KeyRelease event if the key was
 
           if (nxagentOption(ViewOnly) == 0 &amp;&amp; nxagentOption(Shadow))
           {
-            X.xkey.keycode = nxagentConvertKeycode(X.xkey.keycode);
-
             NXShadowEvent(nxagentDisplay, X);
           }
         }
@@ -1244,7 +879,7 @@ FIXME: Don't enqueue the KeyRelease event if the key was
                     X.xbutton.subwindow == None))
         {
           x.u.u.type = ButtonPress;
-          x.u.u.detail = inputInfo.pointer -&gt; button -&gt; map[nxagentReversePointerMap[X.xbutton.button - 1]];
+          x.u.u.detail = X.xbutton.button;
           x.u.keyButtonPointer.time = nxagentLastEventTime = GetTimeInMillis();
 
           if (nxagentOption(Rootless))
@@ -1317,7 +952,7 @@ FIXME: Don't enqueue the KeyRelease event if the key was
         if (minimize != True)
         {
           x.u.u.type = ButtonRelease;
-          x.u.u.detail = inputInfo.pointer -&gt; button -&gt; map[nxagentReversePointerMap[X.xbutton.button - 1]];
+          x.u.u.detail = X.xbutton.button;
           x.u.keyButtonPointer.time = nxagentLastEventTime = GetTimeInMillis();
 
           if (nxagentOption(Rootless))
@@ -1671,11 +1306,13 @@ FIXME: Don't enqueue the KeyRelease event if the key was
           nxagentScreenTrap = 0;
         }
 
-        if (nxagentOption(Fullscreen) == 1 &amp;&amp;
-                X.xcrossing.window == nxagentFullscreenWindow &amp;&amp;
-                    X.xcrossing.detail != NotifyInferior)
+        if (nxagentOption(Fullscreen))
         {
-          nxagentGrabPointerAndKeyboard(&amp;X);
+          if (X.xcrossing.window == nxagentFullscreenWindow &amp;&amp;
+                  X.xcrossing.detail != NotifyInferior)
+          {
+            nxagentGrabPointerAndKeyboard(&amp;X);
+          }
         }
 
         if (X.xcrossing.detail != NotifyInferior)
@@ -1724,11 +1361,14 @@ FIXME: Don't enqueue the KeyRelease event if the key was
           nxagentLastEnteredWindow = NULL;
         }
 
-        if (X.xcrossing.window == nxagentDefaultWindows[0] &amp;&amp;
-                X.xcrossing.detail != NotifyInferior &amp;&amp;
-                    X.xcrossing.mode == NotifyNormal)
+        if (nxagentOption(Fullscreen))
         {
-          nxagentUngrabPointerAndKeyboard(&amp;X);
+          if (X.xcrossing.window == nxagentFullscreenWindow &amp;&amp;
+                  X.xcrossing.detail != NotifyInferior &amp;&amp;
+                      X.xcrossing.mode == NotifyNormal)
+          {
+            nxagentUngrabPointerAndKeyboard(&amp;X);
+          }
         }
 
         if (X.xcrossing.detail != NotifyInferior)
@@ -1982,8 +1622,7 @@ FIXME: Don't enqueue the KeyRelease event if the key was
         }
 
         if (nxagentUseNXTrans == 1 &amp;&amp; nxagentOption(Rootless) == 0 &amp;&amp;
-                nxagentOption(Nested) == 0 &amp;&amp;
-                    X.xmap.window != nxagentIconWindow)
+                nxagentOption(Nested) == 0 &amp;&amp; X.xmap.window != nxagentIconWindow)
         {
           nxagentVisibility = VisibilityFullyObscured;
         }
@@ -2022,17 +1661,14 @@ FIXME: Don't enqueue the KeyRelease event if the key was
           }
         }
 
-        if (nxagentOption(AllScreens) == 1)
+        if (nxagentOption(Fullscreen) == 1)
         {
           if (X.xmap.window == nxagentIconWindow)
           {
             pScreen = nxagentScreen(X.xmap.window);
             nxagentMaximizeToFullScreen(pScreen);
           }
-        }
 
-        if (nxagentOption(Fullscreen) == 1)
-        {
           nxagentVisibility = VisibilityUnobscured;
           nxagentVisibilityStop = False;
           nxagentVisibilityTimeout = GetTimeInMillis() + 2000;
@@ -2042,17 +1678,10 @@ FIXME: Don't enqueue the KeyRelease event if the key was
       }
       case MappingNotify:
       {
-        XMappingEvent *mappingEvent = (XMappingEvent *) &X;
-
         #ifdef DEBUG
         fprintf(stderr, &quot;nxagentDispatchEvents: WARNING! Going to handle new MappingNotify event.\n&quot;);
         #endif
 
-        if (mappingEvent -&gt; request == MappingPointer)
-        {
-            nxagentInitPointerMap();
-        }
-
         break;
       }
       default:
@@ -2126,40 +1755,20 @@ FIXME: Don't enqueue the KeyRelease event if the key was
 
     if (nxagentWMIsRunning)
     {
-      if (nxagentOption(AllScreens))
+      if (nxagentOption(Fullscreen))
       {
         nxagentMinimizeFromFullScreen(pScreen);
       }
       else
       {
-        XIconifyWindow(nxagentDisplay, nxagentDefaultWindows[0],
-                           DefaultScreen(nxagentDisplay));
+        XIconifyWindow(nxagentDisplay, nxagentDefaultWindows[0], DefaultScreen(nxagentDisplay));
       }
     }
   }
 
   if (switchFullscreen)
   {
-    if (nxagentOption(AllScreens) == 1 &amp;&amp; nxagentOption(Fullscreen) == 1)
-    {
-      nxagentSwitchAllScreens(pScreen, 0);
-    }
-    else
-    {
-      nxagentSwitchFullscreen(pScreen, !nxagentOption(Fullscreen));
-    }
-  }
-
-  if (switchAllScreens)
-  {
-    if (nxagentOption(AllScreens) == 0 &amp;&amp; nxagentOption(Fullscreen) == 1)
-    {
-      nxagentSwitchFullscreen(pScreen, 0);
-    }
-    else
-    {
-      nxagentSwitchAllScreens(pScreen, !nxagentOption(AllScreens));
-    }
+    nxagentSwitchFullscreen(pScreen, !nxagentOption(Fullscreen));
   }
 
   if (startKbd)
@@ -2312,16 +1921,8 @@ int nxagentHandleKeyPress(XEvent *X, enum HandleEventResult *result)
     return 1;
   }
 
-  if (X -&gt; xkey.keycode == 66)
-  {
-    nxagentXkbState.Caps = (~nxagentXkbState.Caps &amp; 1);
-  }
-  else if (X -&gt; xkey.keycode == 77)
-  {
-    nxagentXkbState.Num = (~nxagentXkbState.Num &amp; 1);
-  }
-
   nxagentLastEventTime = nxagentLastKeyPressTime = GetTimeInMillis();
+
   
   x.u.u.type = KeyPress;
   x.u.u.detail = nxagentConvertKeycode(X -&gt; xkey.keycode);
@@ -2759,8 +2360,7 @@ int nxagentHandleClientMessageEvent(XEvent *X, enum HandleEventResult *result)
         }
 
         if (X -&gt; xclient.window == (nxagentOption(Fullscreen) ?
-                nxagentIconWindow : nxagentDefaultWindows[0]) ||
-                    nxagentWMIsRunning == 0)
+              nxagentIconWindow : nxagentDefaultWindows[0]))
         {
           *result = doCloseSession;
         }
@@ -3357,7 +2957,7 @@ int nxagentHandleConfigureNotify(XEvent* X)
 
     if (X -&gt; xconfigure.window == nxagentDefaultWindows[pScreen -&gt; myNum])
     {
-      if (nxagentOption(AllScreens) == 0)
+      if (nxagentOption(Fullscreen) == 0)
       {
         if (nxagentOption(DesktopResize) == 1)
         {
@@ -3426,34 +3026,6 @@ int nxagentHandleConfigureNotify(XEvent* X)
           doRandR = 0;
         }
 
-        nxagentChangeOption(Width, X -&gt; xconfigure.width);
-        nxagentChangeOption(Height, X -&gt; xconfigure.height);
-
-        XMoveResizeWindow(nxagentDisplay, nxagentInputWindows[0], 0, 0,
-                              X -&gt; xconfigure.width, X -&gt; xconfigure.height);
-
-        if (nxagentOption(Fullscreen) == 0)
-        {
-          nxagentMoveViewport(pScreen, 0, 0);
-        }
-        else
-        {
-          nxagentChangeOption(RootX, (nxagentOption(Width) -
-                                  nxagentOption(RootWidth)) / 2);
-          nxagentChangeOption(RootY, (nxagentOption(Height) -
-                                  nxagentOption(RootHeight)) / 2);
-          nxagentChangeOption(ViewportXSpan, nxagentOption(Width) -
-                                  nxagentOption(RootWidth));
-          nxagentChangeOption(ViewportYSpan, nxagentOption(Height) -
-                                  nxagentOption(RootHeight));
-
-          nxagentUpdateViewportFrame(0, 0, nxagentOption(RootWidth),
-                                         nxagentOption(RootHeight));
-
-          XMoveWindow(nxagentDisplay, nxagentWindow(WindowTable[pScreen -&gt; myNum]),
-                          nxagentOption(RootX), nxagentOption(RootY));
-        }
-
         if (doRandR)
         {
           #ifdef TEST
@@ -3475,6 +3047,8 @@ int nxagentHandleConfigureNotify(XEvent* X)
 
 int nxagentHandleReparentNotify(XEvent* X)
 {
+  ScreenPtr pScreen = nxagentScreen(X -&gt; xreparent.window);
+
   #ifdef TEST
   fprintf(stderr, &quot;nxagentHandleReparentNotify: Going to handle a new reparent event.\n&quot;);
   #endif
@@ -3527,8 +3101,6 @@ int nxagentHandleReparentNotify(XEvent* X)
           #ifdef WARNING
           fprintf(stderr, &quot;nxagentHandleReparentNotify: WARNING! Failed QueryTree request.\n&quot;);
           #endif
-
-          break;
         }
 
         if (result &amp;&amp; children_return)
@@ -3581,95 +3153,6 @@ int nxagentHandleReparentNotify(XEvent* X)
 
     return 1;
   }
-  else if (nxagentWMIsRunning == 1 &amp;&amp; nxagentOption(Fullscreen) == 0 &amp;&amp;
-               nxagentOption(WMBorderWidth) == -1)
-  {
-    XlibWindow w;
-    XlibWindow rootReturn = 0;
-    XlibWindow parentReturn = 0;
-    XlibWindow junk;
-    XlibWindow *childrenReturn = NULL;
-    unsigned int nchildrenReturn = 0;
-    Status result;
-    XWindowAttributes attributes;
-    int x, y;
-    int xParent, yParent;
-
-    /*
-     * Calculate the absolute upper-left X e Y 
-     */
-
-    if ((XGetWindowAttributes(nxagentDisplay, X -&gt; xreparent.window,
-                                  &amp;attributes) == 0))
-    {
-      #ifdef WARNING
-      fprintf(stderr, &quot;nxagentHandleReparentNotify: WARNING! &quot;
-                  &quot;XGetWindowAttributes failed.\n&quot;);
-      #endif
-
-      return 1;
-    }
-
-    x = attributes.x;
-    y = attributes.y;
-
-    XTranslateCoordinates(nxagentDisplay, X -&gt; xreparent.window,
-                              attributes.root, -attributes.border_width,
-                                  -attributes.border_width, &amp;x, &amp;y, &amp;junk);
-
-   /*
-    * Calculate the parent X and parent Y.
-    */
-
-    w = X -&gt; xreparent.parent;
-
-    if (w != DefaultRootWindow(nxagentDisplay))
-    {
-      do
-      {
-        result = XQueryTree(nxagentDisplay, w, &amp;rootReturn, &amp;parentReturn,
-                                &amp;childrenReturn, &amp;nchildrenReturn);
-    
-        if (parentReturn == rootReturn || parentReturn == 0 || result == 0)
-        {
-          break;
-        }
-
-        if (result == 1 &amp;&amp; childrenReturn != NULL)
-        {
-          XFree(childrenReturn);
-        }
-    
-        w = parentReturn;
-      }
-      while (True);
-
-      /*
-       * WM reparented. Find edge of the frame.
-       */
-
-      if (XGetWindowAttributes(nxagentDisplay, w, &amp;attributes) == 0)
-      {
-        #ifdef WARNING
-        fprintf(stderr, &quot;nxagentHandleReparentNotify: WARNING! &quot;
-                    &quot;XGetWindowAttributes failed for parent window.\n&quot;);
-        #endif
-
-        return 1;
-      }
-
-      xParent = attributes.x;
-      yParent = attributes.y;
-
-      /*
-       * Difference between Absolute X and Parent X gives thickness of side frame.
-       * Difference between Absolute Y and Parent Y gives thickness of title bar. 
-       */
-
-      nxagentChangeOption(WMBorderWidth, (x - xParent));
-      nxagentChangeOption(WMTitleHeight, (y - yParent));
-    }
-  }
 
   return 1;
 }
@@ -3830,8 +3313,6 @@ void nxagentGrabPointerAndKeyboard(XEvent *X)
 
   int resource;
 
-  int result;
-
   #ifdef TEST
   fprintf(stderr, &quot;nxagentGrabPointerAndKeyboard: Grabbing pointer and keyboard with event at [%p].\n&quot;,
               (void *) X);
@@ -3850,22 +3331,8 @@ void nxagentGrabPointerAndKeyboard(XEvent *X)
   fprintf(stderr, &quot;nxagentGrabPointerAndKeyboard: Going to grab the keyboard in context [B1].\n&quot;);
   #endif
 
-  result = XGrabKeyboard(nxagentDisplay, nxagentFullscreenWindow,
-                             True, GrabModeAsync, GrabModeAsync, now);
-
-  if (result != GrabSuccess)
-  {
-    return;
-  }
-
-  /*
-   * The smart scheduler could be stopped while
-   * waiting for the reply. In this case we need
-   * to yield explicitly to avoid to be stuck in
-   * the dispatch loop forever.
-   */
-
-  isItTimeToYield = 1;
+  XGrabKeyboard(nxagentDisplay, nxagentFullscreenWindow,
+                    True, GrabModeAsync, GrabModeAsync, now);
 
   #ifdef TEST
   fprintf(stderr, &quot;nxagentGrabPointerAndKeyboard: Going to grab the pointer in context [B2].\n&quot;);
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Events.h b/nx-X11/programs/Xserver/hw/nxagent/Events.h
index c74fa15..3e04222 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Events.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Events.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
@@ -29,15 +29,9 @@ enum HandleEventResult
 {
   doNothing = 0,
   doMinimize,
-  doDebugTree,
   doCloseSession,
   doStartKbd,
   doSwitchFullscreen,
-  doSwitchAllScreens,
-  doViewportMoveUp,
-  doViewportMoveLeft,
-  doViewportMoveRight,
-  doViewportMoveDown,
   doViewportLeft,
   doViewportUp,
   doViewportRight,
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Extensions.c b/nx-X11/programs/Xserver/hw/nxagent/Extensions.c
index aced24f..748afa5 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Extensions.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/Extensions.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Extensions.h b/nx-X11/programs/Xserver/hw/nxagent/Extensions.h
index 5335cf8..0618517 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Extensions.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Extensions.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Font.c b/nx-X11/programs/Xserver/hw/nxagent/Font.c
index 5e58b79..b14dc88 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Font.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/Font.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Font.h b/nx-X11/programs/Xserver/hw/nxagent/Font.h
index 63cb6aa..d95cbdc 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Font.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Font.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/GC.c b/nx-X11/programs/Xserver/hw/nxagent/GC.c
index 71562d9..55a0a00 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/GC.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/GC.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/GCOps.c b/nx-X11/programs/Xserver/hw/nxagent/GCOps.c
index e18b034..d2cc584 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/GCOps.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/GCOps.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/GCOps.h b/nx-X11/programs/Xserver/hw/nxagent/GCOps.h
index fa4967a..666a098 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/GCOps.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/GCOps.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/GCs.h b/nx-X11/programs/Xserver/hw/nxagent/GCs.h
index f7e1347..4604696 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/GCs.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/GCs.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Handlers.c b/nx-X11/programs/Xserver/hw/nxagent/Handlers.c
index 310b572..e43fbb9 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Handlers.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/Handlers.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
@@ -527,8 +527,7 @@ void nxagentBlockHandler(pointer data, struct timeval **timeout, pointer mask)
                 synchronize, nxagentReady);
     #endif
 
-    if (NXDisplayError(nxagentDisplay) == 0 &amp;&amp;
-            nxagentQueuedEvents(nxagentDisplay) &gt; 0)
+    if (nxagentQueuedEvents(nxagentDisplay) &gt; 0)
     {
       #ifdef WARNING
       fprintf(stderr, &quot;nxagentBlockHandler: WARNING! Forcing a null timeout with events queued.\n&quot;);
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Handlers.h b/nx-X11/programs/Xserver/hw/nxagent/Handlers.h
index 3d3b335..8cf92b2 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Handlers.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Handlers.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Holder.c b/nx-X11/programs/Xserver/hw/nxagent/Holder.c
index bfd907c..02fde67 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Holder.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/Holder.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Holder.h b/nx-X11/programs/Xserver/hw/nxagent/Holder.h
index c39b987..469da22 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Holder.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Holder.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Icons.h b/nx-X11/programs/Xserver/hw/nxagent/Icons.h
index 0601584..350e764 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Icons.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Icons.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com.">http://www.nomachine.com.</A>          */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Image.c b/nx-X11/programs/Xserver/hw/nxagent/Image.c
index e499b7a..ec7a60a 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Image.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/Image.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Image.h b/nx-X11/programs/Xserver/hw/nxagent/Image.h
index 57272ab..bd6d4c9 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Image.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Image.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Imakefile b/nx-X11/programs/Xserver/hw/nxagent/Imakefile
index 51173e4..633e17a 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Imakefile
+++ b/nx-X11/programs/Xserver/hw/nxagent/Imakefile
@@ -206,8 +206,7 @@ DEFINES = -g $(OS_DEFINES) $(EXT_DEFINES) $(UPG_DEFINES) \
           -DNXAGENT_SPLASH \
           -DNXAGENT_ARTSD \
           -UNX_DEBUG_INPUT \
-          -UPANORAMIX \
-          -UDEBUG_TREE
+          -UPANORAMIX
 
 all:: $(OBJS)
 
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Init.c b/nx-X11/programs/Xserver/hw/nxagent/Init.c
index 789ff34..f60d7c4 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Init.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/Init.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
@@ -193,7 +193,7 @@ void InitOutput(ScreenInfo *screenInfo, int argc, char *argv[])
   if (serverGeneration &lt;= 1)
   {
     fprintf(stderr, &quot;\nNXAGENT - Version &quot; NXAGENT_VERSION &quot;\n\n&quot;);
-    fprintf(stderr, &quot;Copyright (C) 2001, 2010 NoMachine.\n&quot;);
+    fprintf(stderr, &quot;Copyright (C) 2001, 2007 NoMachine.\n&quot;);
     fprintf(stderr, &quot;See <A HREF="http://www.nomachine.com/">http://www.nomachine.com/</A> for more information.\n\n&quot;);
 
     fprintf(stderr, &quot;Info: Agent running with pid '%d'.\n&quot;, getpid());
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Init.h b/nx-X11/programs/Xserver/hw/nxagent/Init.h
index cf154e8..16c74ea 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Init.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Init.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Keyboard.c b/nx-X11/programs/Xserver/hw/nxagent/Keyboard.c
index 8db3889..a4729e9 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Keyboard.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/Keyboard.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Keyboard.h b/nx-X11/programs/Xserver/hw/nxagent/Keyboard.h
index 0e11a8a..4c7395a 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Keyboard.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Keyboard.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Keystroke.c b/nx-X11/programs/Xserver/hw/nxagent/Keystroke.c
index 6c6e477..eee13db 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Keystroke.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/Keystroke.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
@@ -92,18 +92,6 @@ int nxagentCheckSpecialKeystroke(XKeyEvent *X, enum HandleEventResult *result)
   {
     switch (sym)
     {
-      #ifdef DEBUG_TREE
-
-      case XK_q:
-      case XK_Q:
-      {
-        *result = doDebugTree;
-
-        break;
-      }
-
-      #endif /* DEBUG_TREE */
-
       case XK_t:
       case XK_T:
       {
@@ -116,7 +104,7 @@ int nxagentCheckSpecialKeystroke(XKeyEvent *X, enum HandleEventResult *result)
       {
         if (nxagentOption(Rootless) == False)
         {
-          *result = doSwitchAllScreens;
+          *result = doSwitchFullscreen;
         }
 
         break;
@@ -276,68 +264,6 @@ int nxagentCheckSpecialKeystroke(XKeyEvent *X, enum HandleEventResult *result)
       #endif
     }
   }
-  else if ((X -&gt; state &amp; nxagentAltMetaMask) &amp;&amp;
-               ((X -&gt; state &amp; (ControlMask | ShiftMask)) == (ControlMask |
-                   ShiftMask)))
-  {
-    switch (sym)
-    {
-      case XK_f:
-      case XK_F:
-      {
-        if (nxagentOption(Rootless) == 0)
-        {
-          *result = doSwitchFullscreen;
-        }
-
-        break;
-      }
-      case XK_Left:
-      case XK_KP_Left:
-      {
-        if (nxagentOption(Rootless) == 0 &amp;&amp;
-                nxagentOption(DesktopResize) == 0)
-        {
-          *result = doViewportMoveLeft;
-        }
-
-        break;
-      }
-      case XK_Up:
-      case XK_KP_Up:
-      {
-        if (nxagentOption(Rootless) == 0 &amp;&amp;
-                nxagentOption(DesktopResize) == 0)
-        {
-          *result = doViewportMoveUp;
-        }
-
-        break;
-      }
-      case XK_Right:
-      case XK_KP_Right:
-      {
-        if (nxagentOption(Rootless) == 0 &amp;&amp;
-                nxagentOption(DesktopResize) == 0)
-        {
-          *result = doViewportMoveRight;
-        }
-
-        break;
-      }
-      case XK_Down:
-      case XK_KP_Down:
-      {
-        if (nxagentOption(Rootless) == 0 &amp;&amp;
-                nxagentOption(DesktopResize) == 0)
-        {
-          *result = doViewportMoveDown;
-        }
-
-        break;
-      }
-    }
-  }
 
   return (*result == doNothing) ? 0 : 1;
 }
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Keystroke.h b/nx-X11/programs/Xserver/hw/nxagent/Keystroke.h
index ef71a88..fea9797 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Keystroke.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Keystroke.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/LICENSE b/nx-X11/programs/Xserver/hw/nxagent/LICENSE
index 8446e6f..451196c 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/LICENSE
+++ b/nx-X11/programs/Xserver/hw/nxagent/LICENSE
@@ -1,4 +1,4 @@
-Copyright (c) 2001, 2011 NoMachine - <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>
+Copyright (c) 2001, 2009 NoMachine - <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>
 
 NXAGENT and NX extensions to X are copyright of NoMachine.
 
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Literals.h b/nx-X11/programs/Xserver/hw/nxagent/Literals.h
index aaa3430..21c27af 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Literals.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Literals.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Millis.c b/nx-X11/programs/Xserver/hw/nxagent/Millis.c
index e9c739e..e275b98 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Millis.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/Millis.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Millis.h b/nx-X11/programs/Xserver/hw/nxagent/Millis.h
index 69d247b..9b6d879 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Millis.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Millis.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/NXdispatch.c b/nx-X11/programs/Xserver/hw/nxagent/NXdispatch.c
index 4f59b80..e189b95 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/NXdispatch.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/NXdispatch.c
@@ -6,7 +6,7 @@
 
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/NXdispatch.c.NX.original b/nx-X11/programs/Xserver/hw/nxagent/NXdispatch.c.NX.original
index 4f59b80..e189b95 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/NXdispatch.c.NX.original
+++ b/nx-X11/programs/Xserver/hw/nxagent/NXdispatch.c.NX.original
@@ -6,7 +6,7 @@
 
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/NXdixfonts.c b/nx-X11/programs/Xserver/hw/nxagent/NXdixfonts.c
index 1cccfd9..b57401c 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/NXdixfonts.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/NXdixfonts.c
@@ -6,7 +6,7 @@
 
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/NXdixfonts.c.NX.original b/nx-X11/programs/Xserver/hw/nxagent/NXdixfonts.c.NX.original
index 1cccfd9..b57401c 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/NXdixfonts.c.NX.original
+++ b/nx-X11/programs/Xserver/hw/nxagent/NXdixfonts.c.NX.original
@@ -6,7 +6,7 @@
 
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/NXevents.c b/nx-X11/programs/Xserver/hw/nxagent/NXevents.c
index f697cf3..b01e4a4 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/NXevents.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/NXevents.c
@@ -6,7 +6,7 @@
 
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/NXevents.c.NX.original b/nx-X11/programs/Xserver/hw/nxagent/NXevents.c.NX.original
index f697cf3..b01e4a4 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/NXevents.c.NX.original
+++ b/nx-X11/programs/Xserver/hw/nxagent/NXevents.c.NX.original
@@ -6,7 +6,7 @@
 
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/NXextension.c b/nx-X11/programs/Xserver/hw/nxagent/NXextension.c
index 1d86bf8..9bb868f 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/NXextension.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/NXextension.c
@@ -6,7 +6,7 @@
 
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/NXextension.c.NX.original b/nx-X11/programs/Xserver/hw/nxagent/NXextension.c.NX.original
index 1d86bf8..9bb868f 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/NXextension.c.NX.original
+++ b/nx-X11/programs/Xserver/hw/nxagent/NXextension.c.NX.original
@@ -6,7 +6,7 @@
 
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/NXglyph.c b/nx-X11/programs/Xserver/hw/nxagent/NXglyph.c
index 22483b3..6ec64af 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/NXglyph.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/NXglyph.c
@@ -6,7 +6,7 @@
 
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/NXglyph.c.NX.original b/nx-X11/programs/Xserver/hw/nxagent/NXglyph.c.NX.original
index 22483b3..6ec64af 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/NXglyph.c.NX.original
+++ b/nx-X11/programs/Xserver/hw/nxagent/NXglyph.c.NX.original
@@ -6,7 +6,7 @@
 
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/NXglyphcurs.c b/nx-X11/programs/Xserver/hw/nxagent/NXglyphcurs.c
index 9212bf4..6352c88 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/NXglyphcurs.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/NXglyphcurs.c
@@ -6,7 +6,7 @@
 
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/NXglyphcurs.c.NX.original b/nx-X11/programs/Xserver/hw/nxagent/NXglyphcurs.c.NX.original
index 9212bf4..6352c88 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/NXglyphcurs.c.NX.original
+++ b/nx-X11/programs/Xserver/hw/nxagent/NXglyphcurs.c.NX.original
@@ -6,7 +6,7 @@
 
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/NXglyphstr.h b/nx-X11/programs/Xserver/hw/nxagent/NXglyphstr.h
index 0f122be..0874f0f 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/NXglyphstr.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/NXglyphstr.h
@@ -6,7 +6,7 @@
 
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/NXglyphstr.h.NX.original b/nx-X11/programs/Xserver/hw/nxagent/NXglyphstr.h.NX.original
index 0f122be..0874f0f 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/NXglyphstr.h.NX.original
+++ b/nx-X11/programs/Xserver/hw/nxagent/NXglyphstr.h.NX.original
@@ -6,7 +6,7 @@
 
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/NXmiglyph.c b/nx-X11/programs/Xserver/hw/nxagent/NXmiglyph.c
index 09901ba..e0f6d1c 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/NXmiglyph.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/NXmiglyph.c
@@ -6,7 +6,7 @@
 
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/NXmiglyph.c.NX.original b/nx-X11/programs/Xserver/hw/nxagent/NXmiglyph.c.NX.original
index 09901ba..e0f6d1c 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/NXmiglyph.c.NX.original
+++ b/nx-X11/programs/Xserver/hw/nxagent/NXmiglyph.c.NX.original
@@ -6,7 +6,7 @@
 
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/NXpicture.c b/nx-X11/programs/Xserver/hw/nxagent/NXpicture.c
index d32cdb6..95178d3 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/NXpicture.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/NXpicture.c
@@ -6,7 +6,7 @@
 
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/NXpicture.c.NX.original b/nx-X11/programs/Xserver/hw/nxagent/NXpicture.c.NX.original
index d32cdb6..95178d3 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/NXpicture.c.NX.original
+++ b/nx-X11/programs/Xserver/hw/nxagent/NXpicture.c.NX.original
@@ -6,7 +6,7 @@
 
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/NXpicturestr.h b/nx-X11/programs/Xserver/hw/nxagent/NXpicturestr.h
index 91eab01..90a31d3 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/NXpicturestr.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/NXpicturestr.h
@@ -6,7 +6,7 @@
 
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/NXpicturestr.h.NX.original b/nx-X11/programs/Xserver/hw/nxagent/NXpicturestr.h.NX.original
index 91eab01..90a31d3 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/NXpicturestr.h.NX.original
+++ b/nx-X11/programs/Xserver/hw/nxagent/NXpicturestr.h.NX.original
@@ -6,7 +6,7 @@
 
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/NXproperty.c b/nx-X11/programs/Xserver/hw/nxagent/NXproperty.c
index 20a6bd6..06d6074 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/NXproperty.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/NXproperty.c
@@ -6,7 +6,7 @@
 
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/NXproperty.c.NX.original b/nx-X11/programs/Xserver/hw/nxagent/NXproperty.c.NX.original
index 20a6bd6..06d6074 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/NXproperty.c.NX.original
+++ b/nx-X11/programs/Xserver/hw/nxagent/NXproperty.c.NX.original
@@ -6,7 +6,7 @@
 
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/NXrandr.c b/nx-X11/programs/Xserver/hw/nxagent/NXrandr.c
index d593fa6..179cc1a 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/NXrandr.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/NXrandr.c
@@ -6,7 +6,7 @@
 
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/NXrandr.c.NX.original b/nx-X11/programs/Xserver/hw/nxagent/NXrandr.c.NX.original
index d593fa6..179cc1a 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/NXrandr.c.NX.original
+++ b/nx-X11/programs/Xserver/hw/nxagent/NXrandr.c.NX.original
@@ -6,7 +6,7 @@
 
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/NXrender.c b/nx-X11/programs/Xserver/hw/nxagent/NXrender.c
index 43607ac..a670c35 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/NXrender.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/NXrender.c
@@ -31,7 +31,7 @@
 
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/NXrender.c.NX.original b/nx-X11/programs/Xserver/hw/nxagent/NXrender.c.NX.original
index 43607ac..a670c35 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/NXrender.c.NX.original
+++ b/nx-X11/programs/Xserver/hw/nxagent/NXrender.c.NX.original
@@ -31,7 +31,7 @@
 
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/NXwindow.c b/nx-X11/programs/Xserver/hw/nxagent/NXwindow.c
index 95ecde9..a0d4cd6 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/NXwindow.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/NXwindow.c
@@ -6,7 +6,7 @@
 
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/NXwindow.c.NX.original b/nx-X11/programs/Xserver/hw/nxagent/NXwindow.c.NX.original
index 95ecde9..a0d4cd6 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/NXwindow.c.NX.original
+++ b/nx-X11/programs/Xserver/hw/nxagent/NXwindow.c.NX.original
@@ -6,7 +6,7 @@
 
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/NXxrandr.c b/nx-X11/programs/Xserver/hw/nxagent/NXxrandr.c
index 37b2c74..a8aa254 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/NXxrandr.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/NXxrandr.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/NXxrandr.h b/nx-X11/programs/Xserver/hw/nxagent/NXxrandr.h
index 160dc65..8ceb494 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/NXxrandr.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/NXxrandr.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/NXxrandrint.h b/nx-X11/programs/Xserver/hw/nxagent/NXxrandrint.h
index 97ae77e..7271616 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/NXxrandrint.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/NXxrandrint.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Options.c b/nx-X11/programs/Xserver/hw/nxagent/Options.c
index 5d78556..955be61 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Options.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/Options.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
@@ -63,9 +63,6 @@ void nxagentInitOptions()
   nxagentOptions.Height      = 0;
   nxagentOptions.BorderWidth = 0;
 
-  nxagentOptions.WMBorderWidth = -1;
-  nxagentOptions.WMTitleHeight = -1;
-
   nxagentOptions.SavedX      = 0;
   nxagentOptions.SavedY      = 0;
   nxagentOptions.SavedWidth  = 0;
@@ -171,9 +168,6 @@ void nxagentResetOptions()
 
   nxagentOptions.TileWidth  = UNDEFINED;
   nxagentOptions.TileHeight = UNDEFINED;
-
-  nxagentOptions.WMBorderWidth = -1;
-  nxagentOptions.WMTitleHeight = -1;
 }
 
 void nxagentSaveOptions()
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Options.h b/nx-X11/programs/Xserver/hw/nxagent/Options.h
index 7850a05..7126338 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Options.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Options.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
@@ -103,13 +103,6 @@ typedef struct _AgentOptions
   int Fullscreen;
 
   /*
-   * True if the fullscreen NX session will
-   * extend on all available screens.
-   */
-
-  int AllScreens;
-
-  /*
    * Set to the auto-disconnect timeout, if
    * the user activated this feature.
    */
@@ -133,9 +126,6 @@ typedef struct _AgentOptions
    * screen.
    */
 
-  int WMBorderWidth;
-  int WMTitleHeight;
-
   int SavedX;
   int SavedY;
   int SavedWidth;
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Pixels.c b/nx-X11/programs/Xserver/hw/nxagent/Pixels.c
index d3ab9dd..eb8daf8 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Pixels.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/Pixels.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Pixels.h b/nx-X11/programs/Xserver/hw/nxagent/Pixels.h
index 918d74d..cd2df1f 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Pixels.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Pixels.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
@@ -108,12 +108,6 @@ FIXME: The condition checking for the render
        avoid problems with the render composi-
        te on XFree86 remote server.
 */
-/*
-FIXME: Changed macro: NXAGENT_SHOULD_DEFER_COMPOSITE
-       to handle situation, when pSrc -&gt; pDrawable
-       is NULL. This case happens with gradients
-       and solid fill.
-
 #define NXAGENT_SHOULD_DEFER_COMPOSITE(pSrc, pMask, pDst)                 \
     ((nxagentRenderVersionMajor == 0 &amp;&amp;                                   \
      nxagentRenderVersionMinor == 8 &amp;&amp;                                \
@@ -124,18 +118,6 @@ FIXME: Changed macro: NXAGENT_SHOULD_DEFER_COMPOSITE
           nxagentOption(DeferLevel) == 1) ||               \
              (nxagentOption(DeferLevel) &gt;= 2 &amp;&amp;           \
               nxagentOption(LinkType) &lt; LINK_TYPE_ADSL))
-*/
-#define NXAGENT_SHOULD_DEFER_COMPOSITE(pSrc, pMask, pDst)                                                \
-    ((nxagentRenderVersionMajor == 0 &amp;&amp;                                                                  \
-      nxagentRenderVersionMinor == 8 &amp;&amp;                                                                  \
-      (pDst) -&gt; pDrawable -&gt; type == DRAWABLE_PIXMAP) ||                                                 \
-         (nxagentOption(DeferLevel) &gt;= 2 &amp;&amp;                                                              \
-          nxagentOption(LinkType) &lt; LINK_TYPE_ADSL) ||                                                   \
-             (nxagentOption(DeferLevel) == 1 &amp;&amp;                                                          \
-              (pDst) -&gt; pDrawable -&gt; type == DRAWABLE_PIXMAP &amp;&amp;                                          \
-              (((pSrc) -&gt; pDrawable &amp;&amp; nxagentDrawableStatus((pSrc) -&gt; pDrawable) == NotSynchronized) || \
-              ((pMask) &amp;&amp; nxagentDrawableStatus((pMask) -&gt; pDrawable) == NotSynchronized))))
-
 
 #define NXAGENT_SHOULD_DEFER_PUTIMAGE(pDrawable) \
     (nxagentSplitTrap == 0 &amp;&amp;                    \
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Pixmap.c b/nx-X11/programs/Xserver/hw/nxagent/Pixmap.c
index ad7e9c3..9a47761 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Pixmap.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/Pixmap.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Pixmaps.h b/nx-X11/programs/Xserver/hw/nxagent/Pixmaps.h
index 98d5666..93df4d4 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Pixmaps.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Pixmaps.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Pointer.c b/nx-X11/programs/Xserver/hw/nxagent/Pointer.c
index a751974..8a6702d 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Pointer.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/Pointer.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
@@ -57,13 +57,6 @@ is&quot; without express or implied warranty.
 #undef  TEST
 #undef  DEBUG
 
-/*
- * The nxagentReversePointerMap array is used to
- * memorize remote display pointer map.
- */
-
-unsigned char nxagentReversePointerMap[MAXBUTTONS];
-
 void nxagentChangePointerControl(DeviceIntPtr pDev, PtrCtrl *ctrl)
 {
   /*
@@ -132,8 +125,6 @@ int nxagentPointerProc(DeviceIntPtr pDev, int onoff)
         return Success;
       }
 
-      nxagentInitPointerMap();
-
       nxagentEnablePointerEvents();
 
       break;
@@ -164,28 +155,3 @@ int nxagentPointerProc(DeviceIntPtr pDev, int onoff)
 
   return Success;
 }
-
-void nxagentInitPointerMap(void)
-{
-  int numButtons;
-
-  int i;
-
-  unsigned char pointerMap[MAXBUTTONS];
-
-  #ifdef DEBUG
-  fprintf(stderr, &quot;nxagentInitPointerMap: Going to retrieve the &quot;
-              &quot;pointer map from remote display.\n&quot;);
-  #endif
-
-  numButtons = XGetPointerMapping(nxagentDisplay, pointerMap, MAXBUTTONS);
-
-  /*
-   * Computing revers pointer map.
-   */
-
-  for (i = 1; i &lt;= numButtons; i++)
-  {
-    nxagentReversePointerMap[pointerMap[i - 1] - 1] = i;
-  }
-}
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Pointer.h b/nx-X11/programs/Xserver/hw/nxagent/Pointer.h
index 3b9ccce..3d8899b 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Pointer.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Pointer.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
@@ -38,17 +38,8 @@ is&quot; without express or implied warranty.
   (ButtonPressMask | ButtonReleaseMask | PointerMotionMask | \
        EnterWindowMask | LeaveWindowMask)
 
-/*
- * The nxagentReversePointerMap array is used to
- * memorize remote display pointer map.
- */
-
-extern unsigned char nxagentReversePointerMap[MAXBUTTONS];
-
 void nxagentChangePointerControl(DeviceIntPtr pDev, PtrCtrl *ctrl);
 
 int nxagentPointerProc(DeviceIntPtr pDev, int onoff);
 
-void nxagentInitPointerMap(void);
-
 #endif /* __Pointer_H__ */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Reconnect.c b/nx-X11/programs/Xserver/hw/nxagent/Reconnect.c
index b786602..c656f29 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Reconnect.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/Reconnect.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
@@ -81,8 +81,6 @@ extern Bool nxagentUninstallFontServerPath(void);
 
 extern void nxagentRemoveXConnection(void);
 
-extern void nxagentInitPointerMap(void);
-
 static char *nxagentGetReconnectError(void);
 
 void nxagentInitializeRecLossyLevel(void);
@@ -586,8 +584,6 @@ Bool nxagentReconnectSession(void)
     nxagentOldKeyboard = NULL;
   }
 
-  nxagentInitPointerMap();
-
   nxagentDeactivatePointerGrab();
 
   nxagentWakeupByReconnect();
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Reconnect.h b/nx-X11/programs/Xserver/hw/nxagent/Reconnect.h
index c321bfa..6a3b56f 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Reconnect.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Reconnect.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Render.c b/nx-X11/programs/Xserver/hw/nxagent/Render.c
index 6c74c14..5c6503e 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Render.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/Render.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
@@ -147,6 +147,8 @@ void nxagentCursorPostSaveRenderInfo(CursorPtr pCursor, ScreenPtr pScreen,
 
 int nxagentCreatePicture(PicturePtr pPicture, Mask mask);
 
+void nxagentDestroyPicture(PicturePtr pPicture);
+
 int nxagentChangePictureClip(PicturePtr pPicture, int clipType, int nRects,
                                  xRectangle *rects, int xOrigin, int yOrigin);
 
@@ -584,16 +586,16 @@ XRenderPictFormat *nxagentMatchingFormats(PictFormatPtr pFormat)
 
 void nxagentDestroyPicture(PicturePtr pPicture)
 {
-  if (pPicture == NULL || nxagentPicturePriv(pPicture) -&gt; picture == 0)
-  {
-    return;
-  }
-
   #ifdef TEST
   fprintf(stderr, &quot;nxagentDestroyPicture: Going to destroy picture at [%p].\n&quot;,
               (void *) pPicture);
   #endif
 
+  if (pPicture == NULL)
+  {
+    return;
+  }
+
   XRenderFreePicture(nxagentDisplay,
                      nxagentPicturePriv(pPicture) -&gt; picture);
   
@@ -1008,15 +1010,12 @@ void nxagentComposite(CARD8 op, PicturePtr pSrc, PicturePtr pMask, PicturePtr pD
 
   #ifdef DEBUG
 
-  if (pSrc -&gt; pDrawable != NULL)
-  {
-    fprintf(stderr, &quot;nxagentComposite: Source Picture [%lu][%p] with drawable [%s%s][%p].\n&quot;,
-                nxagentPicturePriv(pSrc) -&gt; picture, (void *) pSrc,
-                (pSrc -&gt; pDrawable -&gt; type == DRAWABLE_PIXMAP &amp;&amp;
-                     nxagentIsShmPixmap((PixmapPtr) pSrc -&gt; pDrawable)) ? &quot;Shared &quot; : &quot;&quot;,
-                         pSrc -&gt; pDrawable -&gt; type == DRAWABLE_PIXMAP ? &quot;Pixmap&quot; : &quot;Window&quot;,
-                             (void *) pSrc -&gt; pDrawable);
-  }
+  fprintf(stderr, &quot;nxagentComposite: Source Picture [%lu][%p] with drawable [%s%s][%p].\n&quot;,
+              nxagentPicturePriv(pSrc) -&gt; picture, (void *) pSrc,
+              (pSrc -&gt; pDrawable -&gt; type == DRAWABLE_PIXMAP &amp;&amp;
+                   nxagentIsShmPixmap((PixmapPtr) pSrc -&gt; pDrawable)) ? &quot;Shared &quot; : &quot;&quot;,
+                       pSrc -&gt; pDrawable -&gt; type == DRAWABLE_PIXMAP ? &quot;Pixmap&quot; : &quot;Window&quot;,
+                           (void *) pSrc -&gt; pDrawable);
 
   fprintf(stderr, &quot;nxagentComposite: Destination Picture [%lu][%p] with drawable [%s%s][%p].\n&quot;,
               nxagentPicturePriv(pDst) -&gt; picture, (void *) pDst,
@@ -1065,19 +1064,16 @@ void nxagentComposite(CARD8 op, PicturePtr pSrc, PicturePtr pMask, PicturePtr pD
    * the wrong data.
    */
 
-  if (pSrc -&gt; pDrawable != NULL)
-  {
-    nxagentSynchronizeShmPixmap(pSrc -&gt; pDrawable, xSrc, ySrc, width, height);
+  nxagentSynchronizeShmPixmap(pSrc -&gt; pDrawable, xSrc, ySrc, width, height);
 
-    if (nxagentDrawableStatus(pSrc -&gt; pDrawable) == NotSynchronized)
-    {
-      #ifdef TEST
-      fprintf(stderr, &quot;nxagentComposite: Synchronizing the source drawable [%p].\n&quot;,
-                  (void *) pSrc -&gt; pDrawable);
-      #endif
+  if (nxagentDrawableStatus(pSrc -&gt; pDrawable) == NotSynchronized)
+  {
+    #ifdef TEST
+    fprintf(stderr, &quot;nxagentComposite: Synchronizing the source drawable [%p].\n&quot;,
+                (void *) pSrc -&gt; pDrawable);
+    #endif
 
-      nxagentSynchronizeDrawable(pSrc -&gt; pDrawable, DO_WAIT, NEVER_BREAK, NULL);
-    }
+    nxagentSynchronizeDrawable(pSrc -&gt; pDrawable, DO_WAIT, NEVER_BREAK, NULL);
   }
 
   if (pDst -&gt; pDrawable != pSrc -&gt; pDrawable)
@@ -2815,248 +2811,3 @@ Bool nxagentDisconnectAllPicture()
   return True;
 }
 
-void nxagentRenderCreateSolidFill(PicturePtr pPicture, xRenderColor *color)
-{
-  Picture id;
-
-  if (nxagentRenderEnable == False)
-  {
-    return;
-  }
-
-  #ifdef DEBUG
-
-  fprintf(stderr, &quot;nxagentRenderCreateSolidFill: Got called.\n&quot;);
-
-  if (pPicture == NULL)
-  {
-    fprintf(stderr, &quot;nxagentRenderCreateSolidFill: WARNING! pPicture pointer is NULL.\n&quot;);
-  }
-
-  if (color == NULL)
-  {
-    fprintf(stderr, &quot;nxagentRenderCreateSolidFill: WARNING! color pointer is NULL.\n&quot;);
-  }
-
-  #endif /* #ifdef DEBUG */
-
-  memset(&amp;(nxagentPicturePriv(pPicture) -&gt; lastServerValues), 0,
-             sizeof(XRenderPictureAttributes_));
-
-  id = XRenderCreateSolidFill(nxagentDisplay, (XRenderColor *) color);
-
-  #ifdef DEBUG
-  XSync(nxagentDisplay, 0);
-  #endif
-
-  #ifdef TEST
-  fprintf(stderr, &quot;nxagentRenderCreateSolidFill: Created solid fill xid [%lu].\n&quot;, id);
-  #endif
-
-  nxagentPicturePriv(pPicture) -&gt; picture = id;
-}
-
-void nxagentRenderCreateLinearGradient(PicturePtr pPicture, xPointFixed *p1,
-                                           xPointFixed *p2, int nStops,
-                                               xFixed *stops,
-                                                   xRenderColor *colors)
-{
-  Picture id;
-
-  XLinearGradient linearGradient;
-
-  if (nxagentRenderEnable == False)
-  {
-    return;
-  }
-
-  #ifdef DEBUG
-
-  fprintf(stderr, &quot;nxagentRenderCreateLinearGradient: Got called.\n&quot;);
-
-  if (pPicture == NULL)
-  {
-    fprintf(stderr, &quot;nxagentRenderCreateLinearGradient: WARNING! pPicture pointer is NULL.\n&quot;);
-  }
-
-  if (p1 == NULL)
-  {
-    fprintf(stderr, &quot;nxagentRenderCreateLinearGradient: WARNING! p1 pointer is NULL.\n&quot;);
-  }
-
-  if (p2 == NULL)
-  {
-    fprintf(stderr, &quot;nxagentRenderCreateLinearGradient: WARNING! p2 pointer is NULL.\n&quot;);
-  }
-
-  if (stops == NULL)
-  {
-    fprintf(stderr, &quot;nxagentRenderCreateLinearGradient: WARNING! stops pointer is NULL.\n&quot;);
-  }
-
-  if (colors == NULL)
-  {
-    fprintf(stderr, &quot;nxagentRenderCreateLinearGradient: WARNING! colors pointer is NULL.\n&quot;);
-  }
-
-  #endif /* #ifdef DEBUG */
-
-  memset(&amp;(nxagentPicturePriv(pPicture) -&gt; lastServerValues), 0,
-             sizeof(XRenderPictureAttributes_));
-
-  linearGradient.p1.x = (XFixed) p1 -&gt; x;
-  linearGradient.p1.y = (XFixed) p1 -&gt; y;
-  linearGradient.p2.x = (XFixed) p2 -&gt; x;
-  linearGradient.p2.y = (XFixed) p2 -&gt; y;
-
-  id = XRenderCreateLinearGradient(nxagentDisplay, &amp;linearGradient,
-                                      (XFixed *) stops,
-                                          (XRenderColor *) colors, nStops);
-
-  #ifdef DEBUG
-  XSync(nxagentDisplay, 0);
-  #endif
-
-  #ifdef TEST
-  fprintf(stderr, &quot;nxagentRenderCreateLinearGradient: Created linear gradient xid [%lu].\n&quot;, id);
-  #endif
-
-  nxagentPicturePriv(pPicture) -&gt; picture = id;
-}
-
-void nxagentRenderCreateRadialGradient(PicturePtr pPicture, xPointFixed *inner,
-                                           xPointFixed *outer,
-                                               xFixed innerRadius,
-                                                   xFixed outerRadius,
-                                                       int nStops,
-                                                           xFixed *stops,
-                                                               xRenderColor *colors)
-{
-  Picture id;
-
-  XRadialGradient radialGradient;
-
-  if (nxagentRenderEnable == False)
-  {
-    return;
-  }
-
-  #ifdef DEBUG
-
-  fprintf(stderr, &quot;nxagentRenderCreateRadialGradient: Got called.\n&quot;);
-
-  if (pPicture == NULL)
-  {
-    fprintf(stderr, &quot;nxagentRenderCreateRadialGradient: WARNING! pPicture pointer is NULL.\n&quot;);
-  }
-
-  if (inner == NULL)
-  {
-    fprintf(stderr, &quot;nxagentRenderCreateRadialGradient: WARNING! inner pointer is NULL.\n&quot;);
-  }
-
-  if (outer == NULL)
-  {
-    fprintf(stderr, &quot;nxagentRenderCreateRadialGradient: WARNING! outer pointer is NULL.\n&quot;);
-  }
-
-  if (stops == NULL)
-  {
-    fprintf(stderr, &quot;nxagentRenderCreateRadialGradient: WARNING! stops pointer is NULL.\n&quot;);
-  }
-
-  if (colors == NULL)
-  {
-    fprintf(stderr, &quot;nxagentRenderCreateRadialGradient: WARNING! colors pointer is NULL.\n&quot;);
-  }
-
-  #endif /* #ifdef DEBUG */
-
-  memset(&amp;(nxagentPicturePriv(pPicture) -&gt; lastServerValues), 0,
-               sizeof(XRenderPictureAttributes_));
-
-  radialGradient.inner.x = (XFixed) inner -&gt; x;
-  radialGradient.inner.y = (XFixed) inner -&gt; y;
-  radialGradient.inner.radius = (XFixed) innerRadius;
-  radialGradient.outer.x = (XFixed) outer -&gt; x;
-  radialGradient.outer.y = (XFixed) outer -&gt; y;
-  radialGradient.outer.radius = (XFixed) outerRadius;
-
-  id = XRenderCreateRadialGradient(nxagentDisplay, &amp;radialGradient,
-                                       (XFixed *) stops,
-                                           (XRenderColor *) colors, nStops);
-
-  #ifdef DEBUG
-  XSync(nxagentDisplay, 0);
-  #endif
-
-  #ifdef TEST
-  fprintf(stderr, &quot;nxagentRenderCreateRadialGradient: Created radial gradient xid [%lu].\n&quot;, id);
-  #endif
-
-  nxagentPicturePriv(pPicture) -&gt; picture = id;
-}
-
-void nxagentRenderCreateConicalGradient(PicturePtr pPicture,
-                                            xPointFixed *center,
-                                                xFixed angle, int nStops, 
-                                                    xFixed *stops, 
-                                                        xRenderColor *colors)
-{
-  Picture id;
-
-  XConicalGradient conicalGradient;
-
-  if (nxagentRenderEnable == False)
-  {
-    return;
-  }
-
-  #ifdef DEBUG
-
-  fprintf(stderr, &quot;nxagentRenderCreateConicalGradient: Got called.\n&quot;);
-
-  if (pPicture == NULL)
-  {
-    fprintf(stderr, &quot;nxagentRenderCreateConicalGradient: WARNING! pPicture pointer is NULL.\n&quot;);
-  }
-
-  if (center == NULL)
-  {
-    fprintf(stderr, &quot;nxagentRenderCreateConicalGradient: WARNING! center pointer is NULL.\n&quot;);
-  }
-
-  if (stops == NULL)
-  {
-    fprintf(stderr, &quot;nxagentRenderCreateConicalGradient: WARNING! stops pointer is NULL.\n&quot;);
-  }
-
-  if (colors == NULL)
-  {
-    fprintf(stderr, &quot;nxagentRenderCreateConicalGradient: WARNING! colors pointer is NULL.\n&quot;);
-  }
-
-  #endif /* #ifdef DEBUG */
-
-  memset(&amp;(nxagentPicturePriv(pPicture) -&gt; lastServerValues), 0,
-             sizeof(XRenderPictureAttributes_));
-
-  conicalGradient.center.x = (XFixed) center -&gt; x;
-  conicalGradient.center.y = (XFixed) center -&gt; y;
-  conicalGradient.angle = (XFixed) angle;
-
-  id = XRenderCreateConicalGradient(nxagentDisplay, &amp;conicalGradient,
-                                        (XFixed *) stops,
-                                            (XRenderColor *) colors, nStops);
-
-  #ifdef DEBUG
-  XSync(nxagentDisplay, 0);
-  #endif
-
-  #ifdef TEST
-  fprintf(stderr, &quot;nxagentRenderCreateConicalGradient: Created conical gradient xid [%lu].\n&quot;, id);
-  #endif
-
-  nxagentPicturePriv(pPicture) -&gt; picture = id;
-}
-
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Render.h b/nx-X11/programs/Xserver/hw/nxagent/Render.h
index 6f61ca8..77e842d 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Render.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Render.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
@@ -105,6 +105,4 @@ void nxagentDisconnectPicture(pointer p0, XID x1, void* p2);
 
 void nxagentReconnectGlyphSet(void* p0, XID x1, void *p2);
 
-void nxagentDestroyPicture(PicturePtr pPicture);
-
 #endif /* __Render_H__ */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Rootless.c b/nx-X11/programs/Xserver/hw/nxagent/Rootless.c
index 706aa93..53f4df4 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Rootless.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/Rootless.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
@@ -626,7 +626,6 @@ int nxagentExportProperty(pWin, property, type, format, mode, nUnits, value)
     XlibAtom *atoms = malloc(nUnits * sizeof(*atoms));
     Atom *input = value;
     int i;
-    int j = 0;
 
     freeMem = True;
     export = True;
@@ -634,40 +633,16 @@ int nxagentExportProperty(pWin, property, type, format, mode, nUnits, value)
 
     for (i = 0; i &lt; nUnits; i++)
     {
-      /*
-       * Exporting the _NET_WM_PING property could
-       * result in rootless windows being grayed out
-       * when the compiz window manager is running.
-       *
-       * Better solution would probably be to handle
-       * the communication with the window manager
-       * instead of just getting rid of the property.
-       */
-
-      if (strcmp(NameForAtom(input[i]), &quot;_NET_WM_PING&quot;) != 0)
-      {
-        atoms[j] = nxagentLocalToRemoteAtom(input[i]);
-
-        if (atoms[j] == None)
-        {
-          #ifdef WARNING
-          fprintf(stderr, &quot;nxagentExportProperty: WARNING! Failed to convert local atom %ld [%s].\n&quot;,
-                      (long int) input[i], validateString(NameForAtom(input[i])));
-          #endif
-        }
-
-        j++;
-      }
-      #ifdef TEST
-      else
-      {
-        fprintf(stderr, &quot;nxagentExportProperty: WARNING! &quot;
-                    &quot;Not exporting the _NET_WM_PING property.\n&quot;);
-      }
-      #endif
+       atoms[i] = nxagentLocalToRemoteAtom(input[i]);
+
+       if (atoms[i] == None)
+       {
+         #ifdef WARNING
+         fprintf(stderr, &quot;nxagentExportProperty: WARNING! Failed to convert local atom %ld [%s].\n&quot;,
+                     (long int) input[i], validateString(NameForAtom(input[i])));
+         #endif
+       }
     }
-
-    nUnits = j;
   }
   else if (strcmp(typeS, &quot;WINDOW&quot;) == 0)
   {
@@ -725,57 +700,7 @@ int nxagentExportProperty(pWin, property, type, format, mode, nUnits, value)
     }
     else
     {
-      #ifdef TEST
-      fprintf(stderr, &quot;nxagentExportProperty: Property [%lu] format [%i] &quot;
-                  &quot;units [%lu].\n&quot;, propertyX, format, nUnits);
-      #endif
-
-      if ((format &gt;&gt; 3) * nUnits + sizeof(xChangePropertyReq) &lt;
-              (MAX_REQUEST_SIZE &lt;&lt; 2))
-      {
-        XChangeProperty(nxagentDisplay, nxagentWindow(pWin), propertyX, typeX,
-                            format, mode, (void*)output, nUnits);
-      }
-      else if (mode == PropModeReplace)
-      {
-        int n;
-        char *data;
-
-        XDeleteProperty(nxagentDisplay, nxagentWindow(pWin), propertyX);
-
-        data = (char *) output;
-
-        while (nUnits &gt; 0)
-        {
-          if ((format &gt;&gt; 3) * nUnits + sizeof(xChangePropertyReq) &lt;
-                  (MAX_REQUEST_SIZE &lt;&lt; 2))
-          {
-            n = nUnits;
-          }
-          else
-          {
-            n = ((MAX_REQUEST_SIZE &lt;&lt; 2) - sizeof(xChangePropertyReq)) /
-                    (format &gt;&gt; 3);
-          }
-
-          XChangeProperty(nxagentDisplay, nxagentWindow(pWin), propertyX,
-                              typeX, format, PropModeAppend, (void*) data, n);
-
-          nUnits -= n;
-
-          data = (char *) data + n * (format &gt;&gt; 3);
-        }
-      }
-      else
-      {
-        #ifdef WARNING
-        fprintf(stderr, &quot;nxagentExportProperty: WARNING! &quot;
-                    &quot;Property [%lu] too long.\n&quot;, propertyX);
-        #endif
-
-        goto nxagentExportPropertyError;
-      }
-
+      XChangeProperty(nxagentDisplay, nxagentWindow(pWin), propertyX, typeX, format, mode, (void*)output, nUnits);
       nxagentAddPropertyToList(propertyX, pWin);
     }
   }
@@ -790,8 +715,6 @@ int nxagentExportProperty(pWin, property, type, format, mode, nUnits, value)
     #endif
   }
 
-  nxagentExportPropertyError:
-
   if (freeMem)
   {
     xfree(output);
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Rootless.h b/nx-X11/programs/Xserver/hw/nxagent/Rootless.h
index 1ea258d..5538b58 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Rootless.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Rootless.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Screen.c b/nx-X11/programs/Xserver/hw/nxagent/Screen.c
index 0a0d409..4f41607 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Screen.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/Screen.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
@@ -292,7 +292,7 @@ void nxagentMinimizeFromFullScreen(ScreenPtr pScreen)
 {
   XUnmapWindow(nxagentDisplay, nxagentFullscreenWindow);
 
-  if (nxagentIpaq)
+  if(nxagentIpaq)
   {
     XMapWindow(nxagentDisplay, nxagentIconWindow);
     XIconifyWindow(nxagentDisplay, nxagentIconWindow,
@@ -307,7 +307,7 @@ void nxagentMinimizeFromFullScreen(ScreenPtr pScreen)
 
 void nxagentMaximizeToFullScreen(ScreenPtr pScreen)
 {
-  if (nxagentIpaq)
+  if(nxagentIpaq)
   {
     XUnmapWindow(nxagentDisplay, nxagentIconWindow);
 
@@ -334,7 +334,7 @@ FIXME: We'll chech for ReparentNotify and LeaveNotify events after XReparentWind
     for (i = 0; i &lt; 100 &amp;&amp; nxagentWMIsRunning; i++)
     {
       #ifdef TEST
-      fprintf(stderr, &quot;nxagentMaximizeToFullscreen: WARNING! Going to wait for the ReparentNotify event.\n&quot;);
+      fprintf(stderr, &quot;nxagentSwitchFullscreen: WARNING! Going to wait for the ReparentNotify event.\n&quot;);
       #endif
 
       if (XCheckTypedWindowEvent(nxagentDisplay, nxagentFullscreenWindow, ReparentNotify, &amp;e))
@@ -977,10 +977,6 @@ Bool nxagentOpenScreen(int index, ScreenPtr pScreen,
 
     nxagentChangeOption(Fullscreen, False);
 
-    nxagentChangeOption(AllScreens, False);
-
-    nxagentFullscreenWindow = 0;
-
     resetAgentPosition = True;
   }
 
@@ -1384,13 +1380,10 @@ N/A
       nxagentChangeOption(Height, gattributes.height);
     }
 
-    if (nxagentOption(AllScreens))
-    {
-      attributes.override_redirect = True; 
-    }
-
     if (nxagentOption(Fullscreen))
     {
+      attributes.override_redirect = True;
+
       /*
        * We need to disable the host's screensaver or
        * it will otherwise grab the screen even if it
@@ -1617,7 +1610,7 @@ N/A
           nxagentReconnectTrap == 1)
   {
     valuemask = CWBackPixel | CWEventMask | CWColormap |
-                    (nxagentOption(AllScreens) == 1 ? CWOverrideRedirect : 0);
+                    (nxagentOption(Fullscreen) == 1 ? CWOverrideRedirect : 0);
 
     attributes.background_pixel = nxagentBlackPixel;
 
@@ -1625,13 +1618,10 @@ N/A
 
     attributes.colormap = nxagentDefaultVisualColormap(nxagentDefaultVisual(pScreen));
 
-    if (nxagentOption(AllScreens) == 1)
+    if (nxagentOption(Fullscreen) == 1)
     {
       attributes.override_redirect = True;
-    }
 
-    if (nxagentOption(Fullscreen) == 1)
-    {
       if (nxagentReconnectTrap)
       {
         /*
@@ -1764,7 +1754,7 @@ N/A
     sizeHints.width = nxagentOption(RootWidth);
     sizeHints.height = nxagentOption(RootHeight);
 
-    if (nxagentOption(DesktopResize) == 1 || nxagentOption(Fullscreen) == 1)
+    if (nxagentOption(DesktopResize) == 1)
     {
       sizeHints.max_width = WidthOfScreen(DefaultScreenOfDisplay(nxagentDisplay));
       sizeHints.max_height = HeightOfScreen(DefaultScreenOfDisplay(nxagentDisplay));
@@ -1809,14 +1799,30 @@ N/A
 
     XClearWindow(nxagentDisplay, nxagentDefaultWindows[pScreen-&gt;myNum]);
 
-    if (nxagentOption(AllScreens))
+    if (nxagentOption(Fullscreen))
+    {
+      valuemask = CWBackPixmap | CWColormap | CWOverrideRedirect;
+    }
+    else
+    {
+      valuemask = CWBackPixmap | CWColormap;
+    }
+
+    attributes.background_pixmap = nxagentScreenSaverPixmap;
+    attributes.colormap = DefaultColormap(nxagentDisplay, DefaultScreen(nxagentDisplay));
+
+    if (nxagentOption(Fullscreen))
     {
+      attributes.override_redirect = False;
       if (nxagentReconnectTrap)
       {
         XGrabKeyboard(nxagentDisplay, nxagentFullscreenWindow, True, GrabModeAsync,
                       GrabModeAsync, CurrentTime);
       }
+    }
 
+    if (nxagentOption(Fullscreen))
+    {
       nxagentIconWindow = nxagentCreateIconWindow();
     }
     else
@@ -1874,6 +1880,13 @@ N/A
        */
 
       XSetWMProtocols(nxagentDisplay, nxagentDefaultWindows[pScreen-&gt;myNum], &amp;deleteWMatom, 1);
+
+      /*
+      if (nxagentOption(Fullscreen))
+      {
+        XSetWMProtocols(nxagentDisplay, nxagentIconWindow, &amp;deleteWMatom, 1);
+      }
+      */
     }
     else
     {
@@ -2172,6 +2185,8 @@ Bool nxagentResizeScreen(ScreenPtr pScreen, int width, int height,
   int oldMmWidth;
   int oldMmHeight;
 
+  RegionPtr pRootWinSize;
+
   #ifdef TEST
   nxagentPrintAgentGeometry(&quot;Before Resize Screen&quot;, &quot;nxagentResizeScreen:&quot;);
   #endif
@@ -2251,10 +2266,13 @@ FIXME: We should try to restore the previously
 
   if (nxagentOption(Fullscreen))
   {
-    nxagentChangeOption(RootX, (nxagentOption(Width) -
-                            nxagentOption(RootWidth)) / 2);
-    nxagentChangeOption(RootY, (nxagentOption(Height) -
-                            nxagentOption(RootHeight)) / 2);
+    nxagentChangeOption(Width, WidthOfScreen(DefaultScreenOfDisplay(nxagentDisplay)));
+    nxagentChangeOption(Height, HeightOfScreen(DefaultScreenOfDisplay(nxagentDisplay)));
+
+    nxagentChangeOption(RootX, (WidthOfScreen(DefaultScreenOfDisplay(nxagentDisplay))
+                            - nxagentOption(RootWidth)) / 2);
+    nxagentChangeOption(RootY,  (HeightOfScreen(DefaultScreenOfDisplay(nxagentDisplay))
+                            - nxagentOption(RootHeight)) / 2);
   }
   else
   {
@@ -2266,6 +2284,62 @@ FIXME: We should try to restore the previously
   nxagentChangeOption(ViewportYSpan, nxagentOption(Height) - nxagentOption(RootHeight));
 
   /*
+   * Change agent window size and size hints.
+   */
+
+  sizeHints.flags = PPosition | PMinSize | PMaxSize;
+  sizeHints.x = nxagentOption(X);
+  sizeHints.y = nxagentOption(Y);
+
+  sizeHints.min_width = MIN_NXAGENT_WIDTH;
+  sizeHints.min_height = MIN_NXAGENT_HEIGHT;
+  sizeHints.width = width;
+  sizeHints.height = height;
+
+  if (nxagentOption(DesktopResize) == 1)
+  {
+    sizeHints.max_width = WidthOfScreen(DefaultScreenOfDisplay(nxagentDisplay));
+    sizeHints.max_height = HeightOfScreen(DefaultScreenOfDisplay(nxagentDisplay));
+  }
+  else
+  {
+    sizeHints.max_width = nxagentOption(RootWidth);
+    sizeHints.max_height = nxagentOption(RootHeight);
+  }
+
+  if (nxagentUserGeometry.flag &amp; XValue || nxagentUserGeometry.flag &amp; YValue)
+  {
+    sizeHints.flags |= USPosition;
+  }
+
+  if (nxagentUserGeometry.flag &amp; WidthValue || nxagentUserGeometry.flag &amp; HeightValue)
+  {
+    sizeHints.flags |= USSize;
+  }
+
+  XSetWMNormalHints(nxagentDisplay, nxagentDefaultWindows[pScreen-&gt;myNum], &amp;sizeHints);
+
+  if (nxagentOption(Fullscreen))
+  {
+    XResizeWindow(nxagentDisplay, nxagentDefaultWindows[pScreen-&gt;myNum],
+                      WidthOfScreen(DefaultScreenOfDisplay(nxagentDisplay)),
+                          HeightOfScreen(DefaultScreenOfDisplay(nxagentDisplay)));
+
+    XResizeWindow(nxagentDisplay, nxagentInputWindows[pScreen -&gt; myNum],
+                      WidthOfScreen(DefaultScreenOfDisplay(nxagentDisplay)),
+                          HeightOfScreen(DefaultScreenOfDisplay(nxagentDisplay)));
+  }
+  else
+  {
+    XResizeWindow(nxagentDisplay, nxagentDefaultWindows[pScreen-&gt;myNum], width, height);
+
+    if (nxagentOption(Rootless) == 0)
+    {
+      XResizeWindow(nxagentDisplay, nxagentInputWindows[pScreen -&gt; myNum], width, height);
+    }
+  }
+
+  /*
    * Set properties for the agent root window.
    */
 
@@ -2286,6 +2360,8 @@ FIXME: We should try to restore the previously
 
   (*pScreen -&gt; PositionWindow)(WindowTable[pScreen -&gt; myNum], 0, 0);
 
+  pRootWinSize = &amp;WindowTable[pScreen -&gt; myNum] -&gt; winSize;
+
   nxagentSetRootClip(pScreen, 1);
 
   XMoveWindow(nxagentDisplay, nxagentWindow(WindowTable[0]),
@@ -2293,12 +2369,6 @@ FIXME: We should try to restore the previously
 
   nxagentMoveViewport(pScreen, 0, 0);
 
-  /*
-   * Update pointer bounds.
-   */
-
-  ScreenRestructured(pScreen);
-
   #ifdef TEST
   nxagentPrintAgentGeometry(&quot;After Resize Screen&quot;, &quot;nxagentResizeScreen:&quot;);
   #endif
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Screen.h b/nx-X11/programs/Xserver/hw/nxagent/Screen.h
index 5b19577..ab8c01a 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Screen.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Screen.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
@@ -48,7 +48,6 @@ extern ScreenPtr nxagentDefaultScreen;
 extern Pixmap nxagentPixmapLogo;
 
 extern Window nxagentIconWindow;
-
 extern Window nxagentFullscreenWindow;
 
 extern RegionRec nxagentShadowUpdateRegion;
@@ -62,8 +61,6 @@ extern short nxagentShadowUid;
 void nxagentSetScreenInfo(ScreenInfo *screenInfo);
 void nxagentSetPixmapFormats(ScreenInfo *screenInfo);
 
-void nxagentPrintGeometry();
-
 extern Window nxagentDefaultWindows[MAXSCREENS];
 extern Window nxagentInputWindows[MAXSCREENS];
 extern Window nxagentScreenSaverWindows[MAXSCREENS];
@@ -90,7 +87,6 @@ extern int nxagentBitsPerPixel(int depth);
 void nxagentSetScreenSaverTime(void);
 
 void nxagentMinimizeFromFullScreen(ScreenPtr pScreen);
-
 void nxagentMaximizeToFullScreen(ScreenPtr pScreen);
 
 Window nxagentCreateIconWindow(void);
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Splash.c b/nx-X11/programs/Xserver/hw/nxagent/Splash.c
index 235c48c..54b3557 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Splash.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/Splash.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Splash.h b/nx-X11/programs/Xserver/hw/nxagent/Splash.h
index f7ba6c2..a677f20 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Splash.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Splash.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Split.c b/nx-X11/programs/Xserver/hw/nxagent/Split.c
index 4cc2ea6..061ab8c 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Split.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/Split.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Split.h b/nx-X11/programs/Xserver/hw/nxagent/Split.h
index 2be449a..88e5548 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Split.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Split.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/TestExt.c b/nx-X11/programs/Xserver/hw/nxagent/TestExt.c
index 6bce2ea..17e6a89 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/TestExt.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/TestExt.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Trap.c b/nx-X11/programs/Xserver/hw/nxagent/Trap.c
index f5e6bde..c6f62c4 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Trap.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/Trap.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Trap.h b/nx-X11/programs/Xserver/hw/nxagent/Trap.h
index 9258e3b..13bbf65 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Trap.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Trap.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Utils.h b/nx-X11/programs/Xserver/hw/nxagent/Utils.h
index f5bd55d..bf2aa1c 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Utils.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Utils.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Visual.c b/nx-X11/programs/Xserver/hw/nxagent/Visual.c
index b086c0e..46fe90f 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Visual.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/Visual.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Visual.h b/nx-X11/programs/Xserver/hw/nxagent/Visual.h
index 8436f79..d60f0d8 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Visual.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Visual.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Window.c b/nx-X11/programs/Xserver/hw/nxagent/Window.c
index 3e6d41d..2abfd5e 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Window.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/Window.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
@@ -692,73 +692,6 @@ void nxagentRestackWindow(WindowPtr pWin, WindowPtr pOldNextSib)
 
 void nxagentSwitchFullscreen(ScreenPtr pScreen, Bool switchOn)
 {
-  XEvent e;
-
-  if (nxagentOption(Rootless) == 1)
-  {
-    return;
-  }
-
-  if (switchOn == 0)
-  {
-    nxagentWMDetect();
-
-    /*
-     * The smart scheduler could be stopped while
-     * waiting for the reply. In this case we need
-     * to yield explicitly to avoid to be stuck in
-     * the dispatch loop forever.
-     */
-
-    isItTimeToYield = 1;
-
-    if (nxagentWMIsRunning == 0)
-    {
-      #ifdef WARNING
-      fprintf(stderr, &quot;Warning: Can't switch to window mode, no window manager &quot;
-                  &quot;has been detected.\n&quot;);
-      #endif
-
-      return;
-    }
-  }
-
-  #ifdef TEST
-  fprintf(stderr, &quot;nxagentSwitchFullscreen: Switching to %s mode.\n&quot;,
-              switchOn ? &quot;fullscreen&quot; : &quot;windowed&quot;);
-  #endif
-
-  nxagentChangeOption(Fullscreen, switchOn);
-
-  memset(&amp;e, 0, sizeof(e));
-
-  e.xclient.type = ClientMessage;
-  e.xclient.message_type = nxagentAtoms[13]; /* _NET_WM_STATE */
-  e.xclient.display = nxagentDisplay;
-  e.xclient.window = nxagentDefaultWindows[pScreen -&gt; myNum];
-  e.xclient.format = 32;
-  e.xclient.data.l[0] = nxagentOption(Fullscreen) ? 1 : 0;
-  e.xclient.data.l[1] = nxagentAtoms[14]; /* _NET_WM_STATE_FULLSCREEN */
-
-  XSendEvent(nxagentDisplay, DefaultRootWindow(nxagentDisplay), False,
-                 SubstructureRedirectMask, &amp;e);
-
-  if (switchOn == 1)
-  {
-    nxagentFullscreenWindow = nxagentDefaultWindows[pScreen -&gt; myNum];
-
-    nxagentGrabPointerAndKeyboard(NULL);
-  }
-  else
-  {
-    nxagentFullscreenWindow = None;
-
-    nxagentUngrabPointerAndKeyboard(NULL);
-  } 
-}
-
-void nxagentSwitchAllScreens(ScreenPtr pScreen, Bool switchOn)
-{
   Window w;
   XSetWindowAttributes attributes;
   unsigned long valuemask;
@@ -788,8 +721,6 @@ void nxagentSwitchAllScreens(ScreenPtr pScreen, Bool switchOn)
   XUnmapWindow(nxagentDisplay, w);
   XChangeWindowAttributes(nxagentDisplay, w, valuemask, &amp;attributes);
 
-  XReparentWindow(nxagentDisplay, w, DefaultRootWindow(nxagentDisplay), 0, 0);
-
   if (switchOn)
   {
     /*
@@ -807,7 +738,7 @@ void nxagentSwitchAllScreens(ScreenPtr pScreen, Bool switchOn)
     for (i = 0; i &lt; 100 &amp;&amp; nxagentWMIsRunning; i++)
     {
       #ifdef TEST
-      fprintf(stderr, &quot;nxagentSwitchAllScreens: WARNING! Going to wait for the ReparentNotify event.\n&quot;);
+      fprintf(stderr, &quot;nxagentSwitchFullscreen: WARNING! Going to wait for the ReparentNotify event.\n&quot;);
       #endif
 
       if (XCheckTypedWindowEvent(nxagentDisplay, w, ReparentNotify, &amp;e))
@@ -836,8 +767,6 @@ void nxagentSwitchAllScreens(ScreenPtr pScreen, Bool switchOn)
        */
 
       nxagentChangeOption(Fullscreen, True);
-      nxagentChangeOption(AllScreens, True);
-      
 
       /*
        * Save the window-mode configuration.
@@ -916,9 +845,9 @@ void nxagentSwitchAllScreens(ScreenPtr pScreen, Bool switchOn)
        */
 
       #ifdef WARNING
-      fprintf(stderr, &quot;nxagentSwitchAllScreens: WARNING! Expected ReparentNotify event missing.\n&quot;);
+      fprintf(stderr, &quot;nxagentSwitchFullscreen: WARNING! Expected ReparentNotify event missing.\n&quot;);
       #endif
- 
+
       nxagentWMIsRunning = False;
       attributes.override_redirect = False;
       XChangeWindowAttributes(nxagentDisplay, w, valuemask, &amp;attributes);
@@ -932,6 +861,7 @@ void nxagentSwitchAllScreens(ScreenPtr pScreen, Bool switchOn)
      * It could be necessary:
      * - To restore screensaver.
      * - To set or reset nxagentForceBackingStore flag.
+     * - To grab keyboard.
      * - To propagate device settings to the X server if no WM is running.
      */
 
@@ -940,10 +870,7 @@ void nxagentSwitchAllScreens(ScreenPtr pScreen, Bool switchOn)
      */
 
     nxagentChangeOption(Fullscreen, False);
-    nxagentChangeOption(AllScreens, False);
-
     XDestroyWindow(nxagentDisplay, nxagentIconWindow);
-
     nxagentIconWindow = nxagentFullscreenWindow = None;
 
     if (nxagentOption(DesktopResize) == 1)
@@ -957,19 +884,8 @@ void nxagentSwitchAllScreens(ScreenPtr pScreen, Bool switchOn)
       }
     }
 
-    if (nxagentOption(WMBorderWidth) &gt; 0 &amp;&amp; nxagentOption(WMTitleHeight) &gt; 0)
-    {
-      nxagentChangeOption(X, nxagentOption(SavedX) -
-                              nxagentOption(WMBorderWidth));
-      nxagentChangeOption(Y, nxagentOption(SavedY) -
-                              nxagentOption(WMTitleHeight));
-    }
-    else
-    {
-      nxagentChangeOption(X, nxagentOption(SavedX));
-      nxagentChangeOption(Y, nxagentOption(SavedY));
-    }
-
+    nxagentChangeOption(X, nxagentOption(SavedX));
+    nxagentChangeOption(Y, nxagentOption(SavedY));
     nxagentChangeOption(Width, nxagentOption(SavedWidth));
     nxagentChangeOption(Height, nxagentOption(SavedHeight));
 
@@ -993,7 +909,7 @@ void nxagentSwitchAllScreens(ScreenPtr pScreen, Bool switchOn)
   XMoveResizeWindow(nxagentDisplay, nxagentInputWindows[0], 0, 0,
                         nxagentOption(Width), nxagentOption(Height));
 
-  nxagentSetPrintGeometry(pScreen -&gt; myNum); 
+  nxagentSetPrintGeometry(pScreen -&gt; myNum);
 }
 
 #ifdef VIEWPORT_FRAME
@@ -2495,11 +2411,6 @@ void nxagentMapDefaultWindows()
         #endif
 
         XMapWindow(nxagentDisplay, nxagentDefaultWindows[pScreen-&gt;myNum]);
-
-        if (nxagentOption(Fullscreen) == 1 &amp;&amp; nxagentWMIsRunning == 1)
-        {
-          nxagentMaximizeToFullScreen(pScreen);
-        }
       }
 
       /*
@@ -2986,13 +2897,6 @@ FIXME: Do we need to set save unders attribute here?
       XSizeHints *props, hints;
       unsigned char *data = NULL;
 
-      #ifdef _XSERVER64
-
-      unsigned char *data64 = NULL;
-      unsigned int i;
-
-      #endif
-
       hints.flags = 0;
 
       ret = GetWindowProperty(pWin,
@@ -3001,13 +2905,10 @@ FIXME: Do we need to set save unders attribute here?
                                           False, XA_WM_SIZE_HINTS,
                                               &amp;type, &amp;format, &amp;nItems, &amp;bytesLeft, &amp;data);
 
-      /*
-       * 72 is the number of bytes returned by
-       * sizeof(XSizeHints) on 32 bit platforms.
-       */
+      props = (XSizeHints*) data;
 
       if (ret == Success &amp;&amp;
-              ((format &gt;&gt; 3) * nItems) == 72 &amp;&amp;
+              ((format &gt;&gt; 3) * nItems) == sizeof(XSizeHints) &amp;&amp;
                   bytesLeft == 0 &amp;&amp;
                       type == XA_WM_SIZE_HINTS)
       {
@@ -3016,30 +2917,6 @@ FIXME: Do we need to set save unders attribute here?
                     (void*)pWin, pWin -&gt; drawable.id, nxagentWindow(pWin));
         #endif
 
-        #ifdef _XSERVER64
-
-        data64 = (unsigned char *) malloc(sizeof(XSizeHints) + 4);
-
-        for (i = 0; i &lt; 4; i++)
-        {
-          *(data64 + i) = *(data + i);
-        }
-
-        *(((int *) data64) + 1) = 0;
-
-        for (i = 8; i &lt; sizeof(XSizeHints) + 4; i++)
-        {
-          *(data64 + i) = *(data + i - 4);
-        }
-
-        props = (XSizeHints *) data64;
-
-        #else
-
-        props = (XSizeHints *) data;
-
-        #endif   /* _XSERVER64 */
-
         hints = *props;
       }
       else
@@ -3058,15 +2935,6 @@ FIXME: Do we need to set save unders attribute here?
       XSetWMNormalHints(nxagentDisplay,
                            nxagentWindow(pWin),
                               &amp;hints);
-
-      #ifdef _XSERVER64
-
-      if (data64 != NULL)
-      {
-        free(data64);
-      }
-
-      #endif
     }
   }
 
diff --git a/nx-X11/programs/Xserver/hw/nxagent/Windows.h b/nx-X11/programs/Xserver/hw/nxagent/Windows.h
index 3ca74ba..f77db37 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/Windows.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/Windows.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
@@ -222,8 +222,6 @@ void nxagentSetTopLevelEventMask(WindowPtr pWin);
 
 void nxagentSwitchFullscreen(ScreenPtr pScreen, Bool switchOn);
 
-void nxagentSwitchAllScreens(ScreenPtr pScreen, Bool switchOn);
-
 void nxagentMoveViewport(ScreenPtr pScreen, int hShift, int vShift);
 
 #ifdef VIEWPORT_FRAME
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXdamage.c b/nx-X11/programs/Xserver/hw/nxagent/X/NXdamage.c
index cf5d48b..967c565 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXdamage.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXdamage.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXdamage.c.NX.original b/nx-X11/programs/Xserver/hw/nxagent/X/NXdamage.c.NX.original
index cf5d48b..967c565 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXdamage.c.NX.original
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXdamage.c.NX.original
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXdispatch.c b/nx-X11/programs/Xserver/hw/nxagent/X/NXdispatch.c
index 69ad30d..d9da237 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXdispatch.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXdispatch.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
@@ -513,6 +513,17 @@ Dispatch(void)
      * completed. We can now handle our clients.
      */
 
+    if (serverGeneration &gt; nxagentMaxAllowedResets)
+    {
+      #ifdef NX_DEBUG_INPUT
+      fprintf(stderr, &quot;Session: Session started at '%s' timestamp [%lu].\n&quot;, GetTimeAsString(), GetTimeInMillis());
+      #else
+      fprintf(stderr, &quot;Session: Session started at '%s'.\n&quot;, GetTimeAsString());
+      #endif
+
+      nxagentSessionState = SESSION_UP;
+    }
+
     #ifdef XKB
 
     nxagentInitXkbWrapper();
@@ -596,21 +607,6 @@ Reply   Total	Cached	Bits In			Bits Out		Bits/Reply	  Ratio
           clientReady[1] = NXAGENT_WAKEUP;
         }
 
-        if (serverGeneration &gt; nxagentMaxAllowedResets &amp;&amp;
-                nxagentSessionState == SESSION_STARTING &amp;&amp;
-                    (nxagentOption(Xdmcp) == 0 || nxagentXdmcpUp == 1))
-        {
-          #ifdef NX_DEBUG_INPUT
-          fprintf(stderr, &quot;Session: Session started at '%s' timestamp [%lu].\n&quot;,
-                      GetTimeAsString(), GetTimeInMillis());
-          #else
-          fprintf(stderr, &quot;Session: Session started at '%s'.\n&quot;,
-                      GetTimeAsString());
-          #endif
-
-          nxagentSessionState = SESSION_UP;
-        }
-
         #ifdef BLOCKS
         fprintf(stderr, &quot;[End dispatch]\n&quot;);
         #endif
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXdispatch.c.NX.original b/nx-X11/programs/Xserver/hw/nxagent/X/NXdispatch.c.NX.original
index 69ad30d..d9da237 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXdispatch.c.NX.original
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXdispatch.c.NX.original
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
@@ -513,6 +513,17 @@ Dispatch(void)
      * completed. We can now handle our clients.
      */
 
+    if (serverGeneration &gt; nxagentMaxAllowedResets)
+    {
+      #ifdef NX_DEBUG_INPUT
+      fprintf(stderr, &quot;Session: Session started at '%s' timestamp [%lu].\n&quot;, GetTimeAsString(), GetTimeInMillis());
+      #else
+      fprintf(stderr, &quot;Session: Session started at '%s'.\n&quot;, GetTimeAsString());
+      #endif
+
+      nxagentSessionState = SESSION_UP;
+    }
+
     #ifdef XKB
 
     nxagentInitXkbWrapper();
@@ -596,21 +607,6 @@ Reply   Total	Cached	Bits In			Bits Out		Bits/Reply	  Ratio
           clientReady[1] = NXAGENT_WAKEUP;
         }
 
-        if (serverGeneration &gt; nxagentMaxAllowedResets &amp;&amp;
-                nxagentSessionState == SESSION_STARTING &amp;&amp;
-                    (nxagentOption(Xdmcp) == 0 || nxagentXdmcpUp == 1))
-        {
-          #ifdef NX_DEBUG_INPUT
-          fprintf(stderr, &quot;Session: Session started at '%s' timestamp [%lu].\n&quot;,
-                      GetTimeAsString(), GetTimeInMillis());
-          #else
-          fprintf(stderr, &quot;Session: Session started at '%s'.\n&quot;,
-                      GetTimeAsString());
-          #endif
-
-          nxagentSessionState = SESSION_UP;
-        }
-
         #ifdef BLOCKS
         fprintf(stderr, &quot;[End dispatch]\n&quot;);
         #endif
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXdixfonts.c b/nx-X11/programs/Xserver/hw/nxagent/X/NXdixfonts.c
index 04fc047..4361985 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXdixfonts.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXdixfonts.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXdixfonts.c.NX.original b/nx-X11/programs/Xserver/hw/nxagent/X/NXdixfonts.c.NX.original
index 04fc047..4361985 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXdixfonts.c.NX.original
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXdixfonts.c.NX.original
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXevents.c b/nx-X11/programs/Xserver/hw/nxagent/X/NXevents.c
index c5593ad..4673810 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXevents.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXevents.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXevents.c.NX.original b/nx-X11/programs/Xserver/hw/nxagent/X/NXevents.c.NX.original
index c5593ad..4673810 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXevents.c.NX.original
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXevents.c.NX.original
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXextension.c b/nx-X11/programs/Xserver/hw/nxagent/X/NXextension.c
index ead9b9d..9bfb284 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXextension.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXextension.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXextension.c.NX.original b/nx-X11/programs/Xserver/hw/nxagent/X/NXextension.c.NX.original
index ead9b9d..9bfb284 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXextension.c.NX.original
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXextension.c.NX.original
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXglxext.c b/nx-X11/programs/Xserver/hw/nxagent/X/NXglxext.c
index 51c5479..3d021a0 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXglxext.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXglxext.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXglxext.c.NX.original b/nx-X11/programs/Xserver/hw/nxagent/X/NXglxext.c.NX.original
index 51c5479..3d021a0 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXglxext.c.NX.original
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXglxext.c.NX.original
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXglyph.c b/nx-X11/programs/Xserver/hw/nxagent/X/NXglyph.c
index cd65fdc..577659a 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXglyph.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXglyph.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXglyph.c.NX.original b/nx-X11/programs/Xserver/hw/nxagent/X/NXglyph.c.NX.original
index cd65fdc..577659a 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXglyph.c.NX.original
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXglyph.c.NX.original
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXglyphcurs.c b/nx-X11/programs/Xserver/hw/nxagent/X/NXglyphcurs.c
index 7a1d813..b11b10f 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXglyphcurs.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXglyphcurs.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXglyphcurs.c.NX.original b/nx-X11/programs/Xserver/hw/nxagent/X/NXglyphcurs.c.NX.original
index 7a1d813..b11b10f 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXglyphcurs.c.NX.original
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXglyphcurs.c.NX.original
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXglyphstr.h b/nx-X11/programs/Xserver/hw/nxagent/X/NXglyphstr.h
index fa6b5fb..b6d563c 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXglyphstr.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXglyphstr.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXglyphstr.h.NX.original b/nx-X11/programs/Xserver/hw/nxagent/X/NXglyphstr.h.NX.original
index fa6b5fb..b6d563c 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXglyphstr.h.NX.original
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXglyphstr.h.NX.original
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXmiexpose.c b/nx-X11/programs/Xserver/hw/nxagent/X/NXmiexpose.c
index 3fc73cf..652b85d 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXmiexpose.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXmiexpose.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXmiexpose.c.NX.original b/nx-X11/programs/Xserver/hw/nxagent/X/NXmiexpose.c.NX.original
index 3fc73cf..652b85d 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXmiexpose.c.NX.original
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXmiexpose.c.NX.original
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXmiglyph.c b/nx-X11/programs/Xserver/hw/nxagent/X/NXmiglyph.c
index 5f32334..4eabd17 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXmiglyph.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXmiglyph.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXmiglyph.c.NX.original b/nx-X11/programs/Xserver/hw/nxagent/X/NXmiglyph.c.NX.original
index 5f32334..4eabd17 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXmiglyph.c.NX.original
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXmiglyph.c.NX.original
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXmitrap.c b/nx-X11/programs/Xserver/hw/nxagent/X/NXmitrap.c
index f418654..1243564 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXmitrap.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXmitrap.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXmitrap.c.NX.original b/nx-X11/programs/Xserver/hw/nxagent/X/NXmitrap.c.NX.original
index f418654..1243564 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXmitrap.c.NX.original
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXmitrap.c.NX.original
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXmiwindow.c b/nx-X11/programs/Xserver/hw/nxagent/X/NXmiwindow.c
index 1902949..d486d19 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXmiwindow.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXmiwindow.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXmiwindow.c.NX.original b/nx-X11/programs/Xserver/hw/nxagent/X/NXmiwindow.c.NX.original
index 1902949..d486d19 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXmiwindow.c.NX.original
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXmiwindow.c.NX.original
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXpicture.c b/nx-X11/programs/Xserver/hw/nxagent/X/NXpicture.c
index d9054b4..5cd3e50 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXpicture.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXpicture.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
@@ -62,7 +62,6 @@
 #include &quot;Screen.h&quot;
 #include &quot;Pixmaps.h&quot;
 #include &quot;Drawable.h&quot;
-#include &quot;Render.h&quot;
 
 #define PANIC
 #define WARNING
@@ -873,9 +872,6 @@ AllocatePicture (ScreenPtr  pScreen)
 	else
 	    ppriv-&gt;ptr = (pointer)NULL;
     }
-
-    nxagentPicturePriv(pPicture) -&gt; picture = 0;
-
     return pPicture;
 }
 
@@ -1067,49 +1063,7 @@ static void initGradient(SourcePictPtr pGradient, int stopCount,
 static PicturePtr createSourcePicture(void)
 {
     PicturePtr pPicture;
-
-    extern int nxagentPicturePrivateIndex;
-
-    unsigned int totalPictureSize;
-
-    DevUnion *ppriv;
-
-    char *privPictureRecAddr;
-
-    int i;
-
-    /*
-     * Compute size of entire PictureRect, plus privates.
-     */
-
-    totalPictureSize = sizeof(PictureRec) +
-                           picturePrivateCount * sizeof(DevUnion) +
-                               sizeof(nxagentPrivPictureRec);
-
-    pPicture = (PicturePtr) xalloc(totalPictureSize);
-
-    if (pPicture != NULL)
-    {
-      ppriv = (DevUnion *) (pPicture + 1);
-
-      for (i = 0; i &lt; picturePrivateCount; ++i)
-      {
-        /*
-         * Other privates are inaccessible.
-         */
-
-        ppriv[i].ptr = NULL;
-      }
-
-      privPictureRecAddr = (char *) &amp;ppriv[picturePrivateCount];
-
-      ppriv[nxagentPicturePrivateIndex].ptr = (pointer) privPictureRecAddr;
-
-      pPicture -&gt; devPrivates = ppriv;
-
-      nxagentPicturePriv(pPicture) -&gt; picture = 0;
-    }
-
+    pPicture = (PicturePtr) xalloc(sizeof(PictureRec));
     pPicture-&gt;pDrawable = 0;
     pPicture-&gt;pFormat = 0;
     pPicture-&gt;pNext = 0;
@@ -1743,10 +1697,6 @@ FreePicture (pointer	value,
 
     if (--pPicture-&gt;refcnt == 0)
     {
-#ifdef NXAGENT_SERVER
-        nxagentDestroyPicture(pPicture);
-#endif
-
 	if (pPicture-&gt;transform)
 	    xfree (pPicture-&gt;transform);
         if (!pPicture-&gt;pDrawable) {
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXpicture.c.NX.original b/nx-X11/programs/Xserver/hw/nxagent/X/NXpicture.c.NX.original
index d9054b4..5cd3e50 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXpicture.c.NX.original
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXpicture.c.NX.original
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
@@ -62,7 +62,6 @@
 #include &quot;Screen.h&quot;
 #include &quot;Pixmaps.h&quot;
 #include &quot;Drawable.h&quot;
-#include &quot;Render.h&quot;
 
 #define PANIC
 #define WARNING
@@ -873,9 +872,6 @@ AllocatePicture (ScreenPtr  pScreen)
 	else
 	    ppriv-&gt;ptr = (pointer)NULL;
     }
-
-    nxagentPicturePriv(pPicture) -&gt; picture = 0;
-
     return pPicture;
 }
 
@@ -1067,49 +1063,7 @@ static void initGradient(SourcePictPtr pGradient, int stopCount,
 static PicturePtr createSourcePicture(void)
 {
     PicturePtr pPicture;
-
-    extern int nxagentPicturePrivateIndex;
-
-    unsigned int totalPictureSize;
-
-    DevUnion *ppriv;
-
-    char *privPictureRecAddr;
-
-    int i;
-
-    /*
-     * Compute size of entire PictureRect, plus privates.
-     */
-
-    totalPictureSize = sizeof(PictureRec) +
-                           picturePrivateCount * sizeof(DevUnion) +
-                               sizeof(nxagentPrivPictureRec);
-
-    pPicture = (PicturePtr) xalloc(totalPictureSize);
-
-    if (pPicture != NULL)
-    {
-      ppriv = (DevUnion *) (pPicture + 1);
-
-      for (i = 0; i &lt; picturePrivateCount; ++i)
-      {
-        /*
-         * Other privates are inaccessible.
-         */
-
-        ppriv[i].ptr = NULL;
-      }
-
-      privPictureRecAddr = (char *) &amp;ppriv[picturePrivateCount];
-
-      ppriv[nxagentPicturePrivateIndex].ptr = (pointer) privPictureRecAddr;
-
-      pPicture -&gt; devPrivates = ppriv;
-
-      nxagentPicturePriv(pPicture) -&gt; picture = 0;
-    }
-
+    pPicture = (PicturePtr) xalloc(sizeof(PictureRec));
     pPicture-&gt;pDrawable = 0;
     pPicture-&gt;pFormat = 0;
     pPicture-&gt;pNext = 0;
@@ -1743,10 +1697,6 @@ FreePicture (pointer	value,
 
     if (--pPicture-&gt;refcnt == 0)
     {
-#ifdef NXAGENT_SERVER
-        nxagentDestroyPicture(pPicture);
-#endif
-
 	if (pPicture-&gt;transform)
 	    xfree (pPicture-&gt;transform);
         if (!pPicture-&gt;pDrawable) {
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXpicturestr.h b/nx-X11/programs/Xserver/hw/nxagent/X/NXpicturestr.h
index 0d1a8e1..d11e1fe 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXpicturestr.h
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXpicturestr.h
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXpicturestr.h.NX.original b/nx-X11/programs/Xserver/hw/nxagent/X/NXpicturestr.h.NX.original
index 0d1a8e1..d11e1fe 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXpicturestr.h.NX.original
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXpicturestr.h.NX.original
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXproperty.c b/nx-X11/programs/Xserver/hw/nxagent/X/NXproperty.c
index cd1ec6d..ac61552 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXproperty.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXproperty.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXproperty.c.NX.original b/nx-X11/programs/Xserver/hw/nxagent/X/NXproperty.c.NX.original
index cd1ec6d..ac61552 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXproperty.c.NX.original
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXproperty.c.NX.original
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXrandr.c b/nx-X11/programs/Xserver/hw/nxagent/X/NXrandr.c
index 5f460f2..fa40a49 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXrandr.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXrandr.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXrandr.c.NX.original b/nx-X11/programs/Xserver/hw/nxagent/X/NXrandr.c.NX.original
index 5f460f2..fa40a49 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXrandr.c.NX.original
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXrandr.c.NX.original
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXrender.c b/nx-X11/programs/Xserver/hw/nxagent/X/NXrender.c
index 89e7901..7c60d85 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXrender.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXrender.c
@@ -26,7 +26,7 @@
 
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
@@ -116,6 +116,7 @@ int  nxagentCursorSaveRenderInfo(ScreenPtr, CursorPtr);
 void nxagentCursorPostSaveRenderInfo(CursorPtr, ScreenPtr, PicturePtr, int, int);
 int  nxagentRenderRealizeCursor(ScreenPtr, CursorPtr);
 int  nxagentCreatePicture(PicturePtr, Mask);
+void nxagentDestroyPicture(PicturePtr pPicture);
 void nxagentChangePicture(PicturePtr, Mask);
 int  nxagentChangePictureClip(PicturePtr, int, int, xRectangle *, int, int);
 void nxagentComposite(CARD8, PicturePtr, PicturePtr, PicturePtr, INT16, INT16,
@@ -131,28 +132,6 @@ void nxagentSetPictureFilter(PicturePtr pPicture, char *filter, int name_size,
 void nxagentTrapezoids(CARD8 op, PicturePtr pSrc, PicturePtr pDst, PictFormatPtr maskFormat,
                            INT16 xSrc, INT16 ySrc, int ntrap, xTrapezoid *traps);
 
-void nxagentRenderCreateSolidFill(PicturePtr pPicture, xRenderColor *color);
-
-void nxagentRenderCreateLinearGradient(PicturePtr pPicture, xPointFixed *p1,
-                                           xPointFixed *p2, int nStops,
-                                               xFixed *stops,
-                                                   xRenderColor *colors);
-
-void nxagentRenderCreateRadialGradient(PicturePtr pPicture, xPointFixed *inner,
-                                           xPointFixed *outer,
-                                               xFixed innerRadius,
-                                                   xFixed outerRadius,
-                                                       int nStops,
-                                                           xFixed *stops,
-                                                               xRenderColor *colors);
-
-void nxagentRenderCreateConicalGradient(PicturePtr pPicture,
-                                            xPointFixed *center,
-                                                xFixed angle, int nStops, 
-                                                    xFixed *stops, 
-                                                        xRenderColor *colors);
-
-
 /*
  * The void pointer is actually a XGlyphElt8.
  */
@@ -844,6 +823,8 @@ ProcRenderFreePicture (ClientPtr client)
     VERIFY_PICTURE (pPicture, stuff-&gt;picture, client, SecurityDestroyAccess,
 		    RenderErrBase + BadPicture);
 
+    nxagentDestroyPicture(pPicture);
+
     FreeResource (stuff-&gt;picture, RT_NONE);
     return(client-&gt;noClientException);
 }
@@ -945,16 +926,9 @@ ProcRenderComposite (ClientPtr client)
 		    RenderErrBase + BadPicture);
     VERIFY_ALPHA (pMask, stuff-&gt;mask, client, SecurityReadAccess, 
 		  RenderErrBase + BadPicture);
-/*
-FIXME: Imported change from newest version of Xorg. Changed pSrc to pDst.
-
     if ((pSrc-&gt;pDrawable &amp;&amp; pSrc-&gt;pDrawable-&gt;pScreen != pDst-&gt;pDrawable-&gt;pScreen) ||
 	(pMask &amp;&amp; pMask-&gt;pDrawable &amp;&amp; pSrc-&gt;pDrawable-&gt;pScreen != pMask-&gt;pDrawable-&gt;pScreen))
 	return BadMatch;
-*/
-    if ((pSrc-&gt;pDrawable &amp;&amp; pSrc-&gt;pDrawable-&gt;pScreen != pDst-&gt;pDrawable-&gt;pScreen) ||
-	(pMask &amp;&amp; pMask-&gt;pDrawable &amp;&amp; pDst-&gt;pDrawable-&gt;pScreen != pMask-&gt;pDrawable-&gt;pScreen))
-	return BadMatch;
 
     ValidatePicture (pSrc);
     if (pMask)
@@ -2362,11 +2336,6 @@ static int ProcRenderCreateSolidFill(ClientPtr client)
     pPicture = CreateSolidPicture(stuff-&gt;pid, &amp;stuff-&gt;color, &amp;error);
     if (!pPicture)
 	return error;
-    /* AGENT SERVER */
-
-    nxagentRenderCreateSolidFill(pPicture, &amp;stuff -&gt; color);
-
-    /* AGENT SERVER */
     if (!AddResource (stuff-&gt;pid, PictureType, (pointer)pPicture))
 	return BadAlloc;
     return Success;
@@ -2398,12 +2367,6 @@ static int ProcRenderCreateLinearGradient (ClientPtr client)
                                             stuff-&gt;nStops, stops, colors, &amp;error);
     if (!pPicture)
 	return error;
-    /* AGENT SERVER */
-
-    nxagentRenderCreateLinearGradient(pPicture, &amp;stuff-&gt;p1, &amp;stuff-&gt;p2,
-                                          stuff-&gt;nStops, stops, colors);
-
-    /* AGENT SERVER */
     if (!AddResource (stuff-&gt;pid, PictureType, (pointer)pPicture))
 	return BadAlloc;
     return Success;
@@ -2434,14 +2397,6 @@ static int ProcRenderCreateRadialGradient (ClientPtr client)
                                             stuff-&gt;nStops, stops, colors, &amp;error);
     if (!pPicture)
 	return error;
-    /* AGENT SERVER */
-
-    nxagentRenderCreateRadialGradient(pPicture, &amp;stuff-&gt;inner, &amp;stuff-&gt;outer,
-                                          stuff-&gt;inner_radius,
-                                              stuff-&gt;outer_radius, 
-                                                  stuff-&gt;nStops, stops, colors);
-
-    /* AGENT SERVER */
     if (!AddResource (stuff-&gt;pid, PictureType, (pointer)pPicture))
 	return BadAlloc;
     return Success;
@@ -2471,13 +2426,6 @@ static int ProcRenderCreateConicalGradient (ClientPtr client)
                                              stuff-&gt;nStops, stops, colors, &amp;error);
     if (!pPicture)
 	return error;
-    /* AGENT SERVER */
-
-    nxagentRenderCreateConicalGradient(pPicture, &amp;stuff-&gt;center,
-                                           stuff-&gt;angle, stuff-&gt;nStops, stops,
-                                               colors);
-
-    /* AGENT SERVER */
     if (!AddResource (stuff-&gt;pid, PictureType, (pointer)pPicture))
 	return BadAlloc;
     return Success;
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXrender.c.NX.original b/nx-X11/programs/Xserver/hw/nxagent/X/NXrender.c.NX.original
index 89e7901..7c60d85 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXrender.c.NX.original
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXrender.c.NX.original
@@ -26,7 +26,7 @@
 
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
@@ -116,6 +116,7 @@ int  nxagentCursorSaveRenderInfo(ScreenPtr, CursorPtr);
 void nxagentCursorPostSaveRenderInfo(CursorPtr, ScreenPtr, PicturePtr, int, int);
 int  nxagentRenderRealizeCursor(ScreenPtr, CursorPtr);
 int  nxagentCreatePicture(PicturePtr, Mask);
+void nxagentDestroyPicture(PicturePtr pPicture);
 void nxagentChangePicture(PicturePtr, Mask);
 int  nxagentChangePictureClip(PicturePtr, int, int, xRectangle *, int, int);
 void nxagentComposite(CARD8, PicturePtr, PicturePtr, PicturePtr, INT16, INT16,
@@ -131,28 +132,6 @@ void nxagentSetPictureFilter(PicturePtr pPicture, char *filter, int name_size,
 void nxagentTrapezoids(CARD8 op, PicturePtr pSrc, PicturePtr pDst, PictFormatPtr maskFormat,
                            INT16 xSrc, INT16 ySrc, int ntrap, xTrapezoid *traps);
 
-void nxagentRenderCreateSolidFill(PicturePtr pPicture, xRenderColor *color);
-
-void nxagentRenderCreateLinearGradient(PicturePtr pPicture, xPointFixed *p1,
-                                           xPointFixed *p2, int nStops,
-                                               xFixed *stops,
-                                                   xRenderColor *colors);
-
-void nxagentRenderCreateRadialGradient(PicturePtr pPicture, xPointFixed *inner,
-                                           xPointFixed *outer,
-                                               xFixed innerRadius,
-                                                   xFixed outerRadius,
-                                                       int nStops,
-                                                           xFixed *stops,
-                                                               xRenderColor *colors);
-
-void nxagentRenderCreateConicalGradient(PicturePtr pPicture,
-                                            xPointFixed *center,
-                                                xFixed angle, int nStops, 
-                                                    xFixed *stops, 
-                                                        xRenderColor *colors);
-
-
 /*
  * The void pointer is actually a XGlyphElt8.
  */
@@ -844,6 +823,8 @@ ProcRenderFreePicture (ClientPtr client)
     VERIFY_PICTURE (pPicture, stuff-&gt;picture, client, SecurityDestroyAccess,
 		    RenderErrBase + BadPicture);
 
+    nxagentDestroyPicture(pPicture);
+
     FreeResource (stuff-&gt;picture, RT_NONE);
     return(client-&gt;noClientException);
 }
@@ -945,16 +926,9 @@ ProcRenderComposite (ClientPtr client)
 		    RenderErrBase + BadPicture);
     VERIFY_ALPHA (pMask, stuff-&gt;mask, client, SecurityReadAccess, 
 		  RenderErrBase + BadPicture);
-/*
-FIXME: Imported change from newest version of Xorg. Changed pSrc to pDst.
-
     if ((pSrc-&gt;pDrawable &amp;&amp; pSrc-&gt;pDrawable-&gt;pScreen != pDst-&gt;pDrawable-&gt;pScreen) ||
 	(pMask &amp;&amp; pMask-&gt;pDrawable &amp;&amp; pSrc-&gt;pDrawable-&gt;pScreen != pMask-&gt;pDrawable-&gt;pScreen))
 	return BadMatch;
-*/
-    if ((pSrc-&gt;pDrawable &amp;&amp; pSrc-&gt;pDrawable-&gt;pScreen != pDst-&gt;pDrawable-&gt;pScreen) ||
-	(pMask &amp;&amp; pMask-&gt;pDrawable &amp;&amp; pDst-&gt;pDrawable-&gt;pScreen != pMask-&gt;pDrawable-&gt;pScreen))
-	return BadMatch;
 
     ValidatePicture (pSrc);
     if (pMask)
@@ -2362,11 +2336,6 @@ static int ProcRenderCreateSolidFill(ClientPtr client)
     pPicture = CreateSolidPicture(stuff-&gt;pid, &amp;stuff-&gt;color, &amp;error);
     if (!pPicture)
 	return error;
-    /* AGENT SERVER */
-
-    nxagentRenderCreateSolidFill(pPicture, &amp;stuff -&gt; color);
-
-    /* AGENT SERVER */
     if (!AddResource (stuff-&gt;pid, PictureType, (pointer)pPicture))
 	return BadAlloc;
     return Success;
@@ -2398,12 +2367,6 @@ static int ProcRenderCreateLinearGradient (ClientPtr client)
                                             stuff-&gt;nStops, stops, colors, &amp;error);
     if (!pPicture)
 	return error;
-    /* AGENT SERVER */
-
-    nxagentRenderCreateLinearGradient(pPicture, &amp;stuff-&gt;p1, &amp;stuff-&gt;p2,
-                                          stuff-&gt;nStops, stops, colors);
-
-    /* AGENT SERVER */
     if (!AddResource (stuff-&gt;pid, PictureType, (pointer)pPicture))
 	return BadAlloc;
     return Success;
@@ -2434,14 +2397,6 @@ static int ProcRenderCreateRadialGradient (ClientPtr client)
                                             stuff-&gt;nStops, stops, colors, &amp;error);
     if (!pPicture)
 	return error;
-    /* AGENT SERVER */
-
-    nxagentRenderCreateRadialGradient(pPicture, &amp;stuff-&gt;inner, &amp;stuff-&gt;outer,
-                                          stuff-&gt;inner_radius,
-                                              stuff-&gt;outer_radius, 
-                                                  stuff-&gt;nStops, stops, colors);
-
-    /* AGENT SERVER */
     if (!AddResource (stuff-&gt;pid, PictureType, (pointer)pPicture))
 	return BadAlloc;
     return Success;
@@ -2471,13 +2426,6 @@ static int ProcRenderCreateConicalGradient (ClientPtr client)
                                              stuff-&gt;nStops, stops, colors, &amp;error);
     if (!pPicture)
 	return error;
-    /* AGENT SERVER */
-
-    nxagentRenderCreateConicalGradient(pPicture, &amp;stuff-&gt;center,
-                                           stuff-&gt;angle, stuff-&gt;nStops, stops,
-                                               colors);
-
-    /* AGENT SERVER */
     if (!AddResource (stuff-&gt;pid, PictureType, (pointer)pPicture))
 	return BadAlloc;
     return Success;
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXresource.c b/nx-X11/programs/Xserver/hw/nxagent/X/NXresource.c
index d1c8325..cffe800 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXresource.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXresource.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXresource.c.NX.original b/nx-X11/programs/Xserver/hw/nxagent/X/NXresource.c.NX.original
index d1c8325..cffe800 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXresource.c.NX.original
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXresource.c.NX.original
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXshm.c b/nx-X11/programs/Xserver/hw/nxagent/X/NXshm.c
index eaaa920..ef830b7 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXshm.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXshm.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXshm.c.NX.original b/nx-X11/programs/Xserver/hw/nxagent/X/NXshm.c.NX.original
index eaaa920..ef830b7 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXshm.c.NX.original
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXshm.c.NX.original
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXwindow.c b/nx-X11/programs/Xserver/hw/nxagent/X/NXwindow.c
index 76e86fd..ea133ea 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXwindow.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXwindow.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXwindow.c.NX.original b/nx-X11/programs/Xserver/hw/nxagent/X/NXwindow.c.NX.original
index 76e86fd..ea133ea 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXwindow.c.NX.original
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXwindow.c.NX.original
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXxvdisp.c b/nx-X11/programs/Xserver/hw/nxagent/X/NXxvdisp.c
index f6dad31..497a62f 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXxvdisp.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXxvdisp.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/X/NXxvdisp.c.NX.original b/nx-X11/programs/Xserver/hw/nxagent/X/NXxvdisp.c.NX.original
index f6dad31..497a62f 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/X/NXxvdisp.c.NX.original
+++ b/nx-X11/programs/Xserver/hw/nxagent/X/NXxvdisp.c.NX.original
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/nxagent.xpm b/nx-X11/programs/Xserver/hw/nxagent/nxagent.xpm
index dd8be6c..5023265 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/nxagent.xpm
+++ b/nx-X11/programs/Xserver/hw/nxagent/nxagent.xpm
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/nxmissing.xpm b/nx-X11/programs/Xserver/hw/nxagent/nxmissing.xpm
index 854e0a6..3fce57f 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/nxmissing.xpm
+++ b/nx-X11/programs/Xserver/hw/nxagent/nxmissing.xpm
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/os2Stub.c b/nx-X11/programs/Xserver/hw/nxagent/os2Stub.c
index 9ec7e6b..f4d0a2d 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/os2Stub.c
+++ b/nx-X11/programs/Xserver/hw/nxagent/os2Stub.c
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2009 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */
diff --git a/nx-X11/programs/Xserver/hw/nxagent/screensaver b/nx-X11/programs/Xserver/hw/nxagent/screensaver
index ef7cd66..2fcf5dc 100644
--- a/nx-X11/programs/Xserver/hw/nxagent/screensaver
+++ b/nx-X11/programs/Xserver/hw/nxagent/screensaver
@@ -1,6 +1,6 @@
 /**************************************************************************/
 /*                                                                        */
-/* Copyright (c) 2001, 2011 NoMachine, <A HREF="http://www.nomachine.com/.">http://www.nomachine.com/.</A>         */
+/* Copyright (c) 2001, 2003 NoMachine, <A HREF="http://www.nomachine.com.">http://www.nomachine.com.</A>          */
 /*                                                                        */
 /* NXAGENT, NX protocol compression and NX extensions to this software    */
 /* are copyright of NoMachine. Redistribution and use of the present      */


hooks/post-receive
-- 
nx-libs.git (NX (redistributed))

This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;nx-libs.git&quot; (NX (redistributed)).

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011341.html">[X2Go-Commits] nx-libs.git - build-main (branch) updated:	nxagent/3.4.0-11
</A></li>
	<LI>Next message: <A HREF="011332.html">[X2Go-Commits] nx-libs.git - build-main (branch) updated:	nxagent/3.4.0-9
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11342">[ date ]</a>
              <a href="thread.html#11342">[ thread ]</a>
              <a href="subject.html#11342">[ subject ]</a>
              <a href="author.html#11342">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/x2go-commits">More information about the X2Go-commits
mailing list</a><br>
</body></html>
