<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [X2Go-Commits] x2gobroker.git - uccsoutput (branch) updated:	0.0.1.0-14-g317325d
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/x2go-commits/2013-April/index.html" >
   <LINK REL="made" HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2Go-Commits%5D%20x2gobroker.git%20-%20uccsoutput%20%28branch%29%20updated%3A%0A%090.0.1.0-14-g317325d&In-Reply-To=%3C20130407100152.77AA85DB20%40ymir%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005357.html">
   <LINK REL="Next"  HREF="005359.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[X2Go-Commits] x2gobroker.git - uccsoutput (branch) updated:	0.0.1.0-14-g317325d</H1>
    <B>X2Go dev team</B> 
    <A HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2Go-Commits%5D%20x2gobroker.git%20-%20uccsoutput%20%28branch%29%20updated%3A%0A%090.0.1.0-14-g317325d&In-Reply-To=%3C20130407100152.77AA85DB20%40ymir%3E"
       TITLE="[X2Go-Commits] x2gobroker.git - uccsoutput (branch) updated:	0.0.1.0-14-g317325d">git-admin at x2go.org
       </A><BR>
    <I>Sun Apr  7 12:01:52 CEST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="005357.html">[X2Go-Commits] x2goclient.git - master (branch) updated:	4.0.1.0-5-gcfa1e28
</A></li>
        <LI>Next message: <A HREF="005359.html">[X2Go-Commits] x2goserver.git - master (branch) updated:	3.1.1.3-148-gd82c204
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5358">[ date ]</a>
              <a href="thread.html#5358">[ thread ]</a>
              <a href="subject.html#5358">[ subject ]</a>
              <a href="author.html#5358">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch, uccsoutput has been updated
       via  317325dd112ba89775ff81984ef985f061a81b21 (commit)
       via  2cee942cb70599dd79ef3cf7f93fc2aeaa950472 (commit)
       via  0beb6626be0dd1c9d0363435268def8df85f1380 (commit)
      from  d14d83a114d66019fe9fa031f3a367c65224cf6a (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit 317325dd112ba89775ff81984ef985f061a81b21
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Sun Apr 7 12:01:15 2013 +0200

    add listsessions test for UCCS web frontend

commit 2cee942cb70599dd79ef3cf7f93fc2aeaa950472
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Sun Apr 7 12:00:51 2013 +0200

    remove debug output

commit 0beb6626be0dd1c9d0363435268def8df85f1380
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Sun Apr 7 11:38:48 2013 +0200

    enable BR tests in test unit

-----------------------------------------------------------------------

Summary of changes:
 x2gobroker/tests/test_broker_zeroconf.py    |    2 -
 x2gobroker/tests/test_web_plain_zeroconf.py |    9 ++-
 x2gobroker/tests/test_web_uccs_zeroconf.py  |   80 +++++++++++++++++++++++++++
 3 files changed, 84 insertions(+), 7 deletions(-)
 create mode 100644 x2gobroker/tests/test_web_uccs_zeroconf.py

The diff of changes is:
diff --git a/x2gobroker/tests/test_broker_zeroconf.py b/x2gobroker/tests/test_broker_zeroconf.py
index 1a42278..485e8bd 100644
--- a/x2gobroker/tests/test_broker_zeroconf.py
+++ b/x2gobroker/tests/test_broker_zeroconf.py
@@ -75,8 +75,6 @@ class TestX2GoBrokerBackendZeroconf(unittest.TestCase):
         _test_profiles = {
             _key: list_of_profiles['unittest']
         }
-        for key in _profiles[_key]:
-            print key, _profiles[_key][key], _test_profiles[_key][key]
         self.assertEqual(_profiles, _test_profiles)
 
     ### TEST: select_profile() method
diff --git a/x2gobroker/tests/test_web_plain_zeroconf.py b/x2gobroker/tests/test_web_plain_zeroconf.py
index dad829b..8b98daf 100644
--- a/x2gobroker/tests/test_web_plain_zeroconf.py
+++ b/x2gobroker/tests/test_web_plain_zeroconf.py
@@ -52,11 +52,10 @@ desktop-shell = KDE
         r.mustcontain('START_USER_SESSIONS')
         r.mustcontain('command=KDE')
         r.mustcontain('END_USER_SESSIONS')
-        # FIXME: get html tags out of the text/plain web renderer, needs patching of X2Go Client
-        #r.mustcontain(no='&lt;BR&gt;',)
-        #r.mustcontain(no='&lt;br&gt;',)
-        #r.mustcontain(no='&lt;BR /&gt;', )
-        #r.mustcontain(no='&lt;br /&gt;', )
+        r.mustcontain(no='&lt;BR&gt;',)
+        r.mustcontain(no='&lt;br&gt;',)
+        r.mustcontain(no='&lt;BR /&gt;', )
+        r.mustcontain(no='&lt;br /&gt;', )
         tf.close()
         _config = &quot;&quot;&quot;
 [zeroconf]
diff --git a/x2gobroker/tests/test_web_uccs_zeroconf.py b/x2gobroker/tests/test_web_uccs_zeroconf.py
new file mode 100644
index 0000000..6c5d2b5
--- /dev/null
+++ b/x2gobroker/tests/test_web_uccs_zeroconf.py
@@ -0,0 +1,80 @@
+# -*- coding: utf-8 -*-
+
+# Copyright (C) 2012 by Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
+#
+# X2Go Session Broker is free software; you can redistribute it and/or modify
+# it under the terms of the GNU Affero General Public License as published by
+# the Free Software Foundation; either version 3 of the License, or
+# (at your option) any later version.
+#
+# X2Go Session Broker is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU Affero General Public License for more details.
+#
+# You should have received a copy of the GNU Affero General Public License
+# along with this program; if not, write to the
+# Free Software Foundation, Inc.,
+# 51 Franklin St, Fifth Floor, Boston, MA 02110-1301, USA.
+
+import unittest
+import tempfile
+from paste.fixture import TestApp
+from nose.tools import *
+import tornado.wsgi
+import json
+
+# Python X2GoBroker modules
+import x2gobroker.defaults
+import x2gobroker.web.uccs
+
+urls = ( ('/uccs/(.*)', x2gobroker.web.uccs.X2GoBrokerWeb,) ,)
+application = tornado.wsgi.WSGIApplication(urls)
+
+class TestX2GoBrokerWebUccsZeroConf(unittest.TestCase):
+
+    ### TEST TASK: listsessions (you can influence the session command via the X2Go Broker's configurationfile)
+
+    def test_listsessions(self):
+        _expected_result = {
+            u'URL': u'<A HREF="http://localhost:8080/uccs/zeroconf">http://localhost:8080/uccs/zeroconf</A>',
+            u'AdditionalManagementServers': [],
+            u'Name': u'X2Go Session Broker',
+            u'RemoteDesktopServers': [
+                {
+                    u'Username': u'',
+                    u'Protocol': u'x2go',
+                    u'Name': u'LOCALHOST',
+                    u'URL': u'localhost:22',
+                    u'SessionTypeRequired': True,
+                    u'Password': None
+                },
+            ],
+        }
+        _config = &quot;&quot;&quot;
+[global]
+enable-uccs-output=true
+
+[zeroconf]
+enable = true
+auth-mech = testsuite
+desktop-shell = KDE
+&quot;&quot;&quot;
+        tf = tempfile.NamedTemporaryFile()
+        print &gt;&gt; tf, _config
+        tf.seek(0)
+        x2gobroker.defaults.X2GOBROKER_CONFIG = tf.name
+        testApp = TestApp(application)
+        r = testApp.get('/uccs/zeroconf/', params={'user': 'test', 'password': 'sweet',  'task': 'listsessions', }, expect_errors=True)
+        assert_equal(r.status, 200)
+        body = r.normal_body
+        result = json.loads(body)
+        self.assertEqual(_expected_result, result)
+        tf.close()
+
+
+def test_suite():
+    from unittest import TestSuite, makeSuite
+    suite = TestSuite()
+    suite.addTest(makeSuite(TestX2GoBrokerWebUccsZeroConf))
+    return suite


hooks/post-receive
-- 
x2gobroker.git (HTTP(S) Session broker for X2Go)

This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;x2gobroker.git&quot; (HTTP(S) Session broker for X2Go).

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005357.html">[X2Go-Commits] x2goclient.git - master (branch) updated:	4.0.1.0-5-gcfa1e28
</A></li>
	<LI>Next message: <A HREF="005359.html">[X2Go-Commits] x2goserver.git - master (branch) updated:	3.1.1.3-148-gd82c204
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5358">[ date ]</a>
              <a href="thread.html#5358">[ thread ]</a>
              <a href="subject.html#5358">[ subject ]</a>
              <a href="author.html#5358">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/x2go-commits">More information about the X2Go-commits
mailing list</a><br>
</body></html>
