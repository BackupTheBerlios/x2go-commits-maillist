<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [X2go-Commits] nx-libs.git - master (branch) updated:	redist-client/3.5.0.10-22-g6a96ae4
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/x2go-commits/2012-February/index.html" >
   <LINK REL="made" HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20nx-libs.git%20-%20master%20%28branch%29%20updated%3A%0A%09redist-client/3.5.0.10-22-g6a96ae4&In-Reply-To=%3C20120214220356.D07325DB17%40ymir%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002272.html">
   <LINK REL="Next"  HREF="002274.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[X2go-Commits] nx-libs.git - master (branch) updated:	redist-client/3.5.0.10-22-g6a96ae4</H1>
    <B>X2go dev team</B> 
    <A HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20nx-libs.git%20-%20master%20%28branch%29%20updated%3A%0A%09redist-client/3.5.0.10-22-g6a96ae4&In-Reply-To=%3C20120214220356.D07325DB17%40ymir%3E"
       TITLE="[X2go-Commits] nx-libs.git - master (branch) updated:	redist-client/3.5.0.10-22-g6a96ae4">git-admin at x2go.org
       </A><BR>
    <I>Tue Feb 14 23:03:56 CET 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="002272.html">[X2go-Commits] x2goclient.git - master (branch) updated:	3.99.0.6-14-gf6bd9af
</A></li>
        <LI>Next message: <A HREF="002274.html">[X2go-Commits] nx-libs.git - master (branch) updated:	redist-client/3.5.0.10-23-g9282c00
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2273">[ date ]</a>
              <a href="thread.html#2273">[ thread ]</a>
              <a href="subject.html#2273">[ subject ]</a>
              <a href="author.html#2273">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch, master has been updated
       via  6a96ae450fb469bec1f23ebe727f6f318bfe80db (commit)
       via  8d6d0a921889498601cef9176202a456af881a9e (commit)
       via  01e97f0f829b90411a15c70b082a7823a26ae61f (commit)
       via  c621c22f820ec22fe7daabf37b7b577a41a3298f (commit)
       via  4d6e1c4fbe549a77caa5ba0fc60e1bf668bf4a4b (commit)
       via  ba589d1fd264f3ad3fbe8767bf215c0399a162cf (commit)
       via  b4b4e209bf1d379adcff26e28305af076f8963d4 (commit)
       via  280d8751c36b6585c068a25cc180e7baa6df2019 (commit)
       via  165206eb288d43d68530652c31fdc26cf0bbab28 (commit)
       via  448a1db30bd68025dea51ea98a52a16658f6f03c (commit)
      from  b087877b25af2c3ed9cd405fd1c867c8817223e9 (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit 6a96ae450fb469bec1f23ebe727f6f318bfe80db
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Tue Feb 14 23:03:45 2012 +0100

    Make patch headers DEP5 compliant (030_nx-X11_... and 031_nx-X11_...).

commit 8d6d0a921889498601cef9176202a456af881a9e
Author: Jan Engelhardt &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">jengelh at medozas.de</A>&gt;
Date:   Tue Feb 14 22:59:50 2012 +0100

    Add patch: 301_nx-X11_use-shared-libs.full.diff, use shared libraries from distribution rather then libs included in source tree.

commit 01e97f0f829b90411a15c70b082a7823a26ae61f
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Tue Feb 14 22:42:48 2012 +0100

    Rename patches 030_nx-X11_... and 031_nx-X11_..., the tarball roll script currently requires ,,full'' or ,,full+lite'' in the file name.

commit c621c22f820ec22fe7daabf37b7b577a41a3298f
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Tue Feb 14 22:40:15 2012 +0100

    Merge honor-ac-dirs.patch from Jan Engelhardt (OpenSUSE) with already existing Makefile patches (012_nxcomp..., 013_nxcompext_..., 014_nxcompshad_...).

commit 4d6e1c4fbe549a77caa5ba0fc60e1bf668bf4a4b
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Tue Feb 14 22:30:26 2012 +0100

    Enable parallel build for Debian package.

commit ba589d1fd264f3ad3fbe8767bf215c0399a162cf
Author: Jan Engelhardt &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">jengelh at medozas.de</A>&gt;
Date:   Tue Feb 14 08:47:19 2012 +0100

    Add patch: 031_nx-X11_parallel-make.diff, enable parallel make.

commit b4b4e209bf1d379adcff26e28305af076f8963d4
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Tue Feb 14 08:39:32 2012 +0100

    Update patch: 001_add-main-makefile.full+lite.patch, use curly braces for macros.

commit 280d8751c36b6585c068a25cc180e7baa6df2019
Author: Jan Engelhardt &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">jengelh at medozas.de</A>&gt;
Date:   Tue Feb 14 08:33:42 2012 +0100

    Add patch: 030_nx-X11_configure-args.diff. Allow passing of configure args.

commit 165206eb288d43d68530652c31fdc26cf0bbab28
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Tue Feb 14 08:27:52 2012 +0100

    changelog fix, long-line-wrap

commit 448a1db30bd68025dea51ea98a52a16658f6f03c
Author: Jan Engelhardt &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">jengelh at medozas.de</A>&gt;
Date:   Tue Feb 14 08:26:50 2012 +0100

    Update patch: 001_add-main-makefile.full+lite.patch, allow passing of configure args.

-----------------------------------------------------------------------

Summary of changes:
 debian/changelog                                   |   17 ++
 .../patches/001_add-main-makefile.full+lite.patch  |   22 +-
 ...omp_makefile-uninstall+autoconf.full+lite.patch |   74 +++++
 .../012_nxcomp_makefile-uninstall.full+lite.patch  |   63 -----
 ...xcompext_makefile-uninstall+autoconf.full.patch |   64 +++++
 .../013_nxcompext_makefile-uninstall.full.patch    |   53 ----
 ...compshad_makefile-uninstall+autoconf.full.patch |   70 +++++
 .../014_nxcompshad_makefile-uninstall.full.patch   |   61 ----
 debian/patches/030_nx-X11_configure-args.full.diff |   51 ++++
 debian/patches/031_nx-X11_parallel-make.full.diff  |  294 ++++++++++++++++++++
 .../patches/301_nx-X11_use-shared-libs.full.diff   |  106 +++++++
 debian/patches/series                              |    9 +-
 debian/rules                                       |    2 +-
 13 files changed, 694 insertions(+), 192 deletions(-)
 create mode 100644 debian/patches/012_nxcomp_makefile-uninstall+autoconf.full+lite.patch
 delete mode 100644 debian/patches/012_nxcomp_makefile-uninstall.full+lite.patch
 create mode 100644 debian/patches/013_nxcompext_makefile-uninstall+autoconf.full.patch
 delete mode 100644 debian/patches/013_nxcompext_makefile-uninstall.full.patch
 create mode 100644 debian/patches/014_nxcompshad_makefile-uninstall+autoconf.full.patch
 delete mode 100644 debian/patches/014_nxcompshad_makefile-uninstall.full.patch
 create mode 100644 debian/patches/030_nx-X11_configure-args.full.diff
 create mode 100644 debian/patches/031_nx-X11_parallel-make.full.diff
 create mode 100644 debian/patches/301_nx-X11_use-shared-libs.full.diff

The diff of changes is:
diff --git a/debian/changelog b/debian/changelog
index 35df3c1..31384cf 100644
--- a/debian/changelog
+++ b/debian/changelog
@@ -1,10 +1,27 @@
 nx-libs (2:3.5.0.11-0) UNRELEASED; urgency=low
 
+  [ Mike Gabriel ]
   * Use ,,$(MAKE) -C'' in main Makefile for calling Makefiles in subdirectories,
     make build stanza work for nx-libs-full and nx-libs-lite.
   * Do not install libXinerama directly into /usr/lib/nx. Recommended method is
     installing to /usr/lib/nx/Xinerama, so that you can enable/disable usage of
     the Xinerama extension.
+  * Update patch: 001_add-main-makefile.full+lite.patch, use curly braces for
+    macros.
+  * Enable parallel build for Debian package.
+  * Merge honor-ac-dirs.patch from Jan Engelhardt (OpenSUSE) with already existing
+    Makefile patches (012_nxcomp..., 013_nxcompext_..., 014_nxcompshad_...).
+  * Rename patches 030_nx-X11_... and 031_nx-X11_..., the tarball roll script
+    currently requires ,,full'' or ,,full+lite'' in the file name.
+  * Make patch headers DEP5 compliant (030_nx-X11_... and 031_nx-X11_...).
+
+  [ Jan Engelhardt ]
+  * Update patch: 001_add-main-makefile.full+lite.patch, allow passing of
+    configure args.
+  * Add patch: 030_nx-X11_configure-args.diff. Allow passing of configure args.
+  * Add patch: 031_nx-X11_parallel-make.diff, enable parallel make.
+  * Add patch: 301_nx-X11_use-shared-libs.full.diff, use shared libraries from
+    distribution rather then libs included in source tree.
 
  -- Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;  Tue, 07 Feb 2012 13:48:19 +0100
 
diff --git a/debian/patches/001_add-main-makefile.full+lite.patch b/debian/patches/001_add-main-makefile.full+lite.patch
index f101446..9f4351f 100644
--- a/debian/patches/001_add-main-makefile.full+lite.patch
+++ b/debian/patches/001_add-main-makefile.full+lite.patch
@@ -9,12 +9,12 @@ Last-Update: 2011-12-31
 +#!/usr/bin/make -f
 +
 +%:
-+	$(MAKE) -C nxcomp $@
-+	$(MAKE) -C nxproxy $@
++	${MAKE} -C nxcomp $@
++	${MAKE} -C nxproxy $@
 +	if test -d nx-X11; then \
-+	    $(MAKE) -C nxcompext $@; \
-+	    $(MAKE) -C nxcompshad; \
-+	    $(MAKE) -C nx-X11 $@; \
++	    ${MAKE} -C nxcompext $@; \
++	    ${MAKE} -C nxcompshad; \
++	    ${MAKE} -C nx-X11 $@; \
 +	fi
 +
 +all: build
@@ -23,20 +23,20 @@ Last-Update: 2011-12-31
 +	echo &quot;No testing for NX (redistributed)&quot;
 +
 +build-lite:
-+	cd nxcomp &amp;&amp; autoconf &amp;&amp; ./configure &amp;&amp; $(MAKE)
-+	cd nxproxy &amp;&amp; autoconf &amp;&amp; ./configure &amp;&amp; $(MAKE)
++	cd nxcomp &amp;&amp; autoconf &amp;&amp; ./configure &amp;&amp; ${MAKE}
++	cd nxproxy &amp;&amp; autoconf &amp;&amp; ./configure &amp;&amp; ${MAKE}
 +
 +build-full:
 +# in the full case, we rely on &quot;magic&quot; in the nx-X11 imake-based makefiles...
 +	cd nxcomp &amp;&amp; autoconf &amp;&amp; ./configure
 +	cd nxcompext &amp;&amp; autoconf
 +	cd nxcompshad &amp;&amp; autoconf
-+	cd nx-X11 &amp;&amp; $(MAKE) World
-+	cd nxproxy &amp;&amp; autoconf &amp;&amp; ./configure &amp;&amp; $(MAKE)
++	cd nx-X11 &amp;&amp; ${MAKE} World
++	cd nxproxy &amp;&amp; autoconf &amp;&amp; (${CONFIGURE}) &amp;&amp; ${MAKE}
 +
 +build:
 +	if ! test -d nx-X11; then \
-+	    $(MAKE) build-lite; \
++	    ${MAKE} build-lite; \
 +	else \
-+	    $(MAKE) build-full; \
++	    ${MAKE} build-full; \
 +	fi
diff --git a/debian/patches/012_nxcomp_makefile-uninstall+autoconf.full+lite.patch b/debian/patches/012_nxcomp_makefile-uninstall+autoconf.full+lite.patch
new file mode 100644
index 0000000..fbeaa39
--- /dev/null
+++ b/debian/patches/012_nxcomp_makefile-uninstall+autoconf.full+lite.patch
@@ -0,0 +1,74 @@
+Description: Add install and uninstall stanzas to nxcomp/Makefile, honor ac dirs
+ Provide install and uninstall functionality in nxcomp/Makefile.
+ .
+ Honor autoconf's libdir (and includedir, while at it). This is a
+ must-have for multiarch platforms like x86_64 et al where multiple
+ forms of libraries can be installed at the same time.
+Forwarded: pending...
+Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
+Author: Jan Engelhardt &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">jengelh at medozas.de</A>&gt;
+Last-Update: 2012-02-14
+--- a/nxcomp/Makefile.in
++++ b/nxcomp/Makefile.in
+@@ -64,10 +64,15 @@
+ bindir      = @bindir@
+ man1dir     = @mandir@/man1
+ VPATH       = @srcdir@
++libdir      = @libdir@
++includedir  = @includedir@
+ 
+ INSTALL         = @INSTALL@
+ INSTALL_PROGRAM = @INSTALL_PROGRAM@
+ INSTALL_DATA    = @INSTALL_DATA@
++INSTALL_LINK    = cp -av
++DESTDIR         =
++RM_FILE         = rm -f
+ 
+ #
+ # This should be autodetected.
+@@ -264,12 +269,44 @@
+ 		fi
+ 		touch depend.status
+ 
+-install:	install.bin install.man
++install:	install.bin install.lib install.man
+ 
+ install.bin:
+ 
++install.lib: all
++	./mkinstalldirs $(DESTDIR)${libdir}/nx
++	./mkinstalldirs $(DESTDIR)${includedir}/nx
++	$(INSTALL_DATA) libXcomp.so.3.*         $(DESTDIR)${libdir}/nx
++	$(INSTALL_LINK) libXcomp.so.3           $(DESTDIR)${libdir}/nx
++	$(INSTALL_LINK) libXcomp.so             $(DESTDIR)${libdir}/nx
++	$(INSTALL_DATA) libXcomp.a              $(DESTDIR)${libdir}/nx
++	$(INSTALL_DATA) NX*.h                   $(DESTDIR)${includedir}/nx
++	$(INSTALL_DATA) MD5.h                   $(DESTDIR)${includedir}/nx
++	echo &quot;Running ldconfig tool, this may take a while...&quot; &amp;&amp; ldconfig || true
++
+ install.man:
+ 
++uninstall:	uninstall.bin uninstall.lib uninstall.man
++
++uninstall.bin:
++
++uninstall.lib:
++	$(RM_FILE) $(DESTDIR)${libdir}/nx/libXcomp.so.3.*
++	$(RM_FILE) $(DESTDIR)${libdir}/nx/libXcomp.so.3
++	$(RM_FILE) $(DESTDIR)${libdir}/nx/libXcomp.so
++	$(RM_FILE) $(DESTDIR)${libdir}/nx/libXcomp.a
++	$(RM_FILE) $(DESTDIR)${includedir}/nx/NXalert.h
++	$(RM_FILE) $(DESTDIR)${includedir}/nx/NX.h
++	$(RM_FILE) $(DESTDIR)${includedir}/nx/NXmitshm.h
++	$(RM_FILE) $(DESTDIR)${includedir}/nx/NXpack.h
++	$(RM_FILE) $(DESTDIR)${includedir}/nx/NXproto.h
++	$(RM_FILE) $(DESTDIR)${includedir}/nx/NXrender.h
++	$(RM_FILE) $(DESTDIR)${includedir}/nx/NXvars.h
++	$(RM_FILE) $(DESTDIR)${includedir}/nx/MD5.h
++	echo &quot;Running ldconfig tool, this may take a while...&quot; &amp;&amp; ldconfig || true
++
++uninstall.man:
++
+ clean:
+ 		-rm -f *~ *.o *.bak *.orig *.rej st?????? core core.* *.out.* \
+ 		@ALL@
diff --git a/debian/patches/012_nxcomp_makefile-uninstall.full+lite.patch b/debian/patches/012_nxcomp_makefile-uninstall.full+lite.patch
deleted file mode 100644
index 36f1555..0000000
--- a/debian/patches/012_nxcomp_makefile-uninstall.full+lite.patch
+++ /dev/null
@@ -1,63 +0,0 @@
-Description: Add install and uninstall stanzas to nxcomp/Makefile
- Provide install and uninstall functionality in nxcomp/Makefile.
-Forwarded: pending...
-Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
-Last-Update: 2011-12-31
---- nx-libs.orig/nxcomp/Makefile.in	2011-12-05 09:16:34.000000000 +0100
-+++ nx-libs/nxcomp/Makefile.in	2011-12-05 09:19:28.000000000 +0100
-@@ -68,6 +68,9 @@
- INSTALL         = @INSTALL@
- INSTALL_PROGRAM = @INSTALL_PROGRAM@
- INSTALL_DATA    = @INSTALL_DATA@
-+INSTALL_LINK    = cp -av
-+DESTDIR         =
-+RM_FILE         = rm -f
- 
- #
- # This should be autodetected.
-@@ -264,12 +267,44 @@
- 		fi
- 		touch depend.status
- 
--install:	install.bin install.man
-+install:	install.bin install.lib install.man
- 
- install.bin:
- 
-+install.lib: all
-+	./mkinstalldirs $(DESTDIR)$(prefix)/lib/nx
-+	./mkinstalldirs $(DESTDIR)$(prefix)/include/nx
-+	$(INSTALL_DATA) libXcomp.so.3.*         $(DESTDIR)$(prefix)/lib/nx
-+	$(INSTALL_LINK) libXcomp.so.3           $(DESTDIR)$(prefix)/lib/nx
-+	$(INSTALL_LINK) libXcomp.so             $(DESTDIR)$(prefix)/lib/nx
-+	$(INSTALL_DATA) libXcomp.a              $(DESTDIR)$(prefix)/lib/nx
-+	$(INSTALL_DATA) NX*.h                   $(DESTDIR)$(prefix)/include/nx
-+	$(INSTALL_DATA) MD5.h                   $(DESTDIR)$(prefix)/include/nx
-+	echo &quot;Running ldconfig tool, this may take a while...&quot; &amp;&amp; ldconfig || true
-+
- install.man:
- 
-+uninstall:	uninstall.bin uninstall.lib uninstall.man
-+
-+uninstall.bin:
-+
-+uninstall.lib:
-+	$(RM_FILE) $(DESTDIR)$(prefix)/lib/nx/libXcomp.so.3.*
-+	$(RM_FILE) $(DESTDIR)$(prefix)/lib/nx/libXcomp.so.3
-+	$(RM_FILE) $(DESTDIR)$(prefix)/lib/nx/libXcomp.so
-+	$(RM_FILE) $(DESTDIR)$(prefix)/lib/nx/libXcomp.a
-+	$(RM_FILE) $(DESTDIR)$(prefix)/include/nx/NXalert.h
-+	$(RM_FILE) $(DESTDIR)$(prefix)/include/nx/NX.h
-+	$(RM_FILE) $(DESTDIR)$(prefix)/include/nx/NXmitshm.h
-+	$(RM_FILE) $(DESTDIR)$(prefix)/include/nx/NXpack.h
-+	$(RM_FILE) $(DESTDIR)$(prefix)/include/nx/NXproto.h
-+	$(RM_FILE) $(DESTDIR)$(prefix)/include/nx/NXrender.h
-+	$(RM_FILE) $(DESTDIR)$(prefix)/include/nx/NXvars.h
-+	$(RM_FILE) $(DESTDIR)$(prefix)/include/nx/MD5.h
-+	echo &quot;Running ldconfig tool, this may take a while...&quot; &amp;&amp; ldconfig || true
-+
-+uninstall.man:
-+
- clean:
- 		-rm -f *~ *.o *.bak *.orig *.rej st?????? core core.* *.out.* \
- 		@ALL@
diff --git a/debian/patches/013_nxcompext_makefile-uninstall+autoconf.full.patch b/debian/patches/013_nxcompext_makefile-uninstall+autoconf.full.patch
new file mode 100644
index 0000000..934973c
--- /dev/null
+++ b/debian/patches/013_nxcompext_makefile-uninstall+autoconf.full.patch
@@ -0,0 +1,64 @@
+Description: Add install and uninstall stanzas to nxcompext/Makefile, honor autoconf dirs.
+ Provide install and uninstall functionality in nxcompext/Makefile.
+ .
+ Honor autoconf's libdir (and includedir, while at it). This is a
+ must-have for multiarch platforms like x86_64 et al where multiple
+ forms of libraries can be installed at the same time.
+Forwarded: pending...
+Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
+Author: Jan Engelhardt &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">jengelh at medozas.de</A>&gt;
+Last-Update: 2012-02-14
+--- a/nxcompext/Makefile.in
++++ b/nxcompext/Makefile.in
+@@ -56,11 +56,15 @@
+ bindir      = @bindir@
+ man1dir     = @mandir@/man1
+ VPATH       = @srcdir@
++libdir = @libdir@
++includedir = @includedir@
+ 
+ INSTALL         = @INSTALL@
+ INSTALL_PROGRAM = @INSTALL_PROGRAM@
+ INSTALL_DATA    = @INSTALL_DATA@
+-
++INSTALL_LINK    = cp -av
++DESTDIR         =
++RM_FILE         = rm -f
+ #
+ # This should be autodetected.
+ #
+@@ -147,12 +151,33 @@
+ 		fi
+ 		touch depend.status
+ 
+-install:	install.bin install.man
++install:       install.bin install.lib install.man
+ 
+ install.bin:
+ 
++install.lib: all
++	./mkinstalldirs $(DESTDIR)${libdir}/nx
++	./mkinstalldirs $(DESTDIR)${includedir}/nx
++	$(INSTALL_DATA) libXcompext.so.*        $(DESTDIR)${libdir}/nx
++	$(INSTALL_LINK) libXcompext.so          $(DESTDIR)${libdir}/nx
++	$(INSTALL_DATA) NX*.h                   $(DESTDIR)${includedir}/nx
++	echo &quot;Running ldconfig tool, this may take a while...&quot; &amp;&amp; ldconfig || true
++
+ install.man:
+ 
++uninstall:     uninstall.bin uninstall.lib uninstall.man
++
++uninstall.bin:
++
++uninstall.lib:
++	$(RM_FILE) $(DESTDIR)${libdir}/nx/libXcompext.so.*
++	$(RM_FILE) $(DESTDIR)${libdir}/nx/libXcompext.so
++	$(RM_FILE) $(DESTDIR)${includedir}/nx/NXlib.h
++	$(RM_FILE) $(DESTDIR)${includedir}/nx/NXlibint.h
++	echo &quot;Running ldconfig tool, this may take a while...&quot; &amp;&amp; ldconfig || true
++
++uninstall.man:
++
+ clean:
+ 		-rm -f *~ *.o *.bak *.orig *.rej st?????? core core.* *.out.* \
+ 		@ALL@
diff --git a/debian/patches/013_nxcompext_makefile-uninstall.full.patch b/debian/patches/013_nxcompext_makefile-uninstall.full.patch
deleted file mode 100644
index 97e4f03..0000000
--- a/debian/patches/013_nxcompext_makefile-uninstall.full.patch
+++ /dev/null
@@ -1,53 +0,0 @@
-Description: Add install and uninstall stanzas to nxcompext/Makefile
- Provide install and uninstall functionality in nxcompext/Makefile.
-Forwarded: pending...
-Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
-Last-Update: 2011-12-31
---- nx-libs.orig/nxcompext/Makefile.in	2011-12-05 09:20:15.000000000 +0100
-+++ nx-libs/nxcompext/Makefile.in	2011-12-05 09:24:37.000000000 +0100
-@@ -60,7 +60,9 @@
- INSTALL         = @INSTALL@
- INSTALL_PROGRAM = @INSTALL_PROGRAM@
- INSTALL_DATA    = @INSTALL_DATA@
--
-+INSTALL_LINK    = cp -av
-+DESTDIR         =
-+RM_FILE         = rm -f
- #
- # This should be autodetected.
- #
-@@ -147,12 +149,33 @@
- 		fi
- 		touch depend.status
- 
--install:	install.bin install.man
-+install:       install.bin install.lib install.man
- 
- install.bin:
- 
-+install.lib: all
-+	./mkinstalldirs $(DESTDIR)$(prefix)/lib/nx
-+	./mkinstalldirs $(DESTDIR)$(prefix)/include/nx
-+	$(INSTALL_DATA) libXcompext.so.*        $(DESTDIR)$(prefix)/lib/nx
-+	$(INSTALL_LINK) libXcompext.so          $(DESTDIR)$(prefix)/lib/nx
-+	$(INSTALL_DATA) NX*.h                   $(DESTDIR)$(prefix)/include/nx
-+	echo &quot;Running ldconfig tool, this may take a while...&quot; &amp;&amp; ldconfig || true
-+
- install.man:
- 
-+uninstall:     uninstall.bin uninstall.lib uninstall.man
-+
-+uninstall.bin:
-+
-+uninstall.lib:
-+	$(RM_FILE) $(DESTDIR)$(prefix)/lib/nx/libXcompext.so.*
-+	$(RM_FILE) $(DESTDIR)$(prefix)/lib/nx/libXcompext.so
-+	$(RM_FILE) $(DESTDIR)$(prefix)/include/nx/NXlib.h
-+	$(RM_FILE) $(DESTDIR)$(prefix)/include/nx/NXlibint.h
-+	echo &quot;Running ldconfig tool, this may take a while...&quot; &amp;&amp; ldconfig || true
-+
-+uninstall.man:
-+
- clean:
- 		-rm -f *~ *.o *.bak *.orig *.rej st?????? core core.* *.out.* \
- 		@ALL@
diff --git a/debian/patches/014_nxcompshad_makefile-uninstall+autoconf.full.patch b/debian/patches/014_nxcompshad_makefile-uninstall+autoconf.full.patch
new file mode 100644
index 0000000..d1a8c1e
--- /dev/null
+++ b/debian/patches/014_nxcompshad_makefile-uninstall+autoconf.full.patch
@@ -0,0 +1,70 @@
+Description: Add install and uninstall stanzas to nxcompshad/Makefile, honor autoconf dirs
+ Provide install and uninstall functionality in nxcompshad/Makefile.
+ .
+ Honor autoconf's libdir (and includedir, while at it). This is a
+ must-have for multiarch platforms like x86_64 et al where multiple
+ forms of libraries can be installed at the same time.
+Forwarded: pending...
+Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
+Author: Jan Engelhardt &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">jengelh at medozas.de</A>&gt;
+Last-Update: 2012-02-14
+--- a/nxcompshad/Makefile.in
++++ b/nxcompshad/Makefile.in
+@@ -74,10 +74,17 @@
+ bindir      = @bindir@
+ man1dir     = @mandir@/man1
+ VPATH       = @srcdir@
++libdir      = @libdir@
++includedir  = @includedir@
+ 
+ INSTALL         = @INSTALL@
++INSTALL_DIR     = $(INSTALL) -d -o root -g root -m 0755 
+ INSTALL_PROGRAM = @INSTALL_PROGRAM@
+ INSTALL_DATA    = @INSTALL_DATA@
++INSTALL_LINK    = cp -av
++DESTDIR         =
++RM_FILE         = rm -f
++RM_DIR          = rmdir -p --ignore-fail-on-non-empty
+ 
+ #
+ # This should be autodetected.
+@@ -178,12 +185,38 @@
+ 		fi
+ 		touch depend.status
+ 
+-install:	install.bin install.man
++install:       install.bin install.lib install.man
+ 
+ install.bin:
+ 
++install.lib: all
++	$(INSTALL_DIR)                          $(DESTDIR)${libdir}/nx
++	$(INSTALL_DIR)                          $(DESTDIR)${includedir}/nx
++	$(INSTALL_DATA) libXcompshad.so.3.*     $(DESTDIR)${libdir}/nx
++	$(INSTALL_LINK) libXcompshad.so.3       $(DESTDIR)${libdir}/nx
++	$(INSTALL_LINK) libXcompshad.so         $(DESTDIR)${libdir}/nx
++	$(INSTALL_DATA) *.a                     $(DESTDIR)${libdir}/nx
++	$(INSTALL_DATA) *.h                     $(DESTDIR)${includedir}/nx
++	echo &quot;Running ldconfig tool, this may take a while...&quot; &amp;&amp; ldconfig || true
++
+ install.man:
+ 
++uninstall:     uninstall.bin uninstall.lib uninstall.man
++
++uninstall.bin:
++
++uninstall.lib:
++	$(RM_FILE) $(DESTDIR)${libdir}/nx/libXcompshad.so.3.*
++	$(RM_FILE) $(DESTDIR)${libdir}/nx/libXcompshad.so.3
++	$(RM_FILE) $(DESTDIR)${libdir}/nx/libXcompshad.so
++	$(RM_FILE) $(DESTDIR)${libdir}/nx/libXcompshad.a
++	for header in *.h; do $(RM_FILE) $(DESTDIR)${includedir}/nx/$$header; done
++	$(RM_DIR) $(DESTDIR)${libdir}/nx/
++	$(RM_DIR) $(DESTDIR)${includedir}/nx/
++	echo &quot;Running ldconfig tool, this may take a while...&quot; &amp;&amp; ldconfig || true
++
++uninstall.man:
++
+ clean:
+ 		-rm -f *~ *.o *.gch *.bak st?????? core core.* *.out.* *.exe.stackdump \
+ 		$(LIBFULL) $(LIBLOAD) $(LIBSHARED) $(LIBARCHIVE) $(LIBDLL) $(LIBDLLSTATIC) $(PROGRAM) $(PROGRAM).exe
diff --git a/debian/patches/014_nxcompshad_makefile-uninstall.full.patch b/debian/patches/014_nxcompshad_makefile-uninstall.full.patch
deleted file mode 100644
index 1a78885..0000000
--- a/debian/patches/014_nxcompshad_makefile-uninstall.full.patch
+++ /dev/null
@@ -1,61 +0,0 @@
-Description: Add install and uninstall stanzas to nxcompshad/Makefile
- Provide install and uninstall functionality in nxcompshad/Makefile.
-Forwarded: pending...
-Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
-Last-Update: 2011-12-31
---- a/nxcompshad/Makefile.in
-+++ b/nxcompshad/Makefile.in
-@@ -76,8 +76,13 @@
- VPATH       = @srcdir@
- 
- INSTALL         = @INSTALL@
-+INSTALL_DIR     = $(INSTALL) -d -o root -g root -m 0755 
- INSTALL_PROGRAM = @INSTALL_PROGRAM@
- INSTALL_DATA    = @INSTALL_DATA@
-+INSTALL_LINK    = cp -av
-+DESTDIR         =
-+RM_FILE         = rm -f
-+RM_DIR          = rmdir -p --ignore-fail-on-non-empty
- 
- #
- # This should be autodetected.
-@@ -178,12 +183,38 @@
- 		fi
- 		touch depend.status
- 
--install:	install.bin install.man
-+install:       install.bin install.lib install.man
- 
- install.bin:
- 
-+install.lib: all
-+	$(INSTALL_DIR)                          $(DESTDIR)$(prefix)/lib/nx
-+	$(INSTALL_DIR)                          $(DESTDIR)$(prefix)/include/nx
-+	$(INSTALL_DATA) libXcompshad.so.3.*     $(DESTDIR)$(prefix)/lib/nx
-+	$(INSTALL_LINK) libXcompshad.so.3       $(DESTDIR)$(prefix)/lib/nx
-+	$(INSTALL_LINK) libXcompshad.so         $(DESTDIR)$(prefix)/lib/nx
-+	$(INSTALL_DATA) *.a                     $(DESTDIR)$(prefix)/lib/nx
-+	$(INSTALL_DATA) *.h                     $(DESTDIR)$(prefix)/include/nx
-+	echo &quot;Running ldconfig tool, this may take a while...&quot; &amp;&amp; ldconfig || true
-+
- install.man:
- 
-+uninstall:     uninstall.bin uninstall.lib uninstall.man
-+
-+uninstall.bin:
-+
-+uninstall.lib:
-+	$(RM_FILE) $(DESTDIR)$(prefix)/lib/nx/libXcompshad.so.3.*
-+	$(RM_FILE) $(DESTDIR)$(prefix)/lib/nx/libXcompshad.so.3
-+	$(RM_FILE) $(DESTDIR)$(prefix)/lib/nx/libXcompshad.so
-+	$(RM_FILE) $(DESTDIR)$(prefix)/lib/nx/libXcompshad.a
-+	for header in *.h; do $(RM_FILE) $(DESTDIR)$(prefix)/include/nx/$$header; done
-+	$(RM_DIR) $(DESTDIR)$(prefix)/lib/nx/
-+	$(RM_DIR) $(DESTDIR)$(prefix)/include/nx/
-+	echo &quot;Running ldconfig tool, this may take a while...&quot; &amp;&amp; ldconfig || true
-+
-+uninstall.man:
-+
- clean:
- 		-rm -f *~ *.o *.gch *.bak st?????? core core.* *.out.* *.exe.stackdump \
- 		$(LIBFULL) $(LIBLOAD) $(LIBSHARED) $(LIBARCHIVE) $(LIBDLL) $(LIBDLLSTATIC) $(PROGRAM) $(PROGRAM).exe
diff --git a/debian/patches/030_nx-X11_configure-args.full.diff b/debian/patches/030_nx-X11_configure-args.full.diff
new file mode 100644
index 0000000..8304ca7
--- /dev/null
+++ b/debian/patches/030_nx-X11_configure-args.full.diff
@@ -0,0 +1,51 @@
+Description: Allow to pass in configure args.
+ Allow to pass in configure args.
+Forward: pending
+Author: Jan Engelhardt &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">jengelh at medozas.de</A>&gt;
+Last-Update: 2012-02-14
+---
+ nx-X11/lib/X11/Imakefile          |    6 ++++--
+ nx-X11/programs/Xserver/Imakefile |    4 +++-
+ 2 files changed, 7 insertions(+), 2 deletions(-)
+
+Index: nx-X11/lib/X11/Imakefile
+===================================================================
+--- a/nx-X11/lib/X11/Imakefile
++++ b/nx-X11/lib/X11/Imakefile
+@@ -1147,15 +1147,17 @@ ks_tables.h: $(XINCLUDESRC)/keysymdef.h
+ 
+ includes:: ks_tables.h
+ 
++CONFIGURE=./configure
++
+ #if NXLibraries
+ 
+ $(NX_XCOMPCONFIGTARGET):
+ 	cd ../../../nxcomp &amp;&amp; \
+-	./configure
++	${CONFIGURE}
+ 
+ $(NX_XCOMPEXTCONFIGTARGET):
+ 	cd ../../../nxcompext &amp;&amp; \
+-	./configure
++	${CONFIGURE}
+ 
+ #ifdef SunArchitecture
+ $(NX_XCOMPLIBTARGET): $(NX_XCOMPCONFIGTARGET)
+Index: nx-X11/programs/Xserver/Imakefile
+===================================================================
+--- a/nx-X11/programs/Xserver/Imakefile
++++ b/nx-X11/programs/Xserver/Imakefile
+@@ -1036,9 +1036,11 @@ NX_XSHADOWLIBDIR    = $(XTOP)/../nxcomps
+ NX_XSHADOWLIBTARGET = $(NX_XSHADOWLIBDIR)/$(NX_XSHADOWLIBNAME)
+ NX_XSHADOWCONFIGTARGET = $(NX_XSHADOWLIBDIR)/config.status
+ 
++CONFIGURE=./configure
++
+ $(NX_XSHADOWCONFIGTARGET):
+ 	cd $(NX_XSHADOWLIBDIR) &amp;&amp; \
+-	./configure
++	${CONFIGURE}
+ 
+ #ifdef SunArchitecture
+ $(NX_XSHADOWLIBTARGET): $(NX_XSHADOWCONFIGTARGET)
diff --git a/debian/patches/031_nx-X11_parallel-make.full.diff b/debian/patches/031_nx-X11_parallel-make.full.diff
new file mode 100644
index 0000000..9f754d7
--- /dev/null
+++ b/debian/patches/031_nx-X11_parallel-make.full.diff
@@ -0,0 +1,294 @@
+Description: Enable parallel make
+ Restore ability to build things in parallel.
+ (${MAKE} must always appear in the rule directly, and not be
+ hidden through expansions of other variables to get this to work.)
+Forward: pending
+Author: Jan Engelhardt &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">jengelh at medozas.de</A>&gt;
+Last-Update: 2012-01-26 22:29:13.993994227 +0100
+
+---
+ nx-X11/Makefile                       |   64 +++++++++++++++++-----------------
+ nx-X11/config/imake/Makefile.ini      |    1 
+ nx-X11/extras/Mesa/Makefile           |    2 -
+ nx-X11/extras/Xpm/Makefile.noX        |    1 
+ nx-X11/extras/drm/linux-core/Makefile |    4 +-
+ nx-X11/extras/drm/linux/Makefile      |    4 +-
+ nx-X11/extras/ttf2pt1/Makefile        |    4 +-
+ nx-X11/lib/X11/Imakefile              |   12 ++----
+ nx-X11/lib/X11/Imakefile.NX.original  |   12 ++----
+ nx-X11/programs/Xserver/Imakefile     |    4 +-
+ 10 files changed, 60 insertions(+), 69 deletions(-)
+
+--- a/nx-X11/Makefile
++++ b/nx-X11/Makefile
+@@ -32,8 +32,8 @@
+ VERSPROG = $(CONFIGSRC)/util/printver.exe
+ 
+ all:
+-	@$(MAKE_CMD) xmakefile-exists || $(MAKE) all-initial
+-	@$(MAKE_CMD) $@
++	@${MAKE} ${MAKE_OPTS} xmakefile-exists || $(MAKE) all-initial
++	@${MAKE} ${MAKE_OPTS} $@
+ 
+ all-initial:
+ 	@echo Please use make World, or on NT use nmake World.Win32.
+@@ -57,8 +57,8 @@
+ 	@date
+ 	@echo &quot;&quot;
+ 	@if [ -f xmakefile ]; then \
+-	    $(MAKE_CMD) -k distclean || \
+-	    $(MAKE_CMD) -k clean || \
++	    ${MAKE} ${MAKE_OPTS} -k distclean || \
++	    ${MAKE} ${MAKE_OPTS} -k clean || \
+ 	    $(RM) xmakefile; \
+ 	fi
+ 	@if [ ! -f $(IRULESRC)/host.def ]; then \
+@@ -84,14 +84,14 @@
+ #	fi
+ 	cd $(IMAKESRC) &amp;&amp; $(MAKE) $(FLAGS) clean
+ 	$(MAKE) $(MFLAGS) Makefile.boot
+-	$(MAKE_CMD) $(MFLAGS) version.def
++	${MAKE} ${MAKE_OPTS} $(MFLAGS) version.def
+ 	$(MAKE) $(MFLAGS) Makefile.boot
+-	$(MAKE_CMD) $(MFLAGS) VerifyOS
+-	$(MAKE_CMD) $(MFLAGS) Makefiles
+-	$(MAKE_CMD) $(MFLAGS) BOOTSTRAPSUBDIRS= clean
+-	$(MAKE_CMD) $(MFLAGS) includes
+-	$(MAKE_CMD) $(MFLAGS) depend
+-	$(MAKE_CMD) $(MFLAGS) $(WORLDOPTS) World
++	${MAKE} ${MAKE_OPTS} $(MFLAGS) VerifyOS
++	${MAKE} ${MAKE_OPTS} $(MFLAGS) Makefiles
++	${MAKE} ${MAKE_OPTS} $(MFLAGS) BOOTSTRAPSUBDIRS= clean
++	${MAKE} ${MAKE_OPTS} $(MFLAGS) includes
++	${MAKE} ${MAKE_OPTS} $(MFLAGS) depend
++	${MAKE} ${MAKE_OPTS} $(MFLAGS) $(WORLDOPTS) World
+ 	@echo &quot;&quot;
+ 	@date
+ 	@echo &quot;&quot;
+@@ -153,15 +153,15 @@
+ 	-if exist xmakefile.bak del xmakefile.bak
+ 	-if exist xmakefile ren xmakefile xmakefile.bak
+ 	$(IMAKE:/=\) -s xmakefile -I$(IRULESRC) $(IMAKE_DEFINES) -DTOPDIR=$(TOP) -DCURDIR=$(CURRENT_DIR)
+-	$(MAKE_CMD) $(MFLAGS) VerifyOS
+-	$(MAKE_CMD) $(MFLAGS) Makefiles
+-	$(MAKE_CMD) $(MFLAGS) clean
++	${MAKE} ${MAKE_OPTS} $(MFLAGS) VerifyOS
++	${MAKE} ${MAKE_OPTS} $(MFLAGS) Makefiles
++	${MAKE} ${MAKE_OPTS} $(MFLAGS) clean
+ 	cd $(CONFIGSRC)\util
+ 	$(MAKE) mkdirhier.exe
+ 	cd ..\..
+-	$(MAKE_CMD) $(MFLAGS) includes
+-	$(MAKE_CMD) $(MFLAGS) depend
+-	$(MAKE_CMD) $(MFLAGS) $(WIN32WORLDOPTS)
++	${MAKE} ${MAKE_OPTS} $(MFLAGS) includes
++	${MAKE} ${MAKE_OPTS} $(MFLAGS) depend
++	${MAKE} ${MAKE_OPTS} $(MFLAGS) $(WIN32WORLDOPTS)
+ 	@echo :
+ 	@echo :
+ 	@echo Full build of $(RELEASE) complete.
+@@ -197,33 +197,33 @@
+ # a copy of every rule that might be invoked at top level
+ 
+ clean:
+-	    $(MAKE_CMD) $@
++	    ${MAKE} ${MAKE_OPTS} $@
+ dangerous_strip_clean:
+-	    $(MAKE_CMD) $@
++	    ${MAKE} ${MAKE_OPTS} $@
+ distclean:
+-	    $(MAKE_CMD) $@
++	    ${MAKE} ${MAKE_OPTS} $@
+ 	    $(RM) xmakefile $(IRULESRC)/version.def $(IRULESRC)/date.def
+ depend:
+-	    $(MAKE_CMD) $@
++	    ${MAKE} ${MAKE_OPTS} $@
+ Everything:
+-	    $(MAKE_CMD) $@
++	    ${MAKE} ${MAKE_OPTS} $@
+ external.ln:
+-	    $(MAKE_CMD) $@
++	    ${MAKE} ${MAKE_OPTS} $@
+ includes:
+-	    $(MAKE_CMD) $@
++	    ${MAKE} ${MAKE_OPTS} $@
+ install.sdk:
+-	    $(MAKE_CMD) $@
++	    ${MAKE} ${MAKE_OPTS} $@
+ install.ln:
+-	    $(MAKE_CMD) $@
++	    ${MAKE} ${MAKE_OPTS} $@
+ install.man:
+-	    $(MAKE_CMD) $@
++	    ${MAKE} ${MAKE_OPTS} $@
+ install:
+-	    $(MAKE_CMD) $@
++	    ${MAKE} ${MAKE_OPTS} $@
+ Makefiles:
+-	    $(MAKE_CMD) $@
++	    ${MAKE} ${MAKE_OPTS} $@
+ man_keywords:
+-	    $(MAKE_CMD) $@
++	    ${MAKE} ${MAKE_OPTS} $@
+ tags:
+-	    $(MAKE_CMD) $@
++	    ${MAKE} ${MAKE_OPTS} $@
+ VerifyOS:
+-	    $(MAKE_CMD) $@
++	    ${MAKE} ${MAKE_OPTS} $@
+--- a/nx-X11/config/imake/Makefile.ini
++++ b/nx-X11/config/imake/Makefile.ini
+@@ -21,7 +21,6 @@
+ SHELL = /bin/sh
+ RM = rm -f
+ MV = mv
+-MAKE = make
+ RM_CMD = $(RM) *.CKP *.ln *.BAK *.bak *.o core errs ,* *~ *.a \
+ 	 tags TAGS make.log
+ NPROC = 1
+--- a/nx-X11/extras/Mesa/Makefile
++++ b/nx-X11/extras/Mesa/Makefile
+@@ -12,7 +12,7 @@
+ 
+ 
+ doxygen:
+-	(cd doxygen ; make) ; \
++	(cd doxygen ; ${MAKE}) ; \
+ 
+ clean:
+ 	@for dir in $(SUBDIRS) ; do \
+--- a/nx-X11/extras/Xpm/Makefile.noX
++++ b/nx-X11/extras/Xpm/Makefile.noX
+@@ -32,7 +32,6 @@
+ 
+ SUBDIRS= lib sxpm cxpm
+ 
+-MAKE=make
+ MFLAGS=-f Makefile.noX
+ INSTALL= install -c
+ CURRENT_DIR=.
+--- a/nx-X11/extras/drm/linux-core/Makefile
++++ b/nx-X11/extras/drm/linux-core/Makefile
+@@ -176,7 +176,7 @@
+ all: modules
+ 
+ modules: includes
+-	make -C $(LINUXDIR) $(GETCONFIG) SUBDIRS=`pwd` DRMSRCDIR=`pwd` modules
++	${MAKE} -C $(LINUXDIR) $(GETCONFIG) SUBDIRS=`pwd` DRMSRCDIR=`pwd` modules
+ 
+ ifeq ($(HEADERFROMBOOT),1)
+ 
+@@ -246,7 +246,7 @@
+ 	rm -rf $(CLEANFILES)
+ 
+ $(MODULE_LIST)::
+-	make DRM_MODULES=$@ modules
++	${MAKE} DRM_MODULES=$@ modules
+ 
+ # Build test utilities
+ 
+--- a/nx-X11/extras/drm/linux/Makefile
++++ b/nx-X11/extras/drm/linux/Makefile
+@@ -184,7 +184,7 @@
+ all: modules
+ 
+ modules: includes
+-	make -C $(LINUXDIR) $(GETCONFIG) SUBDIRS=`pwd` DRMSRCDIR=`pwd` modules
++	${MAKE} -C $(LINUXDIR) $(GETCONFIG) SUBDIRS=`pwd` DRMSRCDIR=`pwd` modules
+ 
+ ifeq ($(HEADERFROMBOOT),1)
+ 
+@@ -254,7 +254,7 @@
+ 	rm -rf $(CLEANFILES)
+ 
+ $(MODULE_LIST)::
+-	make DRM_MODULES=$@ modules
++	${MAKE} DRM_MODULES=$@ modules
+ 
+ # Build test utilities
+ 
+--- a/nx-X11/extras/ttf2pt1/Makefile
++++ b/nx-X11/extras/ttf2pt1/Makefile
+@@ -158,8 +158,8 @@
+ 
+ clean:
+ 	rm -f t1asm ttf2pt1 *.o app/RPM/Makefile app/RPM/*.spec *.core core.* core
+-	( cd other &amp;&amp; make clean; )
+-	( cd app/netscape &amp;&amp; make clean; )
++	( cd other &amp;&amp; ${MAKE} clean; )
++	( cd app/netscape &amp;&amp; ${MAKE} clean; )
+ 
+ veryclean: clean
+ 	rm -f $(DOCS) $(MANS)
+--- a/nx-X11/lib/X11/Imakefile
++++ b/nx-X11/lib/X11/Imakefile
+@@ -1161,21 +1161,17 @@
+ 
+ #ifdef SunArchitecture
+ $(NX_XCOMPLIBTARGET): $(NX_XCOMPCONFIGTARGET)
+-	cd $(NX_XCOMPLIBDIR) &amp;&amp; \
+-	gmake
++	${MAKE} -C $(NX_XCOMPLIBDIR)
+ 
+ $(NX_XCOMPEXTLIBTARGET): $(NX_XCOMPEXTCONFIGTARGET)
+-	cd ../../../nxcompext &amp;&amp; \
+-	gmake
++	${MAKE} -C ../../../nxcompext
+ 
+ #else
+ $(NX_XCOMPLIBTARGET): $(NX_XCOMPCONFIGTARGET)
+-	cd $(NX_XCOMPLIBDIR) &amp;&amp; \
+-	make
++	${MAKE} -C $(NX_XCOMPLIBDIR)
+ 
+ $(NX_XCOMPEXTLIBTARGET): $(NX_XCOMPEXTCONFIGTARGET)
+-	cd ../../../nxcompext &amp;&amp; \
+-	make
++	${MAKE} -C ../../../nxcompext
+ 
+ #endif
+ 
+--- a/nx-X11/lib/X11/Imakefile.NX.original
++++ b/nx-X11/lib/X11/Imakefile.NX.original
+@@ -1159,21 +1159,17 @@
+ 
+ #ifdef SunArchitecture
+ $(NX_XCOMPLIBTARGET): $(NX_XCOMPCONFIGTARGET)
+-	cd $(NX_XCOMPLIBDIR) &amp;&amp; \
+-	gmake
++	${MAKE} -C $(NX_XCOMPLIBDIR)
+ 
+ $(NX_XCOMPEXTLIBTARGET): $(NX_XCOMPEXTCONFIGTARGET)
+-	cd ../../../nxcompext &amp;&amp; \
+-	gmake
++	${MAKE} -C ../../../nxcompext
+ 
+ #else
+ $(NX_XCOMPLIBTARGET): $(NX_XCOMPCONFIGTARGET)
+-	cd $(NX_XCOMPLIBDIR) &amp;&amp; \
+-	make
++	${MAKE} -C $(NX_XCOMPLIBDIR)
+ 
+ $(NX_XCOMPEXTLIBTARGET): $(NX_XCOMPEXTCONFIGTARGET)
+-	cd ../../../nxcompext &amp;&amp; \
+-	make
++	${MAKE} -C ../../../nxcompext
+ 
+ #endif
+ 
+--- a/nx-X11/programs/Xserver/Imakefile
++++ b/nx-X11/programs/Xserver/Imakefile
+@@ -1045,11 +1045,11 @@
+ #ifdef SunArchitecture
+ $(NX_XSHADOWLIBTARGET): $(NX_XSHADOWCONFIGTARGET)
+ 	cd $(NX_XSHADOWLIBDIR) &amp;&amp; \
+-	gmake
++	${MAKE}
+ #else
+ $(NX_XSHADOWLIBTARGET): $(NX_XSHADOWCONFIGTARGET)
+ 	cd $(NX_XSHADOWLIBDIR) &amp;&amp; \
+-	rm -f *.o &amp;&amp; make
++	rm -f *.o &amp;&amp; ${MAKE}
+ #endif
+ 
+ ServerTarget(nxagent,$(NX_XSHADOWLIBTARGET) $(NXAGENTDIRS),$(NXAGENTOBJS), \
diff --git a/debian/patches/301_nx-X11_use-shared-libs.full.diff b/debian/patches/301_nx-X11_use-shared-libs.full.diff
new file mode 100644
index 0000000..2001474
--- /dev/null
+++ b/debian/patches/301_nx-X11_use-shared-libs.full.diff
@@ -0,0 +1,106 @@
+Description: Use shared libraries
+ Many distributions have a policy to reduce code duplications.
+ One means to avoid such duplications is to use shared libraries
+ instead of using libs that are ofter shipped for convenience.
+ .
+ Fedora:
+ <A HREF="http://fedoraproject.org/wiki/Packaging:Guidelines#Shared_Libraries">http://fedoraproject.org/wiki/Packaging:Guidelines#Shared_Libraries</A>
+ .
+ Debian (Section 10.7.4 of Debian policy):
+ <A HREF="http://www.debian.org/doc/debian-policy/ch-files.html">http://www.debian.org/doc/debian-policy/ch-files.html</A>
+Forwarded: pending...
+Author: Jan Engelhardt &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">jengelh at medozas.de</A>&gt;
+Last-Update: 2012-02-14
+---
+ nx-X11/config/cf/host.def         |   11 ++++++-----
+ nx-X11/programs/Xserver/Imakefile |    6 +++---
+ nx-X11/programs/nxauth/Imakefile  |    2 +-
+ 3 files changed, 10 insertions(+), 9 deletions(-)
+
+Index: nx-X11/config/cf/host.def
+===================================================================
+--- a/nx-X11/config/cf/host.def
++++ b/nx-X11/config/cf/host.def
+@@ -138,7 +138,7 @@ XCOMM $XFree86: xc/config/cf/xf86site.de
+ #define BuildRenderLibrary	YES
+ #define SharedLibFreetype2	YES
+ #define NormalLibFreetype2	YES
+-#define FontLibSharedFreeType 	NO
++#define FontLibSharedFreeType 	YES
+ #endif
+ 
+ /*
+@@ -649,6 +649,7 @@ XCOMM $XFree86: xc/config/cf/xf86site.de
+  *
+ #define XserverStaticFontLib	NO
+  */
++#define XserverStaticFontLib	YES
+ 
+ /*
+  * To enable binary compatibility with previous versions of the font
+@@ -733,7 +734,7 @@ XCOMM $XFree86: xc/config/cf/xf86site.de
+ #define BuildXKB		YES
+ #define BuildXKBlib		YES
+ 
+-#define SharedLibXau		NO
++#define SharedLibXau		YES
+ 
+ /*
+  * If you are running NetBSD 0.9C or later, and have the aperture driver
+@@ -956,9 +957,9 @@ XCOMM $XFree86: xc/config/cf/xf86site.de
+ #define BuildXterm YES
+  */
+ 
+-#define SharedLibXau           NO
++#define SharedLibXau           YES
+ 
+-#define SharedLibXdmcp         NO
++#define SharedLibXdmcp         YES
+ 
+ #define BuildXaw7              YES
+ 
+@@ -976,7 +977,7 @@ XCOMM $XFree86: xc/config/cf/xf86site.de
+ #define BuildFontServer             NO
+ #define BuildFreeType               NO
+ #define BuildXTrueType              NO
+-#define FontLibSharedFreeType       NO
++#define FontLibSharedFreeType       YES
+ #endif
+ 
+ #if !defined(NXZaurusXServer) &amp;&amp; defined(NXiPAQXServer)
+Index: nx-X11/programs/Xserver/Imakefile
+===================================================================
+--- a/nx-X11/programs/Xserver/Imakefile
++++ b/nx-X11/programs/Xserver/Imakefile
+@@ -1013,15 +1013,15 @@ $(NXAGENTOBJS) $(NXAGENTLIBS) $(NXAGENTS
+ #if defined(SunArchitecture)
+ NXAGENTNXLIBS = -L ../../../nxcomp -L ../../../nxcompext -L ../../../nxcompshad \
+                 -lXcomp -lXcompext -lXcompshad -lrt -L/usr/sfw/lib -lXrender -lXfixes \
+-                -L../../../nx-X11/exports/lib -lXtst -lXdamage -lXrandr -lXcomposite
++                -L../../../nx-X11/exports/lib -lXtst -lXdamage -lXrandr -lXcomposite -lXdmcp
+ #elif defined(cygwinArchitecture)
+ NXAGENTNXLIBS = -L ../../../nxcomp -L ../../../nxcompext \
+                 -lXcomp -lXcompext -lXrender -lX11 -lXext -lXcomposite -lXfixes \
+-                -L ../../../nxcompshad -lXcompshad -L../../../nx-X11/exports/lib -lXtst
++                -L ../../../nxcompshad -lXcompshad -L../../../nx-X11/exports/lib -lXtst -lXdmcp
+ #else
+ NXAGENTNXLIBS = -L ../../../nxcomp -L ../../../nxcompext -L ../../../nxcompshad \
+                 -lXcomp -lXcompext -lXcompshad -lXrender -lX11 -lXext -lXfixes \
+-                -L../../../nx-X11/exports/lib -lXtst -lXdamage -lXrandr -lXcomposite -lXinerama
++                -L../../../nx-X11/exports/lib -lXtst -lXdamage -lXrandr -lXcomposite -lXinerama -lXdmcp
+ #endif
+ 
+ #endif
+Index: nx-X11/programs/nxauth/Imakefile
+===================================================================
+--- a/nx-X11/programs/nxauth/Imakefile
++++ b/nx-X11/programs/nxauth/Imakefile
+@@ -26,7 +26,7 @@ XCOMM $XFree86: xc/programs/xauth/Imakef
+ 
+   INCLUDES=-I../../lib
+   DEPLIBS = $(DEPXAUTHLIB)
+-  LOCAL_LIBRARIES = ../../exports/lib/libXau.a
++  LOCAL_LIBRARIES = $(XAUTHLIB)
+            SRCS = xauth.c gethost.c process.c parsedpy.c
+            OBJS = xauth.o gethost.o process.o parsedpy.o
+    CONN_DEFINES = $(CONNECTION_FLAGS)
diff --git a/debian/patches/series b/debian/patches/series
index 9133bf6..8f1a388 100644
--- a/debian/patches/series
+++ b/debian/patches/series
@@ -10,9 +10,9 @@
 009_nxproxy-add-man-page.full+lite.patch
 009_nxagent-add-man-page.full.patch
 010_nxauth_fix-binary-name-in-man-page.full.patch
-012_nxcomp_makefile-uninstall.full+lite.patch
-013_nxcompext_makefile-uninstall.full.patch
-014_nxcompshad_makefile-uninstall.full.patch
+012_nxcomp_makefile-uninstall+autoconf.full+lite.patch
+013_nxcompext_makefile-uninstall+autoconf.full.patch
+014_nxcompshad_makefile-uninstall+autoconf.full.patch
 015_nxproxy_makefile-uninstall.full+lite.patch
 016_nx-x11_install-location.full.patch
 016_nx-X11_install-location.debian.patch
@@ -23,6 +23,8 @@
 021_add-nxauth-wrapper.full.patch
 022_add-nxproxy-wrapper.full+lite.patch
 023_add-x2goagent-wrapper.full.patch
+030_nx-X11_configure-args.full.diff
+031_nx-X11_parallel-make.full.diff
 101_nxagent_set-rgb-path.full.patch
 102_xserver-xext_set-securitypolicy-path.full.patch
 102_xserver-xext_set-securitypolicy-path.debian.patch
@@ -38,5 +40,6 @@
 202_nx-x11_enable-xinerama.full.patch
 209_x2goagent-add-man-page.full.patch
 300_nxagent_set-wm-class.full.patch
+301_nx-X11_use-shared-libs.full.diff
 999_nxagent_unbrand-nxagent-brand-x2goagent.full.patch
 
diff --git a/debian/rules b/debian/rules
index 520ed1a..4a4782d 100755
--- a/debian/rules
+++ b/debian/rules
@@ -30,7 +30,7 @@ override_dh_clean:
 
 override_dh_auto_build:
 	debian/pre-build-nx.sh
-	LD_LIBRARY_PATH=`pwd`/debian/libnx-x11/usr/lib/nx/X11:$$LD_LIBRARY_PATH dh_auto_build --with quilt
+	LD_LIBRARY_PATH=`pwd`/debian/libnx-x11/usr/lib/nx/X11:$$LD_LIBRARY_PATH dh_auto_build --with quilt --parallel
 	debian/post-build-nx.sh
 
 override_dh_auto_install:


hooks/post-receive
-- 
nx-libs.git (NX (redistributed))

This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;nx-libs.git&quot; (NX (redistributed)).


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002272.html">[X2go-Commits] x2goclient.git - master (branch) updated:	3.99.0.6-14-gf6bd9af
</A></li>
	<LI>Next message: <A HREF="002274.html">[X2go-Commits] nx-libs.git - master (branch) updated:	redist-client/3.5.0.10-23-g9282c00
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2273">[ date ]</a>
              <a href="thread.html#2273">[ thread ]</a>
              <a href="subject.html#2273">[ subject ]</a>
              <a href="author.html#2273">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/x2go-commits">More information about the X2go-commits
mailing list</a><br>
</body></html>
