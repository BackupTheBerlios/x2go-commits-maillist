<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [X2go-Commits] x2godesktopsharing.git - build-main (branch)	updated: 3.0.1.4
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/x2go-commits/2012-February/index.html" >
   <LINK REL="made" HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20x2godesktopsharing.git%20-%20build-main%20%28branch%29%0A%09updated%3A%203.0.1.4&In-Reply-To=%3C20120222140139.C65745DB17%40ymir%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002356.html">
   <LINK REL="Next"  HREF="002358.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[X2go-Commits] x2godesktopsharing.git - build-main (branch)	updated: 3.0.1.4</H1>
    <B>X2go dev team</B> 
    <A HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20x2godesktopsharing.git%20-%20build-main%20%28branch%29%0A%09updated%3A%203.0.1.4&In-Reply-To=%3C20120222140139.C65745DB17%40ymir%3E"
       TITLE="[X2go-Commits] x2godesktopsharing.git - build-main (branch)	updated: 3.0.1.4">git-admin at x2go.org
       </A><BR>
    <I>Wed Feb 22 15:01:39 CET 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="002356.html">[X2go-Commits] x2godesktopsharing.git - master (branch) updated:	3.0.1.3-7-g658b666
</A></li>
        <LI>Next message: <A HREF="002358.html">[X2go-Commits] nx-libs.git - master (branch) updated:	redist-client/3.5.0.11-1-ga8bf2dd
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2357">[ date ]</a>
              <a href="thread.html#2357">[ thread ]</a>
              <a href="subject.html#2357">[ subject ]</a>
              <a href="author.html#2357">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch, build-main has been updated
       via  658b666654a419cf18bd68a3d8b3df54400287c4 (commit)
       via  a690be5601d3c174e75cfd969b6f5c7486644c60 (commit)
       via  2ff6a8d69fbd38a1762001ad596d684dd687bbbc (commit)
       via  27b99c493435ff3eff5d35b6ea6017c43ab687d8 (commit)
       via  1b133bce09ea92fda776803912eed3df8ecbb1ab (commit)
       via  3e0d14bdbf662648486030df7c70e4c787963a4c (commit)
       via  b25cff23ce2bdddc3632e2b8f9fd39e7581afef6 (commit)
      from  0d8c6ada8efc63d78d114cd49cff08cbe281257e (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
-----------------------------------------------------------------------

Summary of changes:
 VERSION.x2godesktopsharing |    2 +-
 debian/changelog           |   10 ++++++++++
 debian/control             |    2 +-
 sharetray.cpp              |   15 +++++++++------
 4 files changed, 21 insertions(+), 8 deletions(-)

The diff of changes is:
diff --git a/VERSION.x2godesktopsharing b/VERSION.x2godesktopsharing
index e9aef23..9bbc0c1 100644
--- a/VERSION.x2godesktopsharing
+++ b/VERSION.x2godesktopsharing
@@ -1 +1 @@
-3.0.1.3
+3.0.1.4
diff --git a/debian/changelog b/debian/changelog
index 97f169f..2126ba0 100644
--- a/debian/changelog
+++ b/debian/changelog
@@ -1,3 +1,13 @@
+x2godesktopsharing (3.0.1.4-0~x2go1) unstable; urgency=low
+
+  * New upstream version (3.0.1.4):
+    - Always use /tmp for lock and session sharing socket
+      (Fixes user individual temp dirs in Debian Edu / Skolelinux).
+    - Pass username of user who requests desktop sharing to x2gostartagent.
+  * Depend on x2goserver (&gt;=3.0.99.9).
+
+ -- Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;  Wed, 22 Feb 2012 15:00:54 +0100
+
 x2godesktopsharing (3.0.1.3-0~x2go1) unstable; urgency=low
 
   * New upstream version (3.0.1.3):
diff --git a/debian/control b/debian/control
index 94119f0..e9908a3 100644
--- a/debian/control
+++ b/debian/control
@@ -16,7 +16,7 @@ Architecture: any
 Depends:
  ${misc:Depends},
  ${shlibs:Depends},
- x2goserver (&gt;= 3.0.99.6-0~),
+ x2goserver (&gt;= 3.0.99.9-0~),
  libqt4-gui,
 Recommends:
 Description: share X2go desktops with other users (via shadow sessions)
diff --git a/sharetray.cpp b/sharetray.cpp
index 2bf7dee..586a5b5 100644
--- a/sharetray.cpp
+++ b/sharetray.cpp
@@ -35,7 +35,7 @@
 #include &lt;QProcess&gt;
 #define STAT_ACT_COUNT 10
 
-#define VERSION &quot;3.0.1.3&quot;
+#define VERSION &quot;3.0.1.4&quot;
 
 //needed to not get an undefined reference to static members
 int ShareTray::sigkeybintFd[2];
@@ -74,10 +74,14 @@ ShareTray::ShareTray()
 	setWindowFlags ( flags );
 
 	QString dispname=getenv ( &quot;DISPLAY&quot; );
-	socketFname=QDir::tempPath() +&quot;/x2godesktopsharing_@&quot;+
-	            getenv ( &quot;LOGNAME&quot; ) +&quot;@&quot;+dispname;
-	lockFname=QDir::tempPath() +&quot;/x2godesktopsharing.lock_&quot;+
-	          getenv ( &quot;LOGNAME&quot; ) +&quot;@&quot;+dispname;
+	// socketFname=QDir::tempPath() +&quot;x2godesktopsharing_@&quot;+
+	socketFname = &quot;/tmp/x2godesktopsharing_@&quot;;
+	socketFname += getenv ( &quot;LOGNAME&quot; );
+	socketFname += &quot;@&quot; + dispname;
+	// lockFname=QDir::tempPath() +&quot;x2godesktopsharing.lock_&quot;+
+	lockFname = &quot;/tmp/x2godesktopsharing.lock_&quot;;
+	lockFname += getenv ( &quot;LOGNAME&quot; );
+	lockFname += &quot;@&quot; + dispname;
 	if ( QFile::exists ( lockFname ) )
 	{
 		QFile file ( lockFname );
@@ -366,7 +370,6 @@ QString ShareTray::getSocketAnswer ( QString message )
 		trayMessage ( tr ( &quot;Access granted&quot; ),QString ( tr ( &quot;%1(%2): access granted&quot; ) ).arg (remote_user ).arg ( client ) );
 		//start agent
 		QProcess proc ( this );
-		lst.removeAt ( 10 );;
 		lst.removeAt ( 0 );;
 		proc.start ( &quot;x2gostartagent&quot;,lst );
 		if ( !proc.waitForFinished ( 5000 ) )


hooks/post-receive
-- 
x2godesktopsharing.git (Desktop Sharing for X2Go)

This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;x2godesktopsharing.git&quot; (Desktop Sharing for X2Go).


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002356.html">[X2go-Commits] x2godesktopsharing.git - master (branch) updated:	3.0.1.3-7-g658b666
</A></li>
	<LI>Next message: <A HREF="002358.html">[X2go-Commits] nx-libs.git - master (branch) updated:	redist-client/3.5.0.11-1-ga8bf2dd
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2357">[ date ]</a>
              <a href="thread.html#2357">[ thread ]</a>
              <a href="subject.html#2357">[ subject ]</a>
              <a href="author.html#2357">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/x2go-commits">More information about the X2go-commits
mailing list</a><br>
</body></html>
