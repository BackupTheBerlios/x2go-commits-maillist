<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [X2go-Commits] x2goserver.git - master (branch) updated:	3.0.99.10-15-gb5a057b
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/x2go-commits/2012-February/index.html" >
   <LINK REL="made" HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20x2goserver.git%20-%20master%20%28branch%29%20updated%3A%0A%093.0.99.10-15-gb5a057b&In-Reply-To=%3C20120217215545.ACBD65DB17%40ymir%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002290.html">
   <LINK REL="Next"  HREF="002292.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[X2go-Commits] x2goserver.git - master (branch) updated:	3.0.99.10-15-gb5a057b</H1>
    <B>X2go dev team</B> 
    <A HREF="mailto:x2go-commits%40lists.berlios.de?Subject=Re%3A%20%5BX2go-Commits%5D%20x2goserver.git%20-%20master%20%28branch%29%20updated%3A%0A%093.0.99.10-15-gb5a057b&In-Reply-To=%3C20120217215545.ACBD65DB17%40ymir%3E"
       TITLE="[X2go-Commits] x2goserver.git - master (branch) updated:	3.0.99.10-15-gb5a057b">git-admin at x2go.org
       </A><BR>
    <I>Fri Feb 17 22:55:45 CET 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="002290.html">[X2go-Commits] x2goserver.git - master (branch) updated:	3.0.99.10-11-g9d58cdf
</A></li>
        <LI>Next message: <A HREF="002292.html">[X2go-Commits] x2goserver.git - master (branch) updated:	3.0.99.10-16-gc557ccd
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2291">[ date ]</a>
              <a href="thread.html#2291">[ thread ]</a>
              <a href="subject.html#2291">[ subject ]</a>
              <a href="author.html#2291">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch, master has been updated
       via  b5a057b8b849d74bae0a1aabc16989ca594a5b6a (commit)
       via  c4a1ea405879b07d351b6c10da02bb891c02c45b (commit)
       via  53a830ca3b3ecde7acab042323f00c988756c47d (commit)
       via  ce30528b3b0ba6252e6617a835fd0909274a9759 (commit)
      from  9d58cdf8b93ba5f041bb643d6b28214493cc8353 (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit b5a057b8b849d74bae0a1aabc16989ca594a5b6a
Author: Milan Kn&#237;&#382;ek &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">knizek.confy at gmail.com</A>&gt;
Date:   Fri Feb 17 22:55:41 2012 +0100

    Remove -auth /home/mike/.Xauthority option from x2goagent start-up command line as it breaks .Xauthority path names of GDM and other display managers.

commit c4a1ea405879b07d351b6c10da02bb891c02c45b
Author: Milan Kn&#237;&#382;ek &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">knizek.confy at gmail.com</A>&gt;
Date:   Fri Feb 17 22:50:48 2012 +0100

    Remove redundant -S option from x2goagent start-up command line.

commit 53a830ca3b3ecde7acab042323f00c988756c47d
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Fri Feb 17 22:45:59 2012 +0100

    Do not create desktop icons for rootless (i.e. non-desktop) sessions.

commit ce30528b3b0ba6252e6617a835fd0909274a9759
Author: Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;
Date:   Fri Feb 17 22:33:29 2012 +0100

    add FIXME to x2gomountdirs

-----------------------------------------------------------------------

Summary of changes:
 debian/changelog                  |    4 ++++
 x2goserver/bin/x2gomountdirs      |    7 ++++---
 x2goserver/bin/x2gostartagent     |    4 ++--
 x2goserver/bin/x2goumount-session |    6 +++---
 4 files changed, 13 insertions(+), 8 deletions(-)

The diff of changes is:
diff --git a/debian/changelog b/debian/changelog
index f0d4be2..1afd5fe 100644
--- a/debian/changelog
+++ b/debian/changelog
@@ -14,6 +14,9 @@ x2goserver (3.1.0.0-0~x2go1) UNRELEASED; urgency=low
   * New upstream version (3.1.0.0):
     - Fix removal of desktop link on x2goumount-session if local folder of a
       Windows client gets unmounted.
+    - Remove redundant -S option from x2goagent start-up command line.
+    - Remove -auth $HOME/.Xauthority option from x2goagent start-up command line
+      as it breaks .Xauthority path names of GDM and other display managers.
 
   [ S&#246;ren Pl&#246;nnigs ]
   * New upstream version (3.1.0.0):
@@ -29,6 +32,7 @@ x2goserver (3.1.0.0-0~x2go1) UNRELEASED; urgency=low
   * New upstream version (3.1.0.0):
     - Provide new package x2goserver-fmbindings. Derived from a package draft
       provided by Milan Kn&#237;&#382;ek (Thanks!).
+    - Do not create desktop icons for rootless (i.e. non-desktop) sessions.
 
  -- Mike Gabriel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/x2go-commits">mike.gabriel at das-netzwerkteam.de</A>&gt;  Wed, 01 Feb 2012 13:45:00 +0100
 
diff --git a/x2goserver/bin/x2gomountdirs b/x2goserver/bin/x2gomountdirs
index c1b4d3a..0b77039 100755
--- a/x2goserver/bin/x2gomountdirs
+++ b/x2goserver/bin/x2gomountdirs
@@ -264,17 +264,18 @@ for (my $i=0;$i&lt;@dirs;$i++)
 			}
 			if (! $printspool &amp;&amp; ! $mimeboxspool &amp;&amp; ! $useplasmoid )
 			{
+
 				my $fname=&quot;$ENV{'HOME'}/Desktop&quot;;
 				my $current_desktop = &quot;NONE&quot;;
-				if (($session =~ m/stDGNOME/) &amp;&amp; system(&quot;x2gofeature X2GO_GNOMEBINDINGS &gt;/dev/null&quot;) == 0)
+				if (($session =~ m/_stDGNOME_dp/) &amp;&amp; system(&quot;x2gofeature X2GO_GNOMEBINDINGS &gt;/dev/null&quot;) == 0)
 				{
 					$current_desktop=&quot;-gnome&quot;;
 				}
-				elsif (($session =~ m/stDLXDE/) &amp;&amp; system(&quot;x2gofeature X2GO_LXDEBINDINGS &gt;/dev/null&quot;) == 0)
+				elsif (($session =~ m/_stDLXDE_dp/) &amp;&amp; system(&quot;x2gofeature X2GO_LXDEBINDINGS &gt;/dev/null&quot;) == 0)
 				{
 					$current_desktop=&quot;-lxde&quot;;
 				}
-				elsif (system(&quot;x2gofeature X2GO_FMBINDINGS &gt;/dev/null&quot;) == 0)
+				elsif (($session =~ m/_stD.*_dp/) &amp;&amp; system(&quot;x2gofeature X2GO_FMBINDINGS &gt;/dev/null&quot;) == 0)
 				{
 					$current_desktop=&quot;&quot;;
 				}
diff --git a/x2goserver/bin/x2gostartagent b/x2goserver/bin/x2gostartagent
index 3b802b4..31af841 100755
--- a/x2goserver/bin/x2gostartagent
+++ b/x2goserver/bin/x2gostartagent
@@ -240,9 +240,9 @@ x2gofeature X2GO_RUN_EXTENSIONS &amp;&gt;/dev/null &amp;&amp; x2goserver-run-extensions $SESSIO
 SESSION_WINDOW_TITLE=&quot;X2GO-${SESSION_NAME}&quot;
 
 if  [ &quot;$X2GO_STYPE&quot; == &quot;S&quot; ]; then
-	x2goagent $X2GODPIOPTION_  -$SESSION_TYPE -auth ~/.Xauthority -S -shadow $SHADOW_DESKTOP -shadowmode $SHADOW_MODE -geometry ${X2GO_GEOMETRY} -name &quot;${SESSION_WINDOW_TITLE}&quot;  ${NX_AGENT} 2&gt;${SESSION_DIR}/session.log &amp;
+	x2goagent $X2GODPIOPTION_  -$SESSION_TYPE -shadow $SHADOW_DESKTOP -shadowmode $SHADOW_MODE -geometry ${X2GO_GEOMETRY} -name &quot;${SESSION_WINDOW_TITLE}&quot;  ${NX_AGENT} 2&gt;${SESSION_DIR}/session.log &amp;
 else
-	x2goagent $X2GODPIOPTION_ $XDMCPOPT  -$SESSION_TYPE -auth ~/.Xauthority -geometry ${X2GO_GEOMETRY} -name &quot;${SESSION_WINDOW_TITLE}&quot;  ${NX_AGENT} 2&gt;${SESSION_DIR}/session.log &amp;
+	x2goagent $X2GODPIOPTION_ $XDMCPOPT  -$SESSION_TYPE -geometry ${X2GO_GEOMETRY} -name &quot;${SESSION_WINDOW_TITLE}&quot;  ${NX_AGENT} 2&gt;${SESSION_DIR}/session.log &amp;
 fi
 
 
diff --git a/x2goserver/bin/x2goumount-session b/x2goserver/bin/x2goumount-session
index 64876d9..d9fcdfe 100755
--- a/x2goserver/bin/x2goumount-session
+++ b/x2goserver/bin/x2goumount-session
@@ -130,15 +130,15 @@ break:
 		$remote=&quot;$ENV{'HOME'}/Desktop/$remote&quot;;
 
 		my $current_desktop = 'NONE';
-		if (($session =~ m/stDGNOME/) &amp;&amp; system(&quot;x2gofeature X2GO_GNOMEBINDINGS &gt;/dev/null&quot;) == 0)
+		if (($session =~ m/_stDGNOME_dp/) &amp;&amp; system(&quot;x2gofeature X2GO_GNOMEBINDINGS &gt;/dev/null&quot;) == 0)
 		{
 			$current_desktop=&quot;-gnome&quot;;
 		}
-		elsif (($session =~ m/stDLXDE/) &amp;&amp; system(&quot;x2gofeature X2GO_LXDEBINDINGS &gt;/dev/null&quot;) == 0)
+		elsif (($session =~ m/_stDLXDE_dp/) &amp;&amp; system(&quot;x2gofeature X2GO_LXDEBINDINGS &gt;/dev/null&quot;) == 0)
 		{
 			$current_desktop=&quot;-lxde&quot;;
 		}
-		elsif (system(&quot;x2gofeature X2GO_FMBINDINGS &gt;/dev/null&quot;) == 0)
+		elsif (($session =~ m/_st.*_dp/) &amp;&amp; system(&quot;x2gofeature X2GO_FMBINDINGS &gt;/dev/null&quot;) == 0)
 		{
 			$current_desktop=&quot;&quot;;
 		}


hooks/post-receive
-- 
x2goserver.git (X2Go Server)

This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;x2goserver.git&quot; (X2Go Server).


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002290.html">[X2go-Commits] x2goserver.git - master (branch) updated:	3.0.99.10-11-g9d58cdf
</A></li>
	<LI>Next message: <A HREF="002292.html">[X2go-Commits] x2goserver.git - master (branch) updated:	3.0.99.10-16-gc557ccd
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2291">[ date ]</a>
              <a href="thread.html#2291">[ thread ]</a>
              <a href="subject.html#2291">[ subject ]</a>
              <a href="author.html#2291">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/x2go-commits">More information about the X2go-commits
mailing list</a><br>
</body></html>
